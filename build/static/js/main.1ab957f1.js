/*! For license information please see main.1ab957f1.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var i=n(853),s=n(43),r=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(a(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),w=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var P=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function E(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function L(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case x:return"StrictMode";case k:return"Suspense";case j:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case w:return(e.displayName||"Context")+".Provider";case v:return(e._context.displayName||"Context")+".Consumer";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return L(e(t))}catch(n){}}return null}var A=Array.isArray,O=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},B=[],z=-1;function I(e){return{current:e}}function F(e){0>z||(e.current=B[z],B[z]=null,z--)}function U(e,t){z++,B[z]=e.current,e.current=t}var $=I(null),W=I(null),H=I(null),V=I(null);function q(e,t){switch(U(H,t),U(W,e),U($,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?su(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ru(t=su(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F($),U($,e)}function Z(){F($),F(W),F(H)}function Y(e){null!==e.memoizedState&&U(V,e);var t=$.current,n=ru(t,e.type);t!==n&&(U(W,e),U($,n))}function K(e){W.current===e&&(F($),F(W)),V.current===e&&(F(V),Yu._currentValue=D)}var G=Object.prototype.hasOwnProperty,J=i.unstable_scheduleCallback,X=i.unstable_cancelCallback,Q=i.unstable_shouldYield,ee=i.unstable_requestPaint,te=i.unstable_now,ne=i.unstable_getCurrentPriorityLevel,ie=i.unstable_ImmediatePriority,se=i.unstable_UserBlockingPriority,re=i.unstable_NormalPriority,ae=i.unstable_LowPriority,oe=i.unstable_IdlePriority,le=i.log,ce=i.unstable_setDisableYieldValue,de=null,ue=null;function he(e){if("function"===typeof le&&ce(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(de,e)}catch(t){}}var me=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/fe|0)|0},pe=Math.log,fe=Math.LN2;var ge=256,xe=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&i;return 0!==o?0!==(i=o&~r)?s=ye(i):0!==(a&=o)?s=ye(a):n||0!==(n=o&~e)&&(s=ye(n)):0!==(o=i&~r)?s=ye(o):0!==a?s=ye(a):n||0!==(n=i&~e)&&(s=ye(n)),0===s?0:0!==t&&t!==s&&0===(t&r)&&((r=s&-s)>=(n=t&-t)||32===r&&0!==(4194048&n))?t:s}function ve(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function _e(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function ke(){var e=xe;return 0===(62914560&(xe<<=1))&&(xe=4194304),e}function je(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ne(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Se(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-me(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-me(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function Pe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Te(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ee(){var e=R.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Me=Math.random().toString(36).slice(2),Le="__reactFiber$"+Me,Ae="__reactProps$"+Me,Oe="__reactContainer$"+Me,Re="__reactEvents$"+Me,De="__reactListeners$"+Me,Be="__reactHandles$"+Me,ze="__reactResources$"+Me,Ie="__reactMarker$"+Me;function Fe(e){delete e[Le],delete e[Ae],delete e[Re],delete e[De],delete e[Be]}function Ue(e){var t=e[Le];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[Le]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bu(e);null!==e;){if(n=e[Le])return n;e=bu(e)}return t}n=(e=n).parentNode}return null}function $e(e){if(e=e[Le]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function We(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function He(e){var t=e[ze];return t||(t=e[ze]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[Ie]=!0}var qe=new Set,Ze={};function Ye(e,t){Ke(e,t),Ke(e+"Capture",t)}function Ke(e,t){for(Ze[e]=t,e=0;e<t.length;e++)qe.add(t[e])}var Ge,Je,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qe={},et={};function tt(e,t,n){if(s=t,G.call(et,s)||!G.call(Qe,s)&&(Xe.test(s)?et[s]=!0:(Qe[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function it(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function st(e){if(void 0===Ge)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ge=t&&t[1]||"",Je=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ge+e+Je}var rt=!1;function at(e,t){if(!e||rt)return"";rt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var i=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(r){i=r}e.call(n.prototype)}}else{try{throw Error()}catch(a){i=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&i&&"string"===typeof o.stack)return[o.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],o=r[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(i===l.length||s===c.length)for(i=l.length-1,s=c.length-1;1<=i&&0<=s&&l[i]!==c[s];)s--;for(;1<=i&&0<=s;i--,s--)if(l[i]!==c[s]){if(1!==i||1!==s)do{if(i--,0>--s||l[i]!==c[s]){var d="\n"+l[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=i&&0<=s);break}}}finally{rt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){i=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=dt(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function ft(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,i,s,r,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?yt(e,a,ct(t)):null!=n?yt(e,a,ct(n)):null!=i&&e.removeAttribute("value"),null==s&&null!=r&&(e.defaultChecked=!!r),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function xt(e,t,n,i,s,r,a,o){if(null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.type=r),null!=t||null!=n){if(!("submit"!==r&&"reset"!==r||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}i="function"!==typeof(i=null!=i?i:s)&&"symbol"!==typeof i&&!!i,e.checked=o?e.checked:!!i,e.defaultChecked=!!i,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function yt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(i&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function vt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(a(92));if(A(i)){if(1<i.length)throw Error(a(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i)}function _t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jt(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Nt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&jt(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&jt(e,r,t[r])}function St(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Et=null;function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,At=null;function Ot(e){var t=$e(e);if(t&&(e=t.stateNode)){var n=e[Ae]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[Ae]||null;if(!s)throw Error(a(90));gt(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&ht(i)}break e;case"textarea":vt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Rt=!1;function Dt(e,t,n){if(Rt)return e(t,n);Rt=!0;try{return e(t)}finally{if(Rt=!1,(null!==Lt||null!==At)&&(Uc(),Lt&&(t=Lt,e=At,At=Lt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var i=n[Ae]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),It=!1;if(zt)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){It=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch(Ah){It=!1}var Ut=null,$t=null,Wt=null;function Ht(){if(Wt)return Wt;var e,t,n=$t,i=n.length,s="value"in Ut?Ut.value:Ut.textContent,r=s.length;for(e=0;e<i&&n[e]===s[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===s[r-t];t++);return Wt=s.slice(e,1<t?1-t:void 0)}function Vt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function Zt(){return!1}function Yt(e){function t(t,n,i,s,r){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?qt:Zt,this.isPropagationStopped=Zt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var Kt,Gt,Jt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qt=Yt(Xt),en=h({},Xt,{view:0,detail:0}),tn=Yt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Kt=e.screenX-Jt.screenX,Gt=e.screenY-Jt.screenY):Gt=Kt=0,Jt=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:Gt}}),sn=Yt(nn),rn=Yt(h({},nn,{dataTransfer:0})),an=Yt(h({},en,{relatedTarget:0})),on=Yt(h({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Yt(h({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Yt(h({},Xt,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return mn}var fn=Yt(h({},en,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Vt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Vt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Yt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=Yt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Yt(h({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Yt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),vn=Yt(h({},Xt,{newState:0,oldState:0})),wn=[9,13,27,32],_n=zt&&"CompositionEvent"in window,kn=null;zt&&"documentMode"in document&&(kn=document.documentMode);var jn=zt&&"TextEvent"in window&&!kn,Nn=zt&&(!_n||kn&&8<kn&&11>=kn),Sn=String.fromCharCode(32),Cn=!1;function Pn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var En=!1;var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Mn[e.type]:"textarea"===t}function An(e,t,n,i){Lt?At?At.push(i):At=[i]:Lt=i,0<(t=Hd(t,"onChange")).length&&(n=new Qt("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var On=null,Rn=null;function Dn(e){Dd(e,0)}function Bn(e){if(ht(We(e)))return e}function zn(e,t){if("change"===e)return t}var In=!1;if(zt){var Fn;if(zt){var Un="oninput"in document;if(!Un){var $n=document.createElement("div");$n.setAttribute("oninput","return;"),Un="function"===typeof $n.oninput}Fn=Un}else Fn=!1;In=Fn&&(!document.documentMode||9<document.documentMode)}function Wn(){On&&(On.detachEvent("onpropertychange",Hn),Rn=On=null)}function Hn(e){if("value"===e.propertyName&&Bn(Rn)){var t=[];An(t,Rn,e,Mt(e)),Dt(Dn,t)}}function Vn(e,t,n){"focusin"===e?(Wn(),Rn=n,(On=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Wn()}function qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(Rn)}function Zn(e,t){if("click"===e)return Bn(t)}function Yn(e,t){if("input"===e||"change"===e)return Bn(t)}var Kn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Gn(e,t){if(Kn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!G.call(t,s)||!Kn(e[s],t[s]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,i=Jn(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Jn(i)}}function Qn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Qn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ei(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ti(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ni=zt&&"documentMode"in document&&11>=document.documentMode,ii=null,si=null,ri=null,ai=!1;function oi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ai||null==ii||ii!==mt(i)||("selectionStart"in(i=ii)&&ti(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},ri&&Gn(ri,i)||(ri=i,0<(i=Hd(si,"onSelect")).length&&(t=new Qt("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ii)))}function li(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ci={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},di={},ui={};function hi(e){if(di[e])return di[e];if(!ci[e])return e;var t,n=ci[e];for(t in n)if(n.hasOwnProperty(t)&&t in ui)return di[e]=n[t];return e}zt&&(ui=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);var mi=hi("animationend"),pi=hi("animationiteration"),fi=hi("animationstart"),gi=hi("transitionrun"),xi=hi("transitionstart"),yi=hi("transitioncancel"),bi=hi("transitionend"),vi=new Map,wi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(e,t){vi.set(e,t),Ye(t,[e])}wi.push("scrollEnd");var ki=new WeakMap;function ji(e,t){if("object"===typeof e&&null!==e){var n=ki.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},ki.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Ni=[],Si=0,Ci=0;function Pi(){for(var e=Si,t=Ci=Si=0;t<e;){var n=Ni[t];Ni[t++]=null;var i=Ni[t];Ni[t++]=null;var s=Ni[t];Ni[t++]=null;var r=Ni[t];if(Ni[t++]=null,null!==i&&null!==s){var a=i.pending;null===a?s.next=s:(s.next=a.next,a.next=s),i.pending=s}0!==r&&Li(n,s,r)}}function Ti(e,t,n,i){Ni[Si++]=e,Ni[Si++]=t,Ni[Si++]=n,Ni[Si++]=i,Ci|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Ei(e,t,n,i){return Ti(e,t,n,i),Ai(e)}function Mi(e,t){return Ti(e,null,null,t),Ai(e)}function Li(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var s=!1,r=e.return;null!==r;)r.childLanes|=n,null!==(i=r.alternate)&&(i.childLanes|=n),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(s=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,s&&null!==t&&(s=31-me(n),null===(i=(e=r.hiddenUpdates)[s])?e[s]=[t]:i.push(t),t.lane=536870912|n),r):null}function Ai(e){if(50<Lc)throw Lc=0,Ac=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Oi={};function Ri(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(e,t,n,i){return new Ri(e,t,n,i)}function Bi(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zi(e,t){var n=e.alternate;return null===n?((n=Di(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ii(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fi(e,t,n,i,s,r){var o=0;if(i=e,"function"===typeof e)Bi(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,$.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Di(31,n,t,s)).elementType=C,e.lanes=r,e;case g:return Ui(n.children,s,r,t);case x:o=8,s|=24;break;case y:return(e=Di(12,n,t,2|s)).elementType=y,e.lanes=r,e;case k:return(e=Di(13,n,t,s)).elementType=k,e.lanes=r,e;case j:return(e=Di(19,n,t,s)).elementType=j,e.lanes=r,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case w:o=10;break e;case v:o=9;break e;case _:o=11;break e;case N:o=14;break e;case S:o=16,i=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),i=null}return(t=Di(o,n,t,s)).elementType=e,t.type=i,t.lanes=r,t}function Ui(e,t,n,i){return(e=Di(7,e,i,t)).lanes=n,e}function $i(e,t,n){return(e=Di(6,e,null,t)).lanes=n,e}function Wi(e,t,n){return(t=Di(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hi=[],Vi=0,qi=null,Zi=0,Yi=[],Ki=0,Gi=null,Ji=1,Xi="";function Qi(e,t){Hi[Vi++]=Zi,Hi[Vi++]=qi,qi=e,Zi=t}function es(e,t,n){Yi[Ki++]=Ji,Yi[Ki++]=Xi,Yi[Ki++]=Gi,Gi=e;var i=Ji;e=Xi;var s=32-me(i)-1;i&=~(1<<s),n+=1;var r=32-me(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Ji=1<<32-me(t)+s|n<<s|i,Xi=r+e}else Ji=1<<r|n<<s|i,Xi=e}function ts(e){null!==e.return&&(Qi(e,1),es(e,1,0))}function ns(e){for(;e===qi;)qi=Hi[--Vi],Hi[Vi]=null,Zi=Hi[--Vi],Hi[Vi]=null;for(;e===Gi;)Gi=Yi[--Ki],Yi[Ki]=null,Xi=Yi[--Ki],Yi[Ki]=null,Ji=Yi[--Ki],Yi[Ki]=null}var is=null,ss=null,rs=!1,as=null,os=!1,ls=Error(a(519));function cs(e){throw fs(ji(Error(a(418,"")),e)),ls}function ds(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Le]=e,t[Ae]=i,n){case"dialog":Bd("cancel",t),Bd("close",t);break;case"iframe":case"object":case"embed":Bd("load",t);break;case"video":case"audio":for(n=0;n<Od.length;n++)Bd(Od[n],t);break;case"source":Bd("error",t);break;case"img":case"image":case"link":Bd("error",t),Bd("load",t);break;case"details":Bd("toggle",t);break;case"input":Bd("invalid",t),xt(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),ut(t);break;case"select":Bd("invalid",t);break;case"textarea":Bd("invalid",t),wt(t,i.value,i.defaultValue,i.children),ut(t)}"string"!==typeof(n=i.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||Gd(t.textContent,n)?(null!=i.popover&&(Bd("beforetoggle",t),Bd("toggle",t)),null!=i.onScroll&&Bd("scroll",t),null!=i.onScrollEnd&&Bd("scrollend",t),null!=i.onClick&&(t.onclick=Jd),t=!0):t=!1,t||cs(e)}function us(e){for(is=e.return;is;)switch(is.tag){case 5:case 13:return void(os=!1);case 27:case 3:return void(os=!0);default:is=is.return}}function hs(e){if(e!==is)return!1;if(!rs)return us(e),rs=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||au(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),us(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=xu(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,mu(e.type)?(e=yu,yu=null,ss=e):ss=n):ss=is?xu(e.stateNode.nextSibling):null;return!0}function ms(){ss=is=null,rs=!1}function ps(){var e=as;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),as=null),e}function fs(e){null===as?as=[e]:as.push(e)}var gs=I(null),xs=null,ys=null;function bs(e,t,n){U(gs,t._currentValue),t._currentValue=n}function vs(e){e._currentValue=gs.current,F(gs)}function ws(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function _s(e,t,n,i){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var r=s.dependencies;if(null!==r){var o=s.child;r=r.firstContext;e:for(;null!==r;){var l=r;r=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){r.lanes|=n,null!==(l=r.alternate)&&(l.lanes|=n),ws(r.return,n,e),i||(o=null);break e}r=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(r=o.alternate)&&(r.lanes|=n),ws(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function ks(e,t,n,i){e=null;for(var s=t,r=!1;null!==s;){if(!r)if(0!==(524288&s.flags))r=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;Kn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===V.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Yu):e=[Yu])}s=s.return}null!==e&&_s(t,e,n,i),t.flags|=262144}function js(e){for(e=e.firstContext;null!==e;){if(!Kn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ns(e){xs=e,ys=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ss(e){return Ps(xs,e)}function Cs(e,t){return null===xs&&Ns(e),Ps(e,t)}function Ps(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ys){if(null===e)throw Error(a(308));ys=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ys=ys.next=t;return n}var Ts="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Es=i.unstable_scheduleCallback,Ms=i.unstable_NormalPriority,Ls={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function As(){return{controller:new Ts,data:new Map,refCount:0}}function Os(e){e.refCount--,0===e.refCount&&Es(Ms,function(){e.controller.abort()})}var Rs=null,Ds=0,Bs=0,zs=null;function Is(){if(0===--Ds&&null!==Rs){null!==zs&&(zs.status="fulfilled");var e=Rs;Rs=null,Bs=0,zs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Fs=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Rs){var n=Rs=[];Ds=0,Bs=Td(),zs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ds++,t.then(Is,Is)}(0,t),null!==Fs&&Fs(e,t)};var Us=I(null);function $s(){var e=Us.current;return null!==e?e:ic.pooledCache}function Ws(e,t){U(Us,null===t?Us.current:t.pool)}function Hs(){var e=$s();return null===e?null:{parent:Ls._currentValue,pool:e}}var Vs=Error(a(460)),qs=Error(a(474)),Zs=Error(a(542)),Ys={then:function(){}};function Ks(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Gs(){}function Js(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Gs,Gs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw er(e=t.reason),e;default:if("string"===typeof t.status)t.then(Gs,Gs);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw er(e=t.reason),e}throw Xs=t,Vs}}var Xs=null;function Qs(){if(null===Xs)throw Error(a(459));var e=Xs;return Xs=null,e}function er(e){if(e===Vs||e===Zs)throw Error(a(483))}var tr=!1;function nr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ir(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rr(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&nc)){var s=i.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=Ai(e),Li(e,null,n),t}return Ti(e,i,t,n),Ai(e)}function ar(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function or(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===r?s=r=a:r=r.next=a,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lr=!1;function cr(){if(lr){if(null!==zs)throw zs}}function dr(e,t,n,i){lr=!1;var s=e.updateQueue;tr=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?r=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==r){var u=s.baseState;for(a=0,d=c=l=null,o=r;;){var m=-536870913&o.lane,p=m!==o.lane;if(p?(rc&m)===m:(i&m)===m){0!==m&&m===Bs&&(lr=!0),null!==d&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var f=e,g=o;m=t;var x=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){u=f.call(x,u,m);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(m="function"===typeof(f=g.payload)?f.call(x,u,m):f)||void 0===m)break e;u=h({},u,m);break e;case 2:tr=!0}}null!==(m=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[m]:p.push(m))}else p={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,a|=m;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(p=o).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null===r&&(s.shared.lanes=0),mc|=a,e.lanes=a,e.memoizedState=u}}function ur(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hr(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ur(n[e],t)}var mr=I(null),pr=I(0);function fr(e,t){U(pr,e=uc),U(mr,t),uc=e|t.baseLanes}function gr(){U(pr,uc),U(mr,mr.current)}function xr(){uc=pr.current,F(mr),F(pr)}var yr=0,br=null,vr=null,wr=null,_r=!1,kr=!1,jr=!1,Nr=0,Sr=0,Cr=null,Pr=0;function Tr(){throw Error(a(321))}function Er(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kn(e[n],t[n]))return!1;return!0}function Mr(e,t,n,i,s,r){return yr=r,br=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?Va:qa,jr=!1,r=n(i,s),jr=!1,kr&&(r=Ar(t,n,i,s)),Lr(e),r}function Lr(e){O.H=Ha;var t=null!==vr&&null!==vr.next;if(yr=0,wr=vr=br=null,_r=!1,Sr=0,Cr=null,t)throw Error(a(300));null===e||Co||null!==(e=e.dependencies)&&js(e)&&(Co=!0)}function Ar(e,t,n,i){br=e;var s=0;do{if(kr&&(Cr=null),Sr=0,kr=!1,25<=s)throw Error(a(301));if(s+=1,wr=vr=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}O.H=Za,r=t(n,i)}while(kr);return r}function Or(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?Fr(t):t,e=e.useState()[0],(null!==vr?vr.memoizedState:null)!==e&&(br.flags|=1024),t}function Rr(){var e=0!==Nr;return Nr=0,e}function Dr(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Br(e){if(_r){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}_r=!1}yr=0,wr=vr=br=null,kr=!1,Sr=Nr=0,Cr=null}function zr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wr?br.memoizedState=wr=e:wr=wr.next=e,wr}function Ir(){if(null===vr){var e=br.alternate;e=null!==e?e.memoizedState:null}else e=vr.next;var t=null===wr?br.memoizedState:wr.next;if(null!==t)wr=t,vr=e;else{if(null===e){if(null===br.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(vr=e).memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},null===wr?br.memoizedState=wr=e:wr=wr.next=e}return wr}function Fr(e){var t=Sr;return Sr+=1,null===Cr&&(Cr=[]),e=Js(Cr,e,t),t=br,null===(null===wr?t.memoizedState:wr.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?Va:qa),e}function Ur(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Fr(e);if(e.$$typeof===w)return Ss(e)}throw Error(a(438,String(e)))}function $r(e){var t=null,n=br.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=br.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},br.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=P;return t.index++,n}function Wr(e,t){return"function"===typeof t?t(e):t}function Hr(e){return Vr(Ir(),vr,e)}function Vr(e,t,n){var i=e.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(null!==r){if(null!==s){var o=s.next;s.next=r.next,r.next=o}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,null===s)e.memoizedState=r;else{var l=o=null,c=null,d=t=s.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(rc&h)===h:(yr&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Bs&&(u=!0);else{if((yr&m)===m){d=d.next,m===Bs&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=h,o=r):c=c.next=h,br.lanes|=m,mc|=m}h=d.action,jr&&n(r,h),r=d.hasEagerState?d.eagerState:n(r,h)}else m={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=m,o=r):c=c.next=m,br.lanes|=h,mc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?o=r:c.next=l,!Kn(r,e.memoizedState)&&(Co=!0,u&&null!==(n=zs)))throw n;e.memoizedState=r,e.baseState=o,e.baseQueue=c,i.lastRenderedState=r}return null===s&&(i.lanes=0),[e.memoizedState,i.dispatch]}function qr(e){var t=Ir(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{r=e(r,o.action),o=o.next}while(o!==s);Kn(r,t.memoizedState)||(Co=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function Zr(e,t,n){var i=br,s=Ir(),r=rs;if(r){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Kn((vr||s).memoizedState,n);if(o&&(s.memoizedState=n,Co=!0),s=s.queue,ga(2048,8,Gr.bind(null,i,s,e),[e]),s.getSnapshot!==t||o||null!==wr&&1&wr.memoizedState.tag){if(i.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Kr.bind(null,i,s,n,t),null),null===ic)throw Error(a(349));r||0!==(124&yr)||Yr(i,t,n)}return n}function Yr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=br.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},br.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Kr(e,t,n,i){t.value=n,t.getSnapshot=i,Jr(t)&&Xr(e)}function Gr(e,t,n){return n(function(){Jr(t)&&Xr(e)})}function Jr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kn(e,n)}catch(i){return!0}}function Xr(e){var t=Mi(e,2);null!==t&&Dc(t,e,2)}function Qr(e){var t=zr();if("function"===typeof e){var n=e;if(e=n(),jr){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:e},t}function ea(e,t,n,i){return e.baseState=n,Vr(e,vr,"function"===typeof i?i:Wr)}function ta(e,t,n,i,s){if(Ua(e))throw Error(a(485));if(null!==(e=t.action)){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==O.T?n(!0):r.isTransition=!1,i(r),null===(n=t.pending)?(r.next=t.pending=r,na(t,r)):(r.next=n.next,t.pending=n.next=r)}}function na(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=O.T,a={};O.T=a;try{var o=n(s,i),l=O.S;null!==l&&l(a,o),ia(e,t,o)}catch(c){ra(e,t,c)}finally{O.T=r}}else try{ia(e,t,r=n(s,i))}catch(d){ra(e,t,d)}}function ia(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){sa(e,t,n)},function(n){return ra(e,t,n)}):sa(e,t,n)}function sa(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function ra(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==i)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(rs){var n=ic.formState;if(null!==n){e:{var i=br;if(rs){if(ss){t:{for(var s=ss,r=os;8!==s.nodeType;){if(!r){s=null;break t}if(null===(s=xu(s.nextSibling))){s=null;break t}}s="F!"===(r=s.data)||"F"===r?s:null}if(s){ss=xu(s.nextSibling),i="F!"===s.data;break e}}cs(i)}i=!1}i&&(t=n[0])}}return(n=zr()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=i,n=za.bind(null,br,i),i.dispatch=n,i=Qr(!1),r=Fa.bind(null,br,!1,i.queue),s={state:t,dispatch:null,action:e,pending:null},(i=zr()).queue=s,n=ta.bind(null,br,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function ca(e){return da(Ir(),vr,e)}function da(e,t,n){if(t=Vr(e,t,oa)[0],e=Hr(Wr)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var i=Fr(t)}catch(a){if(a===Vs)throw Zs;throw a}else i=t;var s=(t=Ir()).queue,r=s.dispatch;return n!==t.memoizedState&&(br.flags|=2048,ma(9,{destroy:void 0,resource:void 0},ua.bind(null,s,n),null)),[i,r,e]}function ua(e,t){e.action=t}function ha(e){var t=Ir(),n=vr;if(null!==n)return da(t,n,e);Ir(),t=t.memoizedState;var i=(n=Ir()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function ma(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=br.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},br.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function pa(){return Ir().memoizedState}function fa(e,t,n,i){var s=zr();i=void 0===i?null:i,br.flags|=e,s.memoizedState=ma(1|t,{destroy:void 0,resource:void 0},n,i)}function ga(e,t,n,i){var s=Ir();i=void 0===i?null:i;var r=s.memoizedState.inst;null!==vr&&null!==i&&Er(i,vr.memoizedState.deps)?s.memoizedState=ma(t,r,n,i):(br.flags|=e,s.memoizedState=ma(1|t,r,n,i))}function xa(e,t){fa(8390656,8,e,t)}function ya(e,t){ga(2048,8,e,t)}function ba(e,t){return ga(4,2,e,t)}function va(e,t){return ga(4,4,e,t)}function wa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function _a(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4,4,wa.bind(null,t,e),n)}function ka(){}function ja(e,t){var n=Ir();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&Er(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Na(e,t){var n=Ir();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&Er(t,i[1]))return i[0];if(i=e(),jr){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[i,t],i}function Sa(e,t,n){return void 0===n||0!==(1073741824&yr)?e.memoizedState=t:(e.memoizedState=n,e=Rc(),br.lanes|=e,mc|=e,n)}function Ca(e,t,n,i){return Kn(n,t)?n:null!==mr.current?(e=Sa(e,n,i),Kn(e,t)||(Co=!0),e):0===(42&yr)?(Co=!0,e.memoizedState=n):(e=Rc(),br.lanes|=e,mc|=e,t)}function Pa(e,t,n,i,s){var r=R.p;R.p=0!==r&&8>r?r:8;var a=O.T,o={};O.T=o,Fa(e,!1,t,n);try{var l=s(),c=O.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ia(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),i}(l,i),Oc());else Ia(e,t,i,Oc())}catch(d){Ia(e,t,{then:function(){},status:"rejected",reason:d},Oc())}finally{R.p=r,O.T=a}}function Ta(){}function Ea(e,t,n,i){if(5!==e.tag)throw Error(a(476));var s=Ma(e).queue;Pa(e,s,t,D,null===n?Ta:function(){return La(e),n(i)})}function Ma(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function La(e){Ia(e,Ma(e).next.queue,{},Oc())}function Aa(){return Ss(Yu)}function Oa(){return Ir().memoizedState}function Ra(){return Ir().memoizedState}function Da(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Oc(),i=rr(t,e=sr(n),n);return null!==i&&(Dc(i,t,n),ar(i,t,n)),t={cache:As()},void(e.payload=t)}t=t.return}}function Ba(e,t,n){var i=Oc();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ua(e)?$a(t,n):null!==(n=Ei(e,t,n,i))&&(Dc(n,e,i),Wa(n,t,i))}function za(e,t,n){Ia(e,t,n,Oc())}function Ia(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ua(e))$a(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=r(a,n);if(s.hasEagerState=!0,s.eagerState=o,Kn(o,a))return Ti(e,t,s,0),null===ic&&Pi(),!1}catch(l){}if(null!==(n=Ei(e,t,s,i)))return Dc(n,e,i),Wa(n,t,i),!0}return!1}function Fa(e,t,n,i){if(i={lane:2,revertLane:Td(),action:i,hasEagerState:!1,eagerState:null,next:null},Ua(e)){if(t)throw Error(a(479))}else null!==(t=Ei(e,n,i,2))&&Dc(t,e,2)}function Ua(e){var t=e.alternate;return e===br||null!==t&&t===br}function $a(e,t){kr=_r=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wa(e,t,n){if(0!==(4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Ha={readContext:Ss,use:Ur,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useLayoutEffect:Tr,useInsertionEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useSyncExternalStore:Tr,useId:Tr,useHostTransitionStatus:Tr,useFormState:Tr,useActionState:Tr,useOptimistic:Tr,useMemoCache:Tr,useCacheRefresh:Tr},Va={readContext:Ss,use:Ur,useCallback:function(e,t){return zr().memoizedState=[e,void 0===t?null:t],e},useContext:Ss,useEffect:xa,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,fa(4194308,4,wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fa(4194308,4,e,t)},useInsertionEffect:function(e,t){fa(4,2,e,t)},useMemo:function(e,t){var n=zr();t=void 0===t?null:t;var i=e();if(jr){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=zr();if(void 0!==n){var s=n(t);if(jr){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=Ba.bind(null,br,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},zr().memoizedState=e},useState:function(e){var t=(e=Qr(e)).queue,n=za.bind(null,br,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ka,useDeferredValue:function(e,t){return Sa(zr(),e,t)},useTransition:function(){var e=Qr(!1);return e=Pa.bind(null,br,e.queue,!0,!1),zr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=br,s=zr();if(rs){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===ic)throw Error(a(349));0!==(124&rc)||Yr(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,xa(Gr.bind(null,i,r,e),[e]),i.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Kr.bind(null,i,r,n,t),null),n},useId:function(){var e=zr(),t=ic.identifierPrefix;if(rs){var n=Xi;t="\xab"+t+"R"+(n=(Ji&~(1<<32-me(Ji)-1)).toString(32)+n),0<(n=Nr++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Pr++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Aa,useFormState:la,useActionState:la,useOptimistic:function(e){var t=zr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Fa.bind(null,br,!0,n),n.dispatch=t,[e,t]},useMemoCache:$r,useCacheRefresh:function(){return zr().memoizedState=Da.bind(null,br)}},qa={readContext:Ss,use:Ur,useCallback:ja,useContext:Ss,useEffect:ya,useImperativeHandle:_a,useInsertionEffect:ba,useLayoutEffect:va,useMemo:Na,useReducer:Hr,useRef:pa,useState:function(){return Hr(Wr)},useDebugValue:ka,useDeferredValue:function(e,t){return Ca(Ir(),vr.memoizedState,e,t)},useTransition:function(){var e=Hr(Wr)[0],t=Ir().memoizedState;return["boolean"===typeof e?e:Fr(e),t]},useSyncExternalStore:Zr,useId:Oa,useHostTransitionStatus:Aa,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Ir(),0,e,t)},useMemoCache:$r,useCacheRefresh:Ra},Za={readContext:Ss,use:Ur,useCallback:ja,useContext:Ss,useEffect:ya,useImperativeHandle:_a,useInsertionEffect:ba,useLayoutEffect:va,useMemo:Na,useReducer:qr,useRef:pa,useState:function(){return qr(Wr)},useDebugValue:ka,useDeferredValue:function(e,t){var n=Ir();return null===vr?Sa(n,e,t):Ca(n,vr.memoizedState,e,t)},useTransition:function(){var e=qr(Wr)[0],t=Ir().memoizedState;return["boolean"===typeof e?e:Fr(e),t]},useSyncExternalStore:Zr,useId:Oa,useHostTransitionStatus:Aa,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Ir();return null!==vr?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:$r,useCacheRefresh:Ra},Ya=null,Ka=0;function Ga(e){var t=Ka;return Ka+=1,null===Ya&&(Ya=[]),Js(Ya,e,t)}function Ja(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Xa(e,t){if(t.$$typeof===m)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=zi(e,t)).index=0,e.sibling=null,e}function r(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=$i(n,e.mode,i)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,i){var r=n.type;return r===g?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===S&&Qa(r)===t.type)?(Ja(t=s(t,n.props),n),t.return=e,t):(Ja(t=Fi(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function d(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wi(n,e.mode,i)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,i,r){return null===t||7!==t.tag?((t=Ui(n,e.mode,i,r)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=$i(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Ja(n=Fi(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=Wi(t,e.mode,n)).return=e,t;case S:return h(e,t=(0,t._init)(t._payload),n)}if(A(t)||E(t))return(t=Ui(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Ga(t),n);if(t.$$typeof===w)return h(e,Cs(e,t),n);Xa(e,t)}return null}function m(e,t,n,i){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===s?c(e,t,n,i):null;case f:return n.key===s?d(e,t,n,i):null;case S:return m(e,t,n=(s=n._init)(n._payload),i)}if(A(n)||E(n))return null!==s?null:u(e,t,n,i,null);if("function"===typeof n.then)return m(e,t,Ga(n),i);if(n.$$typeof===w)return m(e,t,Cs(e,n),i);Xa(e,n)}return null}function x(e,t,n,i,s){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return l(t,e=e.get(n)||null,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case p:return c(t,e=e.get(null===i.key?n:i.key)||null,i,s);case f:return d(t,e=e.get(null===i.key?n:i.key)||null,i,s);case S:return x(e,t,n,i=(0,i._init)(i._payload),s)}if(A(i)||E(i))return u(t,e=e.get(n)||null,i,s,null);if("function"===typeof i.then)return x(e,t,n,Ga(i),s);if(i.$$typeof===w)return x(e,t,n,Cs(t,i),s);Xa(t,i)}return null}function y(l,c,d,u){if("object"===typeof d&&null!==d&&d.type===g&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case p:e:{for(var b=d.key;null!==c;){if(c.key===b){if((b=d.type)===g){if(7===c.tag){n(l,c.sibling),(u=s(c,d.props.children)).return=l,l=u;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===S&&Qa(b)===c.type){n(l,c.sibling),Ja(u=s(c,d.props),d),u.return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}d.type===g?((u=Ui(d.props.children,l.mode,u,d.key)).return=l,l=u):(Ja(u=Fi(d.type,d.key,d.props,null,l.mode,u),d),u.return=l,l=u)}return o(l);case f:e:{for(b=d.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(l,c.sibling),(u=s(c,d.children||[])).return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}(u=Wi(d,l.mode,u)).return=l,l=u}return o(l);case S:return y(l,c,d=(b=d._init)(d._payload),u)}if(A(d))return function(s,a,o,l){for(var c=null,d=null,u=a,p=a=0,f=null;null!==u&&p<o.length;p++){u.index>p?(f=u,u=null):f=u.sibling;var g=m(s,u,o[p],l);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(s,u),a=r(g,a,p),null===d?c=g:d.sibling=g,d=g,u=f}if(p===o.length)return n(s,u),rs&&Qi(s,p),c;if(null===u){for(;p<o.length;p++)null!==(u=h(s,o[p],l))&&(a=r(u,a,p),null===d?c=u:d.sibling=u,d=u);return rs&&Qi(s,p),c}for(u=i(u);p<o.length;p++)null!==(f=x(u,s,p,o[p],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?p:f.key),a=r(f,a,p),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(s,e)}),rs&&Qi(s,p),c}(l,c,d,u);if(E(d)){if("function"!==typeof(b=E(d)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var d=null,u=null,p=o,f=o=0,g=null,y=l.next();null!==p&&!y.done;f++,y=l.next()){p.index>f?(g=p,p=null):g=p.sibling;var b=m(s,p,y.value,c);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(s,p),o=r(b,o,f),null===u?d=b:u.sibling=b,u=b,p=g}if(y.done)return n(s,p),rs&&Qi(s,f),d;if(null===p){for(;!y.done;f++,y=l.next())null!==(y=h(s,y.value,c))&&(o=r(y,o,f),null===u?d=y:u.sibling=y,u=y);return rs&&Qi(s,f),d}for(p=i(p);!y.done;f++,y=l.next())null!==(y=x(p,s,f,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?f:y.key),o=r(y,o,f),null===u?d=y:u.sibling=y,u=y);return e&&p.forEach(function(e){return t(s,e)}),rs&&Qi(s,f),d}(l,c,d=b.call(d),u)}if("function"===typeof d.then)return y(l,c,Ga(d),u);if(d.$$typeof===w)return y(l,c,Cs(l,d),u);Xa(l,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(n(l,c.sibling),(u=s(c,d)).return=l,l=u):(n(l,c),(u=$i(d,l.mode,u)).return=l,l=u),o(l)):n(l,c)}return function(e,t,n,i){try{Ka=0;var s=y(e,t,n,i);return Ya=null,s}catch(a){if(a===Vs||a===Zs)throw a;var r=Di(29,a,null,e.mode);return r.lanes=i,r.return=e,r}}}var to=eo(!0),no=eo(!1),io=I(null),so=null;function ro(e){var t=e.alternate;U(co,1&co.current),U(io,e),null===so&&(null===t||null!==mr.current||null!==t.memoizedState)&&(so=e)}function ao(e){if(22===e.tag){if(U(co,co.current),U(io,e),null===so){var t=e.alternate;null!==t&&null!==t.memoizedState&&(so=e)}}else oo()}function oo(){U(co,co.current),U(io,io.current)}function lo(e){F(io),so===e&&(so=null),F(co)}var co=I(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gu(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Oc(),s=sr(i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=rr(e,s,i))&&(Dc(t,e,i),ar(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Oc(),s=sr(i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=rr(e,s,i))&&(Dc(t,e,i),ar(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oc(),i=sr(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=rr(e,i,n))&&(Dc(t,e,n),ar(t,e,n))}};function po(e,t,n,i,s,r,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,r,a):!t.prototype||!t.prototype.isPureReactComponent||(!Gn(n,i)||!Gn(s,r))}function fo(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function go(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var xo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yo(e){xo(e)}function bo(e){console.error(e)}function vo(e){xo(e)}function wo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function _o(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function ko(e,t,n){return(n=sr(n)).tag=3,n.payload={element:null},n.callback=function(){wo(e,t)},n}function jo(e){return(e=sr(e)).tag=3,e}function No(e,t,n,i){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){_o(t,n,i)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){_o(t,n,i),"function"!==typeof s&&(null===jc?jc=new Set([this]):jc.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var So=Error(a(461)),Co=!1;function Po(e,t,n,i){t.child=null===e?no(t,null,n,i):to(t,e.child,n,i)}function To(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var a={};for(var o in i)"ref"!==o&&(a[o]=i[o])}else a=i;return Ns(t),i=Mr(e,t,n,a,r,s),o=Rr(),null===e||Co?(rs&&o&&ts(t),t.flags|=1,Po(e,t,i,s),t.child):(Dr(e,t,s),Ko(e,t,s))}function Eo(e,t,n,i,s){if(null===e){var r=n.type;return"function"!==typeof r||Bi(r)||void 0!==r.defaultProps||null!==n.compare?((e=Fi(n.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Mo(e,t,r,i,s))}if(r=e.child,!Go(e,s)){var a=r.memoizedProps;if((n=null!==(n=n.compare)?n:Gn)(a,i)&&e.ref===t.ref)return Ko(e,t,s)}return t.flags|=1,(e=zi(r,i)).ref=t.ref,e.return=t,t.child=e}function Mo(e,t,n,i,s){if(null!==e){var r=e.memoizedProps;if(Gn(r,i)&&e.ref===t.ref){if(Co=!1,t.pendingProps=i=r,!Go(e,s))return t.lanes=e.lanes,Ko(e,t,s);0!==(131072&e.flags)&&(Co=!0)}}return Ro(e,t,n,i,s)}function Lo(e,t,n){var i=t.pendingProps,s=i.children,r=null!==e?e.memoizedState:null;if("hidden"===i.mode){if(0!==(128&t.flags)){if(i=null!==r?r.baseLanes|n:n,null!==e){for(s=t.child=e.child,r=0;null!==s;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return Ao(e,t,i,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ao(e,t,null!==r?r.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ws(0,null!==r?r.cachePool:null),null!==r?fr(t,r):gr(),ao(t)}else null!==r?(Ws(0,r.cachePool),fr(t,r),oo(),t.memoizedState=null):(null!==e&&Ws(0,null),gr(),oo());return Po(e,t,s,n),t.child}function Ao(e,t,n,i){var s=$s();return s=null===s?null:{parent:Ls._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Ws(0,null),gr(),ao(t),null!==e&&ks(e,t,i,!0),null}function Oo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ro(e,t,n,i,s){return Ns(t),n=Mr(e,t,n,i,void 0,s),i=Rr(),null===e||Co?(rs&&i&&ts(t),t.flags|=1,Po(e,t,n,s),t.child):(Dr(e,t,s),Ko(e,t,s))}function Do(e,t,n,i,s,r){return Ns(t),t.updateQueue=null,n=Ar(t,i,n,s),Lr(e),i=Rr(),null===e||Co?(rs&&i&&ts(t),t.flags|=1,Po(e,t,n,r),t.child):(Dr(e,t,r),Ko(e,t,r))}function Bo(e,t,n,i,s){if(Ns(t),null===t.stateNode){var r=Oi,a=n.contextType;"object"===typeof a&&null!==a&&(r=Ss(a)),r=new n(i,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=mo,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=i,r.state=t.memoizedState,r.refs={},nr(t),a=n.contextType,r.context="object"===typeof a&&null!==a?Ss(a):Oi,r.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ho(t,n,a,i),r.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(a=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),a!==r.state&&mo.enqueueReplaceState(r,r.state,null),dr(t,i,r,s),cr(),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){r=t.stateNode;var o=t.memoizedProps,l=go(n,o);r.props=l;var c=r.context,d=n.contextType;a=Oi,"object"===typeof d&&null!==d&&(a=Ss(d));var u=n.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof r.getSnapshotBeforeUpdate,o=t.pendingProps!==o,d||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o||c!==a)&&fo(t,r,i,a),tr=!1;var h=t.memoizedState;r.state=h,dr(t,i,r,s),cr(),c=t.memoizedState,o||h!==c||tr?("function"===typeof u&&(ho(t,n,u,i),c=t.memoizedState),(l=tr||po(t,n,l,i,h,c,a))?(d||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),r.props=i,r.state=c,r.context=a,i=l):("function"===typeof r.componentDidMount&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,ir(e,t),d=go(n,a=t.memoizedProps),r.props=d,u=t.pendingProps,h=r.context,c=n.contextType,l=Oi,"object"===typeof c&&null!==c&&(l=Ss(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a!==u||h!==l)&&fo(t,r,i,l),tr=!1,h=t.memoizedState,r.state=h,dr(t,i,r,s),cr();var m=t.memoizedState;a!==u||h!==m||tr||null!==e&&null!==e.dependencies&&js(e.dependencies)?("function"===typeof o&&(ho(t,n,o,i),m=t.memoizedState),(d=tr||po(t,n,d,i,h,m,l)||null!==e&&null!==e.dependencies&&js(e.dependencies))?(c||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(i,m,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(i,m,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),r.props=i,r.state=m,r.context=l,i=d):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,Oo(e,t),i=0!==(128&t.flags),r||i?(r=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&i?(t.child=to(t,e.child,null,s),t.child=to(t,null,n,s)):Po(e,t,n,s),t.memoizedState=r.state,e=t.child):e=Ko(e,t,s),e}function zo(e,t,n,i){return ms(),t.flags|=256,Po(e,t,n,i),t.child}var Io={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fo(e){return{baseLanes:e,cachePool:Hs()}}function Uo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function $o(e,t,n){var i,s=t.pendingProps,r=!1,o=0!==(128&t.flags);if((i=o)||(i=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),i&&(r=!0,t.flags&=-129),i=0!==(32&t.flags),t.flags&=-33,null===e){if(rs){if(r?ro(t):oo(),rs){var l,c=ss;if(l=c){e:{for(l=c,c=os;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=xu(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Gi?{id:Ji,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},(l=Di(18,null,null,0)).stateNode=c,l.return=t,t.child=l,is=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gu(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=s.children,s=s.fallback,r?(oo(),c=Ho({mode:"hidden",children:c},r=t.mode),s=Ui(s,r,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(r=t.child).memoizedState=Fo(n),r.childLanes=Uo(e,i,n),t.memoizedState=Io,s):(ro(t),Wo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(ro(t),t.flags&=-257,t=Vo(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),r=s.fallback,c=t.mode,s=Ho({mode:"visible",children:s.children},c),(r=Ui(r,c,n,null)).flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,to(t,e.child,null,n),(s=t.child).memoizedState=Fo(n),s.childLanes=Uo(e,i,n),t.memoizedState=Io,t=r);else if(ro(t),gu(c)){if(i=c.nextSibling&&c.nextSibling.dataset)var d=i.dgst;i=d,(s=Error(a(419))).stack="",s.digest=i,fs({value:s,source:null,stack:null}),t=Vo(e,t,n)}else if(Co||ks(e,t,n,!1),i=0!==(n&e.childLanes),Co||i){if(null!==(i=ic)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:Pe(s))&(i.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,Mi(e,s),Dc(i,e,s),So;"$?"===c.data||Zc(),t=Vo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=xu(c.nextSibling),is=t,rs=!0,as=null,os=!1,null!==e&&(Yi[Ki++]=Ji,Yi[Ki++]=Xi,Yi[Ki++]=Gi,Ji=e.id,Xi=e.overflow,Gi=t),(t=Wo(t,s.children)).flags|=4096);return t}return r?(oo(),r=s.fallback,c=t.mode,d=(l=e.child).sibling,(s=zi(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==d?r=zi(d,r):(r=Ui(r,c,n,null)).flags|=2,r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,null===(c=e.child.memoizedState)?c=Fo(n):(null!==(l=c.cachePool)?(d=Ls._currentValue,l=l.parent!==d?{parent:d,pool:d}:l):l=Hs(),c={baseLanes:c.baseLanes|n,cachePool:l}),r.memoizedState=c,r.childLanes=Uo(e,i,n),t.memoizedState=Io,s):(ro(t),e=(n=e.child).sibling,(n=zi(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Wo(e,t){return(t=Ho({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ho(e,t){return(e=Di(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Vo(e,t,n){return to(t,e.child,null,n),(e=Wo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),ws(e.return,t,n)}function Zo(e,t,n,i,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function Yo(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(Po(e,t,i.children,n),0!==(2&(i=co.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qo(e,n,t);else if(19===e.tag)qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(U(co,i),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Zo(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===uo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Zo(t,!0,n,null,r);break;case"together":Zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ko(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ks(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=zi(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zi(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!js(e))}function Jo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Co=!0;else{if(!Go(e,n)&&0===(128&t.flags))return Co=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),bs(0,Ls,e.memoizedState.cache),ms();break;case 27:case 5:Y(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:bs(0,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(ro(t),t.flags|=128,null):0!==(n&t.child.childLanes)?$o(e,t,n):(ro(t),null!==(e=Ko(e,t,n))?e.sibling:null);ro(t);break;case 19:var s=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(ks(e,t,n,!1),i=0!==(n&t.childLanes)),s){if(i)return Yo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),U(co,co.current),i)break;return null;case 22:case 23:return t.lanes=0,Lo(e,t,n);case 24:bs(0,Ls,e.memoizedState.cache)}return Ko(e,t,n)}(e,t,n);Co=0!==(131072&e.flags)}else Co=!1,rs&&0!==(1048576&t.flags)&&es(t,Zi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,"function"!==typeof i){if(void 0!==i&&null!==i){if((s=i.$$typeof)===_){t.tag=11,t=To(null,t,i,e,n);break e}if(s===N){t.tag=14,t=Eo(null,t,i,e,n);break e}}throw t=L(i)||i,Error(a(306,t,""))}Bi(i)?(e=go(i,e),t.tag=1,t=Bo(null,t,i,e,n)):(t.tag=0,t=Ro(null,t,i,e,n))}return t;case 0:return Ro(e,t,t.type,t.pendingProps,n);case 1:return Bo(e,t,i=t.type,s=go(i,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(a(387));i=t.pendingProps;var r=t.memoizedState;s=r.element,ir(e,t),dr(t,i,null,n);var o=t.memoizedState;if(i=o.cache,bs(0,Ls,i),i!==r.cache&&_s(t,[Ls],n,!0),cr(),i=o.element,r.isDehydrated){if(r={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=zo(e,t,i,n);break e}if(i!==s){fs(s=ji(Error(a(424)),t)),t=zo(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=xu(e.firstChild),is=t,rs=!0,as=null,os=!0,n=no(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),i===s){t=Ko(e,t,n);break e}Po(e,t,i,n)}t=t.child}return t;case 26:return Oo(e,t),null===e?(n=Pu(t.type,null,t.pendingProps,null))?t.memoizedState=n:rs||(n=t.type,e=t.pendingProps,(i=iu(H.current).createElement(n))[Le]=t,i[Ae]=e,eu(i,n,e),Ve(i),t.stateNode=i):t.memoizedState=Pu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&rs&&(i=t.stateNode=vu(t.type,t.pendingProps,H.current),is=t,os=!0,s=ss,mu(t.type)?(yu=s,ss=xu(i.firstChild)):ss=s),Po(e,t,t.pendingProps.children,n),Oo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&rs&&((s=i=ss)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[Ie])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===r)return e}if(null===(e=xu(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,os))?(t.stateNode=i,is=t,ss=xu(i.firstChild),os=!1,s=!0):s=!1),s||cs(t)),Y(t),s=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,i=r.children,au(s,r)?i=null:null!==o&&au(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=Mr(e,t,Or,null,null,n),Yu._currentValue=s),Oo(e,t),Po(e,t,i,n),t.child;case 6:return null===e&&rs&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=xu(e.nextSibling)))return null}return e}(n,t.pendingProps,os))?(t.stateNode=n,is=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return $o(e,t,n);case 4:return q(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=to(t,null,i,n):Po(e,t,i,n),t.child;case 11:return To(e,t,t.type,t.pendingProps,n);case 7:return Po(e,t,t.pendingProps,n),t.child;case 8:case 12:return Po(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,bs(0,t.type,i.value),Po(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,Ns(t),i=i(s=Ss(s)),t.flags|=1,Po(e,t,i,n),t.child;case 14:return Eo(e,t,t.type,t.pendingProps,n);case 15:return Mo(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},null===e?((n=Ho(i,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=zi(e.child,i)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Lo(e,t,n);case 24:return Ns(t),i=Ss(Ls),null===e?(null===(s=$s())&&(s=ic,r=As(),s.pooledCache=r,r.refCount++,null!==r&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},nr(t),bs(0,Ls,s)):(0!==(e.lanes&n)&&(ir(e,t),dr(t,null,null,n),cr()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),bs(0,Ls,i)):(i=r.cache,bs(0,Ls,i),i!==s.cache&&_s(t,[Ls],n,!0))),Po(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Xo(e){e.flags|=4}function Qo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Uu(t)){if(null!==(t=io.current)&&((4194048&rc)===rc?null!==so:(62914560&rc)!==rc&&0===(536870912&rc)||t!==so))throw Xs=Ys,qs;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,xc|=t)}function tl(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=65011712&s.subtreeFlags,i|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function il(e,t,n){var i=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),vs(Ls),Z(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?Xo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ps())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Xo(t),null!==n?(nl(t),Qo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Xo(t),nl(t),Qo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==i&&Xo(t),nl(t),t.flags&=-16777217),null;case 27:K(t),n=H.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Xo(t);else{if(!i){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=$.current,hs(t)?ds(t):(e=vu(s,i,n),t.stateNode=e,Xo(t))}return nl(t),null;case 5:if(K(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Xo(t);else{if(!i){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=$.current,hs(t))ds(t);else{switch(s=iu(H.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof i.is?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e="string"===typeof i.is?s.createElement(n,{is:i.is}):s.createElement(n)}}e[Le]=t,e[Ae]=i;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(eu(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Xo(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&Xo(t);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(e=H.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(s=is))switch(s.tag){case 27:case 5:i=s.memoizedProps}e[Le]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||Gd(e.nodeValue,n)))||cs(t)}else(e=iu(e).createTextNode(i))[Le]=t,t.stateNode=e}return nl(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[Le]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),s=!1}else s=ps(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return Z(),null===e&&Fd(t.stateNode.containerInfo),nl(t),null;case 10:return vs(t.type),nl(t),null;case 19:if(F(co),null===(s=t.memoizedState))return nl(t),null;if(i=0!==(128&t.flags),null===(r=s.rendering))if(i)tl(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(r=uo(e))){for(t.flags|=128,tl(s,!1),e=r.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ii(n,e),n=n.sibling;return U(co,1&co.current|2),t.child}e=e.sibling}null!==s.tail&&te()>_c&&(t.flags|=128,i=!0,tl(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=uo(r))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!r.alternate&&!rs)return nl(t),null}else 2*te()-s.renderingStartTime>_c&&536870912!==n&&(t.flags|=128,i=!0,tl(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=s.last)?e.sibling=r:t.child=r,s.last=r)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=co.current,U(co,i?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),xr(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&F(Us),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),vs(Ls),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function sl(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return vs(Ls),Z(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return F(co),null;case 4:return Z(),null;case 10:return vs(t.type),null;case 22:case 23:return lo(t),xr(),null!==e&&F(Us),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return vs(Ls),null;default:return null}}function rl(e,t){switch(ns(t),t.tag){case 3:vs(Ls),Z();break;case 26:case 27:case 5:K(t);break;case 4:Z();break;case 13:lo(t);break;case 19:F(co);break;case 10:vs(t.type);break;case 22:case 23:lo(t),xr(),null!==e&&F(Us);break;case 24:vs(Ls)}}function al(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(o){dd(t,t.return,o)}}function ol(e,t,n){try{var i=t.updateQueue,s=null!==i?i.lastEffect:null;if(null!==s){var r=s.next;i=r;do{if((i.tag&e)===e){var a=i.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(d){dd(s,l,d)}}}i=i.next}while(i!==r)}}catch(d){dd(t,t.return,d)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hr(t,n)}catch(i){dd(e,e.return,i)}}}function cl(e,t,n){n.props=go(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){dd(e,t,i)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(s){dd(e,t,s)}}function ul(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(s){dd(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(r){dd(e,t,r)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){dd(e,e.return,s)}}function ml(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,o=null,l=null,c=null,d=null,u=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:i.hasOwnProperty(p)||Xd(e,t,p,null,i,h)}}for(var m in i){var p=i[m];if(h=n[m],i.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":r=p;break;case"name":s=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&Xd(e,t,m,p,i,h)}}return void gt(e,o,l,c,d,u,r,s);case"select":for(r in p=o=l=m=null,n)if(c=n[r],n.hasOwnProperty(r)&&null!=c)switch(r){case"value":break;case"multiple":p=c;default:i.hasOwnProperty(r)||Xd(e,t,r,null,i,c)}for(s in i)if(r=i[s],c=n[s],i.hasOwnProperty(s)&&(null!=r||null!=c))switch(s){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":o=r;default:r!==c&&Xd(e,t,s,r,i,c)}return t=l,n=o,i=p,void(null!=m?bt(e,!!n,m,!1):!!i!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=m=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Xd(e,t,l,null,i,s)}for(o in i)if(s=i[o],r=n[o],i.hasOwnProperty(o)&&(null!=s||null!=r))switch(o){case"value":m=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==r&&Xd(e,t,o,s,i,r)}return void vt(e,m,p);case"option":for(var f in n)if(m=n[f],n.hasOwnProperty(f)&&null!=m&&!i.hasOwnProperty(f))if("selected"===f)e.selected=!1;else Xd(e,t,f,null,i,m);for(c in i)if(m=i[c],p=n[c],i.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else Xd(e,t,c,m,i,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!i.hasOwnProperty(g)&&Xd(e,t,g,null,i,m);for(d in i)if(m=i[d],p=n[d],i.hasOwnProperty(d)&&m!==p&&(null!=m||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:Xd(e,t,d,m,i,p)}return;default:if(St(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&void 0!==m&&!i.hasOwnProperty(x)&&Qd(e,t,x,void 0,i,m);for(u in i)m=i[u],p=n[u],!i.hasOwnProperty(u)||m===p||void 0===m&&void 0===p||Qd(e,t,u,m,i,p);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&null!=m&&!i.hasOwnProperty(y)&&Xd(e,t,y,null,i,m);for(h in i)m=i[h],p=n[h],!i.hasOwnProperty(h)||m===p||null==m&&null==p||Xd(e,t,h,m,i,p)}(i,e.type,n,t),i[Ae]=t}catch(s){dd(e,e.return,s)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&mu(e.type)||4===e.tag}function fl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&mu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jd));else if(4!==i&&(27===i&&mu(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function xl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&mu(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(xl(e,t,n),e=e.sibling;null!==e;)xl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);eu(t,i,n),t[Le]=e,t[Ae]=n}catch(r){dd(e,e.return,r)}}var bl=!1,vl=!1,wl=!1,_l="function"===typeof WeakSet?WeakSet:Set,kl=null;function jl(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Bl(e,n),4&i&&al(5,n);break;case 1:if(Bl(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){dd(n,n.return,a)}else{var s=go(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){dd(n,n.return,o)}}64&i&&ll(n),512&i&&dl(n,n.return);break;case 3:if(Bl(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hr(e,t)}catch(a){dd(n,n.return,a)}}break;case 27:null===t&&4&i&&yl(n);case 26:case 5:Bl(e,n),null===t&&4&i&&hl(n),512&i&&dl(n,n.return);break;case 12:Bl(e,n);break;case 13:Bl(e,n),4&i&&El(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=pd.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||vl,s=bl;var r=vl;bl=i,(vl=t)&&!r?Il(e,n,0!==(8772&n.subtreeFlags)):Bl(e,n),bl=s,vl=r}break;case 30:break;default:Bl(e,n)}}function Nl(e){var t=e.alternate;null!==t&&(e.alternate=null,Nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Fe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Sl=null,Cl=!1;function Pl(e,t,n){for(n=n.child;null!==n;)Tl(e,t,n),n=n.sibling}function Tl(e,t,n){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(de,n)}catch(r){}switch(n.tag){case 26:vl||ul(n,t),Pl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:vl||ul(n,t);var i=Sl,s=Cl;mu(n.type)&&(Sl=n.stateNode,Cl=!1),Pl(e,t,n),wu(n.stateNode),Sl=i,Cl=s;break;case 5:vl||ul(n,t);case 6:if(i=Sl,s=Cl,Sl=null,Pl(e,t,n),Cl=s,null!==(Sl=i))if(Cl)try{(9===Sl.nodeType?Sl.body:"HTML"===Sl.nodeName?Sl.ownerDocument.body:Sl).removeChild(n.stateNode)}catch(a){dd(n,t,a)}else try{Sl.removeChild(n.stateNode)}catch(a){dd(n,t,a)}break;case 18:null!==Sl&&(Cl?(pu(9===(e=Sl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ch(e)):pu(Sl,n.stateNode));break;case 4:i=Sl,s=Cl,Sl=n.stateNode.containerInfo,Cl=!0,Pl(e,t,n),Sl=i,Cl=s;break;case 0:case 11:case 14:case 15:vl||ol(2,n,t),vl||ol(4,n,t),Pl(e,t,n);break;case 1:vl||(ul(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&cl(n,t,i)),Pl(e,t,n);break;case 21:Pl(e,t,n);break;case 22:vl=(i=vl)||null!==n.memoizedState,Pl(e,t,n),vl=i;break;default:Pl(e,t,n)}}function El(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ch(e)}catch(n){dd(t,t.return,n)}}function Ml(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new _l),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new _l),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var i=fd.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}function Ll(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i],r=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(mu(l.type)){Sl=l.stateNode,Cl=!1;break e}break;case 5:Sl=l.stateNode,Cl=!1;break e;case 3:case 4:Sl=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===Sl)throw Error(a(160));Tl(r,o,s),Sl=null,Cl=!1,null!==(r=s.alternate)&&(r.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Al=null;function Ol(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ll(t,e),Rl(e),4&i&&(ol(3,e,e.return),al(3,e),ol(5,e,e.return));break;case 1:Ll(t,e),Rl(e),512&i&&(vl||null===n||ul(n,n.return)),64&i&&bl&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var s=Al;if(Ll(t,e),Rl(e),512&i&&(vl||null===n||ul(n,n.return)),4&i){var r=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":(!(r=s.getElementsByTagName("title")[0])||r[Ie]||r[Le]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),eu(r,i,n),r[Le]=e,Ve(r),i=r;break e;case"link":var o=Iu("link","href",s).get(i+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((r=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&r.getAttribute("rel")===(null==n.rel?null:n.rel)&&r.getAttribute("title")===(null==n.title?null:n.title)&&r.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}eu(r=s.createElement(i),i,n),s.head.appendChild(r);break;case"meta":if(o=Iu("meta","content",s).get(i+(n.content||"")))for(l=0;l<o.length;l++)if((r=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&r.getAttribute("name")===(null==n.name?null:n.name)&&r.getAttribute("property")===(null==n.property?null:n.property)&&r.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&r.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}eu(r=s.createElement(i),i,n),s.head.appendChild(r);break;default:throw Error(a(468,i))}r[Le]=e,Ve(r),i=r}e.stateNode=i}else Fu(s,e.type,e.stateNode);else e.stateNode=Ou(s,i,e.memoizedProps);else r!==i?(null===r?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):r.count--,null===i?Fu(s,e.type,e.stateNode):Ou(s,i,e.memoizedProps)):null===i&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ll(t,e),Rl(e),512&i&&(vl||null===n||ul(n,n.return)),null!==n&&4&i&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ll(t,e),Rl(e),512&i&&(vl||null===n||ul(n,n.return)),32&e.flags){s=e.stateNode;try{_t(s,"")}catch(p){dd(e,e.return,p)}}4&i&&null!=e.stateNode&&ml(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&i&&(wl=!0);break;case 6:if(Ll(t,e),Rl(e),4&i){if(null===e.stateNode)throw Error(a(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(p){dd(e,e.return,p)}}break;case 3:if(zu=null,s=Al,Al=ju(t.containerInfo),Ll(t,e),Al=s,Rl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ch(t.containerInfo)}catch(p){dd(e,e.return,p)}wl&&(wl=!1,Dl(e));break;case 4:i=Al,Al=ju(e.stateNode.containerInfo),Ll(t,e),Rl(e),Al=i;break;case 12:default:Ll(t,e),Rl(e);break;case 13:Ll(t,e),Rl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=te()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Ml(e,i)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,d=bl,u=vl;if(bl=d||s,vl=u||c,Ll(t,e),vl=u,bl=d,Rl(e),8192&i)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||bl||vl||zl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(r=c.stateNode,s)"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(p){dd(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(p){dd(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Ml(e,n))));break;case 19:Ll(t,e),Rl(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Ml(e,i)));case 30:case 21:}}function Rl(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(pl(i)){n=i;break}i=i.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;xl(e,fl(e),s);break;case 5:var r=n.stateNode;32&n.flags&&(_t(r,""),n.flags&=-33),xl(e,fl(e),r);break;case 3:case 4:var o=n.stateNode.containerInfo;gl(e,fl(e),o);break;default:throw Error(a(161))}}catch(l){dd(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Dl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Dl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Bl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)jl(e,t.alternate,t),t=t.sibling}function zl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),zl(t);break;case 1:ul(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),zl(t);break;case 27:wu(t.stateNode);case 26:case 5:ul(t,t.return),zl(t);break;case 22:null===t.memoizedState&&zl(t);break;default:zl(t)}e=e.sibling}}function Il(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:Il(s,r,n),al(4,r);break;case 1:if(Il(s,r,n),"function"===typeof(s=(i=r).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){dd(i,i.return,c)}if(null!==(s=(i=r).updateQueue)){var o=i.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)ur(l[s],o)}catch(c){dd(i,i.return,c)}}n&&64&a&&ll(r),dl(r,r.return);break;case 27:yl(r);case 26:case 5:Il(s,r,n),n&&null===i&&4&a&&hl(r),dl(r,r.return);break;case 12:Il(s,r,n);break;case 13:Il(s,r,n),n&&4&a&&El(s,r);break;case 22:null===r.memoizedState&&Il(s,r,n),dl(r,r.return);break;case 30:break;default:Il(s,r,n)}t=t.sibling}}function Fl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Os(n))}function Ul(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Os(e))}function $l(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Wl(e,t,n,i),t=t.sibling}function Wl(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,i),2048&s&&al(9,t);break;case 1:case 13:default:$l(e,t,n,i);break;case 3:$l(e,t,n,i),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Os(e)));break;case 12:if(2048&s){$l(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,o=r.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){dd(t,t.return,l)}}else $l(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,a=t.alternate,null!==t.memoizedState?2&r._visibility?$l(e,t,n,i):Vl(e,t):2&r._visibility?$l(e,t,n,i):(r._visibility|=2,Hl(e,t,n,i,0!==(10256&t.subtreeFlags))),2048&s&&Fl(a,t);break;case 24:$l(e,t,n,i),2048&s&&Ul(t.alternate,t)}}function Hl(e,t,n,i,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var r=e,a=t,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:Hl(r,a,o,l,s),al(8,a);break;case 23:break;case 22:var d=a.stateNode;null!==a.memoizedState?2&d._visibility?Hl(r,a,o,l,s):Vl(r,a):(d._visibility|=2,Hl(r,a,o,l,s)),s&&2048&c&&Fl(a.alternate,a);break;case 24:Hl(r,a,o,l,s),s&&2048&c&&Ul(a.alternate,a);break;default:Hl(r,a,o,l,s)}t=t.sibling}}function Vl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:Vl(n,i),2048&s&&Fl(i.alternate,i);break;case 24:Vl(n,i),2048&s&&Ul(i.alternate,i);break;default:Vl(n,i)}t=t.sibling}}var ql=8192;function Zl(e){if(e.subtreeFlags&ql)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Zl(e),e.flags&ql&&null!==e.memoizedState&&function(e,t,n){if(null===$u)throw Error(a(475));var i=$u;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Tu(n.href),r=e.querySelector(Eu(s));if(r)return null!==(e=r._p)&&"object"===typeof e&&"function"===typeof e.then&&(i.count++,i=Hu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,void Ve(r);r=e.ownerDocument||e,n=Mu(n),(s=_u.get(s))&&Du(n,s),Ve(r=r.createElement("link"));var o=r;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),eu(r,"link",n),t.instance=r}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(i.count++,t=Hu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}(Al,e.memoizedState,e.memoizedProps);break;case 5:default:Zl(e);break;case 3:case 4:var t=Al;Al=ju(e.stateNode.containerInfo),Zl(e),Al=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=ql,ql=16777216,Zl(e),ql=t):Zl(e))}}function Kl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Gl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];kl=i,Ql(i,e)}Kl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Gl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Gl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Xl(e)):Gl(e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];kl=i,Ql(i,e)}Kl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Xl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Xl(t));break;default:Xl(t)}e=e.sibling}}function Ql(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Os(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,kl=i;else e:for(n=e;null!==kl;){var s=(i=kl).sibling,r=i.return;if(Nl(i),i===n){kl=null;break e}if(null!==s){s.return=r,kl=s;break e}kl=r}}}var ec={getCacheForType:function(e){var t=Ss(Ls),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,ic=null,sc=null,rc=0,ac=0,oc=null,lc=!1,cc=!1,dc=!1,uc=0,hc=0,mc=0,pc=0,fc=0,gc=0,xc=0,yc=null,bc=null,vc=!1,wc=0,_c=1/0,kc=null,jc=null,Nc=0,Sc=null,Cc=null,Pc=0,Tc=0,Ec=null,Mc=null,Lc=0,Ac=null;function Oc(){if(0!==(2&nc)&&0!==rc)return rc&-rc;if(null!==O.T){return 0!==Bs?Bs:Td()}return Ee()}function Rc(){0===gc&&(gc=0===(536870912&rc)||rs?_e():536870912);var e=io.current;return null!==e&&(e.flags|=32),gc}function Dc(e,t,n){(e!==ic||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Wc(e,0),Fc(e,rc,gc,!1)),Ne(e,n),0!==(2&nc)&&e===ic||(e===ic&&(0===(2&nc)&&(pc|=n),4===hc&&Fc(e,rc,gc,!1)),_d(e))}function Bc(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var i=!n&&0===(124&t)&&0===(t&e.expiredLanes)||ve(e,t),s=i?function(e,t){var n=nc;nc|=2;var i=Vc(),s=qc();ic!==e||rc!==t?(kc=null,_c=te()+500,Wc(e,t)):cc=ve(e,t);e:for(;;)try{if(0!==ac&&null!==sc){t=sc;var r=oc;t:switch(ac){case 1:ac=0,oc=null,Qc(e,t,r,1);break;case 2:case 9:if(Ks(r)){ac=0,oc=null,Xc(t);break}t=function(){2!==ac&&9!==ac||ic!==e||(ac=7),_d(e)},r.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Ks(r)?(ac=0,oc=null,Xc(t)):(ac=0,oc=null,Qc(e,t,r,7));break;case 5:var o=null;switch(sc.tag){case 26:o=sc.memoizedState;case 5:case 27:var l=sc;if(!o||Uu(o)){ac=0,oc=null;var c=l.sibling;if(null!==c)sc=c;else{var d=l.return;null!==d?(sc=d,ed(d)):sc=null}break t}}ac=0,oc=null,Qc(e,t,r,5);break;case 6:ac=0,oc=null,Qc(e,t,r,6);break;case 8:$c(),hc=6;break e;default:throw Error(a(462))}}Gc();break}catch(u){Hc(e,u)}return ys=xs=null,O.H=i,O.A=s,nc=n,null!==sc?0:(ic=null,rc=0,Pi(),hc)}(e,t):Yc(e,t,!0),r=i;;){if(0===s){cc&&!i&&Fc(e,t,0,!1);break}if(n=e.current.alternate,!r||Ic(n)){if(2===s){if(r=t,e.errorRecoveryDisabledLanes&r)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=yc;var c=l.current.memoizedState.isDehydrated;if(c&&(Wc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=r,pc|=r,s=4;break e}r=bc,bc=s,null!==r&&(null===bc?bc=r:bc.push.apply(bc,r))}s=o}if(r=!1,2!==s)continue}}if(1===s){Wc(e,0),Fc(e,t,0,!0);break}e:{switch(i=e,r=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Fc(i,t,gc,!lc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=wc+300-te())){if(Fc(i,t,gc,!lc),0!==be(i,0,!0))break e;i.timeoutHandle=lu(zc.bind(null,i,n,bc,kc,vc,t,gc,pc,xc,lc,r,2,-0,0),s)}else zc(i,n,bc,kc,vc,t,gc,pc,xc,lc,r,0,-0,0)}break}s=Yc(e,t,!1),r=!1}_d(e)}function zc(e,t,n,i,s,r,o,l,c,d,u,h,m,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&($u={stylesheets:null,count:0,unsuspend:Wu},Yl(t),null!==(h=function(){if(null===$u)throw Error(a(475));var e=$u;return e.stylesheets&&0===e.count&&qu(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&qu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nd.bind(null,e,t,r,n,i,s,o,l,c,u,1,m,p)),void Fc(e,r,o,!d);nd(e,t,r,n,i,s,o,l,c)}function Ic(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Kn(r(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fc(e,t,n,i){t&=~fc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-me(s),a=1<<r;i[r]=-1,s&=~a}0!==n&&Se(e,n,t)}function Uc(){return 0!==(6&nc)||(kd(0,!1),!1)}function $c(){if(null!==sc){if(0===ac)var e=sc.return;else ys=xs=null,Br(e=sc),Ya=null,Ka=0,e=sc;for(;null!==e;)rl(e.alternate,e),e=e.return;sc=null}}function Wc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),$c(),ic=e,sc=n=zi(e.current,null),rc=t,ac=0,oc=null,lc=!1,cc=ve(e,t),dc=!1,xc=gc=fc=pc=mc=hc=0,bc=yc=null,vc=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var s=31-me(i),r=1<<s;t|=e[s],i&=~r}return uc=t,Pi(),n}function Hc(e,t){br=null,O.H=Ha,t===Vs||t===Zs?(t=Qs(),ac=3):t===qs?(t=Qs(),ac=4):ac=t===So?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===sc&&(hc=1,wo(e,ji(t,e.current)))}function Vc(){var e=O.H;return O.H=Ha,null===e?Ha:e}function qc(){var e=O.A;return O.A=ec,e}function Zc(){hc=4,lc||(4194048&rc)!==rc&&null!==io.current||(cc=!0),0===(134217727&mc)&&0===(134217727&pc)||null===ic||Fc(ic,rc,gc,!1)}function Yc(e,t,n){var i=nc;nc|=2;var s=Vc(),r=qc();ic===e&&rc===t||(kc=null,Wc(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==ac&&null!==sc){var o=sc,l=oc;switch(ac){case 8:$c(),a=6;break e;case 3:case 2:case 9:case 6:null===io.current&&(t=!0);var c=ac;if(ac=0,oc=null,Qc(e,o,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,oc=null,Qc(e,o,l,c)}}Kc(),a=hc;break}catch(d){Hc(e,d)}return t&&e.shellSuspendCounter++,ys=xs=null,nc=i,O.H=s,O.A=r,null===sc&&(ic=null,rc=0,Pi()),a}function Kc(){for(;null!==sc;)Jc(sc)}function Gc(){for(;null!==sc&&!Q();)Jc(sc)}function Jc(e){var t=Jo(e.alternate,e,uc);e.memoizedProps=e.pendingProps,null===t?ed(e):sc=t}function Xc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Do(n,t,t.pendingProps,t.type,void 0,rc);break;case 11:t=Do(n,t,t.pendingProps,t.type.render,t.ref,rc);break;case 5:Br(t);default:rl(n,t),t=Jo(n,t=sc=Ii(t,uc),uc)}e.memoizedProps=e.pendingProps,null===t?ed(e):sc=t}function Qc(e,t,n,i){ys=xs=null,Br(t),Ya=null,Ka=0;var s=t.return;try{if(function(e,t,n,i,s){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&ks(t,n,s,!0),null!==(n=io.current)){switch(n.tag){case 13:return null===so?Zc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===Ys?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),ud(e,i,s)),!1;case 22:return n.flags|=65536,i===Ys?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),ud(e,i,s)),!1}throw Error(a(435,n.tag))}return ud(e,i,s),Zc(),!1}if(rs)return null!==(t=io.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==ls&&fs(ji(e=Error(a(422),{cause:i}),n))):(i!==ls&&fs(ji(t=Error(a(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,i=ji(i,n),or(e,s=ko(e.stateNode,i,s)),4!==hc&&(hc=2)),!1;var r=Error(a(520),{cause:i});if(r=ji(r,n),null===yc?yc=[r]:yc.push(r),4!==hc&&(hc=2),null===t)return!0;i=ji(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,or(n,e=ko(n.stateNode,i,e)),!1;case 1:if(t=n.type,r=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==r&&"function"===typeof r.componentDidCatch&&(null===jc||!jc.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,No(s=jo(s),e,n,i),or(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,rc))return hc=1,wo(e,ji(n,e.current)),void(sc=null)}catch(r){if(null!==s)throw sc=s,r;return hc=1,wo(e,ji(n,e.current)),void(sc=null)}32768&t.flags?(rs||1===i?e=!0:cc||0!==(536870912&rc)?e=!1:(lc=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=io.current)&&13===i.tag&&(i.flags|=16384))),td(t,e)):ed(t)}function ed(e){var t=e;do{if(0!==(32768&t.flags))return void td(t,lc);e=t.return;var n=il(t.alternate,t,uc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===hc&&(hc=5)}function td(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);hc=6,sc=null}function nd(e,t,n,i,s,r,o,l,c){e.cancelPendingCommit=null;do{od()}while(0!==Nc);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(r=t.lanes|t.childLanes,function(e,t,n,i,s,r){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-me(n),u=1<<d;o[d]=0,l[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}n&=~u}0!==i&&Se(e,i,0),0!==r&&0===s&&0!==e.tag&&(e.suspendedLanes|=r&~(a&~t))}(e,n,r|=Ci,o,l,c),e===ic&&(sc=ic=null,rc=0),Cc=t,Sc=e,Pc=n,Tc=r,Ec=s,Mc=i,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(re,function(){return ld(),null})):(e.callbackNode=null,e.callbackPriority=0),i=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||i){i=O.T,O.T=null,s=R.p,R.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,tu=nh,ti(e=ei(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==r||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===s&&(l=o),m===r&&++u===i&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nu={focusedElem:e,selectionRange:n},nh=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(r=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==r){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var f=go(n.type,s,(n.elementType,n.type));e=i.getSnapshotBeforeUpdate(f,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(x){dd(n,n.return,x)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))fu(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{nc=o,R.p=s,O.T=i}}Nc=1,id(),sd(),rd()}}function id(){if(1===Nc){Nc=0;var e=Sc,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var i=R.p;R.p=2;var s=nc;nc|=4;try{Ol(t,e);var r=nu,a=ei(e.containerInfo),o=r.focusedElem,l=r.selectionRange;if(a!==o&&o&&o.ownerDocument&&Qn(o.ownerDocument.documentElement,o)){if(null!==l&&ti(o)){var c=l.start,d=l.end;if(void 0===d&&(d=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(d,o.value.length);else{var u=o.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=o.textContent.length,f=Math.min(l.start,p),g=void 0===l.end?f:Math.min(l.end,p);!m.extend&&f>g&&(a=g,g=f,f=a);var x=Xn(o,f),y=Xn(o,g);if(x&&y&&(1!==m.rangeCount||m.anchorNode!==x.node||m.anchorOffset!==x.offset||m.focusNode!==y.node||m.focusOffset!==y.offset)){var b=u.createRange();b.setStart(x.node,x.offset),m.removeAllRanges(),f>g?(m.addRange(b),m.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),m.addRange(b))}}}}for(u=[],m=o;m=m.parentNode;)1===m.nodeType&&u.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<u.length;o++){var v=u[o];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}nh=!!tu,nu=tu=null}finally{nc=s,R.p=i,O.T=n}}e.current=t,Nc=2}}function sd(){if(2===Nc){Nc=0;var e=Sc,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var i=R.p;R.p=2;var s=nc;nc|=4;try{jl(e,t.alternate,t)}finally{nc=s,R.p=i,O.T=n}}Nc=3}}function rd(){if(4===Nc||3===Nc){Nc=0,ee();var e=Sc,t=Cc,n=Pc,i=Mc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Nc=5:(Nc=0,Cc=Sc=null,ad(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(jc=null),Te(n),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(de,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==i){t=O.T,s=R.p,R.p=2,O.T=null;try{for(var r=e.onRecoverableError,a=0;a<i.length;a++){var o=i[a];r(o.value,{componentStack:o.stack})}}finally{O.T=t,R.p=s}}0!==(3&Pc)&&od(),_d(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Ac?Lc++:(Lc=0,Ac=e):Lc=0,kd(0,!1)}}function ad(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Os(t)))}function od(e){return id(),sd(),rd(),ld()}function ld(){if(5!==Nc)return!1;var e=Sc,t=Tc;Tc=0;var n=Te(Pc),i=O.T,s=R.p;try{R.p=32>n?32:n,O.T=null,n=Ec,Ec=null;var r=Sc,o=Pc;if(Nc=0,Cc=Sc=null,Pc=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,Jl(r.current),Wl(r,r.current,o,n),nc=l,kd(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(de,r)}catch(c){}return!0}finally{R.p=s,O.T=i,ad(e,t)}}function cd(e,t,n){t=ji(n,t),null!==(e=rr(e,t=ko(e.stateNode,t,2),2))&&(Ne(e,2),_d(e))}function dd(e,t,n){if(3===e.tag)cd(e,e,n);else for(;null!==t;){if(3===t.tag){cd(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===jc||!jc.has(i))){e=ji(n,e),null!==(i=rr(t,n=jo(2),2))&&(No(n,i,t,e),Ne(i,2),_d(i));break}}t=t.return}}function ud(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new tc;var s=new Set;i.set(t,s)}else void 0===(s=i.get(t))&&(s=new Set,i.set(t,s));s.has(n)||(dc=!0,s.add(n),e=hd.bind(null,e,t,n),t.then(e,e))}function hd(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ic===e&&(rc&n)===n&&(4===hc||3===hc&&(62914560&rc)===rc&&300>te()-wc?0===(2&nc)&&Wc(e,0):fc|=n,xc===rc&&(xc=0)),_d(e)}function md(e,t){0===t&&(t=ke()),null!==(e=Mi(e,t))&&(Ne(e,t),_d(e))}function pd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),md(e,n)}function fd(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==i&&i.delete(t),md(e,n)}var gd=null,xd=null,yd=!1,bd=!1,vd=!1,wd=0;function _d(e){e!==xd&&null===e.next&&(null===xd?gd=xd=e:xd=xd.next=e),bd=!0,yd||(yd=!0,uu(function(){0!==(6&nc)?J(ie,jd):Nd()}))}function kd(e,t){if(!vd&&bd){vd=!0;do{for(var n=!1,i=gd;null!==i;){if(!t)if(0!==e){var s=i.pendingLanes;if(0===s)var r=0;else{var a=i.suspendedLanes,o=i.pingedLanes;r=(1<<31-me(42|e)+1)-1,r=201326741&(r&=s&~(a&~o))?201326741&r|1:r?2|r:0}0!==r&&(n=!0,Pd(i,r))}else r=rc,0===(3&(r=be(i,i===ic?r:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||ve(i,r)||(n=!0,Pd(i,r));i=i.next}}while(n);vd=!1}}function jd(){Nd()}function Nd(){bd=yd=!1;var e=0;0!==wd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ou&&(ou=e,!0);return ou=null,!1}()&&(e=wd),wd=0);for(var t=te(),n=null,i=gd;null!==i;){var s=i.next,r=Sd(i,t);0===r?(i.next=null,null===n?gd=s:n.next=s,null===s&&(xd=n)):(n=i,(0!==e||0!==(3&r))&&(bd=!0)),i=s}kd(e,!1)}function Sd(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var a=31-me(r),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&i)||(s[a]=we(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}if(n=rc,n=be(e,e===(t=ic)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&X(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||ve(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&X(i),Te(n)){case 2:case 8:n=se;break;case 32:default:n=re;break;case 268435456:n=oe}return i=Cd.bind(null,e),n=J(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&X(i),e.callbackPriority=2,e.callbackNode=null,2}function Cd(e,t){if(0!==Nc&&5!==Nc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(od()&&e.callbackNode!==n)return null;var i=rc;return 0===(i=be(e,e===ic?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Bc(e,i,t),Sd(e,te()),null!=e.callbackNode&&e.callbackNode===n?Cd.bind(null,e):null)}function Pd(e,t){if(od())return null;Bc(e,t,!0)}function Td(){return 0===wd&&(wd=_e()),wd}function Ed(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Tt(""+e)}function Md(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ld=0;Ld<wi.length;Ld++){var Ad=wi[Ld];_i(Ad.toLowerCase(),"on"+(Ad[0].toUpperCase()+Ad.slice(1)))}_i(mi,"onAnimationEnd"),_i(pi,"onAnimationIteration"),_i(fi,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(gi,"onTransitionRun"),_i(xi,"onTransitionStart"),_i(yi,"onTransitionCancel"),_i(bi,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Od));function Dd(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=c;try{r(s)}catch(d){xo(d)}s.currentTarget=null,r=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=c;try{r(s)}catch(d){xo(d)}s.currentTarget=null,r=l}}}}function Bd(e,t){var n=t[Re];void 0===n&&(n=t[Re]=new Set);var i=e+"__bubble";n.has(i)||(Ud(t,e,2,!1),n.add(i))}function zd(e,t,n){var i=0;t&&(i|=4),Ud(n,e,i,t)}var Id="_reactListening"+Math.random().toString(36).slice(2);function Fd(e){if(!e[Id]){e[Id]=!0,qe.forEach(function(t){"selectionchange"!==t&&(Rd.has(t)||zd(t,!1,e),zd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Id]||(t[Id]=!0,zd("selectionchange",!1,t))}}function Ud(e,t,n,i){switch(ch(t)){case 2:var s=ih;break;case 8:s=sh;break;default:s=rh}n=s.bind(null,t,n,e),s=void 0,!It||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),i?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function $d(e,t,n,i,s){var r=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=i.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=Ue(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){i=r=a;continue e}o=o.parentNode}}i=i.return}Dt(function(){var i=r,s=Mt(n),a=[];e:{var o=vi.get(e);if(void 0!==o){var c=Qt,d=e;switch(e){case"keypress":if(0===Vt(n))break e;case"keydown":case"keyup":c=fn;break;case"focusin":d="focus",c=an;break;case"focusout":d="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=xn;break;case mi:case pi:case fi:c=on;break;case bi:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=vn}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),m=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=i;null!==f;){var g=f;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===m||null!=(g=Bt(f,m))&&u.push(Wd(f,g,p)),h)break;f=f.return}0<u.length&&(o=new c(o,d,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Et||!(d=n.relatedTarget||n.fromElement)||!Ue(d)&&!d[Oe])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=i,null!==(d=(d=n.relatedTarget||n.toElement)?Ue(d):null)&&(h=l(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=i),c!==d)){if(u=sn,g="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=gn,g="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?o:We(c),p=null==d?o:We(d),(o=new u(g,f+"leave",c,n,s)).target=h,o.relatedTarget=p,g=null,Ue(s)===i&&((u=new u(m,f+"enter",d,n,s)).target=p,u.relatedTarget=h,g=u),h=g,c&&d)e:{for(m=d,f=0,p=u=c;p;p=Vd(p))f++;for(p=0,g=m;g;g=Vd(g))p++;for(;0<f-p;)u=Vd(u),f--;for(;0<p-f;)m=Vd(m),p--;for(;f--;){if(u===m||null!==m&&u===m.alternate)break e;u=Vd(u),m=Vd(m)}u=null}else u=null;null!==c&&qd(a,o,c,u,!1),null!==d&&null!==h&&qd(a,h,d,u,!0)}if("select"===(c=(o=i?We(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var x=zn;else if(Ln(o))if(In)x=Yn;else{x=qn;var y=Vn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?i&&St(i.elementType)&&(x=zn):x=Zn;switch(x&&(x=x(e,i))?An(a,x,n,s):(y&&y(e,o,i),"focusout"===e&&i&&"number"===o.type&&null!=i.memoizedProps.value&&yt(o,"number",o.value)),y=i?We(i):window,e){case"focusin":(Ln(y)||"true"===y.contentEditable)&&(ii=y,si=i,ri=null);break;case"focusout":ri=si=ii=null;break;case"mousedown":ai=!0;break;case"contextmenu":case"mouseup":case"dragend":ai=!1,oi(a,n,s);break;case"selectionchange":if(ni)break;case"keydown":case"keyup":oi(a,n,s)}var b;if(_n)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else En?Pn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Nn&&"ko"!==n.locale&&(En||"onCompositionStart"!==v?"onCompositionEnd"===v&&En&&(b=Ht()):($t="value"in(Ut=s)?Ut.value:Ut.textContent,En=!0)),0<(y=Hd(i,v)).length&&(v=new cn(v,e,null,n,s),a.push({event:v,listeners:y}),b?v.data=b:null!==(b=Tn(n))&&(v.data=b))),(b=jn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(Cn=!0,Sn);case"textInput":return(e=t.data)===Sn&&Cn?null:e;default:return null}}(e,n):function(e,t){if(En)return"compositionend"===e||!_n&&Pn(e,t)?(e=Ht(),Wt=$t=Ut=null,En=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(v=Hd(i,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,s),a.push({event:y,listeners:v}),y.data=b)),function(e,t,n,i,s){if("submit"===t&&n&&n.stateNode===s){var r=Ed((s[Ae]||null).action),a=i.submitter;a&&null!==(t=(t=a[Ae]||null)?Ed(t.formAction):a.getAttribute("formAction"))&&(r=t,a=null);var o=new Qt("action","action",null,i,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==wd){var e=a?Md(s,a):new FormData(s);Ea(n,{pending:!0,data:e,method:s.method,action:r},null,e)}}else"function"===typeof r&&(o.preventDefault(),e=a?Md(s,a):new FormData(s),Ea(n,{pending:!0,data:e,method:s.method,action:r},r,e))},currentTarget:s}]})}}(a,e,i,n,s)}Dd(a,t)})}function Wd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hd(e,t){for(var n=t+"Capture",i=[];null!==e;){var s=e,r=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===r||(null!=(s=Bt(e,n))&&i.unshift(Wd(e,s,r)),null!=(s=Bt(e,t))&&i.push(Wd(e,s,r))),3===e.tag)return i;e=e.return}return[]}function Vd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function qd(e,t,n,i,s){for(var r=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===i)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Bt(n,r))&&a.unshift(Wd(n,c,l)):s||null!=(c=Bt(n,r))&&a.push(Wd(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Zd=/\r\n?/g,Yd=/\u0000|\uFFFD/g;function Kd(e){return("string"===typeof e?e:""+e).replace(Zd,"\n").replace(Yd,"")}function Gd(e,t){return t=Kd(t),Kd(e)===t}function Jd(){}function Xd(e,t,n,i,s,r){switch(n){case"children":"string"===typeof i?"body"===t||"textarea"===t&&""===i||_t(e,i):("number"===typeof i||"bigint"===typeof i)&&"body"!==t&&_t(e,""+i);break;case"className":nt(e,"class",i);break;case"tabIndex":nt(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,i);break;case"style":Nt(e,i,r);break;case"data":if("object"!==t){nt(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"===typeof i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Tt(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"===typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof r&&("formAction"===n?("input"!==t&&Xd(e,t,"name",s.name,s,null),Xd(e,t,"formEncType",s.formEncType,s,null),Xd(e,t,"formMethod",s.formMethod,s,null),Xd(e,t,"formTarget",s.formTarget,s,null)):(Xd(e,t,"encType",s.encType,s,null),Xd(e,t,"method",s.method,s,null),Xd(e,t,"target",s.target,s,null))),null==i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Tt(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Jd);break;case"onScroll":null!=i&&Bd("scroll",e);break;case"onScrollEnd":null!=i&&Bd("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(a(61));if(null!=(n=i.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"muted":e.muted=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"===typeof i||"boolean"===typeof i||"symbol"===typeof i){e.removeAttribute("xlink:href");break}n=Tt(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"===typeof i||"symbol"===typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Bd("beforetoggle",e),Bd("toggle",e),tt(e,"popover",i);break;case"xlinkActuate":it(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":it(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":it(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":it(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":it(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":it(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":it(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":it(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":it(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":tt(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,i)}}function Qd(e,t,n,i,s,r){switch(n){case"style":Nt(e,i,r);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(a(61));if(null!=(n=i.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof i?_t(e,i):("number"===typeof i||"bigint"===typeof i)&&_t(e,""+i);break;case"onScroll":null!=i&&Bd("scroll",e);break;case"onScrollEnd":null!=i&&Bd("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Jd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ze.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(r=null!=(r=e[Ae]||null)?r[n]:null)&&e.removeEventListener(t,r,s),"function"!==typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):tt(e,n,i):("function"!==typeof r&&null!==r&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s)))}}function eu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bd("error",e),Bd("load",e);var i,s=!1,r=!1;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(null!=o)switch(i){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Xd(e,t,i,o,n,null)}}return r&&Xd(e,t,"srcSet",n.srcSet,n,null),void(s&&Xd(e,t,"src",n.src,n,null));case"input":Bd("invalid",e);var l=i=o=r=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var u=n[s];if(null!=u)switch(s){case"name":r=u;break;case"type":o=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":i=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(a(137,t));break;default:Xd(e,t,s,u,n,null)}}return xt(e,i,l,c,d,o,r,!1),void ut(e);case"select":for(r in Bd("invalid",e),s=o=i=null,n)if(n.hasOwnProperty(r)&&null!=(l=n[r]))switch(r){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Xd(e,t,r,l,n,null)}return t=i,n=o,e.multiple=!!s,void(null!=t?bt(e,!!s,t,!1):null!=n&&bt(e,!!s,n,!0));case"textarea":for(o in Bd("invalid",e),i=r=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":r=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Xd(e,t,o,l,n,null)}return wt(e,s,r,i),void ut(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Xd(e,t,c,s,n,null);return;case"dialog":Bd("beforetoggle",e),Bd("toggle",e),Bd("cancel",e),Bd("close",e);break;case"iframe":case"object":Bd("load",e);break;case"video":case"audio":for(s=0;s<Od.length;s++)Bd(Od[s],e);break;case"image":Bd("error",e),Bd("load",e);break;case"details":Bd("toggle",e);break;case"embed":case"source":case"link":Bd("error",e),Bd("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(s=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Xd(e,t,d,s,n,null)}return;default:if(St(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(s=n[u])&&Qd(e,t,u,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Xd(e,t,l,s,n,null))}var tu=null,nu=null;function iu(e){return 9===e.nodeType?e:e.ownerDocument}function su(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ru(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function au(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ou=null;var lu="function"===typeof setTimeout?setTimeout:void 0,cu="function"===typeof clearTimeout?clearTimeout:void 0,du="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof du?function(e){return du.resolve(null).then(e).catch(hu)}:lu;function hu(e){setTimeout(function(){throw e})}function mu(e){return"head"===e}function pu(e,t){var n=t,i=0,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(1&n&&wu(a.documentElement),2&n&&wu(a.body),4&n)for(wu(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Ie]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===s)return e.removeChild(r),void Ch(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);Ch(t)}function fu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fu(n),Fe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function xu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yu=null;function bu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function vu(e,t,n){switch(t=iu(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function wu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Fe(e)}var _u=new Map,ku=new Set;function ju(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Nu=R.d;R.d={f:function(){var e=Nu.f(),t=Uc();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?La(t):Nu.r(e)},D:function(e){Nu.D(e),Cu("dns-prefetch",e,null)},C:function(e,t){Nu.C(e,t),Cu("preconnect",e,t)},L:function(e,t,n){Nu.L(e,t,n);var i=Su;if(i&&e&&t){var s='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+ft(n.imageSizes)+'"]')):s+='[href="'+ft(e)+'"]';var r=s;switch(t){case"style":r=Tu(e);break;case"script":r=Lu(e)}_u.has(r)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),_u.set(r,e),null!==i.querySelector(s)||"style"===t&&i.querySelector(Eu(r))||"script"===t&&i.querySelector(Au(r))||(eu(t=i.createElement("link"),"link",e),Ve(t),i.head.appendChild(t)))}},m:function(e,t){Nu.m(e,t);var n=Su;if(n&&e){var i=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+ft(i)+'"][href="'+ft(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Lu(e)}if(!_u.has(r)&&(e=h({rel:"modulepreload",href:e},t),_u.set(r,e),null===n.querySelector(s))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Au(r)))return}eu(i=n.createElement("link"),"link",e),Ve(i),n.head.appendChild(i)}}},X:function(e,t){Nu.X(e,t);var n=Su;if(n&&e){var i=He(n).hoistableScripts,s=Lu(e),r=i.get(s);r||((r=n.querySelector(Au(s)))||(e=h({src:e,async:!0},t),(t=_u.get(s))&&Bu(e,t),Ve(r=n.createElement("script")),eu(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}},S:function(e,t,n){Nu.S(e,t,n);var i=Su;if(i&&e){var s=He(i).hoistableStyles,r=Tu(e);t=t||"default";var a=s.get(r);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(Eu(r)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=_u.get(r))&&Du(e,n);var l=a=i.createElement("link");Ve(l),eu(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Ru(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(r,a)}}},M:function(e,t){Nu.M(e,t);var n=Su;if(n&&e){var i=He(n).hoistableScripts,s=Lu(e),r=i.get(s);r||((r=n.querySelector(Au(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=_u.get(s))&&Bu(e,t),Ve(r=n.createElement("script")),eu(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}};var Su="undefined"===typeof document?null:document;function Cu(e,t,n){var i=Su;if(i&&"string"===typeof t&&t){var s=ft(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),ku.has(s)||(ku.add(s),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(s)&&(eu(t=i.createElement("link"),"link",e),Ve(t),i.head.appendChild(t)))}}function Pu(e,t,n,i){var s,r,o,l,c=(c=H.current)?ju(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Tu(n.href),(i=(n=He(c).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Tu(n.href);var d=He(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Eu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),_u.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},_u.set(e,n),d||(s=c,r=e,o=n,l=u.state,s.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=s.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),eu(r,"link",o),Ve(r),s.head.appendChild(r))))),t&&null===i)throw Error(a(528,""));return u}if(t&&null!==i)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Lu(n),(i=(n=He(c).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Tu(e){return'href="'+ft(e)+'"'}function Eu(e){return'link[rel="stylesheet"]['+e+"]"}function Mu(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Lu(e){return'[src="'+ft(e)+'"]'}function Au(e){return"script[async]"+e}function Ou(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(i)return t.instance=i,Ve(i),i;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ve(i=(e.ownerDocument||e).createElement("style")),eu(i,"style",s),Ru(i,n.precedence,e),t.instance=i;case"stylesheet":s=Tu(n.href);var r=e.querySelector(Eu(s));if(r)return t.state.loading|=4,t.instance=r,Ve(r),r;i=Mu(n),(s=_u.get(s))&&Du(i,s),Ve(r=(e.ownerDocument||e).createElement("link"));var o=r;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),eu(r,"link",i),t.state.loading|=4,Ru(r,n.precedence,e),t.instance=r;case"script":return r=Lu(n.src),(s=e.querySelector(Au(r)))?(t.instance=s,Ve(s),s):(i=n,(s=_u.get(r))&&Bu(i=h({},n),s),Ve(s=(e=e.ownerDocument||e).createElement("script")),eu(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Ru(i,n.precedence,e));return t.instance}function Ru(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===t)r=o;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Du(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Bu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var zu=null;function Iu(e,t,n){if(null===zu){var i=new Map,s=zu=new Map;s.set(n,i)}else(i=(s=zu).get(n))||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[Ie]||r[Le]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var a=r.getAttribute(t)||"";a=e+a;var o=i.get(a);o?o.push(r):i.set(a,[r])}}return i}function Fu(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Uu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var $u=null;function Wu(){}function Hu(){if(this.count--,0===this.count)if(this.stylesheets)qu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Vu=null;function qu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Vu=new Map,t.forEach(Zu,e),Vu=null,Hu.call(e))}function Zu(e,t){if(!(4&t.state.loading)){var n=Vu.get(e);if(n)var i=n.get(null);else{n=new Map,Vu.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}a=(s=t.instance).getAttribute("data-precedence"),(r=n.get(a)||i)===i&&n.set(null,s),n.set(a,s),this.count++,i=Hu.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Yu={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function Ku(e,t,n,i,s,r,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Gu(e,t,n,i,s,r,a,o,l,c,d,u){return e=new Ku(e,t,n,a,o,l,c,u),t=1,!0===r&&(t|=24),r=Di(3,null,null,t),e.current=r,r.stateNode=e,(t=As()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},nr(r),e}function Ju(e){return e?e=Oi:Oi}function Xu(e,t,n,i,s,r){s=Ju(s),null===i.context?i.context=s:i.pendingContext=s,(i=sr(t)).payload={element:n},null!==(r=void 0===r?null:r)&&(i.callback=r),null!==(n=rr(e,i,t))&&(Dc(n,0,t),ar(n,e,t))}function Qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}function th(e){if(13===e.tag){var t=Mi(e,67108864);null!==t&&Dc(t,0,67108864),eh(e,67108864)}}var nh=!0;function ih(e,t,n,i){var s=O.T;O.T=null;var r=R.p;try{R.p=2,rh(e,t,n,i)}finally{R.p=r,O.T=s}}function sh(e,t,n,i){var s=O.T;O.T=null;var r=R.p;try{R.p=8,rh(e,t,n,i)}finally{R.p=r,O.T=s}}function rh(e,t,n,i){if(nh){var s=ah(i);if(null===s)$d(e,t,i,oh,n),yh(e,i);else if(function(e,t,n,i,s){switch(t){case"focusin":return uh=bh(uh,e,t,n,i,s),!0;case"dragenter":return hh=bh(hh,e,t,n,i,s),!0;case"mouseover":return mh=bh(mh,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return ph.set(r,bh(ph.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,fh.set(r,bh(fh.get(r)||null,e,t,n,i,s)),!0}return!1}(s,e,t,n,i))i.stopPropagation();else if(yh(e,i),4&t&&-1<xh.indexOf(e)){for(;null!==s;){var r=$e(s);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var a=ye(r.pendingLanes);if(0!==a){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-me(a);o.entanglements[1]|=l,a&=~l}_d(r),0===(6&nc)&&(_c=te()+500,kd(0,!1))}}break;case 13:null!==(o=Mi(r,2))&&Dc(o,0,2),Uc(),eh(r,2)}if(null===(r=ah(i))&&$d(e,t,i,oh,n),r===s)break;s=r}null!==s&&i.stopPropagation()}else $d(e,t,i,null,n)}}function ah(e){return lh(e=Mt(e))}var oh=null;function lh(e){if(oh=null,null!==(e=Ue(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ie:return 2;case se:return 8;case re:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var dh=!1,uh=null,hh=null,mh=null,ph=new Map,fh=new Map,gh=[],xh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yh(e,t){switch(e){case"focusin":case"focusout":uh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(t.pointerId)}}function bh(e,t,n,i,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=$e(t))&&th(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function vh(e){var t=Ue(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=R.p;try{return R.p=e,t()}finally{R.p=n}}(e.priority,function(){if(13===n.tag){var e=Oc();e=Pe(e);var t=Mi(n,e);null!==t&&Dc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=$e(n))&&th(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Et=i,n.target.dispatchEvent(i),Et=null,t.shift()}return!0}function _h(e,t,n){wh(e)&&n.delete(t)}function kh(){dh=!1,null!==uh&&wh(uh)&&(uh=null),null!==hh&&wh(hh)&&(hh=null),null!==mh&&wh(mh)&&(mh=null),ph.forEach(_h),fh.forEach(_h)}function jh(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,kh)))}var Nh=null;function Sh(e){Nh!==e&&(Nh=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Nh===e&&(Nh=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if("function"!==typeof i){if(null===lh(i||n))continue;break}var r=$e(n);null!==r&&(e.splice(t,3),t-=3,Ea(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Ch(e){function t(t){return jh(t,e)}null!==uh&&jh(uh,e),null!==hh&&jh(hh,e),null!==mh&&jh(mh,e),ph.forEach(t),fh.forEach(t);for(var n=0;n<gh.length;n++){var i=gh[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)vh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[Ae]||null;if("function"===typeof r)a||Sh(n);else if(a){var o=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[Ae]||null)o=a.formAction;else if(null!==lh(s))continue}else o=a.action;"function"===typeof o?n[i+1]=o:(n.splice(i,3),i-=3),Sh(n)}}}function Ph(e){this._internalRoot=e}function Th(e){this._internalRoot=e}Th.prototype.render=Ph.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Xu(t.current,Oc(),e,t,null,null)},Th.prototype.unmount=Ph.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Xu(e.current,2,null,e,null,null),Uc(),t[Oe]=null}},Th.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ee();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&vh(e)}};var Eh=s.version;if("19.1.1"!==Eh)throw Error(a(527,Eh,"19.1.1"));R.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(null===s)break;var r=s.alternate;if(null===r){if(null!==(i=s.return)){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return d(s),e;if(r===i)return d(s),t;r=r.sibling}throw Error(a(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,i=r;break}if(c===i){o=!0,i=s,n=r;break}c=c.sibling}if(!o){for(c=r.child;c;){if(c===n){o=!0,n=r,i=s;break}if(c===i){o=!0,i=r,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Mh={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{de=Lh.inject(Mh),ue=Lh}catch(Oh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,i="",s=yo,r=bo,l=vo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Gu(e,1,!1,null,0,n,i,s,r,l,0,null),e[Oe]=t.current,Fd(e),new Ph(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var i=!1,s="",r=yo,l=bo,c=vo,d=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(r=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(d=n.formState)),(t=Gu(e,1,!0,t,0,i,s,r,l,c,0,d)).context=Ju(null),n=t.current,(s=sr(i=Pe(i=Oc()))).callback=null,rr(n,s,i),n=i,t.current.lanes=n,Ne(t,n),_d(t),e[Oe]=t.current,Fd(e),new Th(t)},t.version="19.1.1"},24:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},43:(e,t,n)=>{"use strict";e.exports=n(288)},71:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"},210:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(829)),r=i(n(736)),a=n(745);class o{constructor(e){let{headers:t={},schema:n,fetch:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new s.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:i=!1,get:s=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new URL(`${this.url}/rpc/${e}`);let l;i||s?(t=i?"HEAD":"GET",Object.entries(n).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?`{${n.join(",")}}`:`${n}`]}).forEach(e=>{let[t,n]=e;o.searchParams.append(t,n)})):(t="POST",l=n);const c=Object.assign({},this.headers);return a&&(c.Prefer=`count=${a}`),new r.default({method:t,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=o},228:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,i,s;for(n=1,i=arguments.length;n<i;n++)for(t in s=arguments[n])e[t]=s[t];return e}var i=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function s(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var i=n.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)}}var r=0;function a(e){return"_leaflet_id"in e||(e._leaflet_id=++r),e._leaflet_id}function o(e,t,n){var i,s,r,a;return a=function(){i=!1,s&&(r.apply(n,s),s=!1)},r=function(){i?s=arguments:(e.apply(n,arguments),setTimeout(a,t),i=!0)},r}function l(e,t,n){var i=t[1],s=t[0],r=i-s;return e===i&&n?e:((e-s)%r+r)%r+s}function c(){return!1}function d(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function u(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return u(e).split(/\s+/)}function m(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?i(e.options):{}),t)e.options[n]=t[n];return e.options}function p(e,t,n){var i=[];for(var s in e)i.push(encodeURIComponent(n?s.toUpperCase():s)+"="+encodeURIComponent(e[s]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")}var f=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(f,function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"===typeof i&&(i=i(t)),i})}var x=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function v(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var w=0;function _(e){var t=+new Date,n=Math.max(0,16-(t-w));return w=t+n,window.setTimeout(e,n)}var k=window.requestAnimationFrame||v("RequestAnimationFrame")||_,j=window.cancelAnimationFrame||v("CancelAnimationFrame")||v("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function N(e,t,n){if(!n||k!==_)return k.call(window,s(e,t));e.call(t)}function S(e){e&&j.call(window,e)}var C={__proto__:null,extend:n,create:i,bind:s,get lastId(){return r},stamp:a,throttle:o,wrapNum:l,falseFn:c,formatNum:d,trim:u,splitWords:h,setOptions:m,getParamString:p,template:g,isArray:x,indexOf:y,emptyImageUrl:b,requestFn:k,cancelFn:j,requestAnimFrame:N,cancelAnimFrame:S};function P(){}function T(e){if("undefined"!==typeof L&&L&&L.Mixin){e=x(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}P.extend=function(e){var t=function(){m(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},s=t.__super__=this.prototype,r=i(s);for(var a in r.constructor=t,t.prototype=r,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(t[a]=this[a]);return e.statics&&n(t,e.statics),e.includes&&(T(e.includes),n.apply(null,[r].concat(e.includes))),n(r,e),delete r.statics,delete r.includes,r.options&&(r.options=s.options?i(s.options):{},n(r.options,e.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){s.callInitHooks&&s.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=r._initHooks.length;e<t;e++)r._initHooks[e].call(this)}},t},P.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},P.mergeOptions=function(e){return n(this.prototype.options,e),this},P.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var E={on:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t);else for(var s=0,r=(e=h(e)).length;s<r;s++)this._on(e[s],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var i in e)this._off(i,e[i],t);else{e=h(e);for(var s=1===arguments.length,r=0,a=e.length;r<a;r++)s?this._off(e[r]):this._off(e[r],t,n)}else delete this._events;return this},_on:function(e,t,n,i){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var s={fn:t,ctx:n};i&&(s.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(s)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var i,s,r;if(this._events&&(i=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var a=this._listens(e,t,n);if(!1!==a){var o=i[a];this._firingCount&&(o.fn=c,this._events[e]=i=i.slice()),i.splice(a,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(s=0,r=i.length;s<r;s++)i[s].fn=c;delete this._events[e]}},fire:function(e,t,i){if(!this.listens(e,i))return this;var s=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var r=this._events[e];if(r){this._firingCount=this._firingCount+1||1;for(var a=0,o=r.length;a<o;a++){var l=r[a],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,s)}this._firingCount--}}return i&&this._propagateEvent(s),this},listens:function(e,t,n,i){"string"!==typeof e&&console.warn('"string" type argument expected');var s=t;"function"!==typeof t&&(i=!!t,s=void 0,n=void 0);var r=this._events&&this._events[e];if(r&&r.length&&!1!==this._listens(e,s,n))return!0;if(i)for(var a in this._eventParents)if(this._eventParents[a].listens(e,t,n,i))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var i=this._events[e]||[];if(!t)return!!i.length;n===this&&(n=void 0);for(var s=0,r=i.length;s<r;s++)if(i[s].fn===t&&i[s].ctx===n)return s;return!1},once:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t,!0);else for(var s=0,r=(e=h(e)).length;s<r;s++)this._on(e[s],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[a(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[a(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};E.addEventListener=E.on,E.removeEventListener=E.clearAllEventListeners=E.off,E.addOneTimeEventListener=E.once,E.fireEvent=E.fire,E.hasEventListeners=E.listens;var M=P.extend(E);function A(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var O=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function R(e,t,n){return e instanceof A?e:x(e)?new A(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new A(e.x,e.y):new A(e,t,n)}function D(e,t){if(e)for(var n=t?[e,t]:e,i=0,s=n.length;i<s;i++)this.extend(n[i])}function B(e,t){return!e||e instanceof D?e:new D(e,t)}function z(e,t){if(e)for(var n=t?[e,t]:e,i=0,s=n.length;i<s;i++)this.extend(n[i])}function I(e,t){return e instanceof z?e:new z(e,t)}function F(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function U(e,t,n){return e instanceof F?e:x(e)&&"object"!==typeof e[0]?3===e.length?new F(e[0],e[1],e[2]):2===e.length?new F(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new F(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new F(e,t,n)}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(e){return this.clone()._add(R(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(R(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new A(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new A(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(e){var t=(e=R(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=R(e)).x===this.x&&e.y===this.y},contains:function(e){return e=R(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+d(this.x)+", "+d(this.y)+")"}},D.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof A||"number"===typeof e[0]||"x"in e)t=n=R(e);else if(t=(e=B(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return R(this.min.x,this.max.y)},getTopRight:function(){return R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof A?R(e):B(e))instanceof D?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=B(e);var t=this.min,n=this.max,i=e.min,s=e.max,r=s.x>=t.x&&i.x<=n.x,a=s.y>=t.y&&i.y<=n.y;return r&&a},overlaps:function(e){e=B(e);var t=this.min,n=this.max,i=e.min,s=e.max,r=s.x>t.x&&i.x<n.x,a=s.y>t.y&&i.y<n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,i=Math.abs(t.x-n.x)*e,s=Math.abs(t.y-n.y)*e;return B(R(t.x-i,t.y-s),R(n.x+i,n.y+s))},equals:function(e){return!!e&&(e=B(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},z.prototype={extend:function(e){var t,n,i=this._southWest,s=this._northEast;if(e instanceof F)t=e,n=e;else{if(!(e instanceof z))return e?this.extend(U(e)||I(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return i||s?(i.lat=Math.min(t.lat,i.lat),i.lng=Math.min(t.lng,i.lng),s.lat=Math.max(n.lat,s.lat),s.lng=Math.max(n.lng,s.lng)):(this._southWest=new F(t.lat,t.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,s=Math.abs(t.lng-n.lng)*e;return new z(new F(t.lat-i,t.lng-s),new F(n.lat+i,n.lng+s))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof F||"lat"in e?U(e):I(e);var t,n,i=this._southWest,s=this._northEast;return e instanceof z?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=i.lat&&n.lat<=s.lat&&t.lng>=i.lng&&n.lng<=s.lng},intersects:function(e){e=I(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),s=e.getNorthEast(),r=s.lat>=t.lat&&i.lat<=n.lat,a=s.lng>=t.lng&&i.lng<=n.lng;return r&&a},overlaps:function(e){e=I(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),s=e.getNorthEast(),r=s.lat>t.lat&&i.lat<n.lat,a=s.lng>t.lng&&i.lng<n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=I(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(e,t){return!!e&&(e=U(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+d(this.lat,e)+", "+d(this.lng,e)+")"},distanceTo:function(e){return W.distance(this,U(e))},wrap:function(){return W.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return I([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var $={latLngToPoint:function(e,t){var n=this.projection.project(e),i=this.scale(t);return this.transformation._transform(n,i)},pointToLatLng:function(e,t){var n=this.scale(t),i=this.transformation.untransform(e,n);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new D(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new F(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),i=t.lat-n.lat,s=t.lng-n.lng;if(0===i&&0===s)return e;var r=e.getSouthWest(),a=e.getNorthEast();return new z(new F(r.lat-i,r.lng-s),new F(a.lat-i,a.lng-s))}},W=n({},$,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,i=e.lat*n,s=t.lat*n,r=Math.sin((t.lat-e.lat)*n/2),a=Math.sin((t.lng-e.lng)*n/2),o=r*r+Math.cos(i)*Math.cos(s)*a*a,l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return this.R*l}}),H=6378137,V={R:H,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),s=Math.sin(i*t);return new A(this.R*e.lng*t,this.R*Math.log((1+s)/(1-s))/2)},unproject:function(e){var t=180/Math.PI;return new F((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=H*Math.PI;return new D([-e,-e],[e,e])}()};function q(e,t,n,i){if(x(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=i}function Z(e,t,n,i){return new q(e,t,n,i)}q.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new A((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var Y=n({},W,{code:"EPSG:3857",projection:V,transformation:function(){var e=.5/(Math.PI*V.R);return Z(e,.5,-e,.5)}()}),K=n({},Y,{code:"EPSG:900913"});function G(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function J(e,t){var n,i,s,r,a,o,l="";for(n=0,s=e.length;n<s;n++){for(i=0,r=(a=e[n]).length;i<r;i++)l+=(i?"L":"M")+(o=a[i]).x+" "+o.y;l+=t?De.svg?"z":"x":""}return l||"M0 0"}var X=document.documentElement.style,Q="ActiveXObject"in window,ee=Q&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=Re("webkit"),ie=Re("android"),se=Re("android 2")||Re("android 3"),re=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ae=ie&&Re("Google")&&re<537&&!("AudioNode"in window),oe=!!window.opera,le=!te&&Re("chrome"),ce=Re("gecko")&&!ne&&!oe&&!Q,de=!le&&Re("safari"),ue=Re("phantom"),he="OTransition"in X,me=0===navigator.platform.indexOf("Win"),pe=Q&&"transition"in X,fe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!se,ge="MozPerspective"in X,xe=!window.L_DISABLE_3D&&(pe||fe||ge)&&!he&&!ue,ye="undefined"!==typeof orientation||Re("mobile"),be=ye&&ne,ve=ye&&fe,we=!window.PointerEvent&&window.MSPointerEvent,_e=!(!window.PointerEvent&&!we),ke="ontouchstart"in window||!!window.TouchEvent,je=!window.L_NO_TOUCH&&(ke||_e),Ne=ye&&oe,Se=ye&&ce,Ce=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pe=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),Te=!!document.createElement("canvas").getContext,Ee=!(!document.createElementNS||!G("svg").createSVGRect),Me=!!Ee&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Le=!Ee&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Ae=0===navigator.platform.indexOf("Mac"),Oe=0===navigator.platform.indexOf("Linux");function Re(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var De={ie:Q,ielt9:ee,edge:te,webkit:ne,android:ie,android23:se,androidStock:ae,opera:oe,chrome:le,gecko:ce,safari:de,phantom:ue,opera12:he,win:me,ie3d:pe,webkit3d:fe,gecko3d:ge,any3d:xe,mobile:ye,mobileWebkit:be,mobileWebkit3d:ve,msPointer:we,pointer:_e,touch:je,touchNative:ke,mobileOpera:Ne,mobileGecko:Se,retina:Ce,passiveEvents:Pe,canvas:Te,svg:Ee,vml:Le,inlineSvg:Me,mac:Ae,linux:Oe},Be=De.msPointer?"MSPointerDown":"pointerdown",ze=De.msPointer?"MSPointerMove":"pointermove",Ie=De.msPointer?"MSPointerUp":"pointerup",Fe=De.msPointer?"MSPointerCancel":"pointercancel",Ue={touchstart:Be,touchmove:ze,touchend:Ie,touchcancel:Fe},$e={touchstart:Xe,touchmove:Je,touchend:Je,touchcancel:Je},We={},He=!1;function Ve(e,t,n){return"touchstart"===t&&Ge(),$e[t]?(n=$e[t].bind(this,n),e.addEventListener(Ue[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function qe(e,t,n){Ue[t]?e.removeEventListener(Ue[t],n,!1):console.warn("wrong event specified:",t)}function Ze(e){We[e.pointerId]=e}function Ye(e){We[e.pointerId]&&(We[e.pointerId]=e)}function Ke(e){delete We[e.pointerId]}function Ge(){He||(document.addEventListener(Be,Ze,!0),document.addEventListener(ze,Ye,!0),document.addEventListener(Ie,Ke,!0),document.addEventListener(Fe,Ke,!0),He=!0)}function Je(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],We)t.touches.push(We[n]);t.changedTouches=[t],e(t)}}function Xe(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Zt(t),Je(e,t)}function Qe(e){var t,n,i={};for(n in e)t=e[n],i[n]=t&&t.bind?t.bind(e):t;return e=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,i=0;function s(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var s=Kt(e);if(!s.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||s.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var r=Date.now();r-i<=et?2===++n&&t(Qe(e)):n=1,i=r}}}else n=e.detail}return e.addEventListener("click",s),{dblclick:t,simDblclick:s}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var it,st,rt,at,ot,lt=Nt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=Nt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),dt="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function ut(e){return"string"===typeof e?document.getElementById(e):e}function ht(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);n=i?i[t]:null}return"auto"===n?null:n}function mt(e,t,n){var i=document.createElement(e);return i.className=t||"",n&&n.appendChild(i),i}function pt(e){var t=e.parentNode;t&&t.removeChild(e)}function ft(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function xt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function yt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=_t(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function bt(e,t){if(void 0!==e.classList)for(var n=h(t),i=0,s=n.length;i<s;i++)e.classList.add(n[i]);else if(!yt(e,t)){var r=_t(e);wt(e,(r?r+" ":"")+t)}}function vt(e,t){void 0!==e.classList?e.classList.remove(t):wt(e,u((" "+_t(e)+" ").replace(" "+t+" "," ")))}function wt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function _t(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function kt(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&jt(e,t)}function jt(e,t){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch(s){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}function Nt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function St(e,t,n){var i=t||new A(0,0);e.style[lt]=(De.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function Ct(e,t){e._leaflet_pos=t,De.any3d?St(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Pt(e){return e._leaflet_pos||new A(0,0)}if("onselectstart"in document)it=function(){Bt(window,"selectstart",Zt)},st=function(){It(window,"selectstart",Zt)};else{var Tt=Nt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);it=function(){if(Tt){var e=document.documentElement.style;rt=e[Tt],e[Tt]="none"}},st=function(){Tt&&(document.documentElement.style[Tt]=rt,rt=void 0)}}function Et(){Bt(window,"dragstart",Zt)}function Mt(){It(window,"dragstart",Zt)}function Lt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(At(),at=e,ot=e.style.outlineStyle,e.style.outlineStyle="none",Bt(window,"keydown",At))}function At(){at&&(at.style.outlineStyle=ot,at=void 0,ot=void 0,It(window,"keydown",At))}function Ot(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Rt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Dt={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:dt,get:ut,getStyle:ht,create:mt,remove:pt,empty:ft,toFront:gt,toBack:xt,hasClass:yt,addClass:bt,removeClass:vt,setClass:wt,getClass:_t,setOpacity:kt,testProp:Nt,setTransform:St,setPosition:Ct,getPosition:Pt,get disableTextSelection(){return it},get enableTextSelection(){return st},disableImageDrag:Et,enableImageDrag:Mt,preventOutline:Lt,restoreOutline:At,getSizedParentNode:Ot,getScale:Rt};function Bt(e,t,n,i){if(t&&"object"===typeof t)for(var s in t)$t(e,s,t[s],n);else for(var r=0,a=(t=h(t)).length;r<a;r++)$t(e,t[r],n,i);return this}var zt="_leaflet_events";function It(e,t,n,i){if(1===arguments.length)Ft(e),delete e[zt];else if(t&&"object"===typeof t)for(var s in t)Wt(e,s,t[s],n);else if(t=h(t),2===arguments.length)Ft(e,function(e){return-1!==y(t,e)});else for(var r=0,a=t.length;r<a;r++)Wt(e,t[r],n,i);return this}function Ft(e,t){for(var n in e[zt]){var i=n.split(/\d/)[0];t&&!t(i)||Wt(e,i,null,null,n)}}var Ut={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function $t(e,t,n,i){var s=t+a(n)+(i?"_"+a(i):"");if(e[zt]&&e[zt][s])return this;var r=function(t){return n.call(i||e,t||window.event)},o=r;!De.touchNative&&De.pointer&&0===t.indexOf("touch")?r=Ve(e,t,r):De.touch&&"dblclick"===t?r=tt(e,r):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Ut[t]||t,r,!!De.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(r=function(t){t=t||window.event,Qt(e,t)&&o(t)},e.addEventListener(Ut[t],r,!1)):e.addEventListener(t,o,!1):e.attachEvent("on"+t,r),e[zt]=e[zt]||{},e[zt][s]=r}function Wt(e,t,n,i,s){s=s||t+a(n)+(i?"_"+a(i):"");var r=e[zt]&&e[zt][s];if(!r)return this;!De.touchNative&&De.pointer&&0===t.indexOf("touch")?qe(e,t,r):De.touch&&"dblclick"===t?nt(e,r):"removeEventListener"in e?e.removeEventListener(Ut[t]||t,r,!1):e.detachEvent("on"+t,r),e[zt][s]=null}function Ht(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Vt(e){return $t(e,"wheel",Ht),this}function qt(e){return Bt(e,"mousedown touchstart dblclick contextmenu",Ht),e._leaflet_disable_click=!0,this}function Zt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Yt(e){return Zt(e),Ht(e),this}function Kt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Gt(e,t){if(!t)return new A(e.clientX,e.clientY);var n=Rt(t),i=n.boundingClientRect;return new A((e.clientX-i.left)/n.x-t.clientLeft,(e.clientY-i.top)/n.y-t.clientTop)}var Jt=De.linux&&De.chrome?window.devicePixelRatio:De.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xt(e){return De.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Jt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Qt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(i){return!1}return n!==e}var en={__proto__:null,on:Bt,off:It,stopPropagation:Ht,disableScrollPropagation:Vt,disableClickPropagation:qt,preventDefault:Zt,stop:Yt,getPropagationPath:Kt,getMousePosition:Gt,getWheelDelta:Xt,isExternalTarget:Qt,addListener:Bt,removeListener:It},tn=M.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=Pt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=N(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Ct(this._el,n),this.fire("step")},_complete:function(){S(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=M.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=m(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(U(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&De.any3d&&!De.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Bt(this._proxy,dt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(U(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,i.pan&&i.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var i=this.getZoomScale(t),s=this.getSize().divideBy(2),r=(e instanceof A?e:this.latLngToContainerPoint(e)).subtract(s).multiplyBy(1-1/i),a=this.containerPointToLatLng(s.add(r));return this.setView(a,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():I(e);var n=R(t.paddingTopLeft||t.padding||[0,0]),i=R(t.paddingBottomRight||t.padding||[0,0]),s=this.getBoundsZoom(e,!1,n.add(i));if((s="number"===typeof t.maxZoom?Math.min(t.maxZoom,s):s)===1/0)return{center:e.getCenter(),zoom:s};var r=i.subtract(n).divideBy(2),a=this.project(e.getSouthWest(),s),o=this.project(e.getNorthEast(),s);return{center:this.unproject(a.add(o).divideBy(2).add(r),s),zoom:s}},fitBounds:function(e,t){if(!(e=I(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=R(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){bt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!De.any3d)return this.setView(e,t,n);this._stop();var i=this.project(this.getCenter()),s=this.project(e),r=this.getSize(),a=this._zoom;e=U(e),t=void 0===t?a:t;var o=Math.max(r.x,r.y),l=o*this.getZoomScale(a,t),c=s.distanceTo(i)||1,d=1.42,u=d*d;function h(e){var t=(l*l-o*o+(e?-1:1)*u*u*c*c)/(2*(e?l:o)*u*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function m(e){return(Math.exp(e)-Math.exp(-e))/2}function p(e){return(Math.exp(e)+Math.exp(-e))/2}function f(e){return m(e)/p(e)}var g=h(0);function x(e){return o*(p(g)/p(g+d*e))}function y(e){return o*(p(g)*f(g+d*e)-m(g))/u}function b(e){return 1-Math.pow(1-e,1.5)}var v=Date.now(),w=(h(1)-g)/d,_=n.duration?1e3*n.duration:1e3*w*.8;function k(){var n=(Date.now()-v)/_,r=b(n)*w;n<=1?(this._flyToFrame=N(k,this),this._move(this.unproject(i.add(s.subtract(i).multiplyBy(y(r)/c)),a),this.getScaleZoom(o/x(r),a),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),k.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=I(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,I(e));return n.equals(i)||this.panTo(i,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=R((t=t||{}).paddingTopLeft||t.padding||[0,0]),i=R(t.paddingBottomRight||t.padding||[0,0]),s=this.project(this.getCenter()),r=this.project(e),a=this.getPixelBounds(),o=B([a.min.add(n),a.max.subtract(i)]),l=o.getSize();if(!o.contains(r)){this._enforcingBounds=!0;var c=r.subtract(o.getCenter()),d=o.extend(r).getSize().subtract(l);s.x+=c.x<0?-d.x:d.x,s.y+=c.y<0?-d.y:d.y,this.panTo(this.unproject(s),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),r=t.divideBy(2).round(),a=i.divideBy(2).round(),o=r.subtract(a);return o.x||o.y?(e.animate&&e.pan?this.panBy(o):(e.pan&&this._rawPanBy(o),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=s(this._handleGeolocationResponse,this),i=s(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new F(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),i=this._locateOptions;if(i.setView){var s=this.getBoundsZoom(n);this.setView(t,i.maxZoom?Math.min(s,i.maxZoom):s)}var r={latlng:t,bounds:n,timestamp:e.timestamp};for(var a in e.coords)"number"===typeof e.coords[a]&&(r[a]=e.coords[a]);this.fire("locationfound",r)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(S(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)pt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=mt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new z(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=I(e),n=R(n||[0,0]);var i=this.getZoom()||0,s=this.getMinZoom(),r=this.getMaxZoom(),a=e.getNorthWest(),o=e.getSouthEast(),l=this.getSize().subtract(n),c=B(this.project(o,i),this.project(a,i)).getSize(),d=De.any3d?this.options.zoomSnap:1,u=l.x/c.x,h=l.y/c.y,m=t?Math.max(u,h):Math.min(u,h);return i=this.getScaleZoom(m,i),d&&(i=Math.round(i/(d/100))*(d/100),i=t?Math.ceil(i/d)*d:Math.floor(i/d)*d),Math.max(s,Math.min(r,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new A(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new D(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var i=n.zoom(e*n.scale(t));return isNaN(i)?1/0:i},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(U(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(R(e),t)},layerPointToLatLng:function(e){var t=R(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(U(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(U(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(I(e))},distance:function(e,t){return this.options.crs.distance(U(e),U(t))},containerPointToLayerPoint:function(e){return R(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return R(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(R(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(e)))},mouseEventToContainerPoint:function(e){return Gt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=ut(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Bt(t,"scroll",this._onScroll,this),this._containerId=a(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&De.any3d,bt(e,"leaflet-container"+(De.touch?" leaflet-touch":"")+(De.retina?" leaflet-retina":"")+(De.ielt9?" leaflet-oldie":"")+(De.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ht(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ct(this._mapPane,new A(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bt(e.markerPane,"leaflet-zoom-hide"),bt(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){Ct(this._mapPane,new A(0,0));var i=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var s=this._zoom!==t;this._moveStart(s,n)._move(e,t)._moveEnd(s),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,i){void 0===t&&(t=this._zoom);var s=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),i?n&&n.pinch&&this.fire("zoom",n):((s||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ct(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[a(this._container)]=this;var t=e?It:Bt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),De.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){S(this._resizeRequest),this._resizeRequest=N(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,i=[],s="mouseout"===t||"mouseover"===t,r=e.target||e.srcElement,o=!1;r;){if((n=this._targets[a(r)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){o=!0;break}if(n&&n.listens(t,!0)){if(s&&!Qt(r,e))break;if(i.push(n),s)break}if(r===this._container)break;r=r.parentNode}return i.length||o||s||!this.listens(t,!0)||(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Lt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if("click"===e.type){var s=n({},e);s.type="preclick",this._fireDOMEvent(s,s.type,i)}var r=this._findEventTargets(e,t);if(i){for(var a=[],o=0;o<i.length;o++)i[o].listens(t,!0)&&a.push(i[o]);r=a.concat(r)}if(r.length){"contextmenu"===t&&Zt(e);var l=r[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var d=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=d?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=d?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(o=0;o<r.length;o++)if(r[o].fire(t,c,!0),c.originalEvent._stopped||!1===r[o].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Pt(this._mapPane)||new A(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(i)},_latLngBoundsToNewLayerBounds:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return B([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var i=this.project(e,t),s=this.getSize().divideBy(2),r=new D(i.subtract(s),i.add(s)),a=this._getBoundsOffset(r,n,t);return Math.abs(a.x)<=1&&Math.abs(a.y)<=1?e:this.unproject(i.add(a),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),i=new D(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,n){var i=B(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),s=i.min.subtract(e.min),r=i.max.subtract(e.max);return new A(this._rebound(s.x,-r.x),this._rebound(s.y,-r.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),i=De.any3d?this.options.zoomSnap:1;return i&&(e=Math.round(e/i)*i),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){vt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=mt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];St(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();St(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),s=this._getCenterOffset(e)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(s))&&(N(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,bt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&vt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function sn(e,t){return new nn(e,t)}var rn=P.extend({options:{position:"topright"},initialize:function(e){m(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return bt(t,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),an=function(e){return new rn(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=mt("div",t+"control-container",this._container);function i(i,s){var r=t+i+" "+t+s;e[i+s]=mt("div",r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)pt(this._controlCorners[e]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var on=rn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,i){return n<i?-1:i<n?1:0}},initialize:function(e,t,n){for(var i in m(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return rn.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(a(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){bt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(bt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):vt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return vt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=mt("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),qt(t),Vt(t);var i=this._section=mt("section",e+"-list");n&&(this._map.on("click",this.collapse,this),Bt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var s=this._layersLink=mt("a",e+"-toggle",t);s.href="#",s.title="Layers",s.setAttribute("role","button"),Bt(s,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Zt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=mt("div",e+"-base",i),this._separator=mt("div",e+"-separator",i),this._overlaysList=mt("div",e+"-overlays",i),t.appendChild(i)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&a(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(s(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ft(this._baseLayersList),ft(this._overlaysList),this._layerControlInputs=[];var e,t,n,i,s=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),t=t||i.overlay,e=e||!i.overlay,s+=i.overlay?0:1;return this.options.hideSingleBase&&(e=e&&s>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(a(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(e){var t,n=document.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=i):t=this._createRadioElement("leaflet-base-layers_"+a(this),i),this._layerControlInputs.push(t),t.layerId=a(e.layer),Bt(t,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+e.name;var r=document.createElement("span");return n.appendChild(r),r.appendChild(t),r.appendChild(s),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,i=[],s=[];this._handlingClick=!0;for(var r=n.length-1;r>=0;r--)e=n[r],t=this._getLayer(e.layerId).layer,e.checked?i.push(t):e.checked||s.push(t);for(r=0;r<s.length;r++)this._map.hasLayer(s[r])&&this._map.removeLayer(s[r]);for(r=0;r<i.length;r++)this._map.hasLayer(i[r])||this._map.addLayer(i[r]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,i=this._map.getZoom(),s=n.length-1;s>=0;s--)e=n[s],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&i<t.options.minZoom||void 0!==t.options.maxZoom&&i>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Bt(e,"click",Zt),this.expand();var t=this;setTimeout(function(){It(e,"click",Zt),t._preventClick=!1})}}),ln=function(e,t,n){return new on(e,t,n)},cn=rn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=mt("div",t+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,i,s){var r=mt("a",n,i);return r.innerHTML=e,r.href="#",r.title=t,r.setAttribute("role","button"),r.setAttribute("aria-label",t),qt(r),Bt(r,"click",Yt),Bt(r,"click",s,this),Bt(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";vt(this._zoomInButton,t),vt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(bt(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(bt(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var dn=function(e){return new cn(e)},un=rn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=mt("div",t),i=this.options;return this._addScales(i,t+"-line",n),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=mt("div",t,n)),e.imperial&&(this._iScale=mt("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,i,s=3.2808399*e;s>5280?(t=s/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(i=this._getRoundNum(s),this._updateScale(this._iScale,i+" ft",i/s))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),hn=function(e){return new un(e)},mn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pn=rn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(De.inlineSvg?mn+" ":"")+"Leaflet</a>"},initialize:function(e){m(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=mt("div","leaflet-control-attribution"),qt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new pn).addTo(this)});var fn=function(e){return new pn(e)};rn.Layers=on,rn.Zoom=cn,rn.Scale=un,rn.Attribution=pn,an.layers=ln,an.zoom=dn,an.scale=hn,an.attribution=fn;var gn=P.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var xn={Events:E},yn=De.touch?"touchstart mousedown":"mousedown",bn=M.extend({options:{clickTolerance:3},initialize:function(e,t,n,i){m(this,i),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Bt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(bn._dragging===this&&this.finishDrag(!0),It(this._dragStartTarget,yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!yt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)bn._dragging===this&&this.finishDrag();else if(!(bn._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(bn._dragging=this,this._preventOutline&&Lt(this._element),Et(),it(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=Ot(this._element);this._startPoint=new A(t.clientX,t.clientY),this._startPos=Pt(this._element),this._parentScale=Rt(n);var i="mousedown"===e.type;Bt(document,i?"mousemove":"touchmove",this._onMove,this),Bt(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new A(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Zt(e),this._moved||(this.fire("dragstart"),this._moved=!0,bt(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ct(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){vt(document.body,"leaflet-dragging"),this._lastTarget&&(vt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),It(document,"mousemove touchmove",this._onMove,this),It(document,"mouseup touchend touchcancel",this._onUp,this),Mt(),st();var t=this._moved&&this._moving;this._moving=!1,bn._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function vn(e,t,n){var i,s,r,a,o,l,c,d,u,h=[1,4,2,8];for(s=0,c=e.length;s<c;s++)e[s]._code=An(e[s],t);for(a=0;a<4;a++){for(d=h[a],i=[],s=0,r=(c=e.length)-1;s<c;r=s++)o=e[s],l=e[r],o._code&d?l._code&d||((u=Ln(l,o,d,t,n))._code=An(u,t),i.push(u)):(l._code&d&&((u=Ln(l,o,d,t,n))._code=An(u,t),i.push(u)),i.push(o));e=i}return e}function wn(e,t){var n,i,s,r,a,o,l,c,d;if(!e||0===e.length)throw new Error("latlngs not passed");Dn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=U([0,0]),h=I(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(u=_n(e));var m=e.length,p=[];for(n=0;n<m;n++){var f=U(e[n]);p.push(t.project(U([f.lat-u.lat,f.lng-u.lng])))}for(o=l=c=0,n=0,i=m-1;n<m;i=n++)s=p[n],r=p[i],a=s.y*r.x-r.y*s.x,l+=(s.x+r.x)*a,c+=(s.y+r.y)*a,o+=3*a;d=0===o?p[0]:[l/o,c/o];var g=t.unproject(R(d));return U([g.lat+u.lat,g.lng+u.lng])}function _n(e){for(var t=0,n=0,i=0,s=0;s<e.length;s++){var r=U(e[s]);t+=r.lat,n+=r.lng,i++}return U([t/i,n/i])}var kn,jn={__proto__:null,clipPolygon:vn,polygonCenter:wn,centroid:_n};function Nn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Pn(e=En(e,n),n)}function Sn(e,t,n){return Math.sqrt(Rn(e,t,n,!0))}function Cn(e,t,n){return Rn(e,t,n)}function Pn(e,t){var n=e.length,i=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,Tn(e,i,t,0,n-1);var s,r=[];for(s=0;s<n;s++)i[s]&&r.push(e[s]);return r}function Tn(e,t,n,i,s){var r,a,o,l=0;for(a=i+1;a<=s-1;a++)(o=Rn(e[a],e[i],e[s],!0))>l&&(r=a,l=o);l>n&&(t[r]=1,Tn(e,t,n,i,r),Tn(e,t,n,r,s))}function En(e,t){for(var n=[e[0]],i=1,s=0,r=e.length;i<r;i++)On(e[i],e[s])>t&&(n.push(e[i]),s=i);return s<r-1&&n.push(e[r-1]),n}function Mn(e,t,n,i,s){var r,a,o,l=i?kn:An(e,n),c=An(t,n);for(kn=c;;){if(!(l|c))return[e,t];if(l&c)return!1;o=An(a=Ln(e,t,r=l||c,n,s),n),r===l?(e=a,l=o):(t=a,c=o)}}function Ln(e,t,n,i,s){var r,a,o=t.x-e.x,l=t.y-e.y,c=i.min,d=i.max;return 8&n?(r=e.x+o*(d.y-e.y)/l,a=d.y):4&n?(r=e.x+o*(c.y-e.y)/l,a=c.y):2&n?(r=d.x,a=e.y+l*(d.x-e.x)/o):1&n&&(r=c.x,a=e.y+l*(c.x-e.x)/o),new A(r,a,s)}function An(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function On(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function Rn(e,t,n,i){var s,r=t.x,a=t.y,o=n.x-r,l=n.y-a,c=o*o+l*l;return c>0&&((s=((e.x-r)*o+(e.y-a)*l)/c)>1?(r=n.x,a=n.y):s>0&&(r+=o*s,a+=l*s)),o=e.x-r,l=e.y-a,i?o*o+l*l:new A(r,a)}function Dn(e){return!x(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function Bn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Dn(e)}function zn(e,t){var n,i,s,r,a,o,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");Dn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var d=U([0,0]),u=I(e);u.getNorthWest().distanceTo(u.getSouthWest())*u.getNorthEast().distanceTo(u.getNorthWest())<1700&&(d=_n(e));var h=e.length,m=[];for(n=0;n<h;n++){var p=U(e[n]);m.push(t.project(U([p.lat-d.lat,p.lng-d.lng])))}for(n=0,i=0;n<h-1;n++)i+=m[n].distanceTo(m[n+1])/2;if(0===i)c=m[0];else for(n=0,r=0;n<h-1;n++)if(a=m[n],o=m[n+1],(r+=s=a.distanceTo(o))>i){l=(r-i)/s,c=[o.x-l*(o.x-a.x),o.y-l*(o.y-a.y)];break}var f=t.unproject(R(c));return U([f.lat+d.lat,f.lng+d.lng])}var In={__proto__:null,simplify:Nn,pointToSegmentDistance:Sn,closestPointOnSegment:Cn,clipSegment:Mn,_getEdgeIntersection:Ln,_getBitCode:An,_sqClosestPointOnSegment:Rn,isFlat:Dn,_flat:Bn,polylineCenter:zn},Fn={project:function(e){return new A(e.lng,e.lat)},unproject:function(e){return new F(e.y,e.x)},bounds:new D([-180,-90],[180,90])},Un={R:6378137,R_MINOR:6356752.314245179,bounds:new D([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,i=e.lat*t,s=this.R_MINOR/n,r=Math.sqrt(1-s*s),a=r*Math.sin(i),o=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),r/2);return i=-n*Math.log(Math.max(o,1e-10)),new A(e.lng*t*n,i)},unproject:function(e){for(var t,n=180/Math.PI,i=this.R,s=this.R_MINOR/i,r=Math.sqrt(1-s*s),a=Math.exp(-e.y/i),o=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=r*Math.sin(o),t=Math.pow((1-t)/(1+t),r/2),o+=c=Math.PI/2-2*Math.atan(a*t)-o;return new F(o*n,e.x*n/i)}},$n={__proto__:null,LonLat:Fn,Mercator:Un,SphericalMercator:V},Wn=n({},W,{code:"EPSG:3395",projection:Un,transformation:function(){var e=.5/(Math.PI*Un.R);return Z(e,.5,-e,.5)}()}),Hn=n({},W,{code:"EPSG:4326",projection:Fn,transformation:Z(1/180,1,-1/180,.5)}),Vn=n({},$,{projection:Fn,transformation:Z(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,i=t.lat-e.lat;return Math.sqrt(n*n+i*i)},infinite:!0});$.Earth=W,$.EPSG3395=Wn,$.EPSG3857=Y,$.EPSG900913=K,$.EPSG4326=Hn,$.Simple=Vn;var qn=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[a(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[a(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=a(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=a(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return a(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?x(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[a(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=a(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var s=this._zoomBoundLayers[i].options;e=void 0===s.minZoom?e:Math.min(e,s.minZoom),t=void 0===s.maxZoom?t:Math.max(t,s.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Zn=qn.extend({initialize:function(e,t){var n,i;if(m(this,t),this._layers={},e)for(n=0,i=e.length;n<i;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,i=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,i);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return a(e)}}),Yn=function(e,t){return new Zn(e,t)},Kn=Zn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Zn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Zn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new z;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Gn=function(e,t){return new Kn(e,t)},Jn=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){m(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(i,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(e,t){var n=this.options,i=n[t+"Size"];"number"===typeof i&&(i=[i,i]);var s=R(i),r=R("shadow"===t&&n.shadowAnchor||n.iconAnchor||s&&s.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),r&&(e.style.marginLeft=-r.x+"px",e.style.marginTop=-r.y+"px"),s&&(e.style.width=s.x+"px",e.style.height=s.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return De.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Xn(e){return new Jn(e)}var Qn=Jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof Qn.imagePath&&(Qn.imagePath=this._detectIconPath()),(this.options.imagePath||Qn.imagePath)+Jn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var i=t.exec(e);return i&&i[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=mt("div","leaflet-default-icon-path",document.body),t=ht(e,"background-image")||ht(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),ei=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new bn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bt(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&vt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,i=this._marker.options.autoPanSpeed,s=this._marker.options.autoPanPadding,r=Pt(t._icon),a=n.getPixelBounds(),o=n.getPixelOrigin(),l=B(a.min._subtract(o).add(s),a.max._subtract(o).subtract(s));if(!l.contains(r)){var c=R((Math.max(l.max.x,r.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(i);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Ct(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=N(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(S(this._panRequest),this._panRequest=N(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,i=Pt(t._icon),s=t._map.layerPointToLatLng(i);n&&Ct(n,i),t._latlng=s,e.latlng=s,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){S(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ti=qn.extend({options:{icon:new Qn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){m(this,t),this._latlng=U(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=U(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),bt(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(n,"focus",this._panOnFocus,this);var s=e.icon.createShadow(this._shadow),r=!1;s!==this._shadow&&(this._removeShadow(),r=!0),s&&(bt(s,t),s.alt=""),this._shadow=s,e.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),s&&r&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&It(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ct(this._icon,e),this._shadow&&Ct(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(bt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ei)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ei(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&kt(this._icon,e),this._shadow&&kt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?R(t.iconSize):R(0,0),i=t.iconAnchor?R(t.iconAnchor):R(0,0);e.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ni(e,t){return new ti(e,t)}var ii=qn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return m(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),si=ii.extend({options:{fill:!0,radius:10},initialize:function(e,t){m(this,t),this._latlng=U(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=U(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return ii.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),i=[e+n,t+n];this._pxBounds=new D(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ri(e,t){return new si(e,t)}var ai=si.extend({initialize:function(e,t,i){if("number"===typeof t&&(t=n({},i,{radius:t})),m(this,t),this._latlng=U(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new z(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:ii.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===W.distance){var s=Math.PI/180,r=this._mRadius/W.R/s,a=n.project([t+r,e]),o=n.project([t-r,e]),l=a.add(o).divideBy(2),c=n.unproject(l).lat,d=Math.acos((Math.cos(r*s)-Math.sin(t*s)*Math.sin(c*s))/(Math.cos(t*s)*Math.cos(c*s)))/s;(isNaN(d)||0===d)&&(d=r/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(d)?0:l.x-n.project([c,e-d]).x,this._radiusY=l.y-a.y}else{var u=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(u).x}this._updateBounds()}});function oi(e,t,n){return new ai(e,t,n)}var li=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){m(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,i=1/0,s=null,r=Rn,a=0,o=this._parts.length;a<o;a++)for(var l=this._parts[a],c=1,d=l.length;c<d;c++){var u=r(e,t=l[c-1],n=l[c],!0);u<i&&(i=u,s=r(e,t,n))}return s&&(s.distance=Math.sqrt(i)),s},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=U(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new z,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Dn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Dn(e),i=0,s=e.length;i<s;i++)n?(t[i]=U(e[i]),this._bounds.extend(t[i])):t[i]=this._convertLatLngs(e[i]);return t},_project:function(){var e=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new A(e,e);this._rawPxBounds&&(this._pxBounds=new D([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var i,s,r=e[0]instanceof F,a=e.length;if(r){for(s=[],i=0;i<a;i++)s[i]=this._map.latLngToLayerPoint(e[i]),n.extend(s[i]);t.push(s)}else for(i=0;i<a;i++)this._projectLatlngs(e[i],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,i,s,r,a,o,l=this._parts;for(t=0,i=0,s=this._rings.length;t<s;t++)for(n=0,r=(o=this._rings[t]).length;n<r-1;n++)(a=Mn(o[n],o[n+1],e,n,!0))&&(l[i]=l[i]||[],l[i].push(a[0]),a[1]===o[n+1]&&n!==r-2||(l[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,i=e.length;n<i;n++)e[n]=Nn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,i,s,r,a,o,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,r=this._parts.length;n<r;n++)for(i=0,s=(a=(o=this._parts[n]).length)-1;i<a;s=i++)if((t||0!==i)&&Sn(e,o[s],o[i])<=l)return!0;return!1}});function ci(e,t){return new li(e,t)}li._flat=Bn;var di=li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=li.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof F&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){li.prototype._setLatLngs.call(this,e),Dn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Dn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new A(t,t);if(e=new D(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var i,s=0,r=this._rings.length;s<r;s++)(i=vn(this._rings[s],e,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,i,s,r,a,o,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(s=0,o=this._parts.length;s<o;s++)for(r=0,a=(l=(t=this._parts[s]).length)-1;r<l;a=r++)n=t[r],i=t[a],n.y>e.y!==i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||li.prototype._containsPoint.call(this,e,!0)}});function ui(e,t){return new di(e,t)}var hi=Kn.extend({initialize:function(e,t){m(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,i,s=x(e)?e:e.features;if(s){for(t=0,n=s.length;t<n;t++)((i=s[t]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var r=this.options;if(r.filter&&!r.filter(e))return this;var a=mi(e,r);return a?(a.feature=vi(e),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(e,a),this.addLayer(a)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function mi(e,t){var n,i,s,r,a="Feature"===e.type?e.geometry:e,o=a?a.coordinates:null,l=[],c=t&&t.pointToLayer,d=t&&t.coordsToLatLng||fi;if(!o&&!a)return null;switch(a.type){case"Point":return pi(c,e,n=d(o),t);case"MultiPoint":for(s=0,r=o.length;s<r;s++)n=d(o[s]),l.push(pi(c,e,n,t));return new Kn(l);case"LineString":case"MultiLineString":return i=gi(o,"LineString"===a.type?0:1,d),new li(i,t);case"Polygon":case"MultiPolygon":return i=gi(o,"Polygon"===a.type?1:2,d),new di(i,t);case"GeometryCollection":for(s=0,r=a.geometries.length;s<r;s++){var u=mi({geometry:a.geometries[s],type:"Feature",properties:e.properties},t);u&&l.push(u)}return new Kn(l);case"FeatureCollection":for(s=0,r=a.features.length;s<r;s++){var h=mi(a.features[s],t);h&&l.push(h)}return new Kn(l);default:throw new Error("Invalid GeoJSON object.")}}function pi(e,t,n,i){return e?e(t,n):new ti(n,i&&i.markersInheritOptions&&i)}function fi(e){return new F(e[1],e[0],e[2])}function gi(e,t,n){for(var i,s=[],r=0,a=e.length;r<a;r++)i=t?gi(e[r],t-1,n):(n||fi)(e[r]),s.push(i);return s}function xi(e,t){return void 0!==(e=U(e)).alt?[d(e.lng,t),d(e.lat,t),d(e.alt,t)]:[d(e.lng,t),d(e.lat,t)]}function yi(e,t,n,i){for(var s=[],r=0,a=e.length;r<a;r++)s.push(t?yi(e[r],Dn(e[r])?0:t-1,n,i):xi(e[r],i));return!t&&n&&s.length>0&&s.push(s[0].slice()),s}function bi(e,t){return e.feature?n({},e.feature,{geometry:t}):vi(t)}function vi(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var wi={toGeoJSON:function(e){return bi(this,{type:"Point",coordinates:xi(this.getLatLng(),e)})}};function _i(e,t){return new hi(e,t)}ti.include(wi),ai.include(wi),si.include(wi),li.include({toGeoJSON:function(e){var t=!Dn(this._latlngs);return bi(this,{type:(t?"Multi":"")+"LineString",coordinates:yi(this._latlngs,t?1:0,!1,e)})}}),di.include({toGeoJSON:function(e){var t=!Dn(this._latlngs),n=t&&!Dn(this._latlngs[0]),i=yi(this._latlngs,n?2:t?1:0,!0,e);return t||(i=[i]),bi(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Zn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),bi(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var s=t.toGeoJSON(e);if(n)i.push(s.geometry);else{var r=vi(s);"FeatureCollection"===r.type?i.push.apply(i,r.features):i.push(r)}}}),n?bi(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var ki=_i,ji=qn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=I(t),m(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&xt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=I(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:mt("img");bt(t,"leaflet-image-layer"),this._zoomAnimated&&bt(t,"leaflet-zoom-animated"),this.options.className&&bt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=s(this.fire,this,"load"),t.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;St(this._image,n,t)},_reset:function(){var e=this._image,t=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Ct(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Ni=function(e,t,n){return new ji(e,t,n)},Si=ji.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:mt("video");if(bt(t,"leaflet-image-layer"),this._zoomAnimated&&bt(t,"leaflet-zoom-animated"),this.options.className&&bt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=s(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),i=[],r=0;r<n.length;r++)i.push(n[r].src);this._url=n.length>0?i:[t.src]}else{x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var a=0;a<this._url.length;a++){var o=mt("source");o.src=this._url[a],t.appendChild(o)}}}});function Ci(e,t,n){return new Si(e,t,n)}var Pi=ji.extend({_initImage:function(){var e=this._image=this._url;bt(e,"leaflet-image-layer"),this._zoomAnimated&&bt(e,"leaflet-zoom-animated"),this.options.className&&bt(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Ti(e,t,n){return new Pi(e,t,n)}var Ei=qn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof F||x(e))?(this._latlng=U(e),m(this,t)):(m(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&kt(this._container,1),this.bringToFront(),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(kt(this._container,0),this._removeTimeout=setTimeout(s(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(vt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=U(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&xt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Kn){t=null;var n=this._source._layers;for(var i in n)if(n[i]._map){t=n[i];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=R(this.options.offset),n=this._getAnchor();this._zoomAnimated?Ct(this._container,e.add(n)):t=t.add(e).add(n);var i=this._containerBottom=-t.y,s=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=i+"px",this._container.style.left=s+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,i){var s=t;return s instanceof e||(s=new e(i).setContent(t)),n&&s.setLatLng(n),s}}),qn.include({_initOverlay:function(e,t,n,i){var s=n;return s instanceof e?(m(s,i),s._source=this):(s=t&&!i?t:new e(i,this)).setContent(n),s}});var Mi=Ei.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Ei.prototype.openOn.call(this,e)},onAdd:function(e){Ei.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",Ht))},onRemove:function(e){Ei.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",Ht))},getEvents:function(){var e=Ei.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=mt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=mt("div",e+"-content-wrapper",t);if(this._contentNode=mt("div",e+"-content",n),qt(t),Vt(this._contentNode),Bt(t,"contextmenu",Ht),this._tipContainer=mt("div",e+"-tip-container",t),this._tip=mt("div",e+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=mt("a",e+"-close-button",t);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',Bt(i,"click",function(e){Zt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,s=this.options.maxHeight,r="leaflet-popup-scrolled";s&&i>s?(t.height=s+"px",bt(e,r)):vt(e,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Ct(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(ht(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,i=this._containerWidth,s=new A(this._containerLeft,-n-this._containerBottom);s._add(Pt(this._container));var r=e.layerPointToContainerPoint(s),a=R(this.options.autoPanPadding),o=R(this.options.autoPanPaddingTopLeft||a),l=R(this.options.autoPanPaddingBottomRight||a),c=e.getSize(),d=0,u=0;r.x+i+l.x>c.x&&(d=r.x+i-c.x+l.x),r.x-d-o.x<0&&(d=r.x-o.x),r.y+n+l.y>c.y&&(u=r.y+n-c.y+l.y),r.y-u-o.y<0&&(u=r.y-o.y),(d||u)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([d,u]))}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Li=function(e,t){return new Mi(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Mi,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),qn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Mi,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Kn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Yt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof ii?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Ai=Ei.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Ei.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Ei.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Ei.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=mt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,i=this._map,s=this._container,r=i.latLngToContainerPoint(i.getCenter()),a=i.layerPointToContainerPoint(e),o=this.options.direction,l=s.offsetWidth,c=s.offsetHeight,d=R(this.options.offset),u=this._getAnchor();"top"===o?(t=l/2,n=c):"bottom"===o?(t=l/2,n=0):"center"===o?(t=l/2,n=c/2):"right"===o?(t=0,n=c/2):"left"===o?(t=l,n=c/2):a.x<r.x?(o="right",t=0,n=c/2):(o="left",t=l+2*(d.x+u.x),n=c/2),e=e.subtract(R(t,n,!0)).add(d).add(u),vt(s,"leaflet-tooltip-right"),vt(s,"leaflet-tooltip-left"),vt(s,"leaflet-tooltip-top"),vt(s,"leaflet-tooltip-bottom"),bt(s,"leaflet-tooltip-"+o),Ct(s,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&kt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Oi=function(e,t){return new Ai(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Ai,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),qn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ai,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Kn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(Bt(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Bt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,i=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Ri=Jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ft(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=R(n.bgPos);t.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Di(e){return new Ri(e)}Jn.Default=Qn;var Bi=qn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:De.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){m(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),pt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof A?e:new A(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,i=-e(-1/0,1/0),s=0,r=n.length;s<r;s++)t=n[s].style.zIndex,n[s]!==this._container&&t&&(i=e(i,+t));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!De.ielt9){kt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var i in this._tiles){var s=this._tiles[i];if(s.current&&s.loaded){var r=Math.min(1,(e-s.loaded)/200);kt(s.el,r),r<1?t=!0:(s.active?n=!0:this._onOpaqueTile(s),s.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(S(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=mt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(pt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[e],s=this._map;return i||((i=this._levels[e]={}).el=mt("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=t,i.origin=s.project(s.unproject(s.getPixelOrigin()),e).round(),i.zoom=e,this._setZoomTransform(i,s.getCenter(),s.getZoom()),c(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var i=t.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)pt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,i){var s=Math.floor(e/2),r=Math.floor(t/2),a=n-1,o=new A(+s,+r);o.z=+a;var l=this._tileCoordsToKey(o),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>i&&this._retainParent(s,r,a,i))},_retainChildren:function(e,t,n,i){for(var s=2*e;s<2*e+2;s++)for(var r=2*t;r<2*t+2;r++){var a=new A(s,r);a.z=n+1;var o=this._tileCoordsToKey(a),l=this._tiles[o];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(s,r,n+1,i))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,i){var s=Math.round(t);s=void 0!==this.options.maxZoom&&s>this.options.maxZoom||void 0!==this.options.minZoom&&s<this.options.minZoom?void 0:this._clampZoom(s);var r=this.options.updateWhenZooming&&s!==this._tileZoom;i&&!r||(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==s&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var i=this._map.getZoomScale(n,e.zoom),s=e.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(t,n)).round();De.any3d?St(e.el,s,i):Ct(e.el,s)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,s=this._map.getPixelWorldBounds(this._tileZoom);s&&(this._globalTileRange=this._pxBoundsToTileRange(s)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._tileZoom),s=t.project(e,this._tileZoom).floor(),r=t.getSize().divideBy(2*i);return new D(s.subtract(r),s.add(r))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(e),s=this._pxBoundsToTileRange(i),r=s.getCenter(),a=[],o=this.options.keepBuffer,l=new D(s.getBottomLeft().subtract([o,-o]),s.getTopRight().add([o,-o]));if(!(isFinite(s.min.x)&&isFinite(s.min.y)&&isFinite(s.max.x)&&isFinite(s.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var d=this._tiles[c].coords;d.z===this._tileZoom&&l.contains(new A(d.x,d.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var u=s.min.y;u<=s.max.y;u++)for(var h=s.min.x;h<=s.max.x;h++){var m=new A(h,u);if(m.z=this._tileZoom,this._isValidTile(m)){var p=this._tiles[this._tileCoordsToKey(m)];p?p.current=!0:a.push(m)}}if(a.sort(function(e,t){return e.distanceTo(r)-t.distanceTo(r)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(h=0;h<a.length;h++)this._addTile(a[h],f);this._level.el.appendChild(f)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(e);return I(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),i=e.scaleBy(n),s=i.add(n);return[t.unproject(i,e.z),t.unproject(s,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new z(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new A(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(pt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){bt(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,De.ielt9&&this.options.opacity<1&&kt(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),i=this._tileCoordsToKey(e),r=this.createTile(this._wrapCoords(e),s(this._tileReady,this,e));this._initTile(r),this.createTile.length<2&&N(s(this._tileReady,this,e,null,r)),Ct(r,n),this._tiles[i]={el:r,coords:e,current:!0},t.appendChild(r),this.fire("tileloadstart",{tile:r,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var i=this._tileCoordsToKey(e);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(kt(n.el,0),S(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(bt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),De.ielt9||!this._map._fadeAnimated?N(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new A(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new D(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function zi(e){return new Bi(e)}var Ii=Bi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=m(this,t)).detectRetina&&De.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Bt(n,"load",s(this._tileOnLoad,this,t,n)),Bt(n,"error",s(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:De.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){De.ielt9?setTimeout(s(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var i=this.options.errorTileUrl;i&&t.getAttribute("src")!==i&&(t.src=i),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=b;var n=this._tiles[e].coords;pt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",b),Bi.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==b))return Bi.prototype._tileReady.call(this,e,t,n)}});function Fi(e,t){return new Ii(e,t)}var Ui=Ii.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=n({},this.defaultWmsParams);for(var s in t)s in this.options||(i[s]=t[s]);var r=(t=m(this,t)).detectRetina&&De.retina?2:1,a=this.getTileSize();i.width=a.x*r,i.height=a.y*r,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Ii.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,i=B(n.project(t[0]),n.project(t[1])),s=i.min,r=i.max,a=(this._wmsVersion>=1.3&&this._crs===Hn?[s.y,s.x,r.y,r.x]:[s.x,s.y,r.x,r.y]).join(","),o=Ii.prototype.getTileUrl.call(this,e);return o+p(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function $i(e,t){return new Ui(e,t)}Ii.WMS=Ui,Fi.wms=$i;var Wi=qn.extend({options:{padding:.1},initialize:function(e){m(this,e),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,t),r=i.multiplyBy(-n).add(s).subtract(this._map._getNewPixelOrigin(e,t));De.any3d?St(this._container,r,n):Ct(this._container,r)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new D(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Hi=Wi.extend({options:{tolerance:0},getEvents:function(){var e=Wi.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Wi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Bt(e,"mousemove",this._onMouseMove,this),Bt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Bt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest),delete this._ctx,pt(this._container),It(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Wi.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),i=De.retina?2:1;Ct(t,e.min),t.width=i*n.x,t.height=i*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",De.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Wi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[a(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,i=t.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete e._order,delete this._layers[a(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,i=e.options.dashArray.split(/[, ]+/),s=[];for(n=0;n<i.length;n++){if(t=Number(i[n]),isNaN(t))return;s.push(t)}e.options._dashArray=s}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||N(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)e=i.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,i,s,r,a=e._parts,o=a.length,l=this._ctx;if(o){for(l.beginPath(),n=0;n<o;n++){for(i=0,s=a[n].length;i<s;i++)r=a[n][i],l[i?"lineTo":"moveTo"](r.x,r.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,i=Math.max(Math.round(e._radius),1),s=(Math.max(Math.round(e._radiusY),1)||i)/i;1!==s&&(n.save(),n.scale(1,s)),n.beginPath(),n.arc(t.x,t.y/s,i,0,2*Math.PI,!1),1!==s&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,i=this._map.mouseEventToLayerPoint(e),s=this._drawFirst;s;s=s.next)(t=s.layer).options.interactive&&t._containsPoint(i)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(vt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(t)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(e),i&&(bt(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Vi(e){return De.canvas?new Hi(e):null}var qi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Zi={_initContainer:function(){this._container=mt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Wi.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=qi("shape");bt(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=qi("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[a(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;pt(t),e.removeInteractiveTarget(t),delete this._layers[a(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,i=e.options,s=e._container;s.stroked=!!i.stroke,s.filled=!!i.fill,i.stroke?(t||(t=e._stroke=qi("stroke")),s.appendChild(t),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=x(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=i.lineCap.replace("butt","flat"),t.joinstyle=i.lineJoin):t&&(s.removeChild(t),e._stroke=null),i.fill?(n||(n=e._fill=qi("fill")),s.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(s.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),i=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+i+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){xt(e._container)}},Yi=De.vml?qi:G,Ki=Wi.extend({_initContainer:function(){this._container=Yi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Yi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),It(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Wi.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Ct(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Yi("path");e.options.className&&bt(t,e.options.className),e.options.interactive&&bt(t,"leaflet-interactive"),this._updateStyle(e),this._layers[a(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){pt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[a(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,J(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),i="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",s=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,s)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){xt(e._path)}});function Gi(e){return De.svg||De.vml?new Ki(e):null}De.vml&&Ki.include(Zi),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Vi(e)||Gi(e)}});var Ji=di.extend({initialize:function(e,t){di.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=I(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Xi(e,t){return new Ji(e,t)}Ki.create=Yi,Ki.pointsToPath=J,hi.geometryToLayer=mi,hi.coordsToLatLng=fi,hi.coordsToLatLngs=gi,hi.latLngToCoords=xi,hi.latLngsToCoords=yi,hi.getFeature=bi,hi.asFeature=vi,nn.mergeOptions({boxZoom:!0});var Qi=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){It(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),it(),Et(),this._startPoint=this._map.mouseEventToContainerPoint(e),Bt(document,{contextmenu:Yt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=mt("div","leaflet-zoom-box",this._container),bt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new D(this._point,this._startPoint),n=t.getSize();Ct(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(pt(this._box),vt(this._container,"leaflet-crosshair")),st(),Mt(),It(document,{contextmenu:Yt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var t=new z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",Qi),nn.mergeOptions({doubleClickZoom:!0});var es=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),i=t.options.zoomDelta,s=e.originalEvent.shiftKey?n-i:n+i;"center"===t.options.doubleClickZoom?t.setZoom(s):t.setZoomAround(e.containerPoint,s)}});nn.addInitHook("addHandler","doubleClickZoom",es),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ts=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new bn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}bt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){vt(this._map._container,"leaflet-grab"),vt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=I(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,s=(i-t+n)%e+t-n,r=(i+t+n)%e-t-n,a=Math.abs(s+n)<Math.abs(r+n)?s:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(e){var t=this._map,n=t.options,i=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),i)t.fire("moveend");else{this._prunePositions(+new Date);var s=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,o=s.multiplyBy(a/r),l=o.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),d=o.multiplyBy(c/l),u=c/(n.inertiaDeceleration*a),h=d.multiplyBy(-u/2).round();h.x||h.y?(h=t._limitOffset(h,t.options.maxBounds),N(function(){t.panBy(h,{duration:u,easeLinearity:a,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",ts),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ns=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Bt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),It(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,i=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,i=this._panKeys={},s=this.keyCodes;for(t=0,n=s.left.length;t<n;t++)i[s.left[t]]=[-1*e,0];for(t=0,n=s.right.length;t<n;t++)i[s.right[t]]=[e,0];for(t=0,n=s.down.length;t<n;t++)i[s.down[t]]=[0,e];for(t=0,n=s.up.length;t<n;t++)i[s.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,i=this._zoomKeys={},s=this.keyCodes;for(t=0,n=s.zoomIn.length;t<n;t++)i[s.zoomIn[t]]=e;for(t=0,n=s.zoomOut.length;t<n;t++)i[s.zoomOut[t]]=-e},_addHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){It(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,i=this._map;if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=R(t).multiplyBy(3)),i.options.maxBounds&&(t=i._limitOffset(R(t),i.options.maxBounds)),i.options.worldCopyJump){var s=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(t)));i.panTo(s)}else i.panBy(t)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Yt(e)}}});nn.addInitHook("addHandler","keyboard",ns),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var is=gn.extend({addHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){It(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Xt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),i),Yt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),s=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,r=n?Math.ceil(s/n)*n:s,a=e._limitZoom(t+(this._delta>0?r:-r))-t;this._delta=0,this._startTime=null,a&&("center"===e.options.scrollWheelZoom?e.setZoom(t+a):e.setZoomAround(this._lastMousePos,t+a))}});nn.addInitHook("addHandler","scrollWheelZoom",is);var ss=600;nn.mergeOptions({tapHold:De.touchNative&&De.safari&&De.mobile,tapTolerance:15});var rs=gn.extend({addHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){It(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new A(t.clientX,t.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(Bt(document,"touchend",Zt),Bt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),ss),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){It(document,"touchend",Zt),It(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),It(document,"touchend touchcancel contextmenu",this._cancel,this),It(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new A(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",rs),nn.mergeOptions({touchZoom:De.touch,bounceAtZoomLimits:!0});var as=gn.extend({addHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){vt(this._map._container,"leaflet-touch-zoom"),It(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),Zt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]),r=n.distanceTo(i)/this._startDist;if(this._zoom=t.getScaleZoom(r,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&r<1||this._zoom>t.getMaxZoom()&&r>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===a.x&&0===a.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),S(this._animRequest);var o=s(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=N(o,this,!0),Zt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,S(this._animRequest),It(document,"touchmove",this._onTouchMove,this),It(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",as),nn.BoxZoom=Qi,nn.DoubleClickZoom=es,nn.Drag=ts,nn.Keyboard=ns,nn.ScrollWheelZoom=is,nn.TapHold=rs,nn.TouchZoom=as,e.Bounds=D,e.Browser=De,e.CRS=$,e.Canvas=Hi,e.Circle=ai,e.CircleMarker=si,e.Class=P,e.Control=rn,e.DivIcon=Ri,e.DivOverlay=Ei,e.DomEvent=en,e.DomUtil=Dt,e.Draggable=bn,e.Evented=M,e.FeatureGroup=Kn,e.GeoJSON=hi,e.GridLayer=Bi,e.Handler=gn,e.Icon=Jn,e.ImageOverlay=ji,e.LatLng=F,e.LatLngBounds=z,e.Layer=qn,e.LayerGroup=Zn,e.LineUtil=In,e.Map=nn,e.Marker=ti,e.Mixin=xn,e.Path=ii,e.Point=A,e.PolyUtil=jn,e.Polygon=di,e.Polyline=li,e.Popup=Mi,e.PosAnimation=tn,e.Projection=$n,e.Rectangle=Ji,e.Renderer=Wi,e.SVG=Ki,e.SVGOverlay=Pi,e.TileLayer=Ii,e.Tooltip=Ai,e.Transformation=q,e.Util=C,e.VideoOverlay=Si,e.bind=s,e.bounds=B,e.canvas=Vi,e.circle=oi,e.circleMarker=ri,e.control=an,e.divIcon=Di,e.extend=n,e.featureGroup=Gn,e.geoJSON=_i,e.geoJson=ki,e.gridLayer=zi,e.icon=Xn,e.imageOverlay=Ni,e.latLng=U,e.latLngBounds=I,e.layerGroup=Yn,e.map=sn,e.marker=ni,e.point=R,e.polygon=ui,e.polyline=ci,e.popup=Li,e.rectangle=Xi,e.setOptions=m,e.stamp=a,e.svg=Gi,e.svgOverlay=Ti,e.tileLayer=Fi,e.tooltip=Oi,e.transformation=Z,e.version=t,e.videoOverlay=Ci;var os=window.L;e.noConflict=function(){return window.L=os,this},window.L=e}(t)},249:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg=="},286:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(630)),r=i(n(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,i;let s=null,a=null,o=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const i=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),r=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");i&&r&&r.length>1&&(o=parseInt(r[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,o=null,l=406,c="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(a=[],s=null,l=200,c="OK")}catch(d){404===e.status&&""===t?(l=204,c="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(i=null===s||void 0===s?void 0:s.details)||void 0===i?void 0:i.includes("0 rows"))&&(s=null,l=200,c="OK"),s&&this.shouldThrowOnError)throw new r.default(s)}return{error:s,data:a,count:o,status:l,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,i;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(i=null===e||void 0===e?void 0:e.code)&&void 0!==i?i:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=x.prototype;var v=b.prototype=new y;v.constructor=b,f(v,x.prototype),v.isPureReactComponent=!0;var w=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function j(e,t,i,s,r,a){return i=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:a}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(){}function T(e,t,s,r,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,d=!1;if(null===e)d=!0;else switch(o){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case i:d=!0;break;case h:return T((d=e._init)(e._payload),t,s,r,a)}}if(d)return a=a(e),d=""===r?"."+C(e,0):r,w(a)?(s="",null!=d&&(s=d.replace(S,"$&/")+"/"),T(a,t,s,"",function(e){return e})):null!=a&&(N(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+d,a=j(l.type,c,void 0,0,0,l.props)),t.push(a)),1;d=0;var u,p=""===r?".":r+":";if(w(e))for(var f=0;f<e.length;f++)d+=T(r=e[f],t,s,o=p+C(r,f),a);else if("function"===typeof(f=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=m&&u[m]||u["@@iterator"])?u:null))for(e=f.call(e),f=0;!(r=e.next()).done;)d+=T(r=r.value,t,s,o=p+C(r,f++),a);else if("object"===o){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(P,P):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,r,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function E(e,t,n){if(null==e)return e;var i=[],s=0;return T(e,i,"","",function(e){return t.call(n,e,s++)}),i}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function A(){}t.Children={map:E,forEach:function(e,t,n){E(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return E(e,function(){t++}),t},toArray:function(e){return E(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=r,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var i=f({},e.props),s=e.key;if(null!=t)for(r in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!k.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(i[r]=t[r]);var r=arguments.length-2;if(1===r)i.children=n;else if(1<r){for(var a=Array(r),o=0;o<r;o++)a[o]=arguments[o+2];i.children=a}return j(e.type,s,void 0,0,0,i)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var i,s={},r=null;if(null!=t)for(i in void 0!==t.key&&(r=""+t.key),t)k.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(s[i]=t[i]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(i in a=e.defaultProps)void 0===s[i]&&(s[i]=a[i]);return j(e,r,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,n={};_.T=n;try{var i=e(),s=_.S;null!==s&&s(n,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(A,L)}catch(r){L(r)}finally{_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var i=_.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.H.useTransition()},t.version="19.1.1"},374:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(286));class r extends s.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:i,referencedTable:s=i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=s?`${s}.order`:"order",a=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i="undefined"===typeof n?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t){let{foreignTable:n,referencedTable:i=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s="undefined"===typeof i?"offset":`${i}.offset`,r="undefined"===typeof i?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(r,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:r="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=r},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},579:(e,t,n)=>{"use strict";e.exports=n(799)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>a,Request:()=>o,Response:()=>l,default:()=>r,fetch:()=>s});var i=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const s=i.fetch,r=i.fetch.bind(i),a=i.Headers,o=i.Request,l=i.Response},672:(e,t,n)=>{"use strict";var i=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(s(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,r="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):"script"===n&&a.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},736:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(374));class r extends s.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:n,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s="";"plain"===i?s="pl":"phrase"===i?s="ph":"websearch"===i&&(s="w");const r=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${r}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}t.default=r},745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const i=n(400);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${i.version}`}},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function s(e,t,i){var s=null;if(void 0!==i&&(s=""+i),void 0!==t.key&&(s=""+t.key),"key"in t)for(var r in i={},t)"key"!==r&&(i[r]=t[r]);else i=t;return t=i.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=s,t.jsxs=s},829:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:i,fetch:s}=t;this.url=e,this.headers=n,this.schema=i,this.fetch=s}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t?"HEAD":"GET";let r=!1;const a=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new s.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:i,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new s.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new s.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,s=e[i];if(!(0<r(s,t)))break e;e[i]=t,e[n]=s,n=i}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,s=e.length,a=s>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,d=e[c];if(0>r(l,n))c<s&&0>r(d,l)?(e[i]=d,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<s&&0>r(d,n)))break e;e[i]=d,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,x=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=i(d)}}function _(e){if(g=!1,w(e),!f)if(null!==i(c))f=!0,j||(j=!0,k());else{var t=i(d);null!==t&&L(_,t.startTime-e)}}var k,j=!1,N=-1,S=5,C=-1;function P(){return!!x||!(t.unstable_now()-C<S)}function T(){if(x=!1,j){var e=t.unstable_now();C=e;var n=!0;try{e:{f=!1,g&&(g=!1,b(N),N=-1),p=!0;var r=m;try{t:{for(w(e),h=i(c);null!==h&&!(h.expirationTime>e&&P());){var a=h.callback;if("function"===typeof a){h.callback=null,m=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===i(c)&&s(c),w(e)}else s(c);h=i(c)}if(null!==h)n=!0;else{var l=i(d);null!==l&&L(_,l.startTime-e),n=!1}}break e}finally{h=null,m=r,p=!1}n=void 0}}finally{n?k():j=!1}}}if("function"===typeof v)k=function(){v(T)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,M=E.port2;E.port1.onmessage=T,k=function(){M.postMessage(null)}}else k=function(){y(T,0)};function L(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,s,r){var a=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?a+r:a:r=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>a?(e.sortIndex=r,n(d,e),null===i(c)&&e===i(d)&&(g?(b(N),N=-1):g=!0,L(_,r-a))):(e.sortIndex=o,n(c,e),f||p||(f=!0,j||(j=!0,k()))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},980:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const s=i(n(210));t.PostgrestClient=s.default;const r=i(n(829));t.PostgrestQueryBuilder=r.default;const a=i(n(736));t.PostgrestFilterBuilder=a.default;const o=i(n(374));t.PostgrestTransformBuilder=o.default;const l=i(n(286));t.PostgrestBuilder=l.default;const c=i(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:s.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,i)=>(n.f[i](e,t),t),[])),n.u=e=>"static/js/"+e+".a3c1d153.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="client:";n.l=(i,s,r,a)=>{if(e[i])e[i].push(s);else{var o,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+r){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+r),o.src=i),e[i]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(m);var s=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,i)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var r=new Promise((n,i)=>s=e[t]=[n,i]);i.push(s[2]=r);var a=n.p+n.u(t),o=new Error;n.l(a,i=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",o.name="ChunkLoadError",o.type=r,o.request=a,s[1](o)}},"chunk-"+t,t)}};var t=(t,i)=>{var s,r,a=i[0],o=i[1],l=i[2],c=0;if(a.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(i);c<a.length;c++)r=a[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0},i=self.webpackChunkclient=self.webpackChunkclient||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>ru,hasStandardBrowserEnv:()=>ou,hasStandardBrowserWebWorkerEnv:()=>lu,navigator:()=>au,origin:()=>cu});var t=n(43),i=n(391),s="popstate";function r(){return h(function(e,t){let{pathname:n,search:i,hash:s}=e.location;return c("",{pathname:n,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:d(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function a(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function o(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Ix){}}}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?u(t):t,state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)}}function d(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function u(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function h(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:a=!1}=i,o=r.history,d="POP",u=null,h=p();function p(){return(o.state||{idx:null}).idx}function f(){d="POP";let e=p(),t=null==e?null:e-h;h=e,u&&u({action:d,location:x.location,delta:t})}function g(e){return m(e)}null==h&&(h=0,o.replaceState({...o.state,idx:h},""));let x={get action(){return d},get location(){return e(r,o)},listen(e){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(s,f),u=e,()=>{r.removeEventListener(s,f),u=null}},createHref:e=>t(r,e),createURL:g,encodeLocation(e){let t=g(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){d="PUSH";let i=c(x.location,e,t);n&&n(i,e),h=p()+1;let s=l(i,h),m=x.createHref(i);try{o.pushState(s,"",m)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;r.location.assign(m)}a&&u&&u({action:d,location:x.location,delta:1})},replace:function(e,t){d="REPLACE";let i=c(x.location,e,t);n&&n(i,e),h=p();let s=l(i,h),r=x.createHref(i);o.replaceState(s,"",r),a&&u&&u({action:d,location:x.location,delta:0})},go:e=>o.go(e)};return x}function m(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),a(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:d(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function p(e,t){return f(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function f(e,t,n,i){let s=E(("string"===typeof t?u(t):t).pathname||"/",n);if(null==s)return null;let r=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let a=null;for(let o=0;null==a&&o<r.length;++o){let e=T(s);a=S(r[o],e,i)}return a}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(e,s,r)=>{let o={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};o.relativePath.startsWith("/")&&(a(o.relativePath.startsWith(i),`Absolute route path "${o.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(i.length));let l=R([i,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(a(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:N(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of x(e.path))s(e,t,n);else s(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===i.length)return s?[r,""]:[r];let a=x(i.join("/")),o=[];return o.push(...a.map(e=>""===e?r:[r,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var y=/^:[\w-]+$/,b=3,v=2,w=1,_=10,k=-2,j=e=>"*"===e;function N(e,t){let n=e.split("/"),i=n.length;return n.some(j)&&(i+=k),t&&(i+=v),n.filter(e=>!j(e)).reduce((e,t)=>e+(y.test(t)?b:""===t?w:_),i)}function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,s={},r="/",a=[];for(let o=0;o<i.length;++o){let e=i[o],l=o===i.length-1,c="/"===r?t:t.slice(r.length)||"/",d=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!i[i.length-1].route.index&&(d=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:R([r,d.pathname]),pathnameBase:D(R([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=R([r,d.pathnameBase]))}return a}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=P(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),o=s.slice(1),l=i.reduce((e,t,n)=>{let{paramName:i,isOptional:s}=t;if("*"===i){let e=o[n]||"";a=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[i]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:r,pathnameBase:a,pattern:e}}function P(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];o("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function T(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return o(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function E(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function M(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function A(e){let t=L(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function O(e,t,n){let i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=u(e):(i={...e},a(!i.pathname||!i.pathname.includes("?"),M("?","pathname","search",i)),a(!i.pathname||!i.pathname.includes("#"),M("#","pathname","hash",i)),a(!i.search||!i.search.includes("#"),M("#","search","hash",i)));let r,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(null==l)r=n;else{let e=t.length-1;if(!s&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}r=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:s=""}="string"===typeof e?u(e):e,r=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:r,search:B(i),hash:z(s)}}(i,r),d=l&&"/"!==l&&l.endsWith("/"),h=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}var R=e=>e.join("/").replace(/\/\/+/g,"/"),D=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function I(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var F=["POST","PUT","PATCH","DELETE"],U=(new Set(F),["GET",...F]);new Set(U),Symbol("ResetLoaderData");var $=t.createContext(null);$.displayName="DataRouter";var W=t.createContext(null);W.displayName="DataRouterState";var H=t.createContext(!1);var V=t.createContext({isTransitioning:!1});V.displayName="ViewTransition";var q=t.createContext(new Map);q.displayName="Fetchers";var Z=t.createContext(null);Z.displayName="Await";var Y=t.createContext(null);Y.displayName="Navigation";var K=t.createContext(null);K.displayName="Location";var G=t.createContext({outlet:null,matches:[],isDataRoute:!1});G.displayName="Route";var J=t.createContext(null);J.displayName="RouteError";function X(){return null!=t.useContext(K)}function Q(){return a(X(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(K).location}var ee="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function te(e){t.useContext(Y).static||t.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=t.useContext(G);return e?function(){let{router:e}=he("useNavigate"),n=pe("useNavigate"),i=t.useRef(!1);te(()=>{i.current=!0});let s=t.useCallback(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(i.current,ee),i.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,{fromRouteId:n,...s}))},[e,n]);return s}():function(){a(X(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext($),{basename:n,navigator:i}=t.useContext(Y),{matches:s}=t.useContext(G),{pathname:r}=Q(),l=JSON.stringify(A(s)),c=t.useRef(!1);te(()=>{c.current=!0});let d=t.useCallback(function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(c.current,ee),!c.current)return;if("number"===typeof t)return void i.go(t);let a=O(t,JSON.parse(l),r,"path"===s.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:R([n,a.pathname])),(s.replace?i.replace:i.push)(a,s.state,s)},[n,i,l,r,e]);return d}()}t.createContext(null);function ie(){let{matches:e}=t.useContext(G),n=e[e.length-1];return n?n.params:{}}function se(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:i}=t.useContext(G),{pathname:s}=Q(),r=JSON.stringify(A(i));return t.useMemo(()=>O(e,JSON.parse(r),s,"path"===n),[e,r,s,n])}function re(e,n,i,s){a(X(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=t.useContext(Y),{matches:l}=t.useContext(G),c=l[l.length-1],d=c?c.params:{},h=c?c.pathname:"/",m=c?c.pathnameBase:"/",f=c&&c.route;{let e=f&&f.path||"";xe(h,!f||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let g,x=Q();if(n){let e="string"===typeof n?u(n):n;a("/"===m||e.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${e.pathname}" was given in the \`location\` prop.`),g=e}else g=x;let y=g.pathname||"/",b=y;if("/"!==m){let e=m.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=p(e,{pathname:b});o(f||null!=v,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),o(null==v||void 0!==v[v.length-1].route.element||void 0!==v[v.length-1].route.Component||void 0!==v[v.length-1].route.lazy,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=de(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:R([m,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?m:R([m,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,i,s);return n&&w?t.createElement(K.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},w):w}function ae(){let e=fe(),n=I(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:a},"ErrorBoundary")," or"," ",t.createElement("code",{style:a},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),i?t.createElement("pre",{style:r},i):null,o)}var oe=t.createElement(ae,null),le=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(G.Provider,{value:this.props.routeContext},t.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ce(e){let{routeContext:n,match:i,children:s}=e,r=t.useContext($);return r&&r.static&&r.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=i.route.id),t.createElement(G.Provider,{value:n},s)}function de(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!i)return null;if(i.errors)e=i.matches;else{if(0!==n.length||i.initialized||!(i.matches.length>0))return null;e=i.matches}}let s=e,r=i?.errors;if(null!=r){let e=s.findIndex(e=>e.route.id&&void 0!==r?.[e.route.id]);a(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,e+1))}let o=!1,l=-1;if(i)for(let t=0;t<s.length;t++){let e=s[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=t),e.route.id){let{loaderData:t,errors:n}=i,r=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||r){o=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((e,a,c)=>{let d,u=!1,h=null,m=null;i&&(d=r&&a.route.id?r[a.route.id]:void 0,h=a.route.errorElement||oe,o&&(l<0&&0===c?(xe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,m=null):l===c&&(u=!0,m=a.route.hydrateFallbackElement||null)));let p=n.concat(s.slice(0,c+1)),f=()=>{let n;return n=d?h:u?m:a.route.Component?t.createElement(a.route.Component,null):a.route.element?a.route.element:e,t.createElement(ce,{match:a,routeContext:{outlet:e,matches:p,isDataRoute:null!=i},children:n})};return i&&(a.route.ErrorBoundary||a.route.errorElement||0===c)?t.createElement(le,{location:i.location,revalidation:i.revalidation,component:h,error:d,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}function ue(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function he(e){let n=t.useContext($);return a(n,ue(e)),n}function me(e){let n=t.useContext(W);return a(n,ue(e)),n}function pe(e){let n=function(e){let n=t.useContext(G);return a(n,ue(e)),n}(e),i=n.matches[n.matches.length-1];return a(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function fe(){let e=t.useContext(J),n=me("useRouteError"),i=pe("useRouteError");return void 0!==e?e:n.errors?.[i]}var ge={};function xe(e,t,n){t||ge[e]||(ge[e]=!0,o(!1,n))}var ye={};function be(e,t){e||ye[t]||(ye[t]=!0,console.warn(t))}t.memo(function(e){let{routes:t,future:n,state:i}=e;return re(t,void 0,i,n)});function ve(e){let{to:n,replace:i,state:s,relative:r}=e;a(X(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=t.useContext(Y);o(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=t.useContext(G),{pathname:d}=Q(),u=ne(),h=O(n,A(c),d,"path"===r),m=JSON.stringify(h);return t.useEffect(()=>{u(JSON.parse(m),{replace:i,state:s,relative:r})},[u,m,r,i,s]),null}function we(e){a(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _e(e){let{basename:n="/",children:i=null,location:s,navigationType:r="POP",navigator:l,static:c=!1}=e;a(!X(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:d,navigator:l,static:c,future:{}}),[d,l,c]);"string"===typeof s&&(s=u(s));let{pathname:m="/",search:p="",hash:f="",state:g=null,key:x="default"}=s,y=t.useMemo(()=>{let e=E(m,d);return null==e?null:{location:{pathname:e,search:p,hash:f,state:g,key:x},navigationType:r}},[d,m,p,f,g,x,r]);return o(null!=y,`<Router basename="${d}"> is not able to match the URL "${m}${p}${f}" because it does not start with the basename, so the <Router> won't render anything.`),null==y?null:t.createElement(Y.Provider,{value:h},t.createElement(K.Provider,{children:i,value:y}))}function ke(e){let{children:t,location:n}=e;return re(je(t),n)}t.Component;function je(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return t.Children.forEach(e,(e,s)=>{if(!t.isValidElement(e))return;let r=[...n,s];if(e.type===t.Fragment)return void i.push.apply(i,je(e.props.children,r));a(e.type===we,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),a(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=je(e.props.children,r)),i.push(o)}),i}var Ne="get",Se="application/x-www-form-urlencoded";function Ce(e){return null!=e&&"string"===typeof e.tagName}function Pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let i=e[n];return t.concat(Array.isArray(i)?i.map(e=>[n,e]):[[n,i]])},[]))}var Te=null;var Ee=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Me(e){return null==e||Ee.has(e)?e:(o(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Se}"`),null)}function Le(e,t){let n,i,s,r,a;if(Ce(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");i=a?E(a,t):null,n=e.getAttribute("method")||Ne,s=Me(e.getAttribute("enctype"))||Se,r=new FormData(e)}else if(function(e){return Ce(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ce(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(i=o?E(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Ne,s=Me(e.getAttribute("formenctype"))||Me(a.getAttribute("enctype"))||Se,r=new FormData(a,e),!function(){if(null===Te)try{new FormData(document.createElement("form"),0),Te=!1}catch(Ix){Te=!0}return Te}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?`${t}.`:"";r.append(`${e}x`,"0"),r.append(`${e}y`,"0")}else t&&r.append(t,i)}}else{if(Ce(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ne,i=null,s=Se,a=e}var o;return r&&"text/plain"===s&&(a=r,r=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:r,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ae(e){return{__html:e}}function Oe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Re(e,t,n){let i="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===i.pathname?i.pathname=`_root.${n}`:t&&"/"===E(i.pathname,t)?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function De(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Be(e){return null!=e&&"string"===typeof e.page}function ze(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ie(e,t,n,i,s,r){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===r?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===r?t.filter((t,r)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,r)||o(t,r))return!0;if(t.route.shouldRevalidate){let i=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0}):[]}function Fe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map(e=>{let i=t.routes[e.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1),[...new Set(i)];var i}function Ue(e,t){let n=new Set,i=new Set(t);return e.reduce((e,s)=>{if(t&&!Be(s)&&"script"===s.as&&s.href&&i.has(s.href))return e;let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(s));return n.has(r)||(n.add(r),e.push({key:r,link:s})),e},[])}function $e(e,t){return"lazy"===e.mode&&!0===t}function We(){let e=t.useContext($);return Oe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function He(){let e=t.useContext(W);return Oe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ve=t.createContext(void 0);function qe(){let e=t.useContext(Ve);return Oe(e,"You must render this element inside a <HydratedRouter> element"),e}function Ze(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ye(e,t,n){if(n&&!Xe)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}Ve.displayName="FrameworkContext";function Ke(e){let{page:n,...i}=e,{router:s}=We(),r=t.useMemo(()=>p(s.routes,n,s.basename),[s.routes,n,s.basename]);return r?t.createElement(Je,{page:n,matches:r,...i}):null}function Ge(e){let{manifest:n,routeModules:i}=qe(),[s,r]=t.useState([]);return t.useEffect(()=>{let t=!1;return async function(e,t,n){let i=await Promise.all(e.map(async e=>{let i=t.routes[e.route.id];if(i){let e=await De(i,n);return e.links?e.links():[]}return[]}));return Ue(i.flat(1).filter(ze).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,n,i).then(e=>{t||r(e)}),()=>{t=!0}},[e,n,i]),s}function Je(e){let{page:n,matches:i,...s}=e,r=Q(),{manifest:a,routeModules:o}=qe(),{basename:l}=We(),{loaderData:c,matches:d}=He(),u=t.useMemo(()=>Ie(n,i,d,a,r,"data"),[n,i,d,a,r]),h=t.useMemo(()=>Ie(n,i,d,a,r,"assets"),[n,i,d,a,r]),m=t.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let e=new Set,t=!1;if(i.forEach(n=>{let i=a.routes[n.route.id];i&&i.hasLoader&&(!u.some(e=>e.route.id===n.route.id)&&n.route.id in c&&o[n.route.id]?.shouldRevalidate||i.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let s=Re(n,l,"data");return t&&e.size>0&&s.searchParams.set("_routes",i.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[s.pathname+s.search]},[l,c,r,a,u,i,n,o]),p=t.useMemo(()=>Fe(h,a),[h,a]),f=Ge(h);return t.createElement(t.Fragment,null,m.map(e=>t.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...s})),p.map(e=>t.createElement("link",{key:e,rel:"modulepreload",href:e,...s})),f.map(e=>{let{key:n,link:i}=e;return t.createElement("link",{key:n,...i})}))}var Xe=!1;function Qe(e){let{manifest:n,serverHandoffString:i,isSpaMode:s,renderMeta:r,routeDiscovery:a,ssr:o}=qe(),{router:l,static:c,staticContext:d}=We(),{matches:u}=He(),h=t.useContext(H),m=$e(a,o);r&&(r.didRenderScripts=!0);let f=Ye(u,null,s);t.useEffect(()=>{0},[]);let g=t.useMemo(()=>{if(h)return null;let s=d?`window.__reactRouterContext = ${i};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",r=c?`${n.hmr?.runtime?`import ${JSON.stringify(n.hmr.runtime)};`:""}${m?"":`import ${JSON.stringify(n.url)}`};\n${f.map((e,t)=>{let i=`route${t}`,s=n.routes[e.route.id];Oe(s,`Route ${e.route.id} not found in manifest`);let{clientActionModule:r,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,d=[...r?[{module:r,varName:`${i}_clientAction`}]:[],...a?[{module:a,varName:`${i}_clientLoader`}]:[],...o?[{module:o,varName:`${i}_clientMiddleware`}]:[],...l?[{module:l,varName:`${i}_HydrateFallback`}]:[],{module:c,varName:`${i}_main`}];return 1===d.length?`import * as ${i} from ${JSON.stringify(c)};`:[d.map(e=>`import * as ${e.varName} from "${e.module}";`).join("\n"),`const ${i} = {${d.map(e=>`...${e.varName}`).join(",")}};`].join("\n")}).join("\n")}\n  ${m?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:n,...i}=e,s=new Set(t.state.matches.map(e=>e.route.id)),r=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(r.pop();r.length>0;)a.push(`/${r.join("/")}`),r.pop();a.forEach(e=>{let n=p(t.routes,e,t.basename);n&&n.forEach(e=>s.add(e.route.id))});let o=[...s].reduce((e,t)=>Object.assign(e,{[t]:i.routes[t]}),{});return{...i,routes:o,sri:!!n||void 0}}(n,l),null,2)};`:""}\n  window.__reactRouterRouteModules = {${f.map((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`).join(",")}};\n\nimport(${JSON.stringify(n.entry.module)});`:" ";return t.createElement(t.Fragment,null,t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ae(s),type:void 0}),t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ae(r),type:"module",async:!0}))},[]),x=Xe||h?[]:(n.entry.imports.concat(Fe(f,n,{includeHydrateFallback:!0})),[...new Set(y)]);var y;let b="object"===typeof n.sri?n.sri:{};return be(!h,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),Xe||h?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:b})}}):null,m?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:b[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:b[n.entry.module],suppressHydrationWarning:!0}),x.map(n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:b[n],suppressHydrationWarning:!0})),g)}function et(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}t.Component;function tt(e){let{error:n,isOutsideRemixApp:i}=e;console.error(n);let s,r=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(I(n))return t.createElement(nt,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),r);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(nt,{title:"Application Error!",isOutsideRemixApp:i},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),r)}function nt(e){let{title:n,renderScripts:i,isOutsideRemixApp:s,children:r}=e,{routeModules:a}=qe();return a.root?.Layout&&!s?r:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,n)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},r,i?t.createElement(Qe,null):null)))}var it="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{it&&(window.__reactRouterVersion="7.7.1")}catch(Ix){}function st(e){let{basename:n,children:i,window:s}=e,a=t.useRef();null==a.current&&(a.current=r({window:s,v5Compat:!0}));let o=a.current,[l,c]=t.useState({action:o.action,location:o.location}),d=t.useCallback(e=>{t.startTransition(()=>c(e))},[c]);return t.useLayoutEffect(()=>o.listen(d),[o,d]),t.createElement(_e,{basename:n,children:i,location:l.location,navigationType:l.action,navigator:o})}var rt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,at=t.forwardRef(function(e,n){let i,{onClick:s,discover:r="render",prefetch:l="none",relative:c,reloadDocument:u,replace:h,state:m,target:p,to:f,preventScrollReset:g,viewTransition:x,...y}=e,{basename:b}=t.useContext(Y),v="string"===typeof f&&rt.test(f),w=!1;if("string"===typeof f&&v&&(i=f,it))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),n=E(t.pathname,b);t.origin===e.origin&&null!=n?f=n+t.search+t.hash:w=!0}catch(Ix){o(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(X(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=t.useContext(Y),{hash:r,pathname:o,search:l}=se(e,{relative:n}),c=o;return"/"!==i&&(c="/"===o?i:R([i,o])),s.createHref({pathname:c,search:l,hash:r})}(f,{relative:c}),[k,j,N]=function(e,n){let i=t.useContext(Ve),[s,r]=t.useState(!1),[a,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=n,m=t.useRef(null);t.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[e]),t.useEffect(()=>{if(s){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[s]);let p=()=>{r(!0)},f=()=>{r(!1),o(!1)};return i?"intent"!==e?[a,m,{}]:[a,m,{onFocus:Ze(l,p),onBlur:Ze(c,f),onMouseEnter:Ze(d,p),onMouseLeave:Ze(u,f),onTouchStart:Ze(h,p)}]:[!1,m,{}]}(l,y),S=function(e){let{target:n,replace:i,state:s,preventScrollReset:r,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ne(),c=Q(),u=se(e,{relative:a});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:d(c)===d(u);l(e,{replace:n,state:s,preventScrollReset:r,relative:a,viewTransition:o})}},[c,l,u,i,s,n,e,r,a,o])}(f,{replace:h,state:m,target:p,preventScrollReset:g,relative:c,viewTransition:x});let C=t.createElement("a",{...y,...N,href:i||_,onClick:w||u?s:function(e){s&&s(e),e.defaultPrevented||S(e)},ref:et(n,j),target:p,"data-discover":v||"render"!==r?void 0:"true"});return k&&!v?t.createElement(t.Fragment,null,C,t.createElement(Ke,{page:_})):C});at.displayName="Link";var ot=t.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:s=!1,className:r="",end:o=!1,style:l,to:c,viewTransition:d,children:u,...h}=e,m=se(c,{relative:h.relative}),p=Q(),f=t.useContext(W),{navigator:g,basename:x}=t.useContext(Y),y=null!=f&&function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.useContext(V);a(null!=i,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=dt("useViewTransitionState"),r=se(e,{relative:n});if(!i.isTransitioning)return!1;let o=E(i.currentLocation.pathname,s)||i.currentLocation.pathname,l=E(i.nextLocation.pathname,s)||i.nextLocation.pathname;return null!=C(r.pathname,l)||null!=C(r.pathname,o)}(m)&&!0===d,b=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,v=p.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;s||(v=v.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&x&&(w=E(w,x)||w);const _="/"!==b&&b.endsWith("/")?b.length-1:b.length;let k,j=v===b||!o&&v.startsWith(b)&&"/"===v.charAt(_),N=null!=w&&(w===b||!o&&w.startsWith(b)&&"/"===w.charAt(b.length)),S={isActive:j,isPending:N,isTransitioning:y},P=j?i:void 0;k="function"===typeof r?r(S):[r,j?"active":null,N?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let T="function"===typeof l?l(S):l;return t.createElement(at,{...h,"aria-current":P,className:k,ref:n,style:T,to:c,viewTransition:d},"function"===typeof u?u(S):u)});ot.displayName="NavLink";var lt=t.forwardRef((e,n)=>{let{discover:i="render",fetcherKey:s,navigate:r,reloadDocument:o,replace:l,state:c,method:u=Ne,action:h,onSubmit:m,relative:p,preventScrollReset:f,viewTransition:g,...x}=e,y=pt(),b=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:i}=t.useContext(Y),s=t.useContext(G);a(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o={...se(e||".",{relative:n})},l=Q();if(null==e){o.search=l.search;let e=new URLSearchParams(o.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?`?${n}`:""}}e&&"."!==e||!r.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==i&&(o.pathname="/"===o.pathname?i:R([i,o.pathname]));return d(o)}(h,{relative:p}),v="get"===u.toLowerCase()?"get":"post",w="string"===typeof h&&rt.test(h);return t.createElement("form",{ref:n,method:v,action:b,onSubmit:o?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||u;y(t||e.currentTarget,{fetcherKey:s,method:n,navigate:r,replace:l,state:c,relative:p,preventScrollReset:f,viewTransition:g})},...x,"data-discover":w||"render"!==i?void 0:"true"})});function ct(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dt(e){let n=t.useContext($);return a(n,ct(e)),n}function ut(e){o("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=t.useRef(Pe(e)),i=t.useRef(!1),s=Q(),r=t.useMemo(()=>function(e,t){let n=Pe(e);return t&&t.forEach((e,i)=>{n.has(i)||t.getAll(i).forEach(e=>{n.append(i,e)})}),n}(s.search,i.current?null:n.current),[s.search]),a=ne(),l=t.useCallback((e,t)=>{const n=Pe("function"===typeof e?e(new URLSearchParams(r)):e);i.current=!0,a("?"+n,t)},[a,r]);return[r,l]}lt.displayName="Form";var ht=0,mt=()=>`__${String(++ht)}__`;function pt(){let{router:e}=dt("useSubmit"),{basename:n}=t.useContext(Y),i=pe("useRouteId");return t.useCallback(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:r,method:a,encType:o,formData:l,body:c}=Le(t,n);if(!1===s.navigate){let t=s.fetcherKey||mt();await e.fetch(t,i,s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:i,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,n,i])}var ft=n(579);const gt=(0,t.createContext)({});function xt(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}const yt="undefined"!==typeof window,bt=yt?t.useLayoutEffect:t.useEffect,vt=(0,t.createContext)(null);function wt(e){return"object"===typeof e&&null!==e}function _t(e){return wt(e)&&"offsetHeight"in e}const kt=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function jt(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function Nt(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const i=t.map(t=>{const i=jt(t,e);return n||"function"!==typeof i||(n=!0),i});if(n)return()=>{for(let e=0;e<i.length;e++){const n=i[e];"function"===typeof n?n():jt(t[e],null)}}}}(...n),n)}class St extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=_t(e)&&e.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ct(e){let{children:n,isPresent:i,anchorX:s,root:r}=e;const a=(0,t.useId)(),o=(0,t.useRef)(null),l=(0,t.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,t.useContext)(kt),d=Nt(o,n?.ref);return(0,t.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:d,right:u}=l.current;if(i||!o.current||!e||!t)return;const h="left"===s?`left: ${d}`:`right: ${u}`;o.current.dataset.motionPopId=a;const m=document.createElement("style");c&&(m.nonce=c);const p=r??document.head;return p.appendChild(m),m.sheet&&m.sheet.insertRule(`\n          [data-motion-pop-id="${a}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            ${h}px !important;\n            top: ${n}px !important;\n          }\n        `),()=>{p.contains(m)&&p.removeChild(m)}},[i]),(0,ft.jsx)(St,{isPresent:i,childRef:o,sizeRef:l,children:t.cloneElement(n,{ref:d})})}const Pt=e=>{let{children:n,initial:i,isPresent:s,onExitComplete:r,custom:a,presenceAffectsLayout:o,mode:l,anchorX:c,root:d}=e;const u=xt(Tt),h=(0,t.useId)();let m=!0,p=(0,t.useMemo)(()=>(m=!1,{id:h,initial:i,isPresent:s,custom:a,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;r&&r()},register:e=>(u.set(e,!1),()=>u.delete(e))}),[s,u,r]);return o&&m&&(p={...p}),(0,t.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[s]),t.useEffect(()=>{!s&&!u.size&&r&&r()},[s]),"popLayout"===l&&(n=(0,ft.jsx)(Ct,{isPresent:s,anchorX:c,root:d,children:n})),(0,ft.jsx)(vt.Provider,{value:p,children:n})};function Tt(){return new Map}function Et(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=(0,t.useContext)(vt);if(null===n)return[!0,null];const{isPresent:i,onExitComplete:s,register:r}=n,a=(0,t.useId)();(0,t.useEffect)(()=>{if(e)return r(a)},[e]);const o=(0,t.useCallback)(()=>e&&s&&s(a),[a,s,e]);return!i&&s?[!1,o]:[!0]}const Mt=e=>e.key||"";function Lt(e){const n=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&n.push(e)}),n}const At=e=>{let{children:n,custom:i,initial:s=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:d}=e;const[u,h]=Et(l),m=(0,t.useMemo)(()=>Lt(n),[n]),p=l&&!u?[]:m.map(Mt),f=(0,t.useRef)(!0),g=(0,t.useRef)(m),x=xt(()=>new Map),[y,b]=(0,t.useState)(m),[v,w]=(0,t.useState)(m);bt(()=>{f.current=!1,g.current=m;for(let e=0;e<v.length;e++){const t=Mt(v[e]);p.includes(t)?x.delete(t):!0!==x.get(t)&&x.set(t,!1)}},[v,p.length,p.join("-")]);const _=[];if(m!==y){let e=[...m];for(let t=0;t<v.length;t++){const n=v[t],i=Mt(n);p.includes(i)||(e.splice(t,0,n),_.push(n))}return"wait"===o&&_.length&&(e=_),w(Lt(e)),b(m),null}const{forceRender:k}=(0,t.useContext)(gt);return(0,ft.jsx)(ft.Fragment,{children:v.map(e=>{const t=Mt(e),n=!(l&&!u)&&(m===v||p.includes(t));return(0,ft.jsx)(Pt,{isPresent:n,initial:!(f.current&&!s)&&void 0,custom:i,presenceAffectsLayout:a,mode:o,root:d,onExitComplete:n?void 0:()=>{if(!x.has(t))return;x.set(t,!0);let e=!0;x.forEach(t=>{t||(e=!1)}),e&&(k?.(),w(g.current),l&&h?.(),r&&r())},anchorX:c,children:e},t)})})},Ot=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rt=(()=>new Set(Ot))(),Dt=e=>180*e/Math.PI,Bt=e=>{const t=Dt(Math.atan2(e[1],e[0]));return It(t)},zt={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Bt,rotateZ:Bt,skewX:e=>Dt(Math.atan(e[1])),skewY:e=>Dt(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},It=e=>((e%=360)<0&&(e+=360),e),Ft=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Ut=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),$t={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ft,scaleY:Ut,scale:e=>(Ft(e)+Ut(e))/2,rotateX:e=>It(Dt(Math.atan2(e[6],e[5]))),rotateY:e=>It(Dt(Math.atan2(-e[2],e[0]))),rotateZ:Bt,rotate:Bt,skewX:e=>Dt(Math.atan(e[4])),skewY:e=>Dt(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Wt(e){return e.includes("scale")?1:0}function Ht(e,t){if(!e||"none"===e)return Wt(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=$t,s=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=zt,s=t}if(!s)return Wt(t);const r=i[t],a=s[1].split(",").map(Vt);return"function"===typeof r?r(a):a[r]}function Vt(e){return parseFloat(e.trim())}const qt=e=>t=>"string"===typeof t&&t.startsWith(e),Zt=qt("--"),Yt=qt("var(--"),Kt=e=>!!Yt(e)&&Gt.test(e.split("/*")[0].trim()),Gt=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Jt(e){let{top:t,left:n,right:i,bottom:s}=e;return{x:{min:n,max:i},y:{min:t,max:s}}}const Xt=(e,t,n)=>e+(t-e)*n;function Qt(e){return void 0===e||1===e}function en(e){let{scale:t,scaleX:n,scaleY:i}=e;return!Qt(t)||!Qt(n)||!Qt(i)}function tn(e){return en(e)||nn(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function nn(e){return sn(e.x)||sn(e.y)}function sn(e){return e&&"0%"!==e}function rn(e,t,n){return n+t*(e-n)}function an(e,t,n,i,s){return void 0!==s&&(e=rn(e,s,i)),rn(e,n,i)+t}function on(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;e.min=an(e.min,t,n,i,s),e.max=an(e.max,t,n,i,s)}function ln(e,t){let{x:n,y:i}=t;on(e.x,n.translate,n.scale,n.originPoint),on(e.y,i.translate,i.scale,i.originPoint)}const cn=.999999999999,dn=1.0000000000001;function un(e,t){e.min=e.min+t,e.max=e.max+t}function hn(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;on(e,t,n,Xt(e.min,e.max,s),i)}function mn(e,t){hn(e.x,t.x,t.scaleX,t.scale,t.originX),hn(e.y,t.y,t.scaleY,t.scale,t.originY)}function pn(e,t){return Jt(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}const fn=new Set(["width","height","top","left","right","bottom",...Ot]),gn=(e,t,n)=>n>t?t:n<e?e:n,xn={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},yn={...xn,transform:e=>gn(0,1,e)},bn={...xn,default:1},vn=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),wn=vn("deg"),_n=vn("%"),kn=vn("px"),jn=vn("vh"),Nn=vn("vw"),Sn=(()=>({..._n,parse:e=>_n.parse(e)/100,transform:e=>_n.transform(100*e)}))(),Cn=e=>t=>t.test(e),Pn=[xn,kn,_n,wn,Nn,jn,{test:e=>"auto"===e,parse:e=>e}],Tn=e=>Pn.find(Cn(e));const En=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Mn=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ln(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const[i,s]=function(e){const t=Mn.exec(e);if(!t)return[,];const[,n,i,s]=t;return[`--${n??i}`,s]}(e);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const e=r.trim();return En(e)?parseFloat(e):e}return Kt(s)?Ln(s,t,n+1):s}const An=e=>e===xn||e===kn,On=new Set(["x","y","z"]),Rn=Ot.filter(e=>!On.has(e));const Dn={width:(e,t)=>{let{x:n}=e,{paddingLeft:i="0",paddingRight:s="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(s)},height:(e,t)=>{let{y:n}=e,{paddingTop:i="0",paddingBottom:s="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(s)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:i}=t;return parseFloat(i)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:i}=t;return parseFloat(i)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return Ht(n,"x")},y:(e,t)=>{let{transform:n}=t;return Ht(n,"y")}};Dn.translateX=Dn.x,Dn.translateY=Dn.y;const Bn=e=>e,zn={},In=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Fn={value:null,addProjectionMetrics:null};function Un(e,t){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,a=In.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,i=new Set,s=!1,r=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){a.has(t)&&(d.schedule(t),e()),l++,t(o)}const d={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&s?n:i;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),t.has(e)||t.add(e),e},cancel:e=>{i.delete(e),a.delete(e)},process:e=>{o=e,s?r=!0:(s=!0,[n,i]=[i,n],n.forEach(c),t&&Fn.value&&Fn.value.frameloop[t].push(l),l=0,n.clear(),s=!1,r&&(r=!1,d.process(e)))}};return d}(r,t?n:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:m,postRender:p}=a,f=()=>{const r=zn.useManualTiming?s.timestamp:performance.now();n=!1,zn.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(r-s.timestamp,40),1)),s.timestamp=r,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),d.process(s),u.process(s),h.process(s),m.process(s),p.process(s),s.isProcessing=!1,n&&t&&(i=!1,e(f))},g=In.reduce((t,r)=>{const o=a[r];return t[r]=function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,i=!0,s.isProcessing||e(f)),o.schedule(t,r,a)},t},{});return{schedule:g,cancel:e=>{for(let t=0;t<In.length;t++)a[In[t]].cancel(e)},state:s,steps:a}}const{schedule:$n,cancel:Wn,state:Hn,steps:Vn}=Un("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Bn,!0),qn=new Set;let Zn=!1,Yn=!1,Kn=!1;function Gn(){if(Yn){const e=Array.from(qn).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return Rn.forEach(n=>{const i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{let[n,i]=t;e.getValue(n)?.set(i)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Yn=!1,Zn=!1,qn.forEach(e=>e.complete(Kn)),qn.clear()}function Jn(){qn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Yn=!0)})}class Xn{constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=s,this.isAsync=r}scheduleResolve(){this.state="scheduled",this.isAsync?(qn.add(this),Zn||(Zn=!0,$n.read(Jn),$n.resolveKeyframes(Gn))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;if(null===e[0]){const s=i?.get(),r=e[e.length-1];if(void 0!==s)e[0]=s;else if(n&&t){const i=n.readValue(t,r);void 0!==i&&null!==i&&(e[0]=i)}void 0===e[0]&&(e[0]=r),i&&void 0===s&&i.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qn.delete(this)}cancel(){"scheduled"===this.state&&(qn.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Qn=e=>/^0[^.\s]+$/u.test(e);function ei(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||Qn(e))}const ti=e=>Math.round(1e5*e)/1e5,ni=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const ii=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,si=(e,t)=>n=>Boolean("string"===typeof n&&ii.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),ri=(e,t,n)=>i=>{if("string"!==typeof i)return i;const[s,r,a,o]=i.match(ni);return{[e]:parseFloat(s),[t]:parseFloat(r),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},ai={...xn,transform:e=>Math.round((e=>gn(0,255,e))(e))},oi={test:si("rgb","red"),parse:ri("red","green","blue"),transform:e=>{let{red:t,green:n,blue:i,alpha:s=1}=e;return"rgba("+ai.transform(t)+", "+ai.transform(n)+", "+ai.transform(i)+", "+ti(yn.transform(s))+")"}};const li={test:si("#"),parse:function(e){let t="",n="",i="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}},transform:oi.transform},ci={test:si("hsl","hue"),parse:ri("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:i,alpha:s=1}=e;return"hsla("+Math.round(t)+", "+_n.transform(ti(n))+", "+_n.transform(ti(i))+", "+ti(yn.transform(s))+")"}},di={test:e=>oi.test(e)||li.test(e)||ci.test(e),parse:e=>oi.test(e)?oi.parse(e):ci.test(e)?ci.parse(e):li.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?oi.transform(e):ci.transform(e),getAnimatableNone:e=>{const t=di.parse(e);return t.alpha=0,di.transform(t)}},ui=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const hi="number",mi="color",pi=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fi(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const a=t.replace(pi,e=>(di.test(e)?(i.color.push(r),s.push(mi),n.push(di.parse(e))):e.startsWith("var(")?(i.var.push(r),s.push("var"),n.push(e)):(i.number.push(r),s.push(hi),n.push(parseFloat(e))),++r,"${}")).split("${}");return{values:n,split:a,indexes:i,types:s}}function gi(e){return fi(e).values}function xi(e){const{split:t,types:n}=fi(e),i=t.length;return e=>{let s="";for(let r=0;r<i;r++)if(s+=t[r],void 0!==e[r]){const t=n[r];s+=t===hi?ti(e[r]):t===mi?di.transform(e[r]):e[r]}return s}}const yi=e=>"number"===typeof e?0:di.test(e)?di.getAnimatableNone(e):e;const bi={test:function(e){return isNaN(e)&&"string"===typeof e&&(e.match(ni)?.length||0)+(e.match(ui)?.length||0)>0},parse:gi,createTransformer:xi,getAnimatableNone:function(e){const t=gi(e);return xi(e)(t.map(yi))}},vi=new Set(["brightness","contrast","saturate","opacity"]);function wi(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[i]=n.match(ni)||[];if(!i)return e;const s=n.replace(i,"");let r=vi.has(t)?1:0;return i!==n&&(r*=100),t+"("+r+s+")"}const _i=/\b([a-z-]*)\(.*?\)/gu,ki={...bi,getAnimatableNone:e=>{const t=e.match(_i);return t?t.map(wi).join(" "):e}},ji={...xn,transform:Math.round},Ni={borderWidth:kn,borderTopWidth:kn,borderRightWidth:kn,borderBottomWidth:kn,borderLeftWidth:kn,borderRadius:kn,radius:kn,borderTopLeftRadius:kn,borderTopRightRadius:kn,borderBottomRightRadius:kn,borderBottomLeftRadius:kn,width:kn,maxWidth:kn,height:kn,maxHeight:kn,top:kn,right:kn,bottom:kn,left:kn,padding:kn,paddingTop:kn,paddingRight:kn,paddingBottom:kn,paddingLeft:kn,margin:kn,marginTop:kn,marginRight:kn,marginBottom:kn,marginLeft:kn,backgroundPositionX:kn,backgroundPositionY:kn,...{rotate:wn,rotateX:wn,rotateY:wn,rotateZ:wn,scale:bn,scaleX:bn,scaleY:bn,scaleZ:bn,skew:wn,skewX:wn,skewY:wn,distance:kn,translateX:kn,translateY:kn,translateZ:kn,x:kn,y:kn,z:kn,perspective:kn,transformPerspective:kn,opacity:yn,originX:Sn,originY:Sn,originZ:kn},zIndex:ji,fillOpacity:yn,strokeOpacity:yn,numOctaves:ji},Si={...Ni,color:di,backgroundColor:di,outlineColor:di,fill:di,stroke:di,borderColor:di,borderTopColor:di,borderRightColor:di,borderBottomColor:di,borderLeftColor:di,filter:ki,WebkitFilter:ki},Ci=e=>Si[e];function Pi(e,t){let n=Ci(e);return n!==ki&&(n=bi),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Ti=new Set(["auto","none","0"]);class Ei extends Xn{constructor(e,t,n,i,s){super(e,t,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"===typeof n&&(n=n.trim(),Kt(n))){const i=Ln(n,t.current);void 0!==i&&(e[o]=i),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!fn.has(n)||2!==e.length)return;const[i,s]=e,r=Tn(i),a=Tn(s);if(r!==a)if(An(r)&&An(a))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else Dn[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)(null===e[i]||ei(e[i]))&&n.push(i);n.length&&function(e,t,n){let i,s=0;for(;s<e.length&&!i;){const t=e[s];"string"===typeof t&&!Ti.has(t)&&fi(t).values.length&&(i=e[s]),s++}if(i&&n)for(const r of t)e[r]=Pi(n,i)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Dn[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];void 0!==i&&e.getValue(n,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,r=n[s];n[s]=Dn[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==r&&void 0===this.finalKeyframe&&(this.finalKeyframe=r),this.removedTransforms?.length&&this.removedTransforms.forEach(t=>{let[n,i]=t;e.getValue(n).set(i)}),this.resolveNoneKeyframes()}}const Mi=e=>Boolean(e&&e.getVelocity);let Li;function Ai(){Li=void 0}const Oi={now:()=>(void 0===Li&&Oi.set(Hn.isProcessing||zn.useManualTiming?Hn.timestamp:performance.now()),Li),set:e=>{Li=e,queueMicrotask(Ai)}};function Ri(e,t){-1===e.indexOf(t)&&e.push(t)}function Di(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Bi{constructor(){this.subscriptions=[]}add(e){return Ri(this.subscriptions,e),()=>Di(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(let s=0;s<i;s++){const i=this.subscriptions[s];i&&i(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function zi(e,t){return t?e*(1e3/t):0}const Ii={current:void 0};class Fi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=Oi.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Oi.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Bi);const n=this.events[e].add(t);return"change"===e?()=>{n(),$n.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Ii.current&&Ii.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Oi.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return zi(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ui(e,t){return new Fi(e,t)}const $i=[...Pn,di,bi],{schedule:Wi,cancel:Hi}=Un(queueMicrotask,!1),Vi={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qi={};for(const n in Vi)qi[n]={isEnabled:e=>Vi[n].some(t=>!!e[t])};const Zi=()=>({x:{min:0,max:0},y:{min:0,max:0}}),Yi={current:null},Ki={current:!1};const Gi=new WeakMap;function Ji(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function Xi(e){return"string"===typeof e||Array.isArray(e)}const Qi=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],es=["initial",...Qi];function ts(e){return Ji(e.animate)||es.some(t=>Xi(e[t]))}function ns(e){return Boolean(ts(e)||e.variants)}function is(e){const t=[{},{}];return e?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function ss(e,t,n,i){if("function"===typeof t){const[s,r]=is(i);t=t(void 0!==n?n:e.custom,s,r)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[s,r]=is(i);t=t(void 0!==n?n:e.custom,s,r)}return t}const rs=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class as{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xn,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Oi.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,$n.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=Boolean(r),this.isControllingVariants=ts(n),this.isVariantNode=ns(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in u){const e=u[h];void 0!==l[h]&&Mi(e)&&e.set(l[h])}}mount(e){this.current=e,Gi.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Ki.current||function(){if(Ki.current=!0,yt)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Yi.current=e.matches;e.addEventListener("change",t),t()}else Yi.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Yi.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Wn(this.notifyUpdate),Wn(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Rt.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&$n.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in qi){const t=qi[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<rs.length;n++){const t=rs[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const i=e["on"+t];i&&(this.propEventSubscriptions[t]=this.on(t,i))}this.prevMotionValues=function(e,t,n){for(const i in t){const s=t[i],r=n[i];if(Mi(s))e.addValue(i,s);else if(Mi(r))e.addValue(i,Ui(s,{owner:e}));else if(r!==s)if(e.hasValue(i)){const t=e.getValue(i);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(i);e.addValue(i,Ui(void 0!==t?t:s,{owner:e}))}}for(const i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Ui(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==n&&null!==n&&("string"===typeof n&&(En(n)||Qn(n))?n=parseFloat(n):!(e=>$i.find(Cn(e)))(n)&&bi.test(t)&&(n=Pi(e,t)),this.setBaseTarget(e,Mi(n)?n.get():n)),Mi(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){const i=ss(this.props,t,this.presenceContext?.custom);i&&(n=i[e])}if(t&&void 0!==n)return n;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||Mi(i)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new Bi),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e].notify(...n)}}scheduleRenderMicrotask(){Wi.render(this.render)}}class os extends as{constructor(){super(...arguments),this.KeyframeResolver=Ei}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:i}=t;delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Mi(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}const ls=(e,t)=>t&&"number"===typeof e?t.transform(e):e,cs={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ds=Ot.length;function us(e,t,n){const{style:i,vars:s,transformOrigin:r}=e;let a=!1,o=!1;for(const l in t){const e=t[l];if(Rt.has(l))a=!0;else if(Zt(l))s[l]=e;else{const t=ls(e,Ni[l]);l.startsWith("origin")?(o=!0,r[l]=t):i[l]=t}}if(t.transform||(a||n?i.transform=function(e,t,n){let i="",s=!0;for(let r=0;r<ds;r++){const a=Ot[r],o=e[a];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(a.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=ls(o,Ni[a]);l||(s=!1,i+=`${cs[a]||a}(${e}) `),n&&(t[a]=e)}}return i=i.trim(),n?i=n(t,s?"":i):s&&(i="none"),i}(t,e.transform,n):i.transform&&(i.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=r;i.transformOrigin=`${e} ${t} ${n}`}}function hs(e,t,n,i){let{style:s,vars:r}=t;const a=e.style;let o;for(o in s)a[o]=s[o];for(o in i?.applyProjectionStyles(a,n),r)a.setProperty(o,r[o])}const ms={};function ps(e,t){let{layout:n,layoutId:i}=t;return Rt.has(e)||e.startsWith("origin")||(n||void 0!==i)&&(!!ms[e]||"opacity"===e)}function fs(e,t,n){const{style:i}=e,s={};for(const r in i)(Mi(i[r])||t.style&&Mi(t.style[r])||ps(r,e)||void 0!==n?.getValue(r)?.liveStyle)&&(s[r]=i[r]);return s}class gs extends os{constructor(){super(...arguments),this.type="html",this.renderInstance=hs}readValueFromInstance(e,t){if(Rt.has(t))return this.projection?.isProjecting?Wt(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Ht(n,t)})(e,t);{const i=(n=e,window.getComputedStyle(n)),s=(Zt(t)?i.getPropertyValue(t):i[t])||0;return"string"===typeof s?s.trim():s}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return pn(e,n)}build(e,t,n){us(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return fs(e,t,n)}}const xs=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ys={offset:"stroke-dashoffset",array:"stroke-dasharray"},bs={offset:"strokeDashoffset",array:"strokeDasharray"};function vs(e,t,n,i,s){let{attrX:r,attrY:a,attrScale:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0,...u}=t;if(us(e,u,i),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=s?.transformBox??"fill-box",delete h.transformBox),void 0!==r&&(h.x=r),void 0!==a&&(h.y=a),void 0!==o&&(h.scale=o),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const r=s?ys:bs;e[r.offset]=kn.transform(-i);const a=kn.transform(t),o=kn.transform(n);e[r.array]=`${a} ${o}`}(h,l,c,d,!1)}const ws=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),_s=e=>"string"===typeof e&&"svg"===e.toLowerCase();function ks(e,t,n){const i=fs(e,t,n);for(const s in e)if(Mi(e[s])||Mi(t[s])){i[-1!==Ot.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return i}class js extends os{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Zi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Rt.has(t)){const e=Ci(t);return e&&e.default||0}return t=ws.has(t)?t:xs(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return ks(e,t,n)}build(e,t,n){vs(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,i){!function(e,t,n,i){hs(e,t,void 0,i);for(const s in t.attrs)e.setAttribute(ws.has(s)?s:xs(s),t.attrs[s])}(e,t,0,i)}mount(e){this.isSVGTag=_s(e.tagName),super.mount(e)}}const Ns=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ss(e){return"string"===typeof e&&!e.includes("-")&&!!(Ns.indexOf(e)>-1||/[A-Z]/u.test(e))}const Cs=(e,n)=>Ss(e)?new js(n):new gs(n,{allowProjection:e!==t.Fragment}),Ps=(0,t.createContext)({strict:!1}),Ts=(0,t.createContext)({});function Es(e){const{initial:n,animate:i}=function(e,t){if(ts(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Xi(t)?t:void 0,animate:Xi(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(Ts));return(0,t.useMemo)(()=>({initial:n,animate:i}),[Ms(n),Ms(i)])}function Ms(e){return Array.isArray(e)?e.join(" "):e}const Ls=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function As(e,t,n){for(const i in t)Mi(t[i])||ps(i,n)||(e[i]=t[i])}function Os(e,n){const i={};return As(i,e.style||{},e),Object.assign(i,function(e,n){let{transformTemplate:i}=e;return(0,t.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return us(e,n,i),Object.assign({},e.vars,e.style)},[n])}(e,n)),i}function Rs(e,t){const n={},i=Os(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const Ds=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}});function Bs(e,n,i,s){const r=(0,t.useMemo)(()=>{const t={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return vs(t,n,_s(s),e.transformTemplate,e.style),{...t.attrs,style:{...t.style}}},[n]);if(e.style){const t={};As(t,e.style,e),r.style={...t,...r.style}}return r}const zs=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Is(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||zs.has(e)}let Fs=e=>!Is(e);try{"function"===typeof(Us=require("@emotion/is-prop-valid").default)&&(Fs=e=>e.startsWith("on")?!Is(e):Us(e))}catch{}var Us;function $s(e,n,i,s,r){let{latestValues:a}=s,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(Ss(e)?Bs:Rs)(n,a,r,e),c=function(e,t,n){const i={};for(const s in e)"values"===s&&"object"===typeof e.values||(Fs(s)||!0===n&&Is(s)||!t&&!Is(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}(n,"string"===typeof e,o),d=e!==t.Fragment?{...c,...l,ref:i}:{},{children:u}=n,h=(0,t.useMemo)(()=>Mi(u)?u.get():u,[u]);return(0,t.createElement)(e,{...d,children:h})}function Ws(e){return Mi(e)?e.get():e}function Hs(e,t,n,i){const s={},r=i(e,{});for(const h in r)s[h]=Ws(r[h]);let{initial:a,animate:o}=e;const l=ts(e),c=ns(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let d=!!n&&!1===n.initial;d=d||!1===a;const u=d?o:a;if(u&&"boolean"!==typeof u&&!Ji(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const i=ss(e,t[n]);if(i){const{transitionEnd:e,transition:t,...n}=i;for(const i in n){let e=n[i];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(s[i]=e)}for(const i in e)s[i]=e[i]}}}return s}const Vs=e=>(n,i)=>{const s=(0,t.useContext)(Ts),r=(0,t.useContext)(vt),a=()=>function(e,t,n,i){let{scrapeMotionValuesFromProps:s,createRenderState:r}=e;return{latestValues:Hs(t,n,i,s),renderState:r()}}(e,n,s,r);return i?a():xt(a)},qs=Vs({scrapeMotionValuesFromProps:fs,createRenderState:Ls}),Zs=Vs({scrapeMotionValuesFromProps:ks,createRenderState:Ds});const Ys=Symbol.for("motionComponentSymbol");function Ks(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Gs(e,n,i){return(0,t.useCallback)(t=>{t&&e.onMount&&e.onMount(t),n&&(t?n.mount(t):n.unmount()),i&&("function"===typeof i?i(t):Ks(i)&&(i.current=t))},[n])}const Js="data-"+xs("framerAppearId"),Xs=(0,t.createContext)({});function Qs(e,n,i,s,r){const{visualElement:a}=(0,t.useContext)(Ts),o=(0,t.useContext)(Ps),l=(0,t.useContext)(vt),c=(0,t.useContext)(kt).reducedMotion,d=(0,t.useRef)(null);s=s||o.renderer,!d.current&&s&&(d.current=s(e,{visualState:n,parent:a,props:i,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:c}));const u=d.current,h=(0,t.useContext)(Xs);!u||u.projection||!r||"html"!==u.type&&"svg"!==u.type||function(e,t,n,i){const{layoutId:s,layout:r,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:er(e.parent)),e.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:Boolean(a)||o&&Ks(o),visualElement:e,animationType:"string"===typeof r?r:"both",initialPromotionConfig:i,crossfade:d,layoutScroll:l,layoutRoot:c})}(d.current,i,r,h);const m=(0,t.useRef)(!1);(0,t.useInsertionEffect)(()=>{u&&m.current&&u.update(i,l)});const p=i[Js],f=(0,t.useRef)(Boolean(p)&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return bt(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),f.current&&u.animationState&&u.animationState.animateChanges())}),(0,t.useEffect)(()=>{u&&(!f.current&&u.animationState&&u.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),f.current=!1),u.enteringChildren=void 0)}),u}function er(e){if(e)return!1!==e.options.allowProjection?e.projection:er(e.parent)}function tr(e){let{forwardMotionProps:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;i&&function(e){for(const t in e)qi[t]={...qi[t],...e[t]}}(i);const r=Ss(e)?Zs:qs;function a(i,a){let o;const l={...(0,t.useContext)(kt),...i,layoutId:nr(i)},{isStatic:c}=l,d=Es(i),u=r(i,c);if(!c&&yt){!function(){(0,t.useContext)(Ps).strict;0}();const n=function(e){const{drag:t,layout:n}=qi;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(l);o=n.MeasureLayout,d.visualElement=Qs(e,u,l,s,n.ProjectionNode)}return(0,ft.jsxs)(Ts.Provider,{value:d,children:[o&&d.visualElement?(0,ft.jsx)(o,{visualElement:d.visualElement,...l}):null,$s(e,i,Gs(u,d.visualElement,a),u,c,n)]})}a.displayName=`motion.${"string"===typeof e?e:`create(${e.displayName??e.name??""})`}`;const o=(0,t.forwardRef)(a);return o[Ys]=e,o}function nr(e){let{layoutId:n}=e;const i=(0,t.useContext)(gt).id;return i&&void 0!==n?i+"-"+n:n}function ir(e,t){if("undefined"===typeof Proxy)return tr;const n=new Map,i=(n,i)=>tr(n,i,e,t);return new Proxy((e,t)=>i(e,t),{get:(s,r)=>"create"===r?i:(n.has(r)||n.set(r,tr(r,void 0,e,t)),n.get(r))})}function sr(e,t,n){const i=e.getProps();return ss(i,t,void 0!==n?n:i.custom,e)}function rr(e,t){return e?.[t]??e?.default??e}const ar=e=>Array.isArray(e);function or(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ui(n))}function lr(e){return ar(e)?e[e.length-1]||0:e}function cr(e,t){const n=e.getValue("willChange");if(i=n,Boolean(Mi(i)&&i.add))return n.add(t);if(!n&&zn.WillChange){const n=new zn.WillChange("auto");e.addValue("willChange",n),n.add(t)}var i}function dr(e){return e.props[Js]}function ur(e){e.duration=0,e.type}const hr=(e,t)=>n=>t(e(n)),mr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(hr)},pr=e=>1e3*e,fr=e=>e/1e3,gr={layout:0,mainThread:0,waapi:0};function xr(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function yr(e,t){return n=>n>0?t:e}const br=(e,t,n)=>{const i=e*e,s=n*(t*t-i)+i;return s<0?0:Math.sqrt(s)},vr=[li,oi,ci];function wr(e){const t=(e=>vr.find(t=>t.test(e)))(e);if(Boolean(t),!Boolean(t))return!1;let n=t.parse(e);return t===ci&&(n=function(e){let{hue:t,saturation:n,lightness:i,alpha:s}=e;t/=360,n/=100,i/=100;let r=0,a=0,o=0;if(n){const e=i<.5?i*(1+n):i+n-i*n,s=2*i-e;r=xr(s,e,t+1/3),a=xr(s,e,t),o=xr(s,e,t-1/3)}else r=a=o=i;return{red:Math.round(255*r),green:Math.round(255*a),blue:Math.round(255*o),alpha:s}}(n)),n}const _r=(e,t)=>{const n=wr(e),i=wr(t);if(!n||!i)return yr(e,t);const s={...n};return e=>(s.red=br(n.red,i.red,e),s.green=br(n.green,i.green,e),s.blue=br(n.blue,i.blue,e),s.alpha=Xt(n.alpha,i.alpha,e),oi.transform(s))},kr=new Set(["none","hidden"]);function jr(e,t){return n=>Xt(e,t,n)}function Nr(e){return"number"===typeof e?jr:"string"===typeof e?Kt(e)?yr:di.test(e)?_r:Pr:Array.isArray(e)?Sr:"object"===typeof e?di.test(e)?_r:Cr:yr}function Sr(e,t){const n=[...e],i=n.length,s=e.map((e,n)=>Nr(e)(e,t[n]));return e=>{for(let t=0;t<i;t++)n[t]=s[t](e);return n}}function Cr(e,t){const n={...e,...t},i={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(i[s]=Nr(e[s])(e[s],t[s]));return e=>{for(const t in i)n[t]=i[t](e);return n}}const Pr=(e,t)=>{const n=bi.createTransformer(t),i=fi(e),s=fi(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?kr.has(e)&&!s.values.length||kr.has(t)&&!i.values.length?function(e,t){return kr.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):mr(Sr(function(e,t){const n=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],a=e.indexes[r][i[r]],o=e.values[a]??0;n[s]=o,i[r]++}return n}(i,s),s.values),n):yr(e,t)};function Tr(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return Xt(e,t,n);return Nr(e)(e,t)}const Er=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return $n.update(t,e)},stop:()=>Wn(t),now:()=>Hn.isProcessing?Hn.timestamp:Oi.now()}},Mr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i="";const s=Math.max(Math.round(t/n),2);for(let r=0;r<s;r++)i+=Math.round(1e4*e(r/(s-1)))/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Lr=2e4;function Ar(e){let t=0;let n=e.next(t);for(;!n.done&&t<Lr;)t+=50,n=e.next(t);return t>=Lr?1/0:t}function Or(e,t,n){const i=Math.max(t-5,0);return zi(n-e(i),t-i)}const Rr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Dr=.001;function Br(e){let t,n,{duration:i=Rr.duration,bounce:s=Rr.bounce,velocity:r=Rr.velocity,mass:a=Rr.mass}=e;pr(Rr.maxDuration);let o=1-s;o=gn(Rr.minDamping,Rr.maxDamping,o),i=gn(Rr.minDuration,Rr.maxDuration,fr(i)),o<1?(t=e=>{const t=e*o,n=t*i,s=t-r,a=Ir(e,o),l=Math.exp(-n);return Dr-s/a*l},n=e=>{const n=e*o*i,s=n*r+r,a=Math.pow(o,2)*Math.pow(e,2)*i,l=Math.exp(-n),c=Ir(Math.pow(e,2),o);return(-t(e)+Dr>0?-1:1)*((s-a)*l)/c}):(t=e=>Math.exp(-e*i)*((e-r)*i+1)-.001,n=e=>Math.exp(-e*i)*(i*i*(r-e)));const l=function(e,t,n){let i=n;for(let s=1;s<zr;s++)i-=e(i)/t(i);return i}(t,n,5/i);if(i=pr(i),isNaN(l))return{stiffness:Rr.stiffness,damping:Rr.damping,duration:i};{const e=Math.pow(l,2)*a;return{stiffness:e,damping:2*o*Math.sqrt(a*e),duration:i}}}const zr=12;function Ir(e,t){return e*Math.sqrt(1-t*t)}const Fr=["duration","bounce"],Ur=["stiffness","damping","mass"];function $r(e,t){return t.some(t=>void 0!==e[t])}function Wr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rr.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:s}=n;const r=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:r},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=function(e){let t={velocity:Rr.velocity,stiffness:Rr.stiffness,damping:Rr.damping,mass:Rr.mass,isResolvedFromDuration:!1,...e};if(!$r(e,Ur)&&$r(e,Fr))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(1.2*n),s=i*i,r=2*gn(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Rr.mass,stiffness:s,damping:r}}else{const n=Br(e);t={...t,...n,mass:Rr.mass},t.isResolvedFromDuration=!0}return t}({...n,velocity:-fr(n.velocity||0)}),p=h||0,f=c/(2*Math.sqrt(l*d)),g=a-r,x=fr(Math.sqrt(l/d)),y=Math.abs(g)<5;let b;if(i||(i=y?Rr.restSpeed.granular:Rr.restSpeed.default),s||(s=y?Rr.restDelta.granular:Rr.restDelta.default),f<1){const e=Ir(x,f);b=t=>{const n=Math.exp(-f*x*t);return a-n*((p+f*x*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)b=e=>a-Math.exp(-x*e)*(g+(p+x*g)*e);else{const e=x*Math.sqrt(f*f-1);b=t=>{const n=Math.exp(-f*x*t),i=Math.min(e*t,300);return a-n*((p+f*x*g)*Math.sinh(i)+e*g*Math.cosh(i))/e}}const v={calculatedDuration:m&&u||null,next:e=>{const t=b(e);if(m)o.done=e>=u;else{let n=0===e?p:0;f<1&&(n=0===e?pr(p):Or(b,e,t));const r=Math.abs(n)<=i,l=Math.abs(a-t)<=s;o.done=r&&l}return o.value=o.done?a:t,o},toString:()=>{const e=Math.min(Ar(v),Lr),t=Mr(t=>v.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return v}function Hr(e){let{keyframes:t,velocity:n=0,power:i=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],m={done:!1,value:h},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=i*n;const g=h+f,x=void 0===o?g:o(g);x!==g&&(f=x-h);const y=e=>-f*Math.exp(-e/s),b=e=>x+y(e),v=e=>{const t=y(e),n=b(e);m.done=Math.abs(t)<=d,m.value=m.done?x:n};let w,_;const k=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(m.value)&&(w=e,_=Wr({keyframes:[m.value,p(m.value)],velocity:Or(b,e,m.value),damping:r,stiffness:a,restDelta:d,restSpeed:u}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return _||void 0!==w||(t=!0,v(e),k(e)),void 0!==w&&e>=w?_.next(e-w):(!t&&v(e),m)}}}Wr.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)({...e,keyframes:[0,t]}),i=Math.min(Ar(n),Lr);return{type:"keyframes",ease:e=>n.next(i*e).value/t,duration:fr(i)}}(e,100,Wr);return e.ease=t.ease,e.duration=pr(t.duration),e.type="keyframes",e};const Vr=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function qr(e,t,n,i){if(e===t&&n===i)return Bn;const s=t=>function(e,t,n,i,s){let r,a,o=0;do{a=t+(n-t)/2,r=Vr(a,i,s)-e,r>0?n=a:t=a}while(Math.abs(r)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:Vr(s(e),t,i)}const Zr=qr(.42,0,1,1),Yr=qr(0,0,.58,1),Kr=qr(.42,0,.58,1),Gr=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Jr=e=>t=>1-e(1-t),Xr=qr(.33,1.53,.69,.99),Qr=Jr(Xr),ea=Gr(Qr),ta=e=>(e*=2)<1?.5*Qr(e):.5*(2-Math.pow(2,-10*(e-1))),na=e=>1-Math.sin(Math.acos(e)),ia=Jr(na),sa=Gr(na),ra=e=>Array.isArray(e)&&"number"===typeof e[0],aa={linear:Bn,easeIn:Zr,easeInOut:Kr,easeOut:Yr,circIn:na,circInOut:sa,circOut:ia,backIn:Qr,backInOut:ea,backOut:Xr,anticipate:ta},oa=e=>{if(ra(e)){e.length;const[t,n,i,s]=e;return qr(t,n,i,s)}return"string"===typeof e?aa[e]:e},la=(e,t,n)=>{const i=t-e;return 0===i?1:(n-e)/i};function ca(e,t){let{clamp:n=!0,ease:i,mixer:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length;if(t.length,1===r)return()=>t[0];if(2===r&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const i=[],s=n||zn.mix||Tr,r=e.length-1;for(let a=0;a<r;a++){let n=s(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||Bn:t;n=mr(e,n)}i.push(n)}return i}(t,i,s),l=o.length,c=n=>{if(a&&n<e[0])return t[0];let i=0;if(l>1)for(;i<e.length-2&&!(n<e[i+1]);i++);const s=la(e[i],e[i+1],n);return o[i](s)};return n?t=>c(gn(e[0],e[r-1],t)):c}function da(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const s=la(0,t,i);e.push(Xt(n,1,s))}}(t,e.length-1),t}function ua(e){let{duration:t=300,keyframes:n,times:i,ease:s="easeInOut"}=e;const r=(e=>Array.isArray(e)&&"number"!==typeof e[0])(s)?s.map(oa):oa(s),a={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(i&&i.length===n.length?i:da(n),t),l=ca(o,n,{ease:Array.isArray(r)?r:(c=n,d=r,c.map(()=>d||Kr).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(a.value=l(e),a.done=e>=t,a)}}const ha=e=>null!==e;function ma(e,t,n){let{repeat:i,repeatType:s="loop"}=t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=e.filter(ha),o=r<0||i&&"loop"!==s&&i%2===1?0:a.length-1;return o&&void 0!==n?n:a[o]}const pa={decay:Hr,inertia:Hr,tween:ua,keyframes:ua,spring:Wr};function fa(e){"string"===typeof e.type&&(e.type=pa[e.type])}class ga{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const xa=e=>e/100;class ya extends ga{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==Oi.now()&&this.tick(Oi.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},gr.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;fa(e);const{type:t=ua,repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:r=0}=e;let{keyframes:a}=e;const o=t||ua;o!==ua&&"number"!==typeof a[0]&&(this.mixKeyframes=mr(xa,Tr(a[0],a[1])),a=[0,100]);const l=o({...e,keyframes:a});"mirror"===s&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-r})),null===l.calculatedDuration&&(l.calculatedDuration=Ar(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:i,mixKeyframes:s,mirroredGenerator:r,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:m,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=i);let y=this.currentTime,b=n;if(d){const e=Math.min(this.currentTime,i)/a;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(n=1-n,h&&(n-=h/a)):"mirror"===u&&(b=r)),y=gn(0,1,n)*a}const v=x?{done:!1,value:c[0]}:b.next(y);s&&(v.value=s(v.value));let{done:w}=v;x||null===o||(w=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const _=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return _&&m!==Hr&&(v.value=ma(c,this.options,f,this.speed)),p&&p(v.value),_&&this.finish(),v}then(e,t){return this.finished.then(e,t)}get duration(){return fr(this.calculatedDuration)}get time(){return fr(this.currentTime)}set time(e){e=pr(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Oi.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=fr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Er,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Oi.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,gr.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function ba(e){let t;return()=>(void 0===t&&(t=e()),t)}const va=ba(()=>void 0!==window.ScrollTimeline),wa={};function _a(e,t){const n=ba(e);return()=>wa[t]??n()}const ka=_a(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(Ix){return!1}return!0},"linearEasing"),ja=e=>{let[t,n,i,s]=e;return`cubic-bezier(${t}, ${n}, ${i}, ${s})`},Na={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ja([0,.65,.55,1]),circOut:ja([.55,0,1,.45]),backIn:ja([.31,.01,.66,-.59]),backOut:ja([.33,1.53,.69,.99])};function Sa(e,t){return e?"function"===typeof e?ka()?Mr(e,t):"ease-out":ra(e)?ja(e):Array.isArray(e)?e.map(e=>Sa(e,t)||Na.easeOut):Na[e]:void 0}function Ca(e,t,n){let{delay:i=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:o="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d={[t]:n};l&&(d.offset=l);const u=Sa(o,s);Array.isArray(u)&&(d.easing=u),Fn.value&&gr.waapi++;const h={delay:i,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:"reverse"===a?"alternate":"normal"};c&&(h.pseudoElement=c);const m=e.animate(d,h);return Fn.value&&m.finished.finally(()=>{gr.waapi--}),m}function Pa(e){return"function"===typeof e&&"applyToOptions"in e}class Ta extends ga{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:i,pseudoElement:s,allowFlatten:r=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=r,this.options=e,e.type;const l=function(e){let{type:t,...n}=e;return Pa(t)&&ka()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}(e);this.animation=Ca(t,n,i,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=ma(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(Ix){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return fr(Number(e))}get time(){return fr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=pr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&va()?(this.animation.timeline=t,Bn):n(this)}}const Ea={anticipate:ta,backInOut:ea,circInOut:sa};function Ma(e){"string"===typeof e.ease&&e.ease in Ea&&(e.ease=Ea[e.ease])}class La extends Ta{constructor(e){Ma(e),fa(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:i,element:s,...r}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const a=new ya({...r,autoplay:!1}),o=pr(this.finishedTime??this.time);t.setWithVelocity(a.sample(o-10).value,a.sample(o).value,10),a.stop()}}const Aa=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!bi.test(e)&&"0"!==e||e.startsWith("url(")));const Oa=new Set(["opacity","clipPath","filter","transform"]),Ra=ba(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class Da extends ga{constructor(e){let{autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:d,...u}=e;super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Oi.now();const h={autoplay:t,delay:n,type:i,repeat:s,repeatDelay:r,repeatType:a,name:l,motionValue:c,element:d,...u},m=d?.KeyframeResolver||Xn;this.keyframeResolver=new m(o,(e,t,n)=>this.onKeyframesResolved(e,t,h,!n),l,c,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,i){this.keyframeResolver=void 0;const{name:s,type:r,velocity:a,delay:o,isHandoff:l,onUpdate:c}=n;this.resolvedAt=Oi.now(),function(e,t,n,i){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const r=e[e.length-1],a=Aa(s,t),o=Aa(r,t);return!(!a||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Pa(n))&&i)}(e,s,r,a)||(!zn.instantAnimations&&o||c?.(ma(e,n,t)),e[0]=e[e.length-1],ur(n),n.repeat=0);const d={startTime:i?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},u=!l&&function(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:s,damping:r,type:a}=e,o=t?.owner?.current;if(!(o instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return Ra()&&n&&Oa.has(n)&&("transform"!==n||!c)&&!l&&!i&&"mirror"!==s&&0!==r&&"inertia"!==a}(d)?new La({...d,element:d.motionValue.owner.current}):new ya(d);u.finished.then(()=>this.notifyFinished()).catch(Bn),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Kn=!0,Jn(),Gn(),Kn=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Ba=e=>null!==e;const za={type:"spring",stiffness:500,damping:25,restSpeed:10},Ia={type:"keyframes",duration:.8},Fa={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ua=(e,t)=>{let{keyframes:n}=t;return n.length>2?Ia:Rt.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:za:Fa};const $a=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;return a=>{const o=rr(i,e)||{},l=o.delay||i.delay||0;let{elapsed:c=0}=i;c-=pr(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:r?void 0:s};(function(e){let{when:t,delay:n,delayChildren:i,staggerChildren:s,staggerDirection:r,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}=e;return!!Object.keys(u).length})(o)||Object.assign(d,Ua(e,d)),d.duration&&(d.duration=pr(d.duration)),d.repeatDelay&&(d.repeatDelay=pr(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(ur(d),0===d.delay&&(u=!0)),(zn.instantAnimations||zn.skipAnimations)&&(u=!0,ur(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,u&&!r&&void 0!==t.get()){const e=function(e,t,n){let{repeat:i,repeatType:s="loop"}=t;const r=e.filter(Ba),a=i&&"loop"!==s&&i%2===1?0:r.length-1;return a&&void 0!==n?n:r[a]}(d.keyframes,o);if(void 0!==e)return void $n.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new ya(d):new Da(d)}};function Wa(e,t){let{protectedKeys:n,needsAnimating:i}=e;const s=n.hasOwnProperty(t)&&!0!==i[t];return i[t]=!1,s}function Ha(e,t){let{delay:n=0,transitionOverride:i,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:r=e.getDefaultTransition(),transitionEnd:a,...o}=t;i&&(r=i);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const t=e.getValue(d,e.latestValues[d]??null),i=o[d];if(void 0===i||c&&Wa(c,d))continue;const s={delay:n,...rr(r||{},d)},a=t.get();if(void 0!==a&&!t.isAnimating&&!Array.isArray(i)&&i===a&&!s.velocity)continue;let u=!1;if(window.MotionHandoffAnimation){const t=dr(e);if(t){const e=window.MotionHandoffAnimation(t,d,$n);null!==e&&(s.startTime=e,u=!0)}}cr(e,d),t.start($a(d,t,i,e.shouldReduceMotion&&fn.has(d)?{type:!1}:s,e,u));const h=t.animation;h&&l.push(h)}return a&&Promise.all(l).then(()=>{$n.update(()=>{a&&function(e,t){const n=sr(e,t);let{transitionEnd:i={},transition:s={},...r}=n||{};r={...r,...i};for(const a in r)or(e,a,lr(r[a]))}(e,a)})}),l}function Va(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const r=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*i;return"function"===typeof n?n(r,a):1===s?r*i:o-r*i}function qa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=sr(e,t,"exit"===n.type?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const r=i?()=>Promise.all(Ha(e,i,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:r=0,staggerChildren:a,staggerDirection:o}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6?arguments[6]:void 0;const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(qa(l,t,{...a,delay:n+("function"===typeof i?0:i)+Va(e.variantChildren,l,i,s,r)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,i,r,a,o,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[e,t]="beforeChildren"===o?[r,a]:[a,r];return e().then(()=>t())}return Promise.all([r(),a(n.delay)])}function Za(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const Ya=es.length;function Ka(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Ka(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Ya;n++){const i=es[n],s=e.props[i];(Xi(s)||!1===s)&&(t[i]=s)}return t}const Ga=[...Qi].reverse(),Ja=Qi.length;function Xa(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:i}=t;return function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>qa(e,t,i));n=Promise.all(s)}else if("string"===typeof t)n=qa(e,t,i);else{const s="function"===typeof t?sr(e,t,i.custom):t;n=Promise.all(Ha(e,s,i))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,i)}))}function Qa(e){let t=Xa(e),n=no(),i=!0;const s=t=>(n,i)=>{const s=sr(e,i,"exit"===t?e.presenceContext?.custom:void 0);if(s){const{transition:e,transitionEnd:t,...i}=s;n={...n,...i,...t}}return n};function r(r){const{props:a}=e,o=Ka(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<Ja;t++){const h=Ga[t],m=n[h],p=void 0!==a[h]?a[h]:o[h],f=Xi(p),g=h===r?m.isActive:null;!1===g&&(u=t);let x=p===o[h]&&p!==a[h]&&f;if(x&&i&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys={...d},!m.isActive&&null===g||!p&&!m.prevProp||Ji(p)||"boolean"===typeof p)continue;const y=eo(m.prevProp,p);let b=y||h===r&&m.isActive&&!x&&f||t>u&&f,v=!1;const w=Array.isArray(p)?p:[p];let _=w.reduce(s(h),{});!1===g&&(_={});const{prevResolvedValues:k={}}=m,j={...k,..._},N=t=>{b=!0,c.has(t)&&(v=!0,c.delete(t)),m.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in j){const t=_[e],n=k[e];if(d.hasOwnProperty(e))continue;let i=!1;i=ar(t)&&ar(n)?!Za(t,n):t!==n,i?void 0!==t&&null!==t?N(e):c.add(e):void 0!==t&&c.has(e)?N(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=_,m.isActive&&(d={...d,..._}),i&&e.blockInitialAnimation&&(b=!1);const S=x&&y;b&&(!S||v)&&l.push(...w.map(t=>{const n={type:h};if("string"===typeof t&&i&&!S&&e.manuallyAnimateOnMount&&e.parent){const{parent:i}=e,s=sr(i,t);if(i.enteringChildren&&s){const{delayChildren:t}=s.transition||{};n.delay=Va(i.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!==typeof a.initial){const n=sr(e,Array.isArray(a.initial)?a.initial[0]:a.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const i=e.getBaseTarget(n),s=e.getValue(n);s&&(s.liveStyle=!0),t[n]=i??null}),l.push({animation:t})}let h=Boolean(l.length);return!i||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(h=!1),i=!1,h?t(l):Promise.resolve()}return{animateChanges:r,setActive:function(t,i){if(n[t].isActive===i)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,i)),n[t].isActive=i;const s=r(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=no(),i=!0}}}function eo(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Za(t,e)}function to(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function no(){return{animate:to(!0),whileInView:to(),whileHover:to(),whileTap:to(),whileDrag:to(),whileFocus:to(),exit:to()}}class io{constructor(e){this.isMounted=!1,this.node=e}update(){}}let so=0;const ro={animation:{Feature:class extends io{constructor(e){super(e),e.animationState||(e.animationState=Qa(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ji(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends io{constructor(){super(...arguments),this.id=so++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},ao={x:!1,y:!1};function oo(){return ao.x||ao.y}function lo(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const co=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function uo(e){return{point:{x:e.pageX,y:e.pageY}}}function ho(e,t,n,i){return lo(e,t,(e=>t=>co(t)&&e(t,uo(t)))(n),i)}function mo(e){return e.max-e.min}function po(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=i,e.originPoint=Xt(t.min,t.max,e.origin),e.scale=mo(n)/mo(t),e.translate=Xt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function fo(e,t,n,i){po(e.x,t.x,n.x,i?i.originX:void 0),po(e.y,t.y,n.y,i?i.originY:void 0)}function go(e,t,n){e.min=n.min+t.min,e.max=e.min+mo(t)}function xo(e,t,n){e.min=t.min-n.min,e.max=e.min+mo(t)}function yo(e,t,n){xo(e.x,t.x,n.x),xo(e.y,t.y,n.y)}function bo(e){return[e("x"),e("y")]}const vo=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},wo=(e,t)=>Math.abs(e-t);class _o{constructor(e,t){let{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:r=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=No(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=wo(e.x,t.x),i=wo(e.y,t.y);return Math.sqrt(n**2+i**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:i}=e,{timestamp:s}=Hn;this.history.push({...i,timestamp:s});const{onStart:r,onMove:a}=this.handlers;t||(r&&r(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=ko(t,this.transformPagePoint),$n.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:i,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const r=No("pointercancel"===e.type?this.lastMoveEventInfo:ko(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,r),i&&i(e,r)},!co(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=r,this.contextWindow=i||window;const a=ko(uo(e),this.transformPagePoint),{point:o}=a,{timestamp:l}=Hn;this.history=[{...o,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,No(a,this.history)),this.removeListeners=mr(ho(this.contextWindow,"pointermove",this.handlePointerMove),ho(this.contextWindow,"pointerup",this.handlePointerUp),ho(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Wn(this.updatePoint)}}function ko(e,t){return t?{point:t(e.point)}:e}function jo(e,t){return{x:e.x-t.x,y:e.y-t.y}}function No(e,t){let{point:n}=e;return{point:n,delta:jo(n,Co(t)),offset:jo(n,So(t)),velocity:Po(t,.1)}}function So(e){return e[0]}function Co(e){return e[e.length-1]}function Po(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const s=Co(e);for(;n>=0&&(i=e[n],!(s.timestamp-i.timestamp>pr(t)));)n--;if(!i)return{x:0,y:0};const r=fr(s.timestamp-i.timestamp);if(0===r)return{x:0,y:0};const a={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function To(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Eo(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}const Mo=.35;function Lo(e,t,n){return{min:Ao(e,t),max:Ao(e,n)}}function Ao(e,t){return"number"===typeof e?e:e[t]||0}const Oo=new WeakMap;class Ro{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:i}=this.visualElement;if(i&&!1===i.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new _o(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(uo(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:i,onDragStart:s}=this.getProps();if(n&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(r=n)||"y"===r?ao[r]?null:(ao[r]=!0,()=>{ao[r]=!1}):ao.x||ao.y?null:(ao.x=ao.y=!0,()=>{ao.x=ao.y=!1}),!this.openDragLock))return;var r;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bo(e=>{let t=this.getAxisMotionValue(e).get()||0;if(_n.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const i=n.layout.layoutBox[e];if(i){t=mo(i)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),s&&$n.postRender(()=>s(e,t)),cr(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:i,onDirectionLock:s,onDrag:r}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:a}=t;if(i&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),r&&r(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>bo(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play())},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,distanceThreshold:n,contextWindow:vo(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!n)return;const{velocity:r}=i;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&$n.postRender(()=>a(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!Do(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let r=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(r=function(e,t,n){let{min:i,max:s}=t;return void 0!==i&&e<i?e=n?Xt(i,e,n.min):Math.max(e,i):void 0!==s&&e>s&&(e=n?Xt(s,e,n.max):Math.min(e,s)),e}(r,this.constraints[e],this.elastic[e])),s.set(r)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Ks(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,t){let{top:n,left:i,bottom:s,right:r}=t;return{x:To(e.x,i,r),y:To(e.y,n,s)}}(n.layoutBox,e),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mo;return!1===e?e=0:!0===e&&(e=Mo),{x:Lo(e,"left","right"),y:Lo(e,"top","bottom")}}(t),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&bo(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ks(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=function(e,t,n){const i=pn(e,n),{scroll:s}=t;return s&&(un(i.x,s.offset.x),un(i.y,s.offset.y)),i}(n,i.root,this.visualElement.getTransformPagePoint());let r=function(e,t){return{x:Eo(e.x,t.x),y:Eo(e.y,t.y)}}(i.layout.layoutBox,s);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(r));this.hasMutatedConstraints=!!e,e&&(r=Jt(e))}return r}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:r,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=bo(a=>{if(!Do(a,t,this.currentDirection))return;let l=o&&o[a]||{};r&&(l={min:0,max:0});const c=i?200:1e6,d=i?40:1e7,u={type:"inertia",velocity:n?e[a]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(a,u)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return cr(this.visualElement,e),n.start($a(e,n,0,t,this.visualElement,!1))}stopAnimation(){bo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){bo(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){bo(t=>{const{drag:n}=this.getProps();if(!Do(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:n,max:r}=i.layout.layoutBox[t];s.set(e[t]-Xt(n,r,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Ks(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};bo(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();i[e]=function(e,t){let n=.5;const i=mo(e),s=mo(t);return s>i?n=la(t.min,t.max-i,e.min):i>s&&(n=la(e.min,e.max-s,t.min)),gn(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),bo(t=>{if(!Do(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:r}=this.constraints[t];n.set(Xt(s,r,i[t]))})}addListeners(){if(!this.visualElement.current)return;Oo.set(this.visualElement,this);const e=ho(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Ks(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),$n.read(t);const s=lo(window,"resize",()=>this.scalePositionWithinConstraints()),r=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(bo(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{s(),e(),i(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:r=Mo,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:r,dragMomentum:a}}}function Do(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Bo=e=>(t,n)=>{e&&$n.postRender(()=>e(t,n))};const zo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Io(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Fo={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!kn.test(e))return e;e=parseFloat(e)}return`${Io(e,t.target.x)}% ${Io(e,t.target.y)}%`}},Uo={correct:(e,t)=>{let{treeScale:n,projectionDelta:i}=t;const s=e,r=bi.parse(e);if(r.length>5)return s;const a=bi.createTransformer(e),o="number"!==typeof r[0]?1:0,l=i.x.scale*n.x,c=i.y.scale*n.y;r[0+o]/=l,r[1+o]/=c;const d=Xt(l,c,.5);return"number"===typeof r[2+o]&&(r[2+o]/=d),"number"===typeof r[3+o]&&(r[3+o]/=d),a(r)}};let $o=!1;class Wo extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;!function(e){for(const t in e)ms[t]=e[t],Zt(t)&&(ms[t].isCSSVariable=!0)}(Vo),s&&(t.group&&t.group.add(s),n&&n.register&&i&&n.register(s),$o&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),zo.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:s}=this.props,{projection:r}=n;return r?(r.isPresent=s,$o=!0,i||e.layoutDependency!==t||void 0===t||e.isPresent!==s?r.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?r.promote():r.relegate()||$n.postRender(()=>{const e=r.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Wi.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;$o=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ho(e){const[n,i]=Et(),s=(0,t.useContext)(gt);return(0,ft.jsx)(Wo,{...e,layoutGroup:s,switchLayoutGroup:(0,t.useContext)(Xs),isPresent:n,safeToRemove:i})}const Vo={borderRadius:{...Fo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fo,borderTopRightRadius:Fo,borderBottomLeftRadius:Fo,borderBottomRightRadius:Fo,boxShadow:Uo};function qo(e){return wt(e)&&"ownerSVGElement"in e}const Zo=(e,t)=>e.depth-t.depth;class Yo{constructor(){this.children=[],this.isDirty=!1}add(e){Ri(this.children,e),this.isDirty=!0}remove(e){Di(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Zo),this.isDirty=!1,this.children.forEach(e)}}function Ko(e,t){const n=Oi.now(),i=s=>{let{timestamp:r}=s;const a=r-n;a>=t&&(Wn(i),e(a-t))};return $n.setup(i,!0),()=>Wn(i)}const Go=["TopLeft","TopRight","BottomLeft","BottomRight"],Jo=Go.length,Xo=e=>"string"===typeof e?parseFloat(e):e,Qo=e=>"number"===typeof e||kn.test(e);function el(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const tl=il(0,.5,ia),nl=il(.5,.95,Bn);function il(e,t,n){return i=>i<e?0:i>t?1:n(la(e,t,i))}function sl(e,t){e.min=t.min,e.max=t.max}function rl(e,t){sl(e.x,t.x),sl(e.y,t.y)}function al(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function ol(e,t,n,i,s){return e=rn(e-=t,1/n,i),void 0!==s&&(e=rn(e,1/s,i)),e}function ll(e,t,n,i,s){let[r,a,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;_n.test(t)&&(t=parseFloat(t),t=Xt(a.min,a.max,t/100)-a.min);if("number"!==typeof t)return;let o=Xt(r.min,r.max,i);e===r&&(o-=t),e.min=ol(e.min,t,n,o,s),e.max=ol(e.max,t,n,o,s)}(e,t[r],t[a],t[o],t.scale,i,s)}const cl=["x","scaleX","originX"],dl=["y","scaleY","originY"];function ul(e,t,n,i){ll(e.x,t,cl,n?n.x:void 0,i?i.x:void 0),ll(e.y,t,dl,n?n.y:void 0,i?i.y:void 0)}function hl(e){return 0===e.translate&&1===e.scale}function ml(e){return hl(e.x)&&hl(e.y)}function pl(e,t){return e.min===t.min&&e.max===t.max}function fl(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function gl(e,t){return fl(e.x,t.x)&&fl(e.y,t.y)}function xl(e){return mo(e.x)/mo(e.y)}function yl(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class bl{constructor(){this.members=[]}add(e){Ri(this.members,e),e.scheduleRender()}remove(e){if(Di(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let i=t;i>=0;i--){const e=this.members[i];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const vl={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},wl=["","X","Y","Z"];let _l=0;function kl(e,t,n,i){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),i&&(i[e]=0))}function jl(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=dr(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",$n,!(t||i))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&jl(i)}function Nl(e){let{attachResizeListener:t,defaultParent:n,measureScroll:i,checkIsScrollRoot:s,resetTransform:r}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n?.();this.id=_l++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Fn.value&&(vl.nodes=vl.calculatedTargetDeltas=vl.calculatedProjections=0),this.nodes.forEach(Pl),this.nodes.forEach(Rl),this.nodes.forEach(Dl),this.nodes.forEach(Tl),Fn.addProjectionMetrics&&Fn.addProjectionMetrics(vl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Yo)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Bi),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];t&&t.notify(...i)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=qo(e)&&!(qo(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:i,layout:s,visualElement:r}=this.options;if(r&&!r.current&&r.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||i)&&(this.isLayoutDirty=!0),t){let n,i=0;const s=()=>this.root.updateBlockedByResize=!1;$n.read(()=>{i=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==i&&(i=e,this.root.updateBlockedByResize=!0,n&&n(),n=Ko(s,250),zo.hasAnimatedSinceResize&&(zo.hasAnimatedSinceResize=!1,this.nodes.forEach(Ol)))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&r&&(i||s)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:i,layout:s}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||r.getDefaultTransition()||$l,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=r.getProps(),c=!this.targetLayout||!gl(this.targetLayout,s),d=!n&&i;if(this.options.layoutRoot||this.resumeFrom||d||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e={...rr(a,"layout"),onPlay:o,onComplete:l};(r.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,d)}else n||Ol(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Wn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Bl),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jl(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Ml);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(Ll);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Al),this.nodes.forEach(Sl),this.nodes.forEach(Cl)):this.nodes.forEach(Ll),this.clearAllSnapshots();const e=Oi.now();Hn.delta=gn(0,1e3/60,e-Hn.timestamp),Hn.timestamp=e,Hn.isProcessing=!0,Vn.update.process(Hn),Vn.preRender.process(Hn),Vn.render.process(Hn),Hn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Wi.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(El),this.sharedNodes.forEach(zl)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$n.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$n.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||mo(this.snapshot.measuredBox.x)||mo(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=s(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!r)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!ml(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,s=i!==this.prevTransformTemplateValue;e&&this.instance&&(t||tn(this.latestValues)||s)&&(r(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var i;return e&&(n=this.removeTransform(n)),Vl((i=n).x),Vl(i.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Zl))){const{scroll:e}=this.root;e&&(un(t.x,e.offset.x),un(t.y,e.offset.y))}return t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};if(rl(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){const i=this.path[n],{scroll:s,options:r}=i;i!==this.root&&s&&r.layoutScroll&&(s.wasRoot&&rl(t,e),un(t.x,s.offset.x),un(t.y,s.offset.y))}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};rl(n,e);for(let i=0;i<this.path.length;i++){const e=this.path[i];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&mn(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),tn(e.latestValues)&&mn(n,e.latestValues)}return tn(this.latestValues)&&mn(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};rl(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!tn(e.latestValues))continue;en(e.latestValues)&&e.updateSnapshot();const i=Zi();rl(i,e.measurePageBox()),ul(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,i)}return tn(this.latestValues)&&ul(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Hn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=Hn.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},yo(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),rl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var r,a,o;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),r=this.target,a=this.relativeTarget,o=this.relativeParent.target,go(r.x,a.x,o.x),go(r.y,a.y,o.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):rl(this.target,this.layout.layoutBox),ln(this.target,this.targetDelta)):rl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},yo(this.relativeTargetOrigin,this.target,e.target),rl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Fn.value&&vl.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!en(this.parent.latestValues)&&!nn(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const e=this.getLead(),t=Boolean(this.resumingFrom)||this!==e;let n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===Hn.timestamp&&(n=!1),n)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;rl(this.layoutCorrected,this.layout.layoutBox);const r=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=n.length;if(!s)return;let r,a;t.x=t.y=1;for(let o=0;o<s;o++){r=n[o],a=r.projectionDelta;const{visualElement:s}=r.options;s&&s.props.style&&"contents"===s.props.style.display||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&mn(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,ln(e,a)),i&&tn(r.latestValues)&&mn(e,r.latestValues))}t.x<dn&&t.x>cn&&(t.x=1),t.y<dn&&t.y>cn&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,t),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:o}=e;o?(this.projectionDelta&&this.prevProjectionDelta?(al(this.prevProjectionDelta.x,this.projectionDelta.x),al(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),fo(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===r&&this.treeScale.y===a&&yl(this.projectionDelta.x,this.prevProjectionDelta.x)&&yl(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o)),Fn.value&&vl.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.visualElement?.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,i=n?n.latestValues:{},s={...this.latestValues},r={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(Ul));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;Il(r.x,e.x,n),Il(r.y,e.y,n),this.setTargetDelta(r),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yo(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,i){Fl(e.x,t.x,n.x,i),Fl(e.y,t.y,n.y,i)}(this.relativeTarget,this.relativeTargetOrigin,a,n),u&&function(e,t){return pl(e.x,t.x)&&pl(e.y,t.y)}(this.relativeTarget,u)&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),rl(u,this.relativeTarget)),o&&(this.animationValues=s,function(e,t,n,i,s,r){s?(e.opacity=Xt(0,n.opacity??1,tl(i)),e.opacityExit=Xt(t.opacity??1,0,nl(i))):r&&(e.opacity=Xt(t.opacity??1,n.opacity??1,i));for(let a=0;a<Jo;a++){const s=`border${Go[a]}Radius`;let r=el(t,s),o=el(n,s);void 0===r&&void 0===o||(r||(r=0),o||(o=0),0===r||0===o||Qo(r)===Qo(o)?(e[s]=Math.max(Xt(Xo(r),Xo(o),i),0),(_n.test(o)||_n.test(r))&&(e[s]+="%")):e[s]=o)}(t.rotate||n.rotate)&&(e.rotate=Xt(t.rotate||0,n.rotate||0,i))}(s,i,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Wn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$n.update(()=>{zo.hasAnimatedSinceResize=!0,gr.layout++,this.motionValue||(this.motionValue=Ui(0)),this.currentAnimation=function(e,t,n){const i=Mi(e)?e:Ui(e);return i.start($a("",i,t,n)),i.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{gr.layout--},onComplete:()=>{gr.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:i,latestValues:s}=e;if(t&&n&&i){if(this!==e&&this.layout&&i&&ql(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=mo(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const i=mo(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+i}rl(t,n),mn(t,s),fo(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new bl);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){const{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.getStack();i&&i.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const i={};n.z&&kl("z",e,i,this.animationValues);for(let s=0;s<wl.length;s++)kl(`rotate${wl[s]}`,e,i,this.animationValues),kl(`skew${wl[s]}`,e,i,this.animationValues);e.render();for(const s in i)e.setStaticValue(s,i[s]),this.animationValues&&(this.animationValues[s]=i[s]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=Ws(t?.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Ws(t?.pointerEvents)||""),void(this.hasProjected&&!tn(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const s=i.animationValues||i.latestValues;this.applyTransformsToTarget();let r=function(e,t,n){let i="";const s=e.x.translate/t.x,r=e.y.translate/t.y,a=n?.z||0;if((s||r||a)&&(i=`translate3d(${s}px, ${r}px, ${a}px) `),1===t.x&&1===t.y||(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:r,skewX:a,skewY:o}=n;e&&(i=`perspective(${e}px) ${i}`),t&&(i+=`rotate(${t}deg) `),s&&(i+=`rotateX(${s}deg) `),r&&(i+=`rotateY(${r}deg) `),a&&(i+=`skewX(${a}deg) `),o&&(i+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(i+=`scale(${o}, ${l})`),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,s);n&&(r=n(s,r)),e.transform=r;const{x:a,y:o}=this.projectionDelta;e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,i.animationValues?e.opacity=i===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:e.opacity=i===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const l in ms){if(void 0===s[l])continue;const{correct:t,applyTo:n,isCSSVariable:a}=ms[l],o="none"===r?s[l]:t(s[l],i);if(n){const t=n.length;for(let i=0;i<t;i++)e[n[i]]=o}else a?this.options.visualElement.renderState.vars[l]=o:e[l]=o}this.options.layoutId&&(e.pointerEvents=i===this?Ws(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(Ml),this.root.sharedNodes.clear()}}}function Sl(e){e.updateLayout()}function Cl(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:s}=e.options,r=t.source!==e.layout.source;"size"===s?bo(e=>{const i=r?t.measuredBox[e]:t.layoutBox[e],s=mo(i);i.min=n[e].min,i.max=i.min+s}):ql(s,t.layoutBox,n)&&bo(i=>{const s=r?t.measuredBox[i]:t.layoutBox[i],a=mo(n[i]);s.max=s.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};fo(a,n,t.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};r?fo(o,e.applyTransform(i,!0),t.measuredBox):fo(o,n,t.layoutBox);const l=!ml(a);let c=!1;if(!e.resumeFrom){const i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){const{snapshot:s,layout:r}=i;if(s&&r){const a={x:{min:0,max:0},y:{min:0,max:0}};yo(a,t.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};yo(o,n,r.layoutBox),gl(a,o)||(c=!0),i.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Pl(e){Fn.value&&vl.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Tl(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function El(e){e.clearSnapshot()}function Ml(e){e.clearMeasurements()}function Ll(e){e.isLayoutDirty=!1}function Al(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ol(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Rl(e){e.resolveTargetDelta()}function Dl(e){e.calcProjection()}function Bl(e){e.resetSkewAndRotation()}function zl(e){e.removeLeadSnapshot()}function Il(e,t,n){e.translate=Xt(t.translate,0,n),e.scale=Xt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Fl(e,t,n,i){e.min=Xt(t.min,n.min,i),e.max=Xt(t.max,n.max,i)}function Ul(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const $l={duration:.45,ease:[.4,0,.1,1]},Wl=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Hl=Wl("applewebkit/")&&!Wl("chrome/")?Math.round:Bn;function Vl(e){e.min=Hl(e.min),e.max=Hl(e.max)}function ql(e,t,n){return"position"===e||"preserve-aspect"===e&&(i=xl(t),s=xl(n),r=.2,!(Math.abs(i-s)<=r));var i,s,r}function Zl(e){return e!==e.root&&e.scroll?.wasRoot}const Yl=Nl({attachResizeListener:(e,t)=>lo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kl={current:void 0},Gl=Nl({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Kl.current){const e=new Yl({});e.mount(window),e.setOptions({layoutScroll:!0}),Kl.current=e}return Kl.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Jl={pan:{Feature:class extends io{constructor(){super(...arguments),this.removePointerDownListener=Bn}onPointerDown(e){this.session=new _o(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vo(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Bo(e),onStart:Bo(t),onMove:n,onEnd:(e,t)=>{delete this.session,i&&$n.postRender(()=>i(e,t))}}}mount(){this.removePointerDownListener=ho(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends io{constructor(e){super(e),this.removeGroupControls=Bn,this.removeListeners=Bn,this.controls=new Ro(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bn}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Gl,MeasureLayout:Ho}};function Xl(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){let i=document;t&&(i=t.current);const s=n?.[e]??i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}(e),i=new AbortController;return[n,{passive:!0,...t,signal:i.signal},()=>i.abort()]}function Ql(e){return!("touch"===e.pointerType||oo())}function ec(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover","Start"===n);const s=i["onHover"+n];s&&$n.postRender(()=>s(t,uo(t)))}const tc=(e,t)=>!!t&&(e===t||tc(e,t.parentElement)),nc=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const ic=new WeakSet;function sc(e){return t=>{"Enter"===t.key&&e(t)}}function rc(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function ac(e){return co(e)&&!oo()}function oc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[i,s,r]=Xl(e,n),a=e=>{const i=e.currentTarget;if(!ac(e))return;ic.add(i);const r=t(i,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),ic.has(i)&&ic.delete(i),ac(e)&&"function"===typeof r&&r(e,{success:t})},o=e=>{a(e,i===window||i===document||n.useGlobalTarget||tc(i,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return i.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",a,s),_t(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const i=sc(()=>{if(ic.has(n))return;rc(n,"down");const e=sc(()=>{rc(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>rc(n,"cancel"),t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)})(e,s)),t=e,nc.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),r}function lc(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap","Start"===n);const s=i["onTap"+("End"===n?"":n)];s&&$n.postRender(()=>s(t,uo(t)))}const cc=new WeakMap,dc=new WeakMap,uc=e=>{const t=cc.get(e.target);t&&t(e)},hc=e=>{e.forEach(uc)};function mc(e,t,n){const i=function(e){let{root:t,...n}=e;const i=t||document;dc.has(i)||dc.set(i,{});const s=dc.get(i),r=JSON.stringify(n);return s[r]||(s[r]=new IntersectionObserver(hc,{root:t,...n})),s[r]}(t);return cc.set(e,n),i.observe(e),()=>{cc.delete(e),i.unobserve(e)}}const pc={some:0,all:1};const fc={inView:{Feature:class extends io{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:s}=e,r={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof i?i:pc[i]};return mc(this.node.current,r,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:i}=this.node.getProps(),r=t?n:i;r&&r(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends io{mount(){const{current:e}=this.node;e&&(this.unmount=oc(e,(e,t)=>(lc(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return lc(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends io{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(Ix){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mr(lo(this.node.current,"focus",()=>this.onFocus()),lo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends io{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[i,s,r]=Xl(e,n),a=e=>{if(!Ql(e))return;const{target:n}=e,i=t(n,e);if("function"!==typeof i||!n)return;const r=e=>{Ql(e)&&(i(e),n.removeEventListener("pointerleave",r))};n.addEventListener("pointerleave",r,s)};return i.forEach(e=>{e.addEventListener("pointerenter",a,s)}),r}(e,(e,t)=>(ec(this.node,t,"Start"),e=>ec(this.node,e,"End"))))}unmount(){}}}},gc=ir({...ro,...fc,...Jl,...{layout:{ProjectionNode:Gl,MeasureLayout:Ho}}},Cs);var xc={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yc=t.createContext&&t.createContext(xc),bc=["attr","size","title"];function vc(e,t){if(null==e)return{};var n,i,s=function(e,t){if(null==e)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function wc(){return wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wc.apply(this,arguments)}function _c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_c(Object(n),!0).forEach(function(t){jc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jc(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nc(e){return e&&e.map((e,n)=>t.createElement(e.tag,kc({key:n},e.attr),Nc(e.child)))}function Sc(e){return n=>t.createElement(Cc,wc({attr:kc({},e.attr)},n),Nc(e.child))}function Cc(e){var n=n=>{var i,{attr:s,size:r,title:a}=e,o=vc(e,bc),l=r||n.size||"1em";return n.className&&(i=n.className),e.className&&(i=(i?i+" ":"")+e.className),t.createElement("svg",wc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:i,style:kc(kc({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&t.createElement("title",null,a),e.children)};return void 0!==yc?t.createElement(yc.Consumer,null,e=>n(e)):n(xc)}function Pc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function Tc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(e)}function Ec(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function Mc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function Lc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function Ac(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Oc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function Rc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function Dc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function Bc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function zc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function Ic(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function Fc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function Uc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function $c(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Wc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Hc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(e)}function Vc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function qc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"5",width:"22",height:"14",rx:"7",ry:"7"},child:[]},{tag:"circle",attr:{cx:"8",cy:"12",r:"3"},child:[]}]})(e)}function Zc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"5",width:"22",height:"14",rx:"7",ry:"7"},child:[]},{tag:"circle",attr:{cx:"16",cy:"12",r:"3"},child:[]}]})(e)}function Yc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function Kc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function Gc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Jc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function Xc(e){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const Qc=e=>{let{children:t,className:n=""}=e;return(0,ft.jsx)(gc.div,{className:`min-h-screen ${n}`,initial:"initial",animate:"in",exit:"out",variants:{initial:{opacity:0,y:20,scale:.98},in:{opacity:1,y:0,scale:1},out:{opacity:0,y:-20,scale:.98}},transition:{type:"tween",ease:"anticipate",duration:.4},children:t})};function ed(e,t){return function(){return e.apply(t,arguments)}}const{toString:td}=Object.prototype,{getPrototypeOf:nd}=Object,{iterator:id,toStringTag:sd}=Symbol,rd=(ad=Object.create(null),e=>{const t=td.call(e);return ad[t]||(ad[t]=t.slice(8,-1).toLowerCase())});var ad;const od=e=>(e=e.toLowerCase(),t=>rd(t)===e),ld=e=>t=>typeof t===e,{isArray:cd}=Array,dd=ld("undefined");function ud(e){return null!==e&&!dd(e)&&null!==e.constructor&&!dd(e.constructor)&&pd(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const hd=od("ArrayBuffer");const md=ld("string"),pd=ld("function"),fd=ld("number"),gd=e=>null!==e&&"object"===typeof e,xd=e=>{if("object"!==rd(e))return!1;const t=nd(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(sd in e)&&!(id in e)},yd=od("Date"),bd=od("File"),vd=od("Blob"),wd=od("FileList"),_d=od("URLSearchParams"),[kd,jd,Nd,Sd]=["ReadableStream","Request","Response","Headers"].map(od);function Cd(e,t){let n,i,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),cd(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(ud(e))return;const i=s?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let a;for(n=0;n<r;n++)a=i[n],t.call(null,e[a],a,e)}}function Pd(e,t){if(ud(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i,s=n.length;for(;s-- >0;)if(i=n[s],t===i.toLowerCase())return i;return null}const Td="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Ed=e=>!dd(e)&&e!==Td;const Md=(Ld="undefined"!==typeof Uint8Array&&nd(Uint8Array),e=>Ld&&e instanceof Ld);var Ld;const Ad=od("HTMLFormElement"),Od=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Rd=od("RegExp"),Dd=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Cd(n,(n,s)=>{let r;!1!==(r=t(n,s,e))&&(i[s]=r||n)}),Object.defineProperties(e,i)};const Bd=od("AsyncFunction"),zd=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,i=[],Td.addEventListener("message",e=>{let{source:t,data:s}=e;t===Td&&s===n&&i.length&&i.shift()()},!1),e=>{i.push(e),Td.postMessage(n,"*")}):e=>setTimeout(e);var n,i})("function"===typeof setImmediate,pd(Td.postMessage)),Id="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Td):"undefined"!==typeof process&&process.nextTick||zd,Fd={isArray:cd,isArrayBuffer:hd,isBuffer:ud,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||pd(e.append)&&("formdata"===(t=rd(e))||"object"===t&&pd(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&hd(e.buffer),t},isString:md,isNumber:fd,isBoolean:e=>!0===e||!1===e,isObject:gd,isPlainObject:xd,isEmptyObject:e=>{if(!gd(e)||ud(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Ix){return!1}},isReadableStream:kd,isRequest:jd,isResponse:Nd,isHeaders:Sd,isUndefined:dd,isDate:yd,isFile:bd,isBlob:vd,isRegExp:Rd,isFunction:pd,isStream:e=>gd(e)&&pd(e.pipe),isURLSearchParams:_d,isTypedArray:Md,isFileList:wd,forEach:Cd,merge:function e(){const{caseless:t,skipUndefined:n}=Ed(this)&&this||{},i={},s=(s,r)=>{const a=t&&Pd(i,r)||r;xd(i[a])&&xd(s)?i[a]=e(i[a],s):xd(s)?i[a]=e({},s):cd(s)?i[a]=s.slice():n&&dd(s)||(i[a]=s)};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Cd(arguments[r],s);return i},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Cd(t,(t,i)=>{n&&pd(t)?e[i]=ed(t,n):e[i]=t},{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let s,r,a;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)a=s[r],i&&!i(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&nd(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:rd,kindOfTest:od,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(cd(e))return e;let t=e.length;if(!fd(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[id]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:Ad,hasOwnProperty:Od,hasOwnProp:Od,reduceDescriptors:Dd,freezeMethods:e=>{Dd(e,(t,n)=>{if(pd(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];pd(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach(e=>{n[e]=!0})};return cd(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Pd,global:Td,isContextDefined:Ed,isSpecCompliantForm:function(e){return!!(e&&pd(e.append)&&"FormData"===e[sd]&&e[id])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(gd(e)){if(t.indexOf(e)>=0)return;if(ud(e))return e;if(!("toJSON"in e)){t[i]=e;const s=cd(e)?[]:{};return Cd(e,(e,t)=>{const r=n(e,i+1);!dd(r)&&(s[t]=r)}),t[i]=void 0,s}}return e};return n(e,0)},isAsyncFn:Bd,isThenable:e=>e&&(gd(e)||pd(e))&&pd(e.then)&&pd(e.catch),setImmediate:zd,asap:Id,isIterable:e=>null!=e&&pd(e[id])};function Ud(e,t,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}Fd.inherits(Ud,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fd.toJSONObject(this.config),code:this.code,status:this.status}}});const $d=Ud.prototype,Wd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Wd[e]={value:e}}),Object.defineProperties(Ud,Wd),Object.defineProperty($d,"isAxiosError",{value:!0}),Ud.from=(e,t,n,i,s,r)=>{const a=Object.create($d);Fd.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return Ud.call(a,o,l,n,i,s),e&&null==a.cause&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",r&&Object.assign(a,r),a};const Hd=Ud;function Vd(e){return Fd.isPlainObject(e)||Fd.isArray(e)}function qd(e){return Fd.endsWith(e,"[]")?e.slice(0,-2):e}function Zd(e,t,n){return e?e.concat(t).map(function(e,t){return e=qd(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Yd=Fd.toFlatObject(Fd,{},null,function(e){return/^is[A-Z]/.test(e)});const Kd=function(e,t,n){if(!Fd.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=Fd.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Fd.isUndefined(t[e])})).metaTokens,s=n.visitor||c,r=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Fd.isSpecCompliantForm(t);if(!Fd.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Fd.isDate(e))return e.toISOString();if(Fd.isBoolean(e))return e.toString();if(!o&&Fd.isBlob(e))throw new Hd("Blob is not supported. Use a Buffer instead.");return Fd.isArrayBuffer(e)||Fd.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let o=e;if(e&&!s&&"object"===typeof e)if(Fd.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(Fd.isArray(e)&&function(e){return Fd.isArray(e)&&!e.some(Vd)}(e)||(Fd.isFileList(e)||Fd.endsWith(n,"[]"))&&(o=Fd.toArray(e)))return n=qd(n),o.forEach(function(e,i){!Fd.isUndefined(e)&&null!==e&&t.append(!0===a?Zd([n],i,r):null===a?n:n+"[]",l(e))}),!1;return!!Vd(e)||(t.append(Zd(s,n,r),l(e)),!1)}const d=[],u=Object.assign(Yd,{defaultVisitor:c,convertValue:l,isVisitable:Vd});if(!Fd.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!Fd.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+i.join("."));d.push(n),Fd.forEach(n,function(n,r){!0===(!(Fd.isUndefined(n)||null===n)&&s.call(t,n,Fd.isString(r)?r.trim():r,i,u))&&e(n,i?i.concat(r):[r])}),d.pop()}}(e),t};function Gd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Jd(e,t){this._pairs=[],e&&Kd(e,this,t)}const Xd=Jd.prototype;Xd.append=function(e,t){this._pairs.push([e,t])},Xd.toString=function(e){const t=e?function(t){return e.call(this,t,Gd)}:Gd;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Qd=Jd;function eu(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function tu(e,t,n){if(!t)return e;const i=n&&n.encode||eu;Fd.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let r;if(r=s?s(t,n):Fd.isURLSearchParams(t)?t.toString():new Qd(t,n).toString(i),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const nu=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Fd.forEach(this.handlers,function(t){null!==t&&e(t)})}},iu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},su={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Qd,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ru="undefined"!==typeof window&&"undefined"!==typeof document,au="object"===typeof navigator&&navigator||void 0,ou=ru&&(!au||["ReactNative","NativeScript","NS"].indexOf(au.product)<0),lu="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,cu=ru&&window.location.href||"http://localhost",du={...e,...su};const uu=function(e){function t(e,n,i,s){let r=e[s++];if("__proto__"===r)return!0;const a=Number.isFinite(+r),o=s>=e.length;if(r=!r&&Fd.isArray(i)?i.length:r,o)return Fd.hasOwnProp(i,r)?i[r]=[i[r],n]:i[r]=n,!a;i[r]&&Fd.isObject(i[r])||(i[r]=[]);return t(e,n,i[r],s)&&Fd.isArray(i[r])&&(i[r]=function(e){const t={},n=Object.keys(e);let i;const s=n.length;let r;for(i=0;i<s;i++)r=n[i],t[r]=e[r];return t}(i[r])),!a}if(Fd.isFormData(e)&&Fd.isFunction(e.entries)){const n={};return Fd.forEachEntry(e,(e,i)=>{t(function(e){return Fd.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),i,n,0)}),n}return null};const hu={transitional:iu,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=Fd.isObject(e);s&&Fd.isHTMLForm(e)&&(e=new FormData(e));if(Fd.isFormData(e))return i?JSON.stringify(uu(e)):e;if(Fd.isArrayBuffer(e)||Fd.isBuffer(e)||Fd.isStream(e)||Fd.isFile(e)||Fd.isBlob(e)||Fd.isReadableStream(e))return e;if(Fd.isArrayBufferView(e))return e.buffer;if(Fd.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Kd(e,new du.classes.URLSearchParams,{visitor:function(e,t,n,i){return du.isNode&&Fd.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((r=Fd.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Kd(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),function(e,t,n){if(Fd.isString(e))try{return(t||JSON.parse)(e),Fd.trim(e)}catch(Ix){if("SyntaxError"!==Ix.name)throw Ix}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||hu.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(Fd.isResponse(e)||Fd.isReadableStream(e))return e;if(e&&Fd.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(Ix){if(n){if("SyntaxError"===Ix.name)throw Hd.from(Ix,Hd.ERR_BAD_RESPONSE,this,null,this.response);throw Ix}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:du.classes.FormData,Blob:du.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fd.forEach(["delete","get","head","post","put","patch"],e=>{hu.headers[e]={}});const mu=hu,pu=Fd.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fu=Symbol("internals");function gu(e){return e&&String(e).trim().toLowerCase()}function xu(e){return!1===e||null==e?e:Fd.isArray(e)?e.map(xu):String(e)}function yu(e,t,n,i,s){return Fd.isFunction(i)?i.call(this,t,n):(s&&(t=n),Fd.isString(t)?Fd.isString(i)?-1!==t.indexOf(i):Fd.isRegExp(i)?i.test(t):void 0:void 0)}class bu{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function s(e,t,n){const s=gu(t);if(!s)throw new Error("header name must be a non-empty string");const r=Fd.findKey(i,s);(!r||void 0===i[r]||!0===n||void 0===n&&!1!==i[r])&&(i[r||t]=xu(e))}const r=(e,t)=>Fd.forEach(e,(e,n)=>s(e,n,t));if(Fd.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(Fd.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let n,i,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),i=e.substring(s+1).trim(),!n||t[n]&&pu[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t})(e),t);else if(Fd.isObject(e)&&Fd.isIterable(e)){let n,i,s={};for(const t of e){if(!Fd.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[i=t[0]]=(n=s[i])?Fd.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}r(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=gu(e)){const n=Fd.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(Fd.isFunction(t))return t.call(this,e,n);if(Fd.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=gu(e)){const n=Fd.findKey(this,e);return!(!n||void 0===this[n]||t&&!yu(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function s(e){if(e=gu(e)){const s=Fd.findKey(n,e);!s||t&&!yu(0,n[s],s,t)||(delete n[s],i=!0)}}return Fd.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const s=t[n];e&&!yu(0,this[s],s,e,!0)||(delete this[s],i=!0)}return i}normalize(e){const t=this,n={};return Fd.forEach(this,(i,s)=>{const r=Fd.findKey(n,s);if(r)return t[r]=xu(i),void delete t[s];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();a!==s&&delete t[s],t[a]=xu(i),n[a]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Fd.forEach(this,(n,i)=>{null!=n&&!1!==n&&(t[i]=e&&Fd.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[fu]=this[fu]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=gu(e);t[i]||(!function(e,t){const n=Fd.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(e,n,s){return this[i].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[i]=!0)}return Fd.isArray(e)?e.forEach(i):i(e),this}}bu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Fd.reduceDescriptors(bu.prototype,(e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}}),Fd.freezeMethods(bu);const vu=bu;function wu(e,t){const n=this||mu,i=t||n,s=vu.from(i.headers);let r=i.data;return Fd.forEach(e,function(e){r=e.call(n,r,s.normalize(),t?t.status:void 0)}),s.normalize(),r}function _u(e){return!(!e||!e.__CANCEL__)}function ku(e,t,n){Hd.call(this,null==e?"canceled":e,Hd.ERR_CANCELED,t,n),this.name="CanceledError"}Fd.inherits(ku,Hd,{__CANCEL__:!0});const ju=ku;function Nu(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new Hd("Request failed with status code "+n.status,[Hd.ERR_BAD_REQUEST,Hd.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Su=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let s,r=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=i[a];s||(s=l),n[r]=o,i[r]=l;let d=a,u=0;for(;d!==r;)u+=n[d++],d%=e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const Cu=function(e,t){let n,i,s=0,r=1e3/t;const a=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=r,n=null,i&&(clearTimeout(i),i=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=r?a(l,e):(n=l,i||(i=setTimeout(()=>{i=null,a(n)},r-t)))},()=>n&&a(n)]},Pu=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const s=Su(50,250);return Cu(n=>{const r=n.loaded,a=n.lengthComputable?n.total:void 0,o=r-i,l=s(o);i=r;e({loaded:r,total:a,progress:a?r/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&r<=a?(a-r)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},Tu=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},Eu=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Fd.asap(()=>e(...n))},Mu=du.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,du.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(du.origin),du.navigator&&/(msie|trident)/i.test(du.navigator.userAgent)):()=>!0,Lu=du.hasStandardBrowserEnv?{write(e,t,n,i,s,r){const a=[e+"="+encodeURIComponent(t)];Fd.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Fd.isString(i)&&a.push("path="+i),Fd.isString(s)&&a.push("domain="+s),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Au(e,t,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(i||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ou=e=>e instanceof vu?{...e}:e;function Ru(e,t){t=t||{};const n={};function i(e,t,n,i){return Fd.isPlainObject(e)&&Fd.isPlainObject(t)?Fd.merge.call({caseless:i},e,t):Fd.isPlainObject(t)?Fd.merge({},t):Fd.isArray(t)?t.slice():t}function s(e,t,n,s){return Fd.isUndefined(t)?Fd.isUndefined(e)?void 0:i(void 0,e,0,s):i(e,t,0,s)}function r(e,t){if(!Fd.isUndefined(t))return i(void 0,t)}function a(e,t){return Fd.isUndefined(t)?Fd.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function o(n,s,r){return r in t?i(n,s):r in e?i(void 0,n):void 0}const l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>s(Ou(e),Ou(t),0,!0)};return Fd.forEach(Object.keys({...e,...t}),function(i){const r=l[i]||s,a=r(e[i],t[i],i);Fd.isUndefined(a)&&r!==o||(n[i]=a)}),n}const Du=e=>{const t=Ru({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:r,headers:a,auth:o}=t;if(t.headers=a=vu.from(a),t.url=tu(Au(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Fd.isFormData(n))if(du.hasStandardBrowserEnv||du.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(Fd.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,i]=e;t.includes(n.toLowerCase())&&a.set(n,i)})}if(du.hasStandardBrowserEnv&&(i&&Fd.isFunction(i)&&(i=i(t)),i||!1!==i&&Mu(t.url))){const e=s&&r&&Lu.read(r);e&&a.set(s,e)}return t},Bu="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const i=Du(e);let s=i.data;const r=vu.from(i.headers).normalize();let a,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=i;function p(){c&&c(),d&&d(),i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}let f=new XMLHttpRequest;function g(){if(!f)return;const i=vu.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Nu(function(e){t(e),p()},function(e){n(e),p()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:i,config:e,request:f}),f=null}f.open(i.method.toUpperCase(),i.url,!0),f.timeout=i.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new Hd("Request aborted",Hd.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const i=t&&t.message?t.message:"Network Error",s=new Hd(i,Hd.ERR_NETWORK,e,f);s.event=t||null,n(s),f=null},f.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const s=i.transitional||iu;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new Hd(t,s.clarifyTimeoutError?Hd.ETIMEDOUT:Hd.ECONNABORTED,e,f)),f=null},void 0===s&&r.setContentType(null),"setRequestHeader"in f&&Fd.forEach(r.toJSON(),function(e,t){f.setRequestHeader(t,e)}),Fd.isUndefined(i.withCredentials)||(f.withCredentials=!!i.withCredentials),u&&"json"!==u&&(f.responseType=i.responseType),m&&([l,d]=Pu(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=Pu(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(a=t=>{f&&(n(!t||t.type?new ju(null,e,f):t),f.abort(),f=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);x&&-1===du.protocols.indexOf(x)?n(new Hd("Unsupported protocol "+x+":",Hd.ERR_BAD_REQUEST,e)):f.send(s||null)})},zu=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const s=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;i.abort(t instanceof Hd?t:new ju(t instanceof Error?t.message:t))}};let r=t&&setTimeout(()=>{r=null,s(new Hd(`timeout ${t} of ms exceeded`,Hd.ETIMEDOUT))},t);const a=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:o}=i;return o.unsubscribe=()=>Fd.asap(a),o}},Iu=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,s=0;for(;s<n;)i=s+t,yield e.slice(s,i),s=i},Fu=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Uu=(e,t,n,i)=>{const s=async function*(e,t){for await(const n of Fu(e))yield*Iu(n,t)}(e,t);let r,a=0,o=e=>{r||(r=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await s.next();if(t)return o(),void e.close();let r=i.byteLength;if(n){let e=a+=r;n(e)}e.enqueue(new Uint8Array(i))}catch(t){throw o(t),t}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},{isFunction:$u}=Fd,Wu=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(Fd.global),{ReadableStream:Hu,TextEncoder:Vu}=Fd.global,qu=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!!e(...n)}catch(Ix){return!1}},Zu=e=>{e=Fd.merge.call({skipUndefined:!0},Wu,e);const{fetch:t,Request:n,Response:i}=e,s=t?$u(t):"function"===typeof fetch,r=$u(n),a=$u(i);if(!s)return!1;const o=s&&$u(Hu),l=s&&("function"===typeof Vu?(c=new Vu,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const d=r&&o&&qu(()=>{let e=!1;const t=new n(du.origin,{body:new Hu,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=a&&o&&qu(()=>Fd.isReadableStream(new i("").body)),h={stream:u&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,n)=>{let i=t&&t[e];if(i)return i.call(t);throw new Hd(`Response type '${e}' is not supported`,Hd.ERR_NOT_SUPPORT,n)})});const m=async(e,t)=>{const i=Fd.toFiniteNumber(e.getContentLength());return null==i?(async e=>{if(null==e)return 0;if(Fd.isBlob(e))return e.size;if(Fd.isSpecCompliantForm(e)){const t=new n(du.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Fd.isArrayBufferView(e)||Fd.isArrayBuffer(e)?e.byteLength:(Fd.isURLSearchParams(e)&&(e+=""),Fd.isString(e)?(await l(e)).byteLength:void 0)})(t):i};return async e=>{let{url:s,method:a,data:o,signal:l,cancelToken:c,timeout:p,onDownloadProgress:f,onUploadProgress:g,responseType:x,headers:y,withCredentials:b="same-origin",fetchOptions:v}=Du(e),w=t||fetch;x=x?(x+"").toLowerCase():"text";let _=zu([l,c&&c.toAbortSignal()],p),k=null;const j=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let N;try{if(g&&d&&"get"!==a&&"head"!==a&&0!==(N=await m(y,o))){let e,t=new n(s,{method:"POST",body:o,duplex:"half"});if(Fd.isFormData(o)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,n]=Tu(N,Pu(Eu(g)));o=Uu(t.body,65536,e,n)}}Fd.isString(b)||(b=b?"include":"omit");const t=r&&"credentials"in n.prototype,l={...v,signal:_,method:a.toUpperCase(),headers:y.normalize().toJSON(),body:o,duplex:"half",credentials:t?b:void 0};k=r&&new n(s,l);let c=await(r?w(k,v):w(s,l));const p=u&&("stream"===x||"response"===x);if(u&&(f||p&&j)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Fd.toFiniteNumber(c.headers.get("content-length")),[n,s]=f&&Tu(t,Pu(Eu(f),!0))||[];c=new i(Uu(c.body,65536,n,()=>{s&&s(),j&&j()}),e)}x=x||"text";let S=await h[Fd.findKey(h,x)||"text"](c,e);return!p&&j&&j(),await new Promise((t,n)=>{Nu(t,n,{data:S,headers:vu.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:k})})}catch(S){if(j&&j(),S&&"TypeError"===S.name&&/Load failed|fetch/i.test(S.message))throw Object.assign(new Hd("Network Error",Hd.ERR_NETWORK,e,k),{cause:S.cause||S});throw Hd.from(S,S&&S.code,e,k)}}},Yu=new Map,Ku=e=>{let t=e?e.env:{};const{fetch:n,Request:i,Response:s}=t,r=[i,s,n];let a,o,l=r.length,c=Yu;for(;l--;)a=r[l],o=c.get(a),void 0===o&&c.set(a,o=l?new Map:Zu(t)),c=o;return o},Gu=(Ku(),{http:null,xhr:Bu,fetch:{get:Ku}});Fd.forEach(Gu,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Ix){}Object.defineProperty(e,"adapterName",{value:t})}});const Ju=e=>`- ${e}`,Xu=e=>Fd.isFunction(e)||null===e||!1===e,Qu=(e,t)=>{e=Fd.isArray(e)?e:[e];const{length:n}=e;let i,s;const r={};for(let a=0;a<n;a++){let n;if(i=e[a],s=i,!Xu(i)&&(s=Gu[(n=String(i)).toLowerCase()],void 0===s))throw new Hd(`Unknown adapter '${n}'`);if(s&&(Fd.isFunction(s)||(s=s.get(t))))break;r[n||"#"+a]=s}if(!s){const e=Object.entries(r).map(e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(Ju).join("\n"):" "+Ju(e[0]):"as no adapter specified";throw new Hd("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s};function eh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ju(null,e)}function th(e){eh(e),e.headers=vu.from(e.headers),e.data=wu.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Qu(e.adapter||mu.adapter,e)(e).then(function(t){return eh(e),t.data=wu.call(e,e.transformResponse,t),t.headers=vu.from(t.headers),t},function(t){return _u(t)||(eh(e),t&&t.response&&(t.response.data=wu.call(e,e.transformResponse,t.response),t.response.headers=vu.from(t.response.headers))),Promise.reject(t)})}const nh="1.12.2",ih={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ih[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const sh={};ih.transitional=function(e,t,n){function i(e,t){return"[Axios v"+nh+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,r)=>{if(!1===e)throw new Hd(i(s," has been removed"+(t?" in "+t:"")),Hd.ERR_DEPRECATED);return t&&!sh[s]&&(sh[s]=!0,console.warn(i(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,r)}},ih.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const rh={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Hd("options must be an object",Hd.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const r=i[s],a=t[r];if(a){const t=e[r],n=void 0===t||a(t,r,e);if(!0!==n)throw new Hd("option "+r+" must be "+n,Hd.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Hd("Unknown option "+r,Hd.ERR_BAD_OPTION)}},validators:ih},ah=rh.validators;class oh{constructor(e){this.defaults=e||{},this.interceptors={request:new nu,response:new nu}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Ix){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ru(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:s}=t;void 0!==n&&rh.assertOptions(n,{silentJSONParsing:ah.transitional(ah.boolean),forcedJSONParsing:ah.transitional(ah.boolean),clarifyTimeoutError:ah.transitional(ah.boolean)},!1),null!=i&&(Fd.isFunction(i)?t.paramsSerializer={serialize:i}:rh.assertOptions(i,{encode:ah.function,serialize:ah.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),rh.assertOptions(t,{baseUrl:ah.spelling("baseURL"),withXsrfToken:ah.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=s&&Fd.merge(s.common,s[t.method]);s&&Fd.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=vu.concat(r,s);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[th.bind(this),void 0];for(e.unshift(...a),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=a.length;let h=t;for(;u<d;){const e=a[u++],t=a[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=th.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return tu(Au((e=Ru(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Fd.forEach(["delete","get","head","options"],function(e){oh.prototype[e]=function(t,n){return this.request(Ru(n||{},{method:e,url:t,data:(n||{}).data}))}}),Fd.forEach(["post","put","patch"],function(e){function t(t){return function(n,i,s){return this.request(Ru(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}oh.prototype[e]=t(),oh.prototype[e+"Form"]=t(!0)});const lh=oh;class ch{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const i=new Promise(e=>{n.subscribe(e),t=e}).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e(function(e,i,s){n.reason||(n.reason=new ju(e,i,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new ch(function(t){e=t});return{token:t,cancel:e}}}const dh=ch;const uh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uh).forEach(e=>{let[t,n]=e;uh[n]=t});const hh=uh;const mh=function e(t){const n=new lh(t),i=ed(lh.prototype.request,n);return Fd.extend(i,lh.prototype,n,{allOwnKeys:!0}),Fd.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(Ru(t,n))},i}(mu);mh.Axios=lh,mh.CanceledError=ju,mh.CancelToken=dh,mh.isCancel=_u,mh.VERSION=nh,mh.toFormData=Kd,mh.AxiosError=Hd,mh.Cancel=mh.CanceledError,mh.all=function(e){return Promise.all(e)},mh.spread=function(e){return function(t){return e.apply(null,t)}},mh.isAxiosError=function(e){return Fd.isObject(e)&&!0===e.isAxiosError},mh.mergeConfig=Ru,mh.AxiosHeaders=vu,mh.formToJSON=e=>uu(Fd.isHTMLForm(e)?new FormData(e):e),mh.getAdapter=Qu,mh.HttpStatusCode=hh,mh.default=mh;const ph=mh.create({baseURL:"http://localhost:5000",withCredentials:!0});ph.interceptors.request.use(e=>e);const fh=async(e,t)=>{try{return(await ph.get(`/api/businesses/${e}/availability`,{params:{date:t}})).data}catch(n){throw console.error("Error fetching business availability:",n),n}},gh=ph;const xh=function(){const[e,n]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[r,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),u=ne();return(0,ft.jsx)(Qc,{children:(0,ft.jsxs)("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[(0,ft.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900",children:[(0,ft.jsx)("div",{className:"absolute inset-0 bg-black opacity-20"}),(0,ft.jsx)(gc.div,{className:"absolute top-10 sm:top-20 left-4 sm:left-20 w-20 sm:w-32 h-20 sm:h-32 bg-blue-500 opacity-10 rounded-full blur-xl",animate:{x:[0,50,0],y:[0,-50,0],scale:[1,1.2,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),(0,ft.jsx)(gc.div,{className:"absolute top-20 sm:top-40 right-4 sm:right-32 w-16 sm:w-24 h-16 sm:h-24 bg-purple-500 opacity-10 rounded-full blur-xl",animate:{x:[0,-40,0],y:[0,60,0],scale:[1,.8,1]},transition:{duration:15,repeat:1/0,ease:"easeInOut",delay:2}}),(0,ft.jsx)(gc.div,{className:"absolute bottom-10 sm:bottom-20 left-1/4 sm:left-1/3 w-24 sm:w-40 h-24 sm:h-40 bg-pink-500 opacity-10 rounded-full blur-xl",animate:{x:[0,60,0],y:[0,-40,0],scale:[1,1.1,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut",delay:4}})]}),(0,ft.jsx)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"relative z-10 w-full max-w-md mx-4 px-4 sm:px-0",children:(0,ft.jsxs)(gc.div,{className:"bg-white/10 backdrop-blur-xl p-6 sm:p-8 rounded-3xl border border-white/20 shadow-2xl",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[(0,ft.jsx)(gc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"flex justify-center mb-8",children:(0,ft.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-purple-500 rounded-2xl flex items-center justify-center shadow-lg",children:(0,ft.jsx)(Kc,{className:"text-white text-2xl"})})}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-center mb-8",children:[(0,ft.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"Welcome Back!"}),(0,ft.jsx)("p",{className:"text-white/70 text-sm sm:text-base",children:"Sign in to your account to continue"})]}),(0,ft.jsx)(At,{children:r&&(0,ft.jsx)(gc.div,{initial:{opacity:0,x:-20,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:20,height:0},className:"mb-6",children:(0,ft.jsxs)("div",{className:"bg-red-500/20 border border-red-400/30 text-red-100 p-4 rounded-xl flex items-center gap-3 backdrop-blur-sm",children:[(0,ft.jsx)(Pc,{className:"flex-shrink-0 text-red-400"}),(0,ft.jsx)("span",{className:"text-sm",children:r})]})})}),(0,ft.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a(null),d(!0);try{const t=await gh.post("/auth/login",{email:e,password:i});console.log("Login successful, response:",t.data),console.log("Attempting to navigate to /"),setTimeout(()=>{u("/")},500)}catch(o){var n,s,r;console.error("Login error:",(null===(n=o.response)||void 0===n?void 0:n.data)||o),a((null===(s=o.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error)||"An error occurred during login.")}finally{d(!1)}},className:"space-y-6",children:[(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,ft.jsx)("label",{htmlFor:"email",className:"block text-white/90 text-sm font-medium mb-2",children:"Email Address"}),(0,ft.jsxs)("div",{className:"relative",children:[(0,ft.jsx)(Uc,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/50"}),(0,ft.jsx)("input",{type:"email",id:"email",className:"w-full bg-white/10 border border-white/20 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"Enter your email",value:e,onChange:e=>n(e.target.value),required:!0})]})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:[(0,ft.jsx)("label",{htmlFor:"password",className:"block text-white/90 text-sm font-medium mb-2",children:"Password"}),(0,ft.jsxs)("div",{className:"relative",children:[(0,ft.jsx)(Fc,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/50"}),(0,ft.jsx)("input",{type:o?"text":"password",id:"password",className:"w-full bg-white/10 border border-white/20 rounded-xl py-3 pl-12 pr-12 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"Enter your password",value:i,onChange:e=>s(e.target.value),required:!0}),(0,ft.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white/80 transition-colors",children:o?(0,ft.jsx)(Bc,{}):(0,ft.jsx)(zc,{})})]}),(0,ft.jsx)("div",{className:"flex justify-end mt-2",children:(0,ft.jsx)(at,{to:"#",className:"text-blue-300 hover:text-blue-200 text-sm transition-colors duration-200",children:"Forgot Password?"})})]}),(0,ft.jsx)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:(0,ft.jsx)(gc.button,{type:"submit",disabled:c,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)(gc.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full"}),"Signing In..."]}):(0,ft.jsxs)(ft.Fragment,{children:["Sign In",(0,ft.jsx)(Ec,{className:"transition-transform group-hover:translate-x-1"})]})})})]}),(0,ft.jsx)(gc.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"text-center mt-8",children:(0,ft.jsxs)("p",{className:"text-white/70",children:["Don't have an account?"," ",(0,ft.jsx)(at,{to:"/register",className:"text-blue-300 hover:text-blue-200 font-semibold transition-colors duration-200 hover:underline",children:"Create Account"})]})})]})})]})})};const yh=function(){const[e,n]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1),[f,g]=(0,t.useState)(!1),x=ne();return(0,ft.jsx)(Qc,{children:(0,ft.jsxs)("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[(0,ft.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-900 via-teal-900 to-cyan-900",children:[(0,ft.jsx)("div",{className:"absolute inset-0 bg-black opacity-20"}),(0,ft.jsx)(gc.div,{className:"absolute top-16 sm:top-32 left-4 sm:left-16 w-20 sm:w-28 h-20 sm:h-28 bg-emerald-500 opacity-10 rounded-full blur-xl",animate:{x:[0,40,0],y:[0,-60,0],scale:[1,1.3,1]},transition:{duration:18,repeat:1/0,ease:"easeInOut"}}),(0,ft.jsx)(gc.div,{className:"absolute top-10 sm:top-20 right-4 sm:right-20 w-24 sm:w-36 h-24 sm:h-36 bg-cyan-500 opacity-10 rounded-full blur-xl",animate:{x:[0,-50,0],y:[0,50,0],scale:[1,.7,1]},transition:{duration:22,repeat:1/0,ease:"easeInOut",delay:3}}),(0,ft.jsx)(gc.div,{className:"absolute bottom-16 sm:bottom-32 left-1/4 w-20 sm:w-32 h-20 sm:h-32 bg-teal-500 opacity-10 rounded-full blur-xl",animate:{x:[0,70,0],y:[0,-30,0],scale:[1,1.1,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut",delay:1}})]}),(0,ft.jsx)(gc.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"relative z-10 w-full max-w-md mx-4 px-4 sm:px-0",children:(0,ft.jsxs)(gc.div,{className:"bg-white/10 backdrop-blur-xl p-6 sm:p-8 rounded-3xl border border-white/20 shadow-2xl",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[(0,ft.jsx)(gc.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",stiffness:200},className:"flex justify-center mb-8",children:(0,ft.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg",children:(0,ft.jsx)(Yc,{className:"text-white text-2xl"})})}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-center mb-8",children:[(0,ft.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"Create Account"}),(0,ft.jsx)("p",{className:"text-white/70 text-sm sm:text-base",children:"Join us and start your journey today"})]}),(0,ft.jsx)(At,{children:c&&(0,ft.jsx)(gc.div,{initial:{opacity:0,x:-20,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:20,height:0},className:"mb-6",children:(0,ft.jsxs)("div",{className:"bg-emerald-500/20 border border-emerald-400/30 text-emerald-100 p-4 rounded-xl flex items-center gap-3 backdrop-blur-sm",children:[(0,ft.jsx)(gc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:300},children:(0,ft.jsx)(Ac,{className:"flex-shrink-0 text-emerald-400"})}),(0,ft.jsx)("span",{className:"text-sm",children:c})]})})}),(0,ft.jsx)(At,{children:o&&(0,ft.jsx)(gc.div,{initial:{opacity:0,x:-20,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:20,height:0},className:"mb-6",children:(0,ft.jsxs)("div",{className:"bg-red-500/20 border border-red-400/30 text-red-100 p-4 rounded-xl flex items-center gap-3 backdrop-blur-sm",children:[(0,ft.jsx)(Pc,{className:"flex-shrink-0 text-red-400"}),(0,ft.jsx)("span",{className:"text-sm",children:o})]})})}),(0,ft.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),l(null),d(null),i===r)if(i.length<6)l("Password must be at least 6 characters long");else{g(!0);try{const t=await gh.post("/auth/register",{email:e,password:i});d(t.data.message||"Registration successful!"),setTimeout(()=>{x("/login")},1500)}catch(a){var n,s;l((null===(n=a.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.error)||"An error occurred during registration.")}finally{g(!1)}}else l("Passwords do not match")},className:"space-y-6",children:[(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,ft.jsx)("label",{htmlFor:"email",className:"block text-white/90 text-sm font-medium mb-2",children:"Email Address"}),(0,ft.jsxs)("div",{className:"relative",children:[(0,ft.jsx)(Uc,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/50"}),(0,ft.jsx)("input",{type:"email",id:"email",className:"w-full bg-white/10 border border-white/20 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"Enter your email",value:e,onChange:e=>n(e.target.value),required:!0})]})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:[(0,ft.jsx)("label",{htmlFor:"password",className:"block text-white/90 text-sm font-medium mb-2",children:"Password"}),(0,ft.jsxs)("div",{className:"relative",children:[(0,ft.jsx)(Fc,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/50"}),(0,ft.jsx)("input",{type:u?"text":"password",id:"password",className:"w-full bg-white/10 border border-white/20 rounded-xl py-3 pl-12 pr-12 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"Create a password",value:i,onChange:e=>s(e.target.value),required:!0}),(0,ft.jsx)("button",{type:"button",onClick:()=>h(!u),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white/80 transition-colors",children:u?(0,ft.jsx)(Bc,{}):(0,ft.jsx)(zc,{})})]})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},children:[(0,ft.jsx)("label",{htmlFor:"confirmPassword",className:"block text-white/90 text-sm font-medium mb-2",children:"Confirm Password"}),(0,ft.jsxs)("div",{className:"relative",children:[(0,ft.jsx)(Fc,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/50"}),(0,ft.jsx)("input",{type:m?"text":"password",id:"confirmPassword",className:"w-full bg-white/10 border border-white/20 rounded-xl py-3 pl-12 pr-12 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent transition-all duration-300 backdrop-blur-sm",placeholder:"Confirm your password",value:r,onChange:e=>a(e.target.value),required:!0}),(0,ft.jsx)("button",{type:"button",onClick:()=>p(!m),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white/80 transition-colors",children:m?(0,ft.jsx)(Bc,{}):(0,ft.jsx)(zc,{})})]})]}),i&&(0,ft.jsxs)(gc.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-1",children:[(0,ft.jsxs)("div",{className:"flex gap-2",children:[(0,ft.jsx)("div",{className:"h-2 flex-1 rounded-full transition-colors "+(i.length>=6?"bg-emerald-400":"bg-white/20")}),(0,ft.jsx)("div",{className:"h-2 flex-1 rounded-full transition-colors "+(i.length>=8&&/[A-Z]/.test(i)?"bg-emerald-400":"bg-white/20")}),(0,ft.jsx)("div",{className:"h-2 flex-1 rounded-full transition-colors "+(i.length>=8&&/[A-Z]/.test(i)&&/[0-9]/.test(i)?"bg-emerald-400":"bg-white/20")})]}),(0,ft.jsxs)("p",{className:"text-white/60 text-xs",children:["Password strength: ",i.length>=8&&/[A-Z]/.test(i)&&/[0-9]/.test(i)?"Strong":i.length>=6?"Medium":"Weak"]})]}),(0,ft.jsx)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:(0,ft.jsx)(gc.button,{type:"submit",disabled:f,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)(gc.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full"}),"Creating Account..."]}):(0,ft.jsxs)(ft.Fragment,{children:["Create Account",(0,ft.jsx)(Ec,{className:"transition-transform group-hover:translate-x-1"})]})})})]}),(0,ft.jsx)(gc.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-center mt-8",children:(0,ft.jsxs)("p",{className:"text-white/70",children:["Already have an account?"," ",(0,ft.jsx)(at,{to:"/login",className:"text-emerald-300 hover:text-emerald-200 font-semibold transition-colors duration-200 hover:underline",children:"Sign In"})]})})]})})]})})};const bh=(0,t.createContext)(null);function vh(){const e=(0,t.use)(bh);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var wh=n(228),_h=n.n(wh);function kh(e,n){let{bounds:i,boundsOptions:s,center:r,children:a,className:o,id:l,placeholder:c,style:d,whenReady:u,zoom:h,...m}=e;const[p]=(0,t.useState)({className:o,id:l,style:d}),[f,g]=(0,t.useState)(null),x=(0,t.useRef)(void 0);(0,t.useImperativeHandle)(n,()=>f?.map??null,[f]);const y=(0,t.useCallback)(e=>{if(null!==e&&!x.current){const t=new wh.Map(e,m);x.current=t,null!=r&&null!=h?t.setView(r,h):null!=i&&t.fitBounds(i,s),null!=u&&t.whenReady(u),g(function(e){return Object.freeze({__version:1,map:e})}(t))}},[]);(0,t.useEffect)(()=>()=>{f?.map.remove()},[f]);const b=f?t.createElement(bh,{value:f},a):c??null;return t.createElement("div",{...p,ref:y},b)}const jh=(0,t.forwardRef)(kh);var Nh=n(950);function Sh(e,n){const i=(0,t.useRef)(n);(0,t.useEffect)(function(){n!==i.current&&null!=e.attributionControl&&(null!=i.current&&e.attributionControl.removeAttribution(i.current),null!=n&&e.attributionControl.addAttribution(n)),i.current=n},[e,n])}function Ch(e,n){const i=(0,t.useRef)(void 0);(0,t.useEffect)(function(){return null!=n&&e.instance.on(n),i.current=n,function(){null!=i.current&&e.instance.off(i.current),i.current=null}},[e,n])}function Ph(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function Th(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Eh(e,n){return null==n?function(n,i){const s=(0,t.useRef)(void 0);return s.current||(s.current=e(n,i)),s}:function(i,s){const r=(0,t.useRef)(void 0);r.current||(r.current=e(i,s));const a=(0,t.useRef)(i),{instance:o}=r.current;return(0,t.useEffect)(function(){a.current!==i&&(n(o,i,a.current),a.current=i)},[o,i,n]),r}}function Mh(e){return function(n){const i=vh(),s=e(Ph(n,i),i);return Sh(i.map,n.attribution),Ch(s.current,n.eventHandlers),function(e,n){(0,t.useEffect)(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){n.layerContainer?.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}(s.current,i),s}}const Lh=(Ah=function(e,t){let{url:n,...i}=e;return Th(new wh.TileLayer(n,Ph(i,t)),t)},function(e){function n(n,i){const{instance:s}=e(n).current;return(0,t.useImperativeHandle)(i,()=>s),null}return(0,t.forwardRef)(n)}(Mh(Eh(Ah,function(e,t,n){!function(e,t,n){const{opacity:i,zIndex:s}=t;null!=i&&i!==n.opacity&&e.setOpacity(i),null!=s&&s!==n.zIndex&&e.setZIndex(s)}(e,t,n);const{url:i}=t;null!=i&&i!==n.url&&e.setUrl(i)}))));var Ah;const Oh=function(e,n){return function(e){function n(n,i){const{instance:s,context:r}=e(n).current;(0,t.useImperativeHandle)(i,()=>s);const{children:a}=n;return null==a?null:t.createElement(bh,{value:r},a)}return(0,t.forwardRef)(n)}(Mh(Eh(e,n)))}(function(e,t){let{position:n,...i}=e;const s=new wh.Marker(n,i);return Th(s,(r=t,a={overlayContainer:s},Object.freeze({...r,...a})));var r,a},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),Rh=function(e,n){const i=function(e,t){return function(n,i){const s=vh(),r=e(Ph(n,s),s);return Sh(s.map,n.attribution),Ch(r.current,n.eventHandlers),t(r.current,s,n,i),r}}(Eh(e),n);return function(e){function n(n,i){const[s,r]=(0,t.useState)(!1),{instance:a}=e(n,r).current;(0,t.useImperativeHandle)(i,()=>a),(0,t.useEffect)(function(){s&&a.update()},[a,s,n.children]);const o=a._contentNode;return o?(0,Nh.createPortal)(n.children,o):null}return(0,t.forwardRef)(n)}(i)}(function(e,t){return Th(new wh.Popup(e,t.overlayContainer),t)},function(e,n,i,s){let{position:r}=i;(0,t.useEffect)(function(){const{instance:t}=e;function i(e){e.popup===t&&(t.update(),s(!0))}function a(e){e.popup===t&&s(!1)}return n.map.on({popupopen:i,popupclose:a}),null==n.overlayContainer?(null!=r&&t.setLatLng(r),t.openOn(n.map)):n.overlayContainer.bindPopup(t),function(){n.map.off({popupopen:i,popupclose:a}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(t)}},[e,n,s,r])}),Dh=e=>{let{rating:n=0,onRatingChange:i,readonly:s=!1,size:r="md",showValue:a=!1}=e;const[o,l]=(0,t.useState)(0),c=()=>{const e={sm:"text-sm",md:"text-base",lg:"text-xl",xl:"text-2xl"};return e[r]||e.md},d=()=>{s||l(0)},u=e=>e<=(o||n)?"text-yellow-400":"text-gray-300";return(0,ft.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,ft.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(e=>(0,ft.jsx)("button",{type:"button",className:`${c()} ${u(e)} ${s?"cursor-default":"cursor-pointer hover:scale-110"} transition-all duration-150`,onClick:()=>{return t=e,void(!s&&i&&i(t));var t},onMouseEnter:()=>{return t=e,void(s||l(t));var t},onMouseLeave:d,disabled:s,children:"\u2605"},e))}),a&&n>0&&(0,ft.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:n.toFixed(1)})]})},Bh=e=>{let{isOpen:n,onClose:i,businessId:s,businessName:r,onReviewSubmitted:a,existingReview:o=null}=e;const[l,c]=(0,t.useState)((null===o||void 0===o?void 0:o.rating)||0),[d,u]=(0,t.useState)((null===o||void 0===o?void 0:o.comment)||""),[h,m]=(0,t.useState)(!1),[p,f]=(0,t.useState)(""),[g,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>{o&&(c(o.rating),u(o.comment||""))},[o]);const y=()=>{h||(c((null===o||void 0===o?void 0:o.rating)||0),u((null===o||void 0===o?void 0:o.comment)||""),f(""),x(!1),i())};return n?(0,ft.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:(0,ft.jsx)("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-90vh overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,ft.jsxs)("div",{className:"p-6",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ft.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:o?"Update Your Review":"Rate Your Experience"}),(0,ft.jsx)("button",{onClick:y,disabled:h,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,ft.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ft.jsxs)("div",{className:"mb-6",children:[(0,ft.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:r}),(0,ft.jsx)("p",{className:"text-sm text-gray-600",children:o?"Update your review and rating":"How was your experience?"})]}),g&&(0,ft.jsx)("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ft.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),o?"Review updated successfully!":"Review submitted successfully!"]})}),p&&(0,ft.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:p}),(0,ft.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),0!==l){m(!0),f("");try{let e;e=o?await gh.put(`/api/reviews/${o.id}`,{rating:l,comment:d.trim()}):await gh.post("/api/reviews/submit",{business_id:s,rating:l,comment:d.trim()}),x(!0),setTimeout(()=>{a&&a(e.data.review),y()},1500)}catch(p){var t,n;console.error("Error submitting review:",p),f((null===(t=p.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to submit review. Please try again.")}finally{m(!1)}}else f("Please select a rating")},children:[(0,ft.jsxs)("div",{className:"mb-6",children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Your Rating *"}),(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ft.jsx)(Dh,{rating:l,onRatingChange:e=>{c(e),f("")},size:"lg"}),l>0&&(0,ft.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["(",l," star",1!==l?"s":"",")"]})]})]}),(0,ft.jsxs)("div",{className:"mb-6",children:[(0,ft.jsx)("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Review (Optional)"}),(0,ft.jsx)("textarea",{id:"comment",value:d,onChange:e=>u(e.target.value),placeholder:"Share your experience with others...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:4,maxLength:500,disabled:h}),(0,ft.jsx)("div",{className:"mt-1 text-right",children:(0,ft.jsxs)("span",{className:"text-xs "+(d.length>450?"text-red-500":"text-gray-500"),children:[d.length,"/500 characters"]})})]}),(0,ft.jsxs)("div",{className:"flex space-x-3",children:[(0,ft.jsx)("button",{type:"button",onClick:y,disabled:h,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),(0,ft.jsx)("button",{type:"submit",disabled:h||0===l,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:h?(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,ft.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ft.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o?"Updating...":"Submitting..."]}):o?"Update Review":"Submit Review"})]})]})]})})}):null},zh=e=>{let{businessId:n,onReviewUpdate:i}=e;const[s,r]=(0,t.useState)([]),[a,o]=(0,t.useState)({totalReviews:0,averageRating:0,ratingDistribution:{1:0,2:0,3:0,4:0,5:0}}),[l,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(""),[h,m]=(0,t.useState)(!1);(0,t.useEffect)(()=>{console.log("ReviewsList businessId:",n),n?p():(console.warn("No businessId provided to ReviewsList"),u("Business ID not provided"),c(!1))},[n]);const p=async()=>{try{c(!0),console.log("Fetching reviews for business:",n);const e=await gh.get(`/api/reviews/business/${n}?limit=50`);console.log("Reviews response:",e.data),r(e.data.reviews||[]),o(e.data.stats||{totalReviews:0,averageRating:0,ratingDistribution:{1:0,2:0,3:0,4:0,5:0}}),i&&i({averageRating:e.data.stats.averageRating,totalReviews:e.data.stats.totalReviews})}catch(d){var e;console.error("Error fetching reviews:",d),console.error("Error details:",null===(e=d.response)||void 0===e?void 0:e.data),u("Failed to load reviews")}finally{c(!1)}};return l?(0,ft.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,ft.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,ft.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading reviews..."})]}):d?(0,ft.jsxs)("div",{className:"text-center py-8",children:[(0,ft.jsx)("p",{className:"text-red-600",children:d}),(0,ft.jsx)("button",{onClick:p,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm",children:"Try again"})]}):(0,ft.jsxs)("div",{className:"space-y-6",children:[a.totalReviews>0&&(0,ft.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ft.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ft.jsx)(Dh,{rating:a.averageRating,readonly:!0,showValue:!0,size:"lg"}),(0,ft.jsxs)("span",{className:"text-sm text-gray-600",children:["(",a.totalReviews," review",1!==a.totalReviews?"s":"",")"]})]})}),(0,ft.jsx)("div",{className:"space-y-2",children:[5,4,3,2,1].map(e=>{return(0,ft.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,ft.jsxs)("span",{className:"w-8 text-gray-600",children:[e,"\u2605"]}),(0,ft.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,ft.jsx)("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:(t=a.ratingDistribution[e],0===a.totalReviews?0:t/a.totalReviews*100)+"%"}})}),(0,ft.jsx)("span",{className:"w-8 text-gray-600 text-right",children:a.ratingDistribution[e]})]},e);var t})})]}),(0,ft.jsx)("div",{className:"space-y-4",children:0===s.length?(0,ft.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,ft.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcdd"}),(0,ft.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-1",children:"No reviews yet"}),(0,ft.jsx)("p",{className:"text-sm",children:"Be the first to share your experience!"})]}):(0,ft.jsxs)(ft.Fragment,{children:[(h?s:s.slice(0,3)).map(e=>{var t,n,i,s,r;return(0,ft.jsx)("div",{className:"border-b border-gray-200 pb-4 last:border-b-0",children:(0,ft.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,ft.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:((null===(t=e.user_email)||void 0===t?void 0:t.charAt(0))||(null===(n=e.users)||void 0===n||null===(i=n.full_name)||void 0===i?void 0:i.charAt(0))||"U").toUpperCase()}),(0,ft.jsxs)("div",{className:"flex-1",children:[(0,ft.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h4",{className:"font-bold text-white text-lg",children:e.user_email||(null===(s=e.users)||void 0===s?void 0:s.full_name)||"Anonymous User"}),(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ft.jsx)(Dh,{rating:e.rating,readonly:!0,size:"sm"}),(0,ft.jsx)("span",{className:"text-sm text-gray-300 font-medium",children:(r=e.created_at,new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))})]})]})}),e.comment&&e.comment.trim()&&(0,ft.jsx)("p",{className:"text-white text-base leading-relaxed mt-3 font-medium",children:e.comment})]})]})},e.id)}),s.length>3&&(0,ft.jsx)("div",{className:"text-center pt-2",children:(0,ft.jsx)("button",{onClick:()=>m(!h),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:h?"Show less reviews":`Show ${s.length-3} more reviews`})})]})})]})};delete _h().Icon.Default.prototype._getIconUrl,_h().Icon.Default.mergeOptions({iconRetinaUrl:n(249),iconUrl:n(24),shadowUrl:n(71)});const Ih=e=>{const t={barbershop:["Haircut","Beard Trim","Shave","Hair Styling"],beauty_salon:["Hair Styling","Manicure","Pedicure","Facial","Makeup"],restaurant:["Dine-in","Takeout","Delivery","Catering"],cafe:["Coffee","Pastries","Light Meals","Wi-Fi"],football_field:["Field Rental","Equipment Rental","Coaching"],tennis_court:["Court Rental","Equipment Rental","Lessons"],gym:["Weight Training","Cardio","Personal Training","Group Classes"],car_wash:["Exterior Wash","Interior Cleaning","Wax","Detailing"],spa:["Massage","Facial","Body Treatment","Relaxation"],dentist:["Cleaning","Check-up","Fillings","Orthodontics"],doctor:["Consultation","Check-up","Diagnosis","Treatment"],other:["Various Services"]};return t[e]||t.other},Fh=e=>{var n,i,s,r;let{business:a,onClose:o,onBookNow:l,onContactBusiness:c}=e;const[d,u]=(0,t.useState)(0),[h,m]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),[g,x]=(0,t.useState)(null),[y,b]=(0,t.useState)(null),[v,w]=(0,t.useState)(!1),[_,k]=(0,t.useState)([]),[j,N]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{if(null!==a&&void 0!==a&&a.id)try{N(!0),console.log("[BusinessDetailModal] Fetching photos for business:",a.id);const e=await gh.get(`/api/businesses/${a.id}/photos`);console.log("[BusinessDetailModal] Photos response:",e.data),k(e.data.photos||[]),console.log("[BusinessDetailModal] Set photos state:",e.data.photos)}catch(e){console.error("[BusinessDetailModal] Error fetching photos:",e),k([])}finally{N(!1)}})()},[null===a||void 0===a?void 0:a.id]);(0,t.useEffect)(()=>{null!==a&&void 0!==a&&a.id&&(async()=>{try{await gh.get("/auth/me"),w(!0)}catch(e){w(!1)}})()},[null===a||void 0===a?void 0:a.id]),(0,t.useEffect)(()=>{v&&null!==a&&void 0!==a&&a.id&&(async()=>{if(v&&null!==a&&void 0!==a&&a.id)try{const e=await gh.get(`/api/reviews/can-review/${a.id}`);f(e.data.canReview),x(e.data.existingReview)}catch(e){console.error("Error checking review permission:",e)}})()},[v,null===a||void 0===a?void 0:a.id]);if(!a)return null;return(0,ft.jsx)(At,{children:(0,ft.jsxs)(gc.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:o,children:[(0,ft.jsxs)(gc.div,{className:"bg-white rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto dark:bg-gray-800 shadow-2xl",initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",duration:.3,stiffness:300,damping:30},onClick:e=>e.stopPropagation(),children:[(0,ft.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-600",children:[(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("span",{className:"text-3xl mr-4",children:(e=>{const t={barbershop:"\u2702\ufe0f",beauty_salon:"\ud83d\udc84",restaurant:"\ud83c\udf7d\ufe0f",cafe:"\u2615",football_field:"\u26bd",tennis_court:"\ud83c\udfbe",gym:"\ud83c\udfcb\ufe0f",car_wash:"\ud83d\ude97",spa:"\ud83e\uddd8",dentist:"\ud83e\uddb7",doctor:"\ud83d\udc69\u200d\u2695\ufe0f",other:"\ud83c\udfe2"};return t[e]||t.other})(a.type)}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.name}),(0,ft.jsx)("p",{className:"text-gray-600 capitalize dark:text-gray-300",children:a.type.replace("_"," ")})]})]}),(0,ft.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 text-2xl dark:text-gray-500 dark:hover:text-gray-300",children:"\xd7"})]}),(0,ft.jsxs)("div",{className:"p-6",children:[j?(0,ft.jsx)("div",{className:"mb-8 h-72 bg-gray-200 dark:bg-gray-700 rounded-xl flex items-center justify-center",children:(0,ft.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading photos..."})}):_&&_.length>0?(0,ft.jsxs)("div",{className:"mb-8",children:[(0,ft.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 dark:text-white",children:["Photos (",_.length,")"]}),(0,ft.jsxs)("div",{className:"space-y-4",children:[(0,ft.jsxs)("div",{className:"relative",children:[(0,ft.jsx)("img",{src:null===(n=_[d])||void 0===n?void 0:n.photo_url,alt:`${a.name} - Photo ${d+1}`,className:"w-full h-72 object-cover rounded-xl shadow-lg",onError:e=>{var t;console.error("[BusinessDetailModal] Image failed to load:",null===(t=_[d])||void 0===t?void 0:t.photo_url),e.target.src="https://via.placeholder.com/800x400?text=Image+Not+Available"}}),_.length>1&&(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)("button",{onClick:()=>u(0===d?_.length-1:d-1),className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full w-12 h-12 flex items-center justify-center hover:bg-opacity-70 transition-all backdrop-blur-sm",children:"\u2039"}),(0,ft.jsx)("button",{onClick:()=>u(d===_.length-1?0:d+1),className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full w-12 h-12 flex items-center justify-center hover:bg-opacity-70 transition-all backdrop-blur-sm",children:"\u203a"}),(0,ft.jsxs)("div",{className:"absolute bottom-4 right-4 bg-black bg-opacity-60 text-white px-4 py-2 rounded-full text-sm backdrop-blur-sm",children:[d+1," / ",_.length]})]})]}),_.length>1&&(0,ft.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-2",children:_.map((e,t)=>(0,ft.jsx)("button",{onClick:()=>u(t),className:"flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden border-3 transition-all "+(d===t?"border-blue-500 ring-2 ring-blue-200 shadow-lg":"border-gray-300 hover:border-gray-400 hover:shadow-md"),children:(0,ft.jsx)("img",{src:e.photo_url,alt:`${a.name} - Thumbnail ${t+1}`,className:"w-full h-full object-cover"})},e.id))})]})]}):null,(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 mb-8",children:[(0,ft.jsxs)("div",{className:"space-y-6",children:[(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 md:p-6 rounded-xl",children:[(0,ft.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-3 dark:text-white flex items-center",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ud83d\udccd"}),"Location"]}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm md:text-base",children:a.location})]}),(0,ft.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-6 rounded-xl border border-yellow-200 dark:border-yellow-800",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ft.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Reviews & Ratings"}),v&&p&&(0,ft.jsx)("button",{onClick:e=>{console.log("Write Review button clicked"),e.stopPropagation(),e.preventDefault(),m(!0)},className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"Write Review"}),g&&(0,ft.jsx)("button",{onClick:e=>{console.log("Update Review button clicked"),e.stopPropagation(),e.preventDefault(),m(!0)},className:"px-4 py-2 bg-gray-600 text-white text-sm rounded-lg hover:bg-gray-700 transition-colors",children:"Update Review"})]}),(y||a.rating&&a.rating.totalReviews>0)&&(0,ft.jsxs)("div",{className:"flex items-center mb-4",children:[(0,ft.jsx)(Dh,{rating:(null===y||void 0===y?void 0:y.averageRating)||(null===(i=a.rating)||void 0===i?void 0:i.averageRating)||0,readonly:!0,size:"lg",showValue:!0}),(0,ft.jsxs)("span",{className:"text-gray-500 ml-2 dark:text-gray-400 text-sm",children:["(",(null===y||void 0===y?void 0:y.totalReviews)||(null===(s=a.rating)||void 0===s?void 0:s.totalReviews)||0," review",1!==((null===y||void 0===y?void 0:y.totalReviews)||(null===(r=a.rating)||void 0===r?void 0:r.totalReviews)||0)?"s":"",")"]})]}),(0,ft.jsx)(zh,{businessId:a.id,onReviewUpdate:e=>{b(e)}}),!v&&(0,ft.jsx)("div",{className:"mt-4 text-center",children:(0,ft.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,ft.jsx)("a",{href:"/login",className:"text-blue-600 hover:text-blue-800",children:"Sign in"})," to write a review"]})})]}),a.description&&(0,ft.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:[(0,ft.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3 dark:text-white",children:"About"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:a.description})]})]}),(0,ft.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,ft.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-6 rounded-xl border border-green-200 dark:border-green-800",children:[(0,ft.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 dark:text-white flex items-center",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ud83d\udd50"}),"Operating Hours"]}),(0,ft.jsx)("div",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:a.business_hours?Object.entries(a.business_hours).map(e=>{let[t,n]=e;return(0,ft.jsxs)("div",{className:"flex justify-between",children:[(0,ft.jsx)("span",{className:"capitalize",children:t}),(0,ft.jsx)("span",{className:"font-medium",children:n.isOpen?`${n.openTime} - ${n.closeTime}`:"Closed"})]},t)}):(0,ft.jsx)("div",{className:"text-center py-4",children:(0,ft.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Hours not set"})})})]}),(0,ft.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-6 rounded-xl border border-purple-200 dark:border-purple-800",children:[(0,ft.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 dark:text-white flex items-center",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\u26a1"}),"Services"]}),(0,ft.jsx)("div",{className:"flex flex-wrap gap-2",children:Ih(a.type).map((e,t)=>(0,ft.jsx)("span",{className:"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium dark:bg-purple-900 dark:text-purple-200 transition-all hover:shadow-md",children:e},t))})]})]}),(0,ft.jsxs)("div",{className:"md:col-span-2 lg:col-span-1 space-y-6",children:[(0,ft.jsxs)("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[(0,ft.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 dark:text-white flex items-center",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ud83d\udcde"}),"Contact"]}),(0,ft.jsxs)("div",{className:"space-y-3",children:[a.phone&&(0,ft.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[(0,ft.jsx)("span",{className:"mr-3 text-lg",children:"\ufffd"}),(0,ft.jsx)("span",{className:"font-medium",children:a.phone})]}),a.email&&(0,ft.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[(0,ft.jsx)("span",{className:"mr-3 text-lg",children:"\u2709\ufe0f"}),(0,ft.jsx)("span",{className:"font-medium",children:a.email})]}),a.website&&(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("span",{className:"mr-3 text-lg",children:"\ud83c\udf10"}),(0,ft.jsx)("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800 font-medium hover:underline dark:text-indigo-400 transition-colors",children:"Visit Website"})]})]})]}),(a.instagram_url||a.facebook_url)&&(0,ft.jsxs)("div",{className:"bg-pink-50 dark:bg-pink-900/20 p-6 rounded-xl border border-pink-200 dark:border-pink-800",children:[(0,ft.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 dark:text-white flex items-center",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ud83c\udf1f"}),"Follow Us"]}),(0,ft.jsxs)("div",{className:"flex flex-col space-y-3",children:[a.instagram_url&&(0,ft.jsxs)("a",{href:a.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all transform hover:scale-105 shadow-md",children:[(0,ft.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.621 5.367 11.988 11.988 11.988s11.987-5.367 11.987-11.988C24.004 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.323-1.297C4.198 14.896 3.708 13.745 3.708 12.448s.49-2.448 1.297-3.323C5.901 8.198 7.052 7.708 8.349 7.708s2.448.49 3.323 1.297c.896.896 1.386 2.047 1.386 3.344s-.49 2.448-1.386 3.323c-.875.807-2.026 1.297-3.323 1.297z"})}),(0,ft.jsx)("span",{className:"font-medium",children:"Instagram"})]}),a.facebook_url&&(0,ft.jsxs)("a",{href:a.facebook_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all transform hover:scale-105 shadow-md",children:[(0,ft.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),(0,ft.jsx)("span",{className:"font-medium",children:"Facebook"})]})]})]})]})]})]}),a.latitude&&a.longitude&&(0,ft.jsx)("div",{className:"px-6 pb-6",children:(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-xl",children:[(0,ft.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 dark:text-white flex items-center",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ud83d\uddfa\ufe0f"}),"Location on Map"]}),(0,ft.jsx)("div",{className:"h-80 rounded-xl overflow-hidden shadow-lg border-2 border-gray-200 dark:border-gray-600",children:(0,ft.jsxs)(jh,{center:[a.latitude,a.longitude],zoom:15,scrollWheelZoom:!1,style:{height:"100%",width:"100%"},children:[(0,ft.jsx)(Lh,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,ft.jsx)(Oh,{position:[a.latitude,a.longitude],children:(0,ft.jsx)(Rh,{children:(0,ft.jsxs)("div",{className:"text-center p-2",children:[(0,ft.jsx)("strong",{className:"text-lg",children:a.name}),(0,ft.jsx)("br",{}),(0,ft.jsx)("span",{className:"text-sm text-gray-600",children:a.location}),(0,ft.jsx)("br",{}),(0,ft.jsxs)("small",{className:"text-xs text-gray-500",children:["Lat: ",a.latitude,", Lng: ",a.longitude]})]})})})]})})]})}),(0,ft.jsx)("div",{className:"px-4 md:px-6 py-6 border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 rounded-b-xl",children:(0,ft.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ft.jsx)("button",{onClick:o,className:"flex-1 px-6 py-3 text-gray-700 bg-white border-2 border-gray-300 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium dark:text-gray-200 dark:bg-gray-600 dark:border-gray-500 dark:hover:bg-gray-500",children:"Close"}),v&&c&&(0,ft.jsx)("button",{onClick:()=>{c(a.id),o()},className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 transform hover:scale-[1.02] font-medium shadow-lg hover:shadow-xl dark:from-green-500 dark:to-green-600 dark:hover:from-green-600 dark:hover:to-green-700",children:"\ud83d\udcac Contact Business"}),(0,ft.jsx)("button",{onClick:l,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 transform hover:scale-[1.02] font-medium shadow-lg hover:shadow-xl dark:from-blue-500 dark:to-blue-600 dark:hover:from-blue-600 dark:hover:to-blue-700",children:"\ud83d\udcc5 Book Appointment"})]})})]}),(0,ft.jsx)(Bh,{isOpen:h,onClose:()=>{console.log("Rating modal closing"),m(!1)},businessId:a.id,businessName:a.name,existingReview:g,onReviewSubmitted:e=>{x(e),f(!1)}})]})})},Uh=e=>{let{business:n,isOpen:i,onClose:s,onBookingSuccess:r}=e;const[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)([]),[h,m]=(0,t.useState)(""),[p,f]=(0,t.useState)("cash"),[g,x]=(0,t.useState)(""),[y,b]=(0,t.useState)(""),[v,w]=(0,t.useState)(""),[_,k]=(0,t.useState)(!1),[j,N]=(0,t.useState)(""),[S,C]=(0,t.useState)(""),[P,T]=(0,t.useState)("");(0,t.useEffect)(()=>{i&&(o(""),c(""),u([]),x(""),b(""),w(""),m(""),f("cash"),N(""),C(""),T(""))},[i]),(0,t.useEffect)(()=>{a&&E()},[a]);const E=async()=>{try{const e=await fh(n.id,a);u(e.slots||[])}catch(e){console.error("Error fetching availability:",e),N("Failed to load available time slots")}};return(0,ft.jsx)(At,{children:i&&(0,ft.jsx)(gc.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:s,children:(0,ft.jsxs)(gc.div,{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[95vh] overflow-y-auto dark:bg-gray-800 shadow-2xl",initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",duration:.3,stiffness:300,damping:30},onClick:e=>e.stopPropagation(),children:[(0,ft.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-600",children:[(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("span",{className:"text-xl mr-2",children:(e=>{const t={barbershop:"\u2702\ufe0f",beauty_salon:"\ud83d\udc84",restaurant:"\ud83c\udf7d\ufe0f",cafe:"\u2615",football_field:"\u26bd",tennis_court:"\ud83c\udfbe",gym:"\ud83c\udfcb\ufe0f",car_wash:"\ud83d\ude97",spa:"\ud83e\uddd8",dentist:"\ud83e\uddb7",doctor:"\ud83d\udc69\u200d\u2695\ufe0f",other:"\ud83c\udfe2"};return t[e]||t.other})(n.type)}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Book Appointment"}),(0,ft.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:n.name})]})]}),(0,ft.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 text-xl dark:text-gray-500 dark:hover:text-gray-300",children:"\xd7"})]}),(0,ft.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a&&l)if(g.trim()&&y.trim()){k(!0),N("");try{const e={business_id:n.id,booking_date:a,booking_time:l,customer_name:g.trim(),customer_phone:y.trim(),customer_email:v.trim(),notes:h.trim(),payment_method:p},i=await(async e=>{try{return(await ph.post("/api/bookings",e)).data}catch(j){throw console.error("Error creating booking:",j),j}})(e);if(console.log("Full API response:",i),i.success||"Reservation created successfully"===i.message||i.booking){var t;console.log("Booking created successfully:",i),N("");const e=i.confirmationCode||(null===(t=i.booking)||void 0===t?void 0:t.id)||i.id||"N/A";T(e),C("Booking confirmed successfully! Your confirmation code is: "+e),r&&r(i.booking||i),setTimeout(()=>{s&&s()},2e3)}else console.log("Booking failed or unexpected response:",i),N(i.message||i.error||"Booking failed. Please try again.")}catch(S){var i,o,c,d,u,m;if(console.error("Booking error:",S),"Reservation created successfully"===(null===(i=S.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"Reservation created successfully"===S.message){var f,x,b,w;N("");const e=(null===(f=S.response)||void 0===f||null===(x=f.data)||void 0===x?void 0:x.confirmationCode)||(null===(b=S.response)||void 0===b||null===(w=b.data)||void 0===w?void 0:w.id)||"N/A";var _;if(T(e),C("Booking confirmed successfully! Your confirmation code is: "+e),r)r((null===(_=S.response)||void 0===_?void 0:_.data)||{});return void setTimeout(()=>{s&&s()},2e3)}let e="Failed to create booking. Please try again.";null!==(c=S.response)&&void 0!==c&&null!==(d=c.data)&&void 0!==d&&d.error?e=S.response.data.error:null!==(u=S.response)&&void 0!==u&&null!==(m=u.data)&&void 0!==m&&m.message?e=S.response.data.message:S.message&&(e=S.message),N(e)}finally{k(!1)}}else N("Please enter your name and phone number");else N("Please select both date and time")},className:"p-4",children:[j&&(0,ft.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded dark:bg-red-900 dark:border-red-600 dark:text-red-200",children:j}),S&&(0,ft.jsx)("div",{className:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded dark:bg-green-900 dark:border-green-600 dark:text-green-200",children:(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("div",{className:"flex-shrink-0",children:(0,ft.jsx)("svg",{className:"h-5 w-5 text-green-400 dark:text-green-300",viewBox:"0 0 20 20",fill:"currentColor",children:(0,ft.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,ft.jsxs)("div",{className:"ml-3",children:[(0,ft.jsx)("p",{className:"text-sm font-medium",children:S}),(0,ft.jsx)("p",{className:"text-xs mt-1 text-green-600 dark:text-green-300",children:"This modal will close automatically in a few seconds..."})]})]})}),(0,ft.jsxs)("div",{className:"mb-4",children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 dark:text-gray-300",children:"Select Date"}),(0,ft.jsxs)("select",{value:a,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-400",required:!0,children:[(0,ft.jsx)("option",{value:"",children:"Choose a date"}),(()=>{const e=[],t=new Date;for(let n=0;n<14;n++){const i=new Date(t);i.setDate(t.getDate()+n),e.push({value:i.toISOString().split("T")[0],label:i.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})}return e})().map(e=>(0,ft.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,ft.jsxs)("div",{className:"mb-4",children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 dark:text-gray-300",children:"Select Time"}),a?d.length>0?(0,ft.jsx)("div",{className:"grid grid-cols-4 gap-2",children:d.map(e=>(0,ft.jsx)("button",{type:"button",onClick:()=>c(e.time),className:"px-2 py-1.5 text-xs rounded-md border "+(l===e.time?"bg-blue-600 text-white border-blue-600 dark:bg-blue-500 dark:border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-blue-900"),children:e.time},e.time))}):(0,ft.jsx)("p",{className:"text-gray-500 text-xs dark:text-gray-400",children:"No available slots for this date"}):(0,ft.jsx)("p",{className:"text-gray-500 text-xs dark:text-gray-400",children:"Please select a date first"})]}),(0,ft.jsxs)("div",{className:"mb-4",children:[(0,ft.jsx)("h3",{className:"text-md font-medium text-gray-900 mb-2 dark:text-white",children:"Customer Information"}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 dark:text-gray-300",children:"Full Name *"}),(0,ft.jsx)("input",{type:"text",value:g,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 dark:focus:ring-blue-400",placeholder:"Enter your full name",required:!0})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 dark:text-gray-300",children:"Phone Number *"}),(0,ft.jsx)("input",{type:"tel",value:y,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 dark:focus:ring-blue-400",placeholder:"Enter your phone number",required:!0})]})]}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 dark:text-gray-300",children:"Email (Optional)"}),(0,ft.jsx)("input",{type:"email",value:v,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 dark:focus:ring-blue-400",placeholder:"Enter your email address"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 dark:text-gray-300",children:"Payment Method"}),(0,ft.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,ft.jsxs)("label",{className:"flex items-center",children:[(0,ft.jsx)("input",{type:"radio",value:"cash",checked:"cash"===p,onChange:e=>f(e.target.value),className:"mr-1 dark:bg-gray-700 dark:border-gray-600"}),(0,ft.jsx)("span",{className:"text-xs dark:text-gray-300",children:"\ud83d\udcb0 Cash"})]}),(0,ft.jsxs)("label",{className:"flex items-center",children:[(0,ft.jsx)("input",{type:"radio",value:"online",checked:"online"===p,onChange:e=>f(e.target.value),className:"mr-1 dark:bg-gray-700 dark:border-gray-600"}),(0,ft.jsx)("span",{className:"text-xs dark:text-gray-300",children:"\ufffd Online"})]})]})]})]})]}),(0,ft.jsxs)("div",{className:"mb-4",children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 dark:text-gray-300",children:"Notes (Optional)"}),(0,ft.jsx)("textarea",{value:h,onChange:e=>m(e.target.value),rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 dark:focus:ring-blue-400",placeholder:"Any special requests..."})]}),a&&l&&(0,ft.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200 dark:bg-blue-900/20 dark:border-blue-800",children:[(0,ft.jsx)("h3",{className:"font-medium text-blue-900 mb-1 text-sm dark:text-blue-300",children:"Booking Summary"}),(0,ft.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-blue-700 dark:text-blue-400",children:[(0,ft.jsx)("div",{children:(0,ft.jsx)("span",{className:"font-medium",children:n.name})}),(0,ft.jsx)("div",{children:(0,ft.jsx)("span",{className:"font-medium",children:"cash"===p?"Cash":"Online"})}),(0,ft.jsx)("div",{children:new Date(a).toLocaleDateString()}),(0,ft.jsx)("div",{children:l})]})]}),(0,ft.jsxs)("div",{className:"flex gap-2 pt-2 border-t dark:border-gray-700",children:[(0,ft.jsx)("button",{type:"button",onClick:s,className:"flex-1 px-3 py-2 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:S?"Close":"Cancel"}),(0,ft.jsx)("button",{type:"submit",disabled:_||S||!a||!l,className:"flex-1 px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors dark:bg-blue-500 dark:hover:bg-blue-600",children:S?"\u2713 Confirmed":_?"Booking...":"Confirm Booking"})]})]})]})})})},$h={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Wh(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Hh={date:Wh({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Wh({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Wh({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Vh={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function qh(e){return(t,n)=>{let i;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=n?.width?String(n.width):t;i=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=n?.width?String(n.width):e.defaultWidth;i=e.values[s]||e.values[t]}return i[e.argumentCallback?e.argumentCallback(t):t]}}const Zh={ordinalNumber:(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:qh({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:qh({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:qh({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:qh({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:qh({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Yh(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=n.width,s=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],r=t.match(s);if(!r)return null;const a=r[0],o=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(a)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}const Kh={ordinalNumber:(Gh={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(Gh.matchPattern);if(!n)return null;const i=n[0],s=e.match(Gh.parsePattern);if(!s)return null;let r=Gh.valueCallback?Gh.valueCallback(s[0]):s[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(i.length)}}),era:Yh({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Yh({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Yh({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Yh({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Yh({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var Gh;const Jh={code:"en-US",formatDistance:(e,t,n)=>{let i;const s=$h[e];return i="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i},formatLong:Hh,formatRelative:(e,t,n,i)=>Vh[e],localize:Zh,match:Kh,options:{weekStartsOn:0,firstWeekContainsDate:1}};let Xh={};function Qh(){return Xh}Math.pow(10,8);const em=6048e5,tm=6e4,nm=36e5,im=43200,sm=Symbol.for("constructDateFrom");function rm(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&sm in e?e[sm](t):e instanceof Date?new e.constructor(t):new Date(t)}function am(e,t){return rm(t||e,e)}function om(e){const t=am(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function lm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const s=rm.bind(null,e||n.find(e=>"object"===typeof e));return n.map(s)}function cm(e,t){const n=am(e,t?.in);return n.setHours(0,0,0,0),n}function dm(e,t,n){const[i,s]=lm(n?.in,e,t),r=cm(i),a=cm(s),o=+r-om(r),l=+a-om(a);return Math.round((o-l)/864e5)}function um(e,t){const n=am(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function hm(e,t){const n=am(e,t?.in);return dm(n,um(n))+1}function mm(e,t){const n=Qh(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=am(e,t?.in),r=s.getDay(),a=(r<i?7:0)+r-i;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function pm(e,t){return mm(e,{...t,weekStartsOn:1})}function fm(e,t){const n=am(e,t?.in),i=n.getFullYear(),s=rm(n,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const r=pm(s),a=rm(n,0);a.setFullYear(i,0,4),a.setHours(0,0,0,0);const o=pm(a);return n.getTime()>=r.getTime()?i+1:n.getTime()>=o.getTime()?i:i-1}function gm(e,t){const n=fm(e,t),i=rm(t?.in||e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),pm(i)}function xm(e,t){const n=am(e,t?.in),i=+pm(n)-+gm(n);return Math.round(i/em)+1}function ym(e,t){const n=am(e,t?.in),i=n.getFullYear(),s=Qh(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=rm(t?.in||e,0);a.setFullYear(i+1,0,r),a.setHours(0,0,0,0);const o=mm(a,t),l=rm(t?.in||e,0);l.setFullYear(i,0,r),l.setHours(0,0,0,0);const c=mm(l,t);return+n>=+o?i+1:+n>=+c?i:i-1}function bm(e,t){const n=Qh(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=ym(e,t),r=rm(t?.in||e,0);r.setFullYear(s,0,i),r.setHours(0,0,0,0);return mm(r,t)}function vm(e,t){const n=am(e,t?.in),i=+mm(n,t)-+bm(n,t);return Math.round(i/em)+1}function wm(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const _m={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return wm("yy"===t?i%100:i,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):wm(n+1,2)},d:(e,t)=>wm(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>wm(e.getHours()%12||12,t.length),H:(e,t)=>wm(e.getHours(),t.length),m:(e,t)=>wm(e.getMinutes(),t.length),s:(e,t)=>wm(e.getSeconds(),t.length),S(e,t){const n=t.length,i=e.getMilliseconds();return wm(Math.trunc(i*Math.pow(10,n-3)),t.length)}},km="midnight",jm="noon",Nm="morning",Sm="afternoon",Cm="evening",Pm="night",Tm={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),i=t>0?t:1-t;return n.ordinalNumber(i,{unit:"year"})}return _m.y(e,t)},Y:function(e,t,n,i){const s=ym(e,i),r=s>0?s:1-s;if("YY"===t){return wm(r%100,2)}return"Yo"===t?n.ordinalNumber(r,{unit:"year"}):wm(r,t.length)},R:function(e,t){return wm(fm(e),t.length)},u:function(e,t){return wm(e.getFullYear(),t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return wm(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return wm(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return _m.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return wm(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const s=vm(e,i);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):wm(s,t.length)},I:function(e,t,n){const i=xm(e);return"Io"===t?n.ordinalNumber(i,{unit:"week"}):wm(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):_m.d(e,t)},D:function(e,t,n){const i=hm(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):wm(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const s=e.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return wm(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const s=e.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return wm(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),s=0===i?7:i;switch(t){case"i":return String(s);case"ii":return wm(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let s;switch(s=12===i?jm:0===i?km:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let s;switch(s=i>=17?Cm:i>=12?Sm:i>=4?Nm:Pm,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return _m.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):_m.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return"Ko"===t?n.ordinalNumber(i,{unit:"hour"}):wm(i,t.length)},k:function(e,t,n){let i=e.getHours();return 0===i&&(i=24),"ko"===t?n.ordinalNumber(i,{unit:"hour"}):wm(i,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):_m.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):_m.s(e,t)},S:function(e,t){return _m.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return Mm(i);case"XXXX":case"XX":return Lm(i);default:return Lm(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return Mm(i);case"xxxx":case"xx":return Lm(i);default:return Lm(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Em(i,":");default:return"GMT"+Lm(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Em(i,":");default:return"GMT"+Lm(i,":")}},t:function(e,t,n){return wm(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return wm(+e,t.length)}};function Em(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",i=Math.abs(e),s=Math.trunc(i/60),r=i%60;return 0===r?n+String(s):n+String(s)+t+wm(r,2)}function Mm(e,t){if(e%60===0){return(e>0?"-":"+")+wm(Math.abs(e)/60,2)}return Lm(e,t)}function Lm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",i=Math.abs(e);return n+wm(Math.trunc(i/60),2)+t+wm(i%60,2)}const Am=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Om=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Rm={p:Om,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],s=n[2];if(!s)return Am(e,t);let r;switch(i){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Am(i,t)).replace("{{time}}",Om(s,t))}},Dm=/^D+$/,Bm=/^Y+$/,zm=["D","DD","YY","YYYY"];function Im(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Fm(e){return!(!Im(e)&&"number"!==typeof e||isNaN(+am(e)))}const Um=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$m=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Wm=/^'([^]*?)'?$/,Hm=/''/g,Vm=/[a-zA-Z]/;function qm(e,t,n){const i=Qh(),s=n?.locale??i.locale??Jh,r=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,o=am(e,n?.in);if(!Fm(o))throw new RangeError("Invalid time value");let l=t.match($m).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,Rm[t])(e,s.formatLong)}return e}).join("").match(Um).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Zm(e)};if(Tm[t])return{isToken:!0,value:e};if(t.match(Vm))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const c={firstWeekContainsDate:r,weekStartsOn:a,locale:s};return l.map(i=>{if(!i.isToken)return i.value;const r=i.value;(!n?.useAdditionalWeekYearTokens&&function(e){return Bm.test(e)}(r)||!n?.useAdditionalDayOfYearTokens&&function(e){return Dm.test(e)}(r))&&function(e,t,n){const i=function(e,t,n){const i="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(i),zm.includes(e))throw new RangeError(i)}(r,t,String(e));return(0,Tm[r[0]])(o,r,s.localize,c)}).join("")}function Zm(e){const t=e.match(Wm);return t?t[1].replace(Hm,"'"):e}function Ym(e){return rm(e,Date.now())}function Km(e,t,n){const[i,s]=lm(n?.in,e,t);return+cm(i)===+cm(s)}function Gm(e,t){return Km(rm(t?.in||e,e),Ym(t?.in||e))}const Jm=e=>{var n;let{isOpen:i,onClose:s,bookingId:r}=e;const[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null);(0,t.useEffect)(()=>{i&&r?(console.log("Modal opened with booking ID:",r),h()):i&&!r&&(console.error("Modal opened without booking ID"),u("No booking ID provided"))},[i,r]);const h=async()=>{c(!0),u(null);try{console.log("Fetching booking details for ID:",r);const e=await(async e=>{try{return(await ph.get(`/api/user/bookings/${e}`)).data}catch(d){throw console.error("Error fetching booking details:",d),d}})(r);console.log("Booking details response:",e),o(e.booking)}catch(n){var e,t;console.error("Error fetching booking details:",n),u((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to load booking details")}finally{c(!1)}},m=e=>{switch(e){case"confirmed":return{color:"bg-green-100 text-green-800 border-green-200",icon:"\u2705",bgColor:"bg-green-50"};case"pending":return{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:"\u23f3",bgColor:"bg-yellow-50"};case"cancelled":return{color:"bg-red-100 text-red-800 border-red-200",icon:"\u274c",bgColor:"bg-red-50"};case"completed":return{color:"bg-blue-100 text-blue-800 border-blue-200",icon:"\ud83c\udf89",bgColor:"bg-blue-50"};default:return{color:"bg-gray-100 text-gray-800 border-gray-200",icon:"\ud83d\udcc5",bgColor:"bg-gray-50"}}};return i?i&&!r?(0,ft.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,ft.jsx)(gc.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full p-6",children:(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Error"}),(0,ft.jsx)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:"No booking ID provided"}),(0,ft.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Close"})]})})}):(0,ft.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,ft.jsx)(gc.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,ft.jsxs)("div",{className:"p-6",children:[(0,ft.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,ft.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Booking Details"}),(0,ft.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:(0,ft.jsx)(Xc,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"})})]}),l&&(0,ft.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,ft.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}),d&&(0,ft.jsx)("div",{className:"bg-red-100 text-red-700 p-4 rounded-md mb-4",children:d}),a&&(0,ft.jsxs)("div",{className:"space-y-6",children:[!1,(0,ft.jsxs)("div",{className:`${m(a.status).bgColor} rounded-xl p-6`,children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ft.jsx)("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center text-2xl shadow-sm",children:(e=>{const t={barbershop:"\u2702\ufe0f",beauty_salon:"\ud83d\udc84",restaurant:"\ud83c\udf7d\ufe0f",cafe:"\u2615",football_field:"\u26bd",tennis_court:"\ud83c\udfbe",gym:"\ud83c\udfcb\ufe0f",car_wash:"\ud83d\ude97",spa:"\ud83e\uddd8",dentist:"\ud83e\uddb7",doctor:"\ud83d\udc69\u200d\u2695\ufe0f",other:"\ud83c\udfe2"};return t[e]||t.other})(a.business_type)}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a.business_name}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400 capitalize",children:null===(n=a.business_type)||void 0===n?void 0:n.replace("_"," ")})]})]}),(0,ft.jsxs)("div",{className:`flex items-center space-x-2 px-3 py-2 rounded-lg ${m(a.status).color} border`,children:[(0,ft.jsx)("span",{children:m(a.status).icon}),(0,ft.jsx)("span",{className:"font-medium capitalize",children:a.status})]})]}),a.business_location&&(0,ft.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400",children:[(0,ft.jsx)($c,{className:"w-4 h-4"}),(0,ft.jsx)("span",{children:a.business_location})]})]}),(0,ft.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ft.jsx)(Mc,{className:"w-5 h-5 text-blue-500"}),(0,ft.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Date & Time"})]}),(0,ft.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:new Date(a.booking_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,ft.jsx)(Oc,{className:"w-4 h-4 text-purple-500"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:a.booking_time})]})]}),(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ft.jsx)(Kc,{className:"w-5 h-5 text-green-500"}),(0,ft.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Customer Info"})]}),(0,ft.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a.customer_name||"N/A"}),a.customer_phone&&(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,ft.jsx)(Wc,{className:"w-4 h-4 text-blue-500"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:a.customer_phone})]}),a.customer_email&&(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,ft.jsx)(Uc,{className:"w-4 h-4 text-purple-500"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:a.customer_email})]})]})]}),a.amount>0&&(0,ft.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ft.jsx)(Rc,{className:"w-5 h-5 text-green-500"}),(0,ft.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Payment"})]}),(0,ft.jsx)("div",{className:"flex justify-between items-center",children:(0,ft.jsxs)("div",{children:[(0,ft.jsxs)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[a.amount," TND"]}),(0,ft.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:[a.payment_method," \u2022 ",a.payment_status]})]})})]}),a.notes&&(0,ft.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ft.jsx)(Ic,{className:"w-5 h-5 text-orange-500"}),(0,ft.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Notes"})]}),(0,ft.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:a.notes})]}),a.business_phone&&(0,ft.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4",children:[(0,ft.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Business Contact"}),(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ft.jsx)(Wc,{className:"w-4 h-4 text-blue-500"}),(0,ft.jsx)("a",{href:`tel:${a.business_phone}`,className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:a.business_phone})]})]}),(0,ft.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400 border-t pt-4",children:[(0,ft.jsxs)("p",{children:["Booking created: ",new Date(a.created_at).toLocaleString()]}),a.updated_at!==a.created_at&&(0,ft.jsxs)("p",{children:["Last updated: ",new Date(a.updated_at).toLocaleString()]})]})]}),(0,ft.jsx)("div",{className:"mt-6 flex justify-end",children:(0,ft.jsx)("button",{onClick:s,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Close"})})]})})}):null},Xm=()=>{const[e,n]=(0,t.useState)(new Date),[i,s]=(0,t.useState)(e.getMonth()),[r,a]=(0,t.useState)(e.getFullYear()),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(null),[m,p]=(0,t.useState)(null),[f,g]=(0,t.useState)([]),[x,y]=(0,t.useState)(!1),[b,v]=(0,t.useState)(null);(0,t.useEffect)(()=>{w()},[]),(0,t.useEffect)(()=>{s(e.getMonth()),a(e.getFullYear())},[e]);const w=async()=>{d(!0),h(null);try{var e;const t=await gh.get("/api/business/reservations"),n=(null===(e=t.data)||void 0===e?void 0:e.reservations)||t.data||[];l(Array.isArray(n)?n:[])}catch(t){console.error("Error fetching reservations:",t),h("Failed to load reservations. Please try again.")}finally{d(!1)}},_=(()=>{const e=new Date(r,i,1),t=new Date(r,i+1,0).getDate(),n=e.getDay();let s=[];for(let o=0;o<n;o++){const e=new Date(r,i,0-(n-o-1));s.push({date:e,day:e.getDate(),isCurrentMonth:!1,isPrevMonth:!0})}for(let l=1;l<=t;l++){const e=new Date(r,i,l),t=qm(e,"yyyy-MM-dd"),n=o.filter(e=>(e.booking_date||e.reservation_date||e.date)===t),a=n.filter(e=>"confirmed"===e.status||"confirmed"===e.payment_status);s.push({date:e,day:l,isCurrentMonth:!0,isToday:k(e),reservations:n,confirmedReservations:a,reservationCount:n.length,confirmedCount:a.length})}const a=42-s.length;for(let o=1;o<=a;o++){const e=new Date(r,i+1,o);s.push({date:e,day:e.getDate(),isCurrentMonth:!1,isNextMonth:!0})}return s})();function k(e){return!!e&&Gm(e)}const j=e=>{v(e),y(!0)},N=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return(0,ft.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[(0,ft.jsxs)("div",{className:"container mx-auto p-4 md:p-6",children:[(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6",children:[(0,ft.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[(0,ft.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-4 md:mb-0",children:"Business Calendar"}),(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ft.jsx)("button",{onClick:()=>{n(new Date)},className:"px-3 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200 rounded-md hover:bg-blue-200 dark:hover:bg-blue-800",children:"Today"}),(0,ft.jsxs)("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[(0,ft.jsx)("button",{onClick:()=>{const t=new Date(e);t.setMonth(e.getMonth()-1),n(t)},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",children:(0,ft.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,ft.jsxs)("span",{className:"px-2 font-medium",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][i]," ",r]}),(0,ft.jsx)("button",{onClick:()=>{const t=new Date(e);t.setMonth(e.getMonth()+1),n(t)},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",children:(0,ft.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]}),c?(0,ft.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,ft.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):u?(0,ft.jsx)("div",{className:"text-center text-red-500 p-4",children:u}):(0,ft.jsx)("div",{className:"overflow-x-auto",children:(0,ft.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[S.map((e,t)=>(0,ft.jsx)("div",{className:"hidden md:flex h-10 items-center justify-center font-medium text-gray-500 dark:text-gray-400",children:N[t]},e)),S.map(e=>(0,ft.jsx)("div",{className:"flex md:hidden h-10 items-center justify-center font-medium text-gray-500 dark:text-gray-400",children:e},e)),_.map((e,t)=>(0,ft.jsxs)("div",{onClick:()=>(e=>{e.isCurrentMonth&&(p(e.date),g(e.reservations||[]),setTimeout(()=>{var e;null===(e=document.getElementById("selected-date-reservations"))||void 0===e||e.scrollIntoView({behavior:"smooth"})},100))})(e),className:`\n                      h-32 md:h-36 p-2 border rounded-lg relative overflow-hidden cursor-pointer transition-all \n                      ${e.isCurrentMonth?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-gray-50 dark:bg-gray-900 border-gray-100 dark:border-gray-800 opacity-50"}\n                      ${e.isToday?"ring-2 ring-blue-500 dark:ring-blue-400":""}\n                      ${m&&e.date&&m.toDateString()===e.date.toDateString()?"ring-2 ring-purple-500 dark:ring-purple-400":""}\n                      hover:shadow-md\n                    `,children:[(0,ft.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ft.jsx)("span",{className:`\n                          text-sm font-medium inline-flex items-center justify-center h-6 w-6 rounded-full\n                          ${e.isToday?"bg-blue-500 text-white":"text-gray-800 dark:text-gray-200"}\n                        `,children:e.day}),e.reservationCount>0&&e.isCurrentMonth&&(0,ft.jsx)("span",{className:"text-xs bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-1.5 py-0.5 rounded-full",children:e.reservationCount})]}),e.isCurrentMonth&&e.confirmedCount>0&&(0,ft.jsx)("div",{className:"absolute top-9 left-0 right-0 flex justify-center",children:(0,ft.jsx)("span",{className:"h-1 w-1 bg-green-500 rounded-full mx-0.5"})}),e.isCurrentMonth&&e.reservations&&e.reservations.length>0&&(0,ft.jsxs)("div",{className:"mt-2 space-y-1 overflow-y-auto max-h-[80px]",children:[e.reservations.slice(0,3).map(e=>{var t;return(0,ft.jsxs)("div",{onClick:t=>{t.stopPropagation(),j(e.id)},className:`\n                              text-xs p-1 rounded truncate cursor-pointer\n                              ${"confirmed"===e.status||"confirmed"===e.payment_status?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"cancelled"===e.status||"cancelled"===e.payment_status?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200"}\n                            `,children:[(e.time||"").slice(0,5)," - ",e.customer_name||(null===(t=e.users)||void 0===t?void 0:t.full_name)||"Guest"]},e.id)}),e.reservations.length>3&&(0,ft.jsxs)("div",{className:"text-xs text-center text-gray-500 dark:text-gray-400",children:["+",e.reservations.length-3," more"]})]})]},t))]})})]}),m&&(0,ft.jsxs)("div",{id:"selected-date-reservations",className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6",children:[(0,ft.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ft.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:["Reservations for ",qm(m,"MMMM d, yyyy")]}),(0,ft.jsx)("button",{onClick:()=>p(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,ft.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),0===f.length?(0,ft.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No reservations for this date."}):(0,ft.jsx)("div",{className:"space-y-4",children:f.map(e=>{var t;return(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`\n                      bg-white dark:bg-gray-700 border rounded-lg shadow p-4\n                      ${"confirmed"===e.status||"confirmed"===e.payment_status?"border-green-200 dark:border-green-800":"cancelled"===e.status||"cancelled"===e.payment_status?"border-red-200 dark:border-red-800":"border-yellow-200 dark:border-yellow-800"}\n                    `,children:[(0,ft.jsxs)("div",{className:"flex flex-col md:flex-row justify-between",children:[(0,ft.jsxs)("div",{className:"flex items-center mb-3 md:mb-0",children:[(0,ft.jsx)("div",{className:`\n                          h-10 w-10 rounded-full flex items-center justify-center mr-3\n                          ${"confirmed"===e.status||"confirmed"===e.payment_status?"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-300":"cancelled"===e.status||"cancelled"===e.payment_status?"bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-300":"bg-yellow-100 dark:bg-yellow-900 text-yellow-600 dark:text-yellow-300"}\n                        `,children:(0,ft.jsx)("span",{className:"text-lg",children:"confirmed"===e.status||"confirmed"===e.payment_status?"\u2713":"cancelled"===e.status||"cancelled"===e.payment_status?"\u2717":"\u231b"})}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.customer_name||(null===(t=e.users)||void 0===t?void 0:t.full_name)||"Guest"}),(0,ft.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.time?qm(new Date(`2000-01-01T${e.time}`),"h:mm a"):"No time specified"})]})]}),(0,ft.jsx)("div",{className:"flex space-x-2",children:(0,ft.jsx)("button",{onClick:()=>j(e.id),className:"px-3 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200 rounded hover:bg-blue-200 dark:hover:bg-blue-800",children:"View Details"})})]}),(0,ft.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phone"}),(0,ft.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.customer_phone||"Not provided"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),(0,ft.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.customer_email||"Not provided"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),(0,ft.jsx)("div",{className:"font-medium",children:(0,ft.jsx)("span",{className:`\n                            inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium\n                            ${"confirmed"===e.status||"confirmed"===e.payment_status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"cancelled"===e.status||"cancelled"===e.payment_status?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}\n                          `,children:e.status||e.payment_status||"Unknown"})})]})]}),e.notes&&(0,ft.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[(0,ft.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Notes"}),(0,ft.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300 italic",children:['"',e.notes,'"']})]})]},e.id)})})]})]}),(0,ft.jsx)(Jm,{isOpen:x,onClose:()=>y(!1),bookingId:b})]})},Qm="http://localhost:5000",ep=async(e,t,n)=>{const i=await fetch(`${Qm}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t,full_name:n})}),s=await i.json();if(!i.ok)throw new Error(s.error||"Registration failed");return s},tp=async(e,t)=>{const n=await fetch(`${Qm}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})}),i=await n.json();if(!n.ok)throw new Error(i.error||"Login failed");return i},np=async()=>{const e=await fetch(`${Qm}/auth/logout`,{method:"POST",credentials:"include"}),t=await e.json();if(!e.ok)throw new Error(t.error||"Logout failed");return t},ip=async()=>{const e=await fetch(`${Qm}/auth/me`,{method:"GET",credentials:"include"}),t=await e.json();if(!e.ok)throw new Error(t.message||"Failed to get user profile");return t},sp=async e=>{console.log("Updating profile with data:",e);try{const t=await fetch(`${Qm}/auth/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});console.log("Update profile response status:",t.status);const n=await t.json();if(console.log("Update profile response data:",n),!t.ok)throw console.error("Error updating profile:",n.error||"Failed to update profile"),new Error(n.error||"Failed to update profile");return n}catch(t){throw console.error("Exception in updateProfile API call:",t),t}},rp=async e=>{const t=new FormData;t.append("profile_picture",e);const n=await fetch(`${Qm}/auth/profile-picture`,{method:"POST",credentials:"include",body:t}),i=await n.json();if(!n.ok)throw new Error(i.error||"Failed to upload profile picture");return i},ap=e=>{var n;let{isOpen:i,onClose:s,business:r,onDeleted:a}=e;const[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),[u,h]=(0,t.useState)(""),m="DELETE MY BUSINESS",p=c===m;return i?(0,ft.jsx)(At,{children:(0,ft.jsx)(gc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:s,children:(0,ft.jsxs)(gc.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ft.jsx)("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:(0,ft.jsx)("span",{className:"text-red-600 dark:text-red-400 text-xl",children:"\u26a0\ufe0f"})}),(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Delete Business"})]}),(0,ft.jsx)("button",{onClick:s,disabled:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50",children:"\u2715"})]}),(0,ft.jsxs)("div",{className:"mb-6",children:[(0,ft.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:[(0,ft.jsx)("p",{className:"text-red-800 dark:text-red-200 text-sm font-medium mb-2",children:"\u26a0\ufe0f This action cannot be undone!"}),(0,ft.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:"Deleting your business will permanently remove:"}),(0,ft.jsxs)("ul",{className:"text-red-700 dark:text-red-300 text-sm mt-2 ml-4 list-disc space-y-1",children:[(0,ft.jsx)("li",{children:"All business information and settings"}),(0,ft.jsx)("li",{children:"All reservations and booking history"}),(0,ft.jsx)("li",{children:"All uploaded photos"}),(0,ft.jsx)("li",{children:"All customer data and reviews"})]})]}),(0,ft.jsxs)("div",{className:"mb-4",children:[(0,ft.jsx)("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Business to be deleted:"}),(0,ft.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3",children:[(0,ft.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:null===r||void 0===r?void 0:r.name}),(0,ft.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[null===r||void 0===r||null===(n=r.type)||void 0===n?void 0:n.replace("_"," ")," \u2022 ",null===r||void 0===r?void 0:r.location]})]})]}),(0,ft.jsxs)("div",{className:"mb-4",children:[(0,ft.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:['Type "',m,'" to confirm deletion:']}),(0,ft.jsx)("input",{type:"text",value:c,onChange:e=>{d(e.target.value),h("")},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white",placeholder:m,disabled:o})]}),u&&(0,ft.jsx)("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg",children:(0,ft.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm",children:u})})]}),(0,ft.jsxs)("div",{className:"flex space-x-3",children:[(0,ft.jsx)("button",{onClick:s,disabled:o,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),(0,ft.jsx)("button",{onClick:async()=>{if(c===m){l(!0),h("");try{await gh.delete("/api/business/delete"),a&&a(),s()}catch(n){var e,t;console.error("Error deleting business:",n),h((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to delete business. Please try again.")}finally{l(!1)}}else h("Please type the confirmation text exactly as shown")},disabled:!p||o,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:o?(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Business"})]})]})})}):null},op=e=>{var n;let{user:i,onProfileUpdate:s,business:r}=e;const[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[h,m]=(0,t.useState)({full_name:(null===i||void 0===i?void 0:i.full_name)||""}),[p,f]=(0,t.useState)((null===i||void 0===i?void 0:i.profile_picture_url)||null),[g,x]=(0,t.useState)(!1),y=(0,t.useRef)(null),b=ne();(0,t.useEffect)(()=>{i&&(m({full_name:i.full_name||""}),f(i.profile_picture_url||null))},[i]);const v=null!==i&&void 0!==i&&i.created_at?new Date(i.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";return(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full max-w-4xl mx-auto",children:[(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden",children:[(0,ft.jsx)("div",{className:"p-6 sm:p-8",children:(0,ft.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ft.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Profile Information"}),!a&&(0,ft.jsxs)("button",{onClick:()=>o(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium",children:[(0,ft.jsx)(Dc,{className:"mr-2"}),"Edit Profile"]})]})}),(0,ft.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 sm:p-8",children:[d&&(0,ft.jsx)("div",{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-md",children:d}),(0,ft.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),u(null);try{if(!h.full_name||""===h.full_name.trim())throw new Error("Full name is required");await sp({full_name:h.full_name.trim()}),y.current&&y.current.files[0]&&await rp(y.current.files[0]),o(!1),s&&s()}catch(t){console.error("Error updating profile:",t),u(t.message||"Failed to update profile. Please try again.")}finally{c(!1)}},className:"grid md:grid-cols-3 gap-8",children:[(0,ft.jsxs)("div",{className:"md:col-span-1 flex flex-col items-center",children:[(0,ft.jsxs)("div",{className:"relative w-40 h-40 mb-4 rounded-full overflow-hidden border-4 border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 group",onClick:a?()=>{y.current.click()}:void 0,style:{cursor:a?"pointer":"default"},children:[p?(0,ft.jsx)("img",{src:p,alt:"Profile",className:"w-full h-full object-cover"}):(0,ft.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-6xl",children:(0,ft.jsx)(Kc,{})}),a&&(0,ft.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,ft.jsx)(Lc,{className:"text-white text-3xl"})})]}),a&&(0,ft.jsx)("input",{type:"file",ref:y,onChange:e=>{const t=e.target.files[0];if(!t)return;if(!t.type.match("image.*"))return void u("Please select an image file");if(t.size>2097152)return void u("Image size should not exceed 2MB");u(null);const n=new FileReader;n.onloadend=()=>{f(n.result)},n.readAsDataURL(t)},accept:"image/*",className:"hidden"}),(0,ft.jsx)("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mt-2",children:(null===i||void 0===i?void 0:i.full_name)||"User"}),(0,ft.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:null===i||void 0===i?void 0:i.email})]}),(0,ft.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,ft.jsx)(Kc,{className:"mr-2"})," Full Name"]}),a?(0,ft.jsx)("input",{type:"text",name:"full_name",value:h.full_name,onChange:e=>{const{name:t,value:n}=e.target;m({...h,[t]:n})},className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0}):(0,ft.jsx)("p",{className:"py-3 px-4 bg-gray-100 dark:bg-gray-700 rounded-md text-gray-800 dark:text-gray-200",children:(null===i||void 0===i?void 0:i.full_name)||"Not provided"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,ft.jsx)(Uc,{className:"mr-2"})," Email Address"]}),(0,ft.jsx)("p",{className:"py-3 px-4 bg-gray-100 dark:bg-gray-700 rounded-md text-gray-800 dark:text-gray-200",children:null===i||void 0===i?void 0:i.email})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,ft.jsx)(Mc,{className:"mr-2"})," Member Since"]}),(0,ft.jsx)("p",{className:"py-3 px-4 bg-gray-100 dark:bg-gray-700 rounded-md text-gray-800 dark:text-gray-200",children:v})]}),a&&(0,ft.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,ft.jsxs)("button",{type:"button",onClick:()=>{m({full_name:(null===i||void 0===i?void 0:i.full_name)||""}),f((null===i||void 0===i?void 0:i.profile_picture_url)||null),o(!1),u(null)},className:"flex items-center px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-medium",disabled:l,children:[(0,ft.jsx)(Jc,{className:"mr-2"}),"Cancel"]}),(0,ft.jsxs)("button",{type:"submit",className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors font-medium",disabled:l,children:[(0,ft.jsx)(Vc,{className:"mr-2"}),l?"Saving...":"Save Changes"]})]})]})]})]})]}),r&&(0,ft.jsx)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-red-50/90 dark:bg-red-900/20 rounded-lg shadow-xl border-2 border-red-200/50 dark:border-red-800/50 overflow-hidden mt-6",children:(0,ft.jsxs)("div",{className:"p-6 sm:p-8",children:[(0,ft.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,ft.jsxs)("div",{children:[(0,ft.jsxs)("h3",{className:"text-2xl font-bold text-red-800 dark:text-red-200 flex items-center gap-3",children:[(0,ft.jsx)("span",{className:"text-3xl",children:"\u26a0\ufe0f"}),"Business Management"]}),(0,ft.jsx)("p",{className:"text-red-700 dark:text-red-300 mt-1 text-sm",children:"Manage or delete your business from here"})]})}),(0,ft.jsx)("div",{className:"bg-white dark:bg-red-900/30 rounded-xl p-6 border border-red-200 dark:border-red-800 mb-6",children:(0,ft.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ft.jsxs)("div",{className:"flex-1",children:[(0,ft.jsx)("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Your Business"}),(0,ft.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,ft.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:[(0,ft.jsx)("span",{className:"font-medium",children:"Name:"})," ",r.name]}),(0,ft.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:[(0,ft.jsx)("span",{className:"font-medium",children:"Type:"})," ",null===(n=r.type)||void 0===n?void 0:n.replace("_"," ")]}),(0,ft.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:[(0,ft.jsx)("span",{className:"font-medium",children:"Location:"})," ",r.location]})]})]}),(0,ft.jsx)("button",{onClick:()=>b("/my-business"),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Manage Business"})]})}),(0,ft.jsx)("div",{className:"bg-white dark:bg-red-900/30 rounded-xl p-6 border border-red-300 dark:border-red-800",children:(0,ft.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ft.jsxs)("div",{className:"flex-1",children:[(0,ft.jsx)("h4",{className:"text-lg font-semibold text-red-800 dark:text-red-200 mb-2",children:"Delete Business"}),(0,ft.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm mb-4",children:"Permanently delete your business and all associated data including reservations, photos, and customer information. This action cannot be undone."}),(0,ft.jsxs)("ul",{className:"text-red-600 dark:text-red-400 text-xs space-y-1 ml-4 list-disc",children:[(0,ft.jsx)("li",{children:"All business information will be permanently deleted"}),(0,ft.jsx)("li",{children:"All reservations and booking history will be lost"}),(0,ft.jsx)("li",{children:"All uploaded photos will be removed"}),(0,ft.jsx)("li",{children:"Customer data and reviews will be deleted"})]})]}),(0,ft.jsx)("div",{className:"ml-6 flex-shrink-0",children:(0,ft.jsxs)(gc.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>x(!0),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-300 flex items-center gap-2 border-2 border-red-700",children:[(0,ft.jsx)("span",{children:"\ud83d\uddd1\ufe0f"}),"Delete Business"]})})]})})]})}),(0,ft.jsx)(ap,{isOpen:g,onClose:()=>x(!1),business:r,onDeleted:()=>{x(!1),s&&s(),b("/")}})]})},lp=e=>{var t,n,i,s,r,a,o,l,c;let{isOpen:d,onClose:u,booking:h,onReschedule:m}=e;const p=e=>{switch(e){case"confirmed":return{color:"bg-green-100 text-green-800 border-green-200",icon:"\u2705",bgColor:"bg-green-50"};case"pending":return{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:"\u23f3",bgColor:"bg-yellow-50"};case"cancelled":return{color:"bg-red-100 text-red-800 border-red-200",icon:"\u274c",bgColor:"bg-red-50"};case"completed":return{color:"bg-blue-100 text-blue-800 border-blue-200",icon:"\ud83c\udf89",bgColor:"bg-blue-50"};default:return{color:"bg-gray-100 text-gray-800 border-gray-200",icon:"\ud83d\udcc5",bgColor:"bg-gray-50"}}};return d?h?(0,ft.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,ft.jsx)(gc.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,ft.jsxs)("div",{className:"p-6",children:[(0,ft.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,ft.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Booking Details"}),(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[("confirmed"===h.status||"pending"===h.status)&&m&&(0,ft.jsxs)("button",{onClick:()=>{m(h),u()},className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[(0,ft.jsx)(Dc,{className:"w-4 h-4 mr-1"}),"Reschedule"]}),(0,ft.jsx)("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:(0,ft.jsx)(Xc,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"})})]})]}),(0,ft.jsxs)("div",{className:"space-y-6",children:[(0,ft.jsxs)("div",{className:`${p(h.status).bgColor} rounded-xl p-6`,children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ft.jsx)("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center text-2xl shadow-sm",children:(e=>{const t={barbershop:"\u2702\ufe0f",beauty_salon:"\ud83d\udc84",restaurant:"\ud83c\udf7d\ufe0f",cafe:"\u2615",football_field:"\u26bd",tennis_court:"\ud83c\udfbe",gym:"\ud83c\udfcb\ufe0f",car_wash:"\ud83d\ude97",spa:"\ud83e\uddd8",dentist:"\ud83e\uddb7",doctor:"\ud83d\udc69\u200d\u2695\ufe0f",other:"\ud83c\udfe2"};return t[e]||t.other})(h.business_type)}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:h.business_name||(null===(t=h.businesses)||void 0===t?void 0:t.name)}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400 capitalize",children:null===(n=h.business_type||(null===(i=h.businesses)||void 0===i?void 0:i.type))||void 0===n?void 0:n.replace("_"," ")})]})]}),(0,ft.jsxs)("div",{className:`flex items-center space-x-2 px-3 py-2 rounded-lg ${p(h.status).color} border`,children:[(0,ft.jsx)("span",{children:p(h.status).icon}),(0,ft.jsx)("span",{className:"font-medium capitalize",children:h.status})]})]}),(h.business_location||(null===(s=h.businesses)||void 0===s?void 0:s.location))&&(0,ft.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400",children:[(0,ft.jsx)($c,{className:"w-4 h-4"}),(0,ft.jsx)("span",{className:"text-sm",children:h.business_location||(null===(r=h.businesses)||void 0===r?void 0:r.location)})]})]}),(0,ft.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ft.jsx)(Mc,{className:"w-5 h-5 text-blue-500"}),(0,ft.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Date & Time"})]}),(0,ft.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:new Date(h.booking_date||h.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,ft.jsx)(Oc,{className:"w-4 h-4 text-purple-500"}),(0,ft.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:[null===(a=h.booking_time||h.time)||void 0===a?void 0:a.substring(0,5)," "]})]})]}),(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ft.jsx)(Kc,{className:"w-5 h-5 text-green-500"}),(0,ft.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Booking Info"})]}),(0,ft.jsxs)("div",{className:"space-y-2",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Booking ID:"}),(0,ft.jsxs)("span",{className:"text-sm font-mono text-gray-900 dark:text-white",children:[h.id.substring(0,8),"..."]})]}),h.customer_name&&(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ft.jsx)(Kc,{className:"w-4 h-4 text-blue-500"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:h.customer_name})]}),h.customer_phone&&(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ft.jsx)(Wc,{className:"w-4 h-4 text-blue-500"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:h.customer_phone})]}),h.customer_email&&(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ft.jsx)(Uc,{className:"w-4 h-4 text-purple-500"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:h.customer_email})]})]})]})]}),(0,ft.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ft.jsx)(Rc,{className:"w-5 h-5 text-blue-500"}),(0,ft.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Payment Information"})]}),(0,ft.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status"}),(0,ft.jsxs)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+("paid"===h.payment_status?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"pending"===h.payment_status?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"),children:["paid"===h.payment_status?"\ud83d\udcb0":"pending"===h.payment_status?"\u23f3":"\u274c",(0,ft.jsx)("span",{className:"ml-1 capitalize",children:h.payment_status})]})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Method"}),(0,ft.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:h.payment_method||"Cash"})]})]}),h.amount&&h.amount>0&&(0,ft.jsx)("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-700",children:(0,ft.jsxs)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[h.amount," TND"]})})]}),(0,ft.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ft.jsx)(Wc,{className:"w-5 h-5 text-purple-500"}),(0,ft.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Business Contact"})]}),(0,ft.jsxs)("div",{className:"space-y-2",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Business Name:"}),(0,ft.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:h.business_name||(null===(o=h.businesses)||void 0===o?void 0:o.name)})]}),(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type:"}),(0,ft.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:null===(l=h.business_type||(null===(c=h.businesses)||void 0===c?void 0:c.type))||void 0===l?void 0:l.replace("_"," ")})]}),h.business_phone&&(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Phone:"}),(0,ft.jsx)("a",{href:`tel:${h.business_phone}`,className:"text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline",children:h.business_phone})]}),h.business_email&&(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email:"}),(0,ft.jsx)("a",{href:`mailto:${h.business_email}`,className:"text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline",children:h.business_email})]})]})]}),h.notes&&(0,ft.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ft.jsx)(Ic,{className:"w-5 h-5 text-orange-500"}),(0,ft.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Notes"})]}),(0,ft.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:h.notes})]}),(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ft.jsx)(Oc,{className:"w-5 h-5 text-gray-500"}),(0,ft.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Booking Timeline"})]}),(0,ft.jsxs)("div",{className:"space-y-2",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created:"}),(0,ft.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(h.created_at).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),h.updated_at&&h.updated_at!==h.created_at&&(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Updated:"}),(0,ft.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(h.updated_at).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]}),(0,ft.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,ft.jsx)("div",{className:"flex space-x-3",children:("confirmed"===h.status||"pending"===h.status)&&m&&(0,ft.jsxs)("button",{onClick:()=>{m(h)},className:"flex items-center px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors font-medium",children:[(0,ft.jsx)(Dc,{className:"w-4 h-4 mr-2"}),"Reschedule Booking"]})}),(0,ft.jsx)("button",{onClick:u,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Close"})]})]})})}):(0,ft.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,ft.jsx)(gc.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full p-6",children:(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Error"}),(0,ft.jsx)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:"No booking data available"}),(0,ft.jsx)("button",{onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Close"})]})})}):null},cp=e=>{let{isOpen:n,onClose:i,booking:s,onBookingUpdated:r}=e;const[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)([]),[h,m]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),[g,x]=(0,t.useState)(null);(0,t.useEffect)(()=>{n&&(o(""),c(""),u([]),x(null))},[n]);(0,t.useEffect)(()=>{a&&s&&y()},[a,s]);const y=async()=>{f(!0),c("");try{const e=await fh(s.business_id,a);console.log("Availability response:",e),u(e.slots||e.availableSlots||[]),x(null)}catch(e){console.error("Error fetching availability:",e),x("Failed to load available time slots"),u([])}finally{f(!1)}},b=()=>{o(""),c(""),u([]),x(null)},v=()=>{b(),i()};if(!n||!s)return null;const w=a&&l;return(0,ft.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,ft.jsx)(gc.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,ft.jsxs)("div",{className:"p-6",children:[(0,ft.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ft.jsx)("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:(0,ft.jsx)(Mc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,ft.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Reschedule Booking"})]}),(0,ft.jsx)("button",{onClick:v,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:(0,ft.jsx)(Xc,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[(0,ft.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Current Booking"}),(0,ft.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:s.business_name}),(0,ft.jsxs)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[new Date(s.booking_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," at ",s.booking_time]})]}),g&&(0,ft.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4",children:g}),(0,ft.jsxs)("div",{className:"mb-6",children:[(0,ft.jsxs)("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,ft.jsx)(Mc,{className:"w-4 h-4"}),(0,ft.jsx)("span",{children:"Select New Date"})]}),(0,ft.jsx)("input",{type:"date",value:a,onChange:e=>o(e.target.value),min:(()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]})(),max:(()=>{const e=new Date;return e.setMonth(e.getMonth()+3),e.toISOString().split("T")[0]})(),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,ft.jsxs)("div",{className:"mb-6",children:[(0,ft.jsxs)("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,ft.jsx)(Oc,{className:"w-4 h-4"}),(0,ft.jsx)("span",{children:"Select New Time"})]}),a&&(0,ft.jsx)("div",{children:p?(0,ft.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,ft.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-500"}),(0,ft.jsx)("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"Loading available times..."})]}):d.length>0?(0,ft.jsx)("div",{className:"grid grid-cols-3 gap-2 max-h-48 overflow-y-auto",children:d.map(e=>(0,ft.jsx)("button",{onClick:()=>c(e.time),className:"p-2 text-sm rounded-lg border transition-colors "+(l===e.time?"bg-blue-500 text-white border-blue-500":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600 hover:bg-blue-50 dark:hover:bg-blue-900/20"),children:e.time},e.time))}):(0,ft.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No available time slots for this date"})}),!a&&(0,ft.jsx)("div",{className:"text-center py-4 text-gray-400 dark:text-gray-500 text-sm",children:"Please select a date first"})]}),(0,ft.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:(0,ft.jsxs)("p",{className:"text-blue-800 dark:text-blue-200 text-sm",children:[(0,ft.jsx)("strong",{children:"Note:"})," You can reschedule your booking up to 24 hours before the original appointment time."]})}),(0,ft.jsxs)("div",{className:"flex space-x-3",children:[(0,ft.jsx)("button",{onClick:v,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",disabled:h,children:"Cancel"}),(0,ft.jsx)("button",{onClick:async()=>{if(s&&a&&l){m(!0),x(null);try{const e=await(async(e,t,n)=>{try{return(await ph.put(`/api/user/bookings/${e}`,{action:"reschedule",date:t,time:n})).data}catch(g){throw console.error("Error rescheduling booking:",g),g}})(s.id,a,l);r(e.booking),i(),b()}catch(e){x(e.message||"Failed to reschedule booking")}finally{m(!1)}}},className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors "+(w?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),disabled:h||!w,children:h?"Rescheduling...":"Reschedule"})]})]})})})},dp=e=>{let{isOpen:n,onClose:i,booking:s,onBookingUpdated:r}=e;const[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),h=()=>{o(""),u(null),i()};return n&&s?(0,ft.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,ft.jsx)(gc.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full",children:(0,ft.jsxs)("div",{className:"p-6",children:[(0,ft.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ft.jsx)("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:(0,ft.jsx)(Tc,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),(0,ft.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Cancel Booking"})]}),(0,ft.jsx)("button",{onClick:h,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:(0,ft.jsx)(Xc,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[(0,ft.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:s.business_name}),(0,ft.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[new Date(s.booking_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," at ",s.booking_time]})]}),d&&(0,ft.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4",children:d}),(0,ft.jsx)("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-6",children:(0,ft.jsxs)("p",{className:"text-amber-800 dark:text-amber-200 text-sm",children:[(0,ft.jsx)("strong",{children:"Warning:"})," This action cannot be undone. Please contact the business if you need to reschedule instead of canceling."]})}),(0,ft.jsxs)("div",{className:"mb-6",children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reason for cancellation (optional)"}),(0,ft.jsx)("textarea",{value:a,onChange:e=>o(e.target.value),placeholder:"Please provide a reason for canceling...",rows:3,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]}),(0,ft.jsxs)("div",{className:"flex space-x-3",children:[(0,ft.jsx)("button",{onClick:h,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",disabled:l,children:"Keep Booking"}),(0,ft.jsx)("button",{onClick:async()=>{if(s){c(!0),u(null);try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return(await ph.put(`/api/user/bookings/${e}`,{action:"cancel",reason:t})).data}catch(d){throw console.error("Error canceling booking:",d),d}}(s.id,a);r(e.booking),i(),o("")}catch(e){u(e.message||"Failed to cancel booking")}finally{c(!1)}}},className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",disabled:l,children:l?"Canceling...":"Cancel Booking"})]})]})})}):null},up=(0,t.createContext)(),hp=()=>{const e=(0,t.useContext)(up);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},mp=e=>{let{children:n}=e;const[i,s]=(0,t.useState)(()=>localStorage.getItem("theme")||"light");(0,t.useEffect)(()=>{"dark"===i?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",i)},[i]);return(0,ft.jsx)(up.Provider,{value:{theme:i,toggleTheme:()=>{s(e=>"light"===e?"dark":"light")},isDark:"dark"===i},children:n})},pp=e=>{var n,i;let{user:s,userBusiness:r,userBookings:a,businessReservations:o,activeSection:l,onSectionChange:c,onLogout:d}=e;const[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1),f=ne(),g=[{id:"discover",label:"Discover",icon:"\ud83d\udd0d",description:"Find businesses"},{id:"messages",label:"Messages",icon:"\ud83d\udcac",description:"Chat with businesses"},{id:"bookings",label:"My Bookings",icon:"\ud83d\udcc5",description:"Your reservations",badge:(null===a||void 0===a?void 0:a.length)||0},...r?[{id:"business",label:"My Business",icon:"\ud83c\udfe2",description:"Manage your business",badge:(null===o||void 0===o?void 0:o.length)||0,badgeColor:"green"},{id:"business-calendar",label:"Business Calendar",icon:"\ud83d\udcc6",description:"View bookings calendar"}]:[],{id:"profile",label:"Profile",icon:"\ud83d\udc64",description:"Account settings"}],x={expanded:{opacity:1,x:0},collapsed:{opacity:0,x:-10}},y=e=>{let{item:t}=e;return(0,ft.jsxs)(gc.button,{onClick:()=>{var e;t.route?(f(t.route),p(!1)):t.path?(f(t.path),p(!1)):(e=t.id,c(e),p(!1))},className:"w-full flex items-center px-4 py-3 rounded-lg transition-all duration-200 group relative "+(l===t.id?"bg-blue-500 text-white shadow-lg":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,ft.jsx)("span",{className:"text-xl flex-shrink-0",children:t.icon}),(0,ft.jsx)(At,{children:!u&&(0,ft.jsxs)(gc.div,{className:"ml-3 flex-1 text-left",variants:x,initial:"collapsed",animate:"expanded",exit:"collapsed",children:[(0,ft.jsx)("div",{className:"font-medium text-sm",children:t.label}),(0,ft.jsx)("div",{className:"text-xs "+(l===t.id?"text-blue-100":"text-gray-500 dark:text-gray-400"),children:t.description})]})}),t.badge>0&&(0,ft.jsx)(gc.span,{className:`${"green"===t.badgeColor?"bg-green-500 dark:bg-green-400":"bg-red-500 dark:bg-red-400"} text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium ${u?"absolute -top-1 -right-1":""}`,animate:{scale:[1,1.2,1]},transition:{duration:.3},children:t.badge})]})};return(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)(At,{children:m&&(0,ft.jsx)(gc.div,{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>p(!1)})}),(0,ft.jsx)("button",{className:"lg:hidden fixed top-4 left-4 z-50 bg-white dark:bg-gray-800 p-2 rounded-lg shadow-lg border dark:border-gray-700",onClick:()=>p(!m),children:(0,ft.jsx)(gc.div,{animate:{rotate:m?90:0},transition:{duration:.2},children:(0,ft.jsx)("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),(0,ft.jsxs)(gc.aside,{className:`fixed left-0 top-0 h-full bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 shadow-lg z-40 flex flex-col ${m?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform lg:transition-none`,variants:{expanded:{width:"280px"},collapsed:{width:"80px"}},animate:u?"collapsed":"expanded",transition:{duration:.3,ease:"easeInOut"},children:[(0,ft.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,ft.jsx)(At,{children:!u&&(0,ft.jsxs)(gc.div,{className:"flex items-center space-x-2",variants:x,initial:"collapsed",animate:"expanded",exit:"collapsed",children:[(0,ft.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,ft.jsx)("span",{className:"text-white font-bold text-sm",children:"R"})}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Rezervi"}),(0,ft.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Smart Booking"})]})]})}),(0,ft.jsx)("button",{onClick:()=>h(!u),className:"hidden lg:flex p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,ft.jsx)(gc.svg,{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:u?180:0},transition:{duration:.3},children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]}),(0,ft.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,ft.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ft.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center text-white font-medium",children:(null===s||void 0===s||null===(n=s.email)||void 0===n?void 0:n.charAt(0).toUpperCase())||"U"}),(0,ft.jsx)(At,{children:!u&&(0,ft.jsxs)(gc.div,{className:"flex-1 min-w-0",variants:x,initial:"collapsed",animate:"expanded",exit:"collapsed",children:[(0,ft.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:(null===s||void 0===s||null===(i=s.email)||void 0===i?void 0:i.split("@")[0])||"User"}),(0,ft.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:(null===s||void 0===s?void 0:s.email)||"user@example.com"})]})})]})}),(0,ft.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:g.map(e=>(0,ft.jsx)(y,{item:e},e.id))}),(0,ft.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[(0,ft.jsx)(At,{children:!u&&!r&&(0,ft.jsx)(gc.div,{variants:x,initial:"collapsed",animate:"expanded",exit:"collapsed",children:(0,ft.jsxs)(at,{to:"/register-business",className:"w-full flex items-center justify-center px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ud83c\udfea"}),(0,ft.jsx)("span",{className:"font-medium",children:"List Your Business"})]})})}),(0,ft.jsxs)("button",{onClick:()=>f("/subscription"),className:`w-full flex items-center ${u?"justify-center":""} px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg`,children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udc8e"}),(0,ft.jsx)(At,{children:!u&&(0,ft.jsx)(gc.span,{className:"ml-2 font-medium",variants:x,initial:"collapsed",animate:"expanded",exit:"collapsed",children:"Subscription"})})]}),(0,ft.jsxs)("button",{onClick:d,className:`w-full flex items-center ${u?"justify-center":""} px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600 dark:hover:text-red-400 rounded-lg transition-all duration-200`,children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udeaa"}),(0,ft.jsx)(At,{children:!u&&(0,ft.jsx)(gc.span,{className:"ml-2 font-medium",variants:x,initial:"collapsed",animate:"expanded",exit:"collapsed",children:"Logout"})})]})]})]})]})};function fp(){return vh().map}delete _h().Icon.Default.prototype._getIconUrl,_h().Icon.Default.mergeOptions({iconRetinaUrl:n(249),iconUrl:n(24),shadowUrl:n(71)});const gp=e=>{let{position:n,setPosition:i,onLocationSelect:s}=e;!function(e){const n=fp();(0,t.useEffect)(function(){return n.on(e),function(){n.off(e)}},[n,e])}({click(e){const t=[e.latlng.lat,e.latlng.lng];i(t),r(e.latlng.lat,e.latlng.lng,s)}});const r=async(e,t,n)=>{try{const i=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=18&addressdetails=1`);n({lat:e,lng:t,address:(await i.json()).display_name||`${e.toFixed(6)}, ${t.toFixed(6)}`})}catch(i){console.error("Reverse geocoding failed:",i),n({lat:e,lng:t,address:`${e.toFixed(6)}, ${t.toFixed(6)}`})}};return null===n?null:(0,ft.jsx)(Oh,{position:n,children:(0,ft.jsx)(Rh,{children:(0,ft.jsxs)("div",{children:[(0,ft.jsx)("strong",{children:"Selected Location"}),(0,ft.jsx)("br",{}),"Lat: ",n[0].toFixed(6),(0,ft.jsx)("br",{}),"Lng: ",n[1].toFixed(6)]})})})},xp=e=>{let{onLocationSelect:n,initialLocation:i=null}=e;const[s,r]=(0,t.useState)(i?[i.lat,i.lng]:null),[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(!1),h=(0,t.useRef)(),m=s||(i?[i.lat,i.lng]:[36.8065,10.1815]);(0,t.useEffect)(()=>{const e=setTimeout(()=>{a.length>2?(async e=>{if(e.trim()){u(!0);try{const t=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&limit=5&countrycodes=tn`),n=await t.json();c(n)}catch(t){console.error("Search failed:",t),c([])}finally{u(!1)}}else c([])})(a):c([])},500);return()=>clearTimeout(e)},[a]);return(0,ft.jsxs)("div",{className:"w-full",children:[(0,ft.jsxs)("div",{className:"mb-4 relative",children:[(0,ft.jsx)("input",{type:"text",placeholder:"Search for a location in Tunisia...",value:a,onChange:e=>o(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),l.length>0&&(0,ft.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:l.map((e,t)=>(0,ft.jsxs)("div",{onClick:()=>(e=>{const t=parseFloat(e.lat),i=parseFloat(e.lon),s=[t,i];r(s),c([]),o(e.display_name),h.current&&h.current.setView(s,15),n({lat:t,lng:i,address:e.display_name})})(e),className:"p-3 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0",children:[(0,ft.jsx)("div",{className:"font-medium text-sm text-gray-900",children:e.display_name}),(0,ft.jsxs)("div",{className:"text-xs text-gray-500",children:[e.type," \u2022 ",parseFloat(e.lat).toFixed(4),", ",parseFloat(e.lon).toFixed(4)]})]},t))}),d&&(0,ft.jsx)("div",{className:"absolute right-3 top-3",children:(0,ft.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})})]}),(0,ft.jsx)("div",{className:"w-full h-96 rounded-lg border border-gray-300 overflow-hidden",children:(0,ft.jsxs)(jh,{center:m,zoom:13,style:{height:"100%",width:"100%"},ref:h,children:[(0,ft.jsx)(Lh,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,ft.jsx)(gp,{position:s,setPosition:r,onLocationSelect:e=>{r([e.lat,e.lng]),n(e)}})]})}),s&&(0,ft.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,ft.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,ft.jsx)("strong",{children:"Selected Location:"}),(0,ft.jsx)("br",{}),"Latitude: ",s[0].toFixed(6),(0,ft.jsx)("br",{}),"Longitude: ",s[1].toFixed(6)]})}),(0,ft.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:(0,ft.jsx)("p",{children:"\ud83d\udca1 Click on the map to select a location, or search above"})})]})};delete _h().Icon.Default.prototype._getIconUrl,_h().Icon.Default.mergeOptions({iconRetinaUrl:n(249),iconUrl:n(24),shadowUrl:n(71)});const yp=e=>{let{isOpen:t,onClose:n,businesses:i,onBusinessSelect:s,userLocation:r=null}=e;const a=r?[r.lat,r.lng]:[36.8065,10.1815],o=e=>{const t={barbershop:"#EF4444",beauty_salon:"#EC4899",restaurant:"#F59E0B",cafe:"#6B7280",football_field:"#10B981",tennis_court:"#06B6D4",gym:"#8B5CF6",car_wash:"#3B82F6",spa:"#F97316",dentist:"#14B8A6",doctor:"#059669",other:"#6B7280"}[e]||"#6B7280";return new(_h().Icon)({iconUrl:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${t}" width="30" height="30">\n          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>\n        </svg>\n      `)}`,iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30]})},l=new(_h().Icon)({iconUrl:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent('\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#4F46E5" width="24" height="24">\n        <circle cx="12" cy="12" r="6" fill="#4F46E5"/>\n        <circle cx="12" cy="12" r="3" fill="white"/>\n      </svg>\n    ')}`,iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-12]}),c=e=>({barbershop:"Barbershop",beauty_salon:"Beauty Salon",restaurant:"Restaurant",cafe:"Caf\xe9",football_field:"Football Field",tennis_court:"Tennis Court",gym:"Gym",car_wash:"Car Wash",spa:"Spa & Wellness",dentist:"Dentist",doctor:"Doctor",other:"Other"}[e]||e.replace("_"," "));return t?(0,ft.jsx)(At,{children:(0,ft.jsx)(gc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,ft.jsxs)(gc.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"\ud83d\uddfa\ufe0f Business Locations"}),(0,ft.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[i.filter(e=>e.latitude&&e.longitude).length," businesses found with location data"]})]}),(0,ft.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:(0,ft.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ft.jsxs)("div",{className:"p-4",children:[(0,ft.jsx)("div",{className:"w-full h-[70vh] rounded-xl border border-gray-300 dark:border-gray-600 overflow-hidden shadow-lg",children:(0,ft.jsxs)(jh,{center:a,zoom:r?12:10,style:{height:"100%",width:"100%"},children:[(0,ft.jsx)(Lh,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r&&(0,ft.jsx)(Oh,{position:[r.lat,r.lng],icon:l,children:(0,ft.jsx)(Rh,{children:(0,ft.jsxs)("div",{className:"text-center p-2",children:[(0,ft.jsx)("div",{className:"font-bold text-blue-600 mb-1",children:"\ud83d\udccd Your Location"}),(0,ft.jsxs)("div",{className:"text-sm text-gray-600",children:[r.lat.toFixed(6),", ",r.lng.toFixed(6)]})]})})}),i.filter(e=>e.latitude&&e.longitude).map(e=>{return(0,ft.jsx)(Oh,{position:[e.latitude,e.longitude],icon:o(e.type),children:(0,ft.jsx)(Rh,{children:(0,ft.jsxs)("div",{className:"p-3 min-w-[250px]",children:[(0,ft.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,ft.jsx)("span",{className:"text-xl",children:(t=e.type,{barbershop:"\ud83d\udc87\u200d\u2642\ufe0f",beauty_salon:"\ud83d\udc84",restaurant:"\ud83c\udf7d\ufe0f",cafe:"\u2615",football_field:"\u26bd",tennis_court:"\ud83c\udfbe",gym:"\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f",car_wash:"\ud83d\ude97",spa:"\ud83e\uddd8\u200d\u2640\ufe0f",dentist:"\ud83e\uddb7",doctor:"\ud83d\udc69\u200d\u2695\ufe0f",other:"\ud83c\udfe2"}[t]||"\ud83d\udccd")}),(0,ft.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:e.name})]}),(0,ft.jsxs)("div",{className:"space-y-1 mb-3",children:[(0,ft.jsxs)("p",{className:"text-gray-600 text-sm flex items-center gap-1",children:[(0,ft.jsx)("span",{children:"\ud83c\udff7\ufe0f"}),c(e.type)]}),(0,ft.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,ft.jsx)("span",{children:"\ud83d\udccd"}),e.location]}),e.phone&&(0,ft.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,ft.jsx)("span",{children:"\ud83d\udcde"}),e.phone]}),e.rating&&e.rating.averageRating>0&&(0,ft.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,ft.jsx)("span",{children:"\u2b50"}),e.rating.averageRating,"/5 (",e.rating.totalReviews," reviews)"]})]}),(0,ft.jsx)("button",{onClick:()=>(e=>{s&&s(e),n()})(e),className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl",children:"\ud83c\udfaf View Details & Book"})]})})},e.id);var t})]})}),(0,ft.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4 justify-between items-center",children:[(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[(0,ft.jsxs)("h4",{className:"font-medium text-sm text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[(0,ft.jsx)("span",{children:"\ud83d\uddfa\ufe0f"}),"Map Legend"]}),(0,ft.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs",children:[r&&(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded-full mr-1"}),(0,ft.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Your Location"})]}),(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-1"}),(0,ft.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Businesses"})]})]})]}),(0,ft.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:(0,ft.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"\ud83d\udca1 Click on any business marker to see details and book an appointment"})})]})]})]})})}):null},bp=e=>{let{businessHours:n=null,onHoursChange:i,isEditing:s=!1}=e;const r=(0,t.useMemo)(()=>({monday:{isOpen:!1,openTime:"09:00",closeTime:"17:00"},tuesday:{isOpen:!1,openTime:"09:00",closeTime:"17:00"},wednesday:{isOpen:!1,openTime:"09:00",closeTime:"17:00"},thursday:{isOpen:!1,openTime:"09:00",closeTime:"17:00"},friday:{isOpen:!1,openTime:"09:00",closeTime:"17:00"},saturday:{isOpen:!1,openTime:"09:00",closeTime:"17:00"},sunday:{isOpen:!1,openTime:"09:00",closeTime:"17:00"}}),[]),[a,o]=(0,t.useState)(r),[l,c]=(0,t.useState)(!1),d=[{key:"monday",label:"Monday",shortLabel:"Mon"},{key:"tuesday",label:"Tuesday",shortLabel:"Tue"},{key:"wednesday",label:"Wednesday",shortLabel:"Wed"},{key:"thursday",label:"Thursday",shortLabel:"Thu"},{key:"friday",label:"Friday",shortLabel:"Fri"},{key:"saturday",label:"Saturday",shortLabel:"Sat"},{key:"sunday",label:"Sunday",shortLabel:"Sun"}];(0,t.useEffect)(()=>{if(console.log("WeeklyAvailability: businessHours changed:",n),console.log("WeeklyAvailability: isInitialized:",l),n)try{const e="string"===typeof n?JSON.parse(n):n;e&&"object"===typeof e&&(console.log("WeeklyAvailability: Setting hours to:",e),o(t=>({...t,...e}))),c(!0)}catch(e){console.error("Error parsing business hours:",e),o(r),c(!0)}else console.log("WeeklyAvailability: No businessHours, using defaultHours"),o(r),c(!0)},[n,r]);const u=(0,t.useCallback)(e=>{if(i&&s&&l)try{i(e)}catch(t){console.error("Error calling onHoursChange:",t)}},[i,s,l]);(0,t.useEffect)(()=>{if(l){const e=setTimeout(()=>{u(a)},300);return()=>clearTimeout(e)}},[a,u,l]);const h=(0,t.useCallback)(e=>{if(s&&l)try{const t=a[e];if(!t)return;const n={};d.forEach(e=>{let{key:i}=e;n[i]={...t}}),o(n)}catch(t){console.error("Error copying to all days:",t)}},[s,l,a,d]),m=(0,t.useCallback)(e=>{if(s&&l)try{o(t=>({...t,[e]:{...t[e],isOpen:!t[e].isOpen}}))}catch(t){console.error("Error toggling day:",t)}},[s,l]),p=(0,t.useCallback)((e,t,n)=>{if(s&&l)try{const i=a[e];if(!i)return;const s={...i,[t]:n};if("openTime"===t&&s.closeTime&&n>=s.closeTime){const[e,t]=n.split(":").map(Number);let i=e+1,r=t;i>=24&&(i=23,r=59),s.closeTime=`${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}if("closeTime"===t&&s.openTime&&n<=s.openTime){const[e,t]=n.split(":").map(Number);let i=e-1,r=t;i<0&&(i=0,r=0),s.openTime=`${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}o(t=>({...t,[e]:s}))}catch(i){console.error("Error updating time:",i)}},[s,l,a]),f=(0,t.useCallback)(e=>{try{if(!e)return"";const[t,n]=e.split(":"),i=parseInt(t);return`${0===i?12:i>12?i-12:i}:${n} ${i>=12?"PM":"AM"}`}catch(t){return console.error("Error formatting time:",t),e||""}},[]);if(!l)return(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg animate-pulse",children:[(0,ft.jsxs)("div",{className:"flex items-center mb-4",children:[(0,ft.jsx)("div",{className:"w-5 h-5 bg-gray-300 dark:bg-gray-600 rounded mr-2"}),(0,ft.jsx)("div",{className:"w-32 h-6 bg-gray-300 dark:bg-gray-600 rounded"})]}),(0,ft.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5,6,7].map(e=>(0,ft.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,ft.jsx)("div",{className:"w-20 h-4 bg-gray-300 dark:bg-gray-600 rounded"}),(0,ft.jsx)("div",{className:"w-16 h-4 bg-gray-300 dark:bg-gray-600 rounded"})]},e))})]});if(!s){const e=Object.values(a).some(e=>e.isOpen);return(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)(Oc,{className:"text-blue-500 mr-2",size:20}),(0,ft.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Business Hours"})]}),!e&&(0,ft.jsx)("span",{className:"text-xs px-3 py-1 bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300 rounded-full",children:"Hours not set"})]}),!e&&(0,ft.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,ft.jsxs)("div",{className:"flex items-center text-blue-700 dark:text-blue-300",children:[(0,ft.jsx)("span",{className:"text-lg mr-2",children:"\ud83d\udca1"}),(0,ft.jsx)("p",{className:"text-sm font-medium",children:"Set your business hours to let customers know when you're open!"})]}),(0,ft.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 ml-7",children:'Go to Details \u2192 "Manage Hours" to set your availability'})]}),(0,ft.jsx)("div",{className:"space-y-3",children:d.map(e=>{let{key:t,label:n}=e;const i=a[t]||r[t];return i?(0,ft.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:[(0,ft.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:n}),i.isOpen?(0,ft.jsxs)("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[f(i.openTime)," - ",f(i.closeTime)]}):(0,ft.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:"Closed"})]},t):null})})]})}return(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)(Oc,{className:"text-blue-500 mr-2",size:20}),(0,ft.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Set Business Hours"})]}),(0,ft.jsx)("button",{onClick:()=>{a.monday;h("monday")},className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Copy Monday to All"})]}),(0,ft.jsx)("div",{className:"space-y-4",children:d.map(e=>{let{key:t,label:n,shortLabel:i}=e;const s=a[t]||r[t];return s?(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*d.findIndex(e=>e.key===t)},className:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-3 w-32",children:[(0,ft.jsx)("button",{onClick:()=>m(t),className:"flex items-center space-x-2",children:s.isOpen?(0,ft.jsx)(Zc,{className:"text-green-500",size:24}):(0,ft.jsx)(qc,{className:"text-gray-400",size:24})}),(0,ft.jsx)("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:i})]}),s.isOpen?(0,ft.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Open"}),(0,ft.jsx)("input",{type:"time",value:s.openTime||"09:00",onChange:e=>p(t,"openTime",e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ft.jsx)("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"to"}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Close"}),(0,ft.jsx)("input",{type:"time",value:s.closeTime||"17:00",onChange:e=>p(t,"closeTime",e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ft.jsx)("button",{onClick:()=>h(t),className:"px-3 py-2 text-xs text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Copy to All"})]}):(0,ft.jsx)("div",{className:"flex-1",children:(0,ft.jsx)("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"Closed"})})]},t):null})}),(0,ft.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,ft.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,ft.jsx)("strong",{children:"Tip:"}),' Use the toggle switches to open/close specific days. Click "Copy to All" to apply the same hours to all days of the week.']})})]})};class vp extends t.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("WeeklyAvailability Error:",e,t)}render(){return this.state.hasError?(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border border-red-200 dark:border-red-800",children:[(0,ft.jsxs)("div",{className:"flex items-center text-red-600 dark:text-red-400 mb-3",children:[(0,ft.jsx)("span",{className:"text-xl mr-2",children:"\u26a0\ufe0f"}),(0,ft.jsx)("h3",{className:"font-semibold",children:"Business Hours Error"})]}),(0,ft.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"There was an error loading the business hours component."}),(0,ft.jsx)("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm",children:"Try Again"})]}):this.props.children}}const wp=vp;function _p(e,t){const n=+am(e)-+am(t);return n<0?-1:n>0?1:n}function kp(e,t,n){const[i,s]=lm(n?.in,e,t);return 12*(i.getFullYear()-s.getFullYear())+(i.getMonth()-s.getMonth())}function jp(e,t){const n=am(e,t?.in);return n.setHours(23,59,59,999),n}function Np(e,t){const n=am(e,t?.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}function Sp(e,t){const n=am(e,t?.in);return+jp(n,t)===+Np(n,t)}function Cp(e,t,n){const[i,s,r]=lm(n?.in,e,e,t),a=_p(s,r),o=Math.abs(kp(s,r));if(o<1)return 0;1===s.getMonth()&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*o);let l=_p(s,r)===-a;Sp(i)&&1===o&&1===_p(i,r)&&(l=!1);const c=a*(o-+l);return 0===c?0:c}function Pp(e,t){return+am(e)-+am(t)}function Tp(e,t,n){const i=Pp(e,t)/1e3;return(s=n?.roundingMethod,e=>{const t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})(i);var s}function Ep(e,t,n){const i=Qh(),s=n?.locale??i.locale??Jh,r=_p(e,t);if(isNaN(r))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:r}),[o,l]=lm(n?.in,...r>0?[t,e]:[e,t]),c=Tp(l,o),d=(om(l)-om(o))/1e3,u=Math.round((c-d)/60);let h;if(u<2)return n?.includeSeconds?c<5?s.formatDistance("lessThanXSeconds",5,a):c<10?s.formatDistance("lessThanXSeconds",10,a):c<20?s.formatDistance("lessThanXSeconds",20,a):c<40?s.formatDistance("halfAMinute",0,a):c<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):0===u?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",u,a);if(u<45)return s.formatDistance("xMinutes",u,a);if(u<90)return s.formatDistance("aboutXHours",1,a);if(u<1440){const e=Math.round(u/60);return s.formatDistance("aboutXHours",e,a)}if(u<2520)return s.formatDistance("xDays",1,a);if(u<im){const e=Math.round(u/1440);return s.formatDistance("xDays",e,a)}if(u<86400)return h=Math.round(u/im),s.formatDistance("aboutXMonths",h,a);if(h=Cp(l,o),h<12){const e=Math.round(u/im);return s.formatDistance("xMonths",e,a)}{const e=h%12,t=Math.trunc(h/12);return e<3?s.formatDistance("aboutXYears",t,a):e<9?s.formatDistance("overXYears",t,a):s.formatDistance("almostXYears",t+1,a)}}function Mp(e,t){return Ep(e,Ym(e),t)}const Lp=e=>{let{conversations:t,activeConversation:n,onSelectConversation:i,onDeleteConversation:s,loading:r}=e;const a=e=>{if(!e)return"";try{return Mp(new Date(e),{addSuffix:!0})}catch(t){return""}},o=e=>{var t;return(null===(t=e.other_participant)||void 0===t?void 0:t.name)||"Unknown"},l=e=>o(e).charAt(0).toUpperCase(),c=e=>{var t,n,i,s;return"business"===(null===(t=e.other_participant)||void 0===t?void 0:t.type)?`${(null===(n=e.businesses)||void 0===n||null===(i=n.type)||void 0===i?void 0:i.replace("_"," "))||"Business"} \u2022 ${(null===(s=e.businesses)||void 0===s?void 0:s.location)||"No location"}`:"Customer"},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;return e?e.length>t?`${e.substring(0,t)}...`:e:"No messages yet"};return r&&0===t.length?(0,ft.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ft.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===t.length?(0,ft.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500 dark:text-gray-400 px-4",children:[(0,ft.jsx)("svg",{className:"w-16 h-16 mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,ft.jsx)("p",{className:"text-center font-medium",children:"No conversations yet"}),(0,ft.jsx)("p",{className:"text-sm text-center mt-2",children:"Start a conversation by contacting a business"})]}):(0,ft.jsxs)("div",{className:"flex flex-col h-full",children:[(0,ft.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,ft.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Messages"}),(0,ft.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.length," conversation",1!==t.length?"s":""]})]}),(0,ft.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,ft.jsx)(At,{children:t.map(e=>{var t;return(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{duration:.2},onClick:()=>i(e),className:`\n                relative p-4 border-b border-gray-200 dark:border-gray-700 cursor-pointer\n                transition-all duration-200 hover:bg-gray-50 dark:hover:bg-gray-800\n                ${(null===n||void 0===n?void 0:n.id)===e.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-600":""}\n              `,children:[(0,ft.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,ft.jsx)("div",{className:`\n                  flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center text-white font-bold\n                  ${"business"===(null===(t=e.other_participant)||void 0===t?void 0:t.type)?"bg-gradient-to-br from-purple-500 to-blue-600":"bg-gradient-to-br from-green-500 to-teal-600"}\n                `,children:l(e)}),(0,ft.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ft.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,ft.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:o(e)}),e.last_message_at&&(0,ft.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2 flex-shrink-0",children:a(e.last_message_at)})]}),(0,ft.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:c(e)}),(0,ft.jsx)("p",{className:`\n                    text-sm truncate\n                    ${e.unread_count>0?"text-gray-900 dark:text-white font-semibold":"text-gray-600 dark:text-gray-400"}\n                  `,children:d(e.last_message)})]}),e.unread_count>0&&(0,ft.jsx)(gc.div,{initial:{scale:0},animate:{scale:1},className:"flex-shrink-0 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:(0,ft.jsx)("span",{className:"text-xs font-bold text-white",children:e.unread_count>9?"9+":e.unread_count})})]}),s&&(0,ft.jsx)("button",{onClick:t=>{t.stopPropagation(),window.confirm("Are you sure you want to delete this conversation?")&&s(e.id)},className:"absolute top-4 right-4 opacity-0 hover:opacity-100 transition-opacity p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",children:(0,ft.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id)})})})]})};function Ap(e,t){const n=()=>rm(t?.in,NaN),i=t?.additionalDigits??2,s=function(e){const t={},n=e.split(Op.dateTimeDelimiter);let i;if(n.length>2)return t;/:/.test(n[0])?i=n[0]:(t.date=n[0],i=n[1],Op.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Op.timeZoneDelimiter)[0],i=e.substr(t.date.length,e.length)));if(i){const e=Op.timezone.exec(i);e?(t.time=i.replace(e[1],""),t.timezone=e[1]):t.time=i}return t}(e);let r;if(s.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(n);if(!i)return{year:NaN,restDateString:""};const s=i[1]?parseInt(i[1]):null,r=i[2]?parseInt(i[2]):null;return{year:null===r?s:100*r,restDateString:e.slice((i[1]||i[2]).length)}}(s.date,i);r=function(e,t){if(null===t)return new Date(NaN);const n=e.match(Rp);if(!n)return new Date(NaN);const i=!!n[4],s=zp(n[1]),r=zp(n[2])-1,a=zp(n[3]),o=zp(n[4]),l=zp(n[5])-1;if(i)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,o,l)?function(e,t,n){const i=new Date(0);i.setUTCFullYear(e,0,4);const s=i.getUTCDay()||7,r=7*(t-1)+n+1-s;return i.setUTCDate(i.getUTCDate()+r),i}(t,o,l):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Fp[t]||(Up(e)?29:28))}(t,r,a)&&function(e,t){return t>=1&&t<=(Up(e)?366:365)}(t,s)?(e.setUTCFullYear(t,r,Math.max(s,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(+r))return n();const a=+r;let o,l=0;if(s.time&&(l=function(e){const t=e.match(Dp);if(!t)return NaN;const n=Ip(t[1]),i=Ip(t[2]),s=Ip(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,i,s))return NaN;return n*nm+i*tm+1e3*s}(s.time),isNaN(l)))return n();if(!s.timezone){const e=new Date(a+l),n=am(0,t?.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return o=function(e){if("Z"===e)return 0;const t=e.match(Bp);if(!t)return 0;const n="+"===t[1]?-1:1,i=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,s))return NaN;return n*(i*nm+s*tm)}(s.timezone),isNaN(o)?n():am(a+l+o,t?.in)}const Op={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Rp=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Dp=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Bp=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zp(e){return e?parseInt(e):1}function Ip(e){return e&&parseFloat(e.replace(",","."))||0}const Fp=[31,null,31,30,31,30,31,31,30,31,30,31];function Up(e){return e%400===0||e%4===0&&e%100!==0}function $p(e,t,n){const i=am(e,n?.in);return isNaN(t)?rm(n?.in||e,NaN):t?(i.setDate(i.getDate()+t),i):i}function Wp(e,t,n){return $p(e,-t,n)}function Hp(e,t){return Km(rm(t?.in||e,e),Wp(Ym(t?.in||e),1))}const Vp=e=>{var n;let{conversation:i,messages:s,currentUserId:r,onSendMessage:a,onClose:o,loading:l}=e;const c=(0,t.useRef)(null),d=(0,t.useRef)(null),[u,h]=(0,t.useState)(""),[m,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{f()},[s]);const f=()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},g=e=>{if(!e)return"";try{const t=Ap(e);return Gm(t)?qm(t,"HH:mm"):Hp(t)?`Yesterday ${qm(t,"HH:mm")}`:qm(t,"MMM dd, HH:mm")}catch(t){return""}},x=()=>{var e;return(null===i||void 0===i||null===(e=i.other_participant)||void 0===e?void 0:e.name)||"Unknown"},y=async e=>{if(e.preventDefault(),!u.trim()||m)return;const t=u.trim();h(""),p(!0);try{await a(i.id,t)}catch(n){console.error("Error sending message:",n),h(t)}finally{p(!1)}};return i?(0,ft.jsxs)("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-3",children:[o&&(0,ft.jsx)("button",{onClick:o,className:"md:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:(0,ft.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,ft.jsx)("div",{className:`\n            w-10 h-10 rounded-full flex items-center justify-center text-white font-bold\n            ${"business"===(null===(n=i.other_participant)||void 0===n?void 0:n.type)?"bg-gradient-to-br from-purple-500 to-blue-600":"bg-gradient-to-br from-green-500 to-teal-600"}\n          `,children:x().charAt(0).toUpperCase()}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h2",{className:"font-semibold text-gray-900 dark:text-white",children:x()}),(0,ft.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:(()=>{var e,t,n;return"business"===(null===i||void 0===i||null===(e=i.other_participant)||void 0===e?void 0:e.type)?(null===i||void 0===i||null===(t=i.businesses)||void 0===t||null===(n=t.type)||void 0===n?void 0:n.replace("_"," "))||"Business":"Customer"})()})]})]}),(0,ft.jsx)("div",{className:"flex items-center space-x-2",children:(0,ft.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:(0,ft.jsx)("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]}),(0,ft.jsxs)("div",{ref:d,className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900",children:[l&&0===s.length?(0,ft.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,ft.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===s.length?(0,ft.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 dark:text-gray-400",children:(0,ft.jsx)("p",{children:"No messages yet. Start the conversation!"})}):(0,ft.jsx)(At,{children:s.map((e,t)=>{var n,i,a;const o=e.sender_id===r,l=0===t||s[t-1].sender_id!==e.sender_id;return(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.2},className:"flex items-end space-x-2 "+(o?"flex-row-reverse space-x-reverse":""),children:[(0,ft.jsx)("div",{className:"flex-shrink-0 w-8 h-8",children:l&&!o&&(0,ft.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-green-500 to-teal-600 flex items-center justify-center text-white text-xs font-bold",children:(null===(n=(null===(i=e.sender)||void 0===i?void 0:i.full_name)||(null===(a=e.users)||void 0===a?void 0:a.full_name))||void 0===n?void 0:n.charAt(0).toUpperCase())||"?"})}),(0,ft.jsxs)("div",{className:`\n                    max-w-xs lg:max-w-md px-4 py-2 rounded-2xl\n                    ${o?"bg-blue-600 text-white rounded-br-sm":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-bl-sm shadow-sm"}\n                  `,children:[(0,ft.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words",children:e.content}),(0,ft.jsxs)("div",{className:`\n                      flex items-center justify-end space-x-1 mt-1\n                      ${o?"text-blue-100":"text-gray-500 dark:text-gray-400"}\n                    `,children:[(0,ft.jsx)("span",{className:"text-xs",children:g(e.created_at)}),o&&(0,ft.jsx)("span",{className:"text-xs",children:e.is_read?"\u2713\u2713":"\u2713"})]})]})]},e.id)})}),(0,ft.jsx)("div",{ref:c})]}),m&&(0,ft.jsx)("div",{className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-800",children:(0,ft.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-blue-600 dark:text-blue-400",children:[(0,ft.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),(0,ft.jsx)("span",{children:"Sending..."})]})}),(0,ft.jsxs)("form",{onSubmit:y,className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[(0,ft.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,ft.jsx)("div",{className:"flex-1 relative",children:(0,ft.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y(e))},placeholder:"Type a message...",rows:1,className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-full \r focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\r bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white\r resize-none max-h-32",style:{minHeight:"48px"}})}),(0,ft.jsx)("button",{type:"submit",disabled:!u.trim()||m,className:`\n              flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center\n              transition-all duration-200 transform hover:scale-105\n              ${u.trim()&&!m?"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}\n            `,children:m?(0,ft.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,ft.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),(0,ft.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 ml-4",children:"Press Enter to send, Shift+Enter for new line"})]})]}):(0,ft.jsxs)("div",{className:"flex flex-col items-center justify-center h-full bg-gray-50 dark:bg-gray-900 text-gray-500 dark:text-gray-400",children:[(0,ft.jsx)("svg",{className:"w-20 h-20 mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,ft.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No conversation selected"}),(0,ft.jsx)("p",{className:"text-center",children:"Select a conversation from the list to start messaging"})]})};class qp extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class Zp extends qp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Yp extends qp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Kp extends qp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Gp;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Gp||(Gp={}));var Jp=function(e,t,n,i){return new(n||(n=Promise))(function(s,r){function a(e){try{l(i.next(e))}catch(Ix){r(Ix)}}function o(e){try{l(i.throw(e))}catch(Ix){r(Ix)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})};class Xp{constructor(e){let{headers:t={},customFetch:i,region:s=Gp.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=s,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return Jp(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:r}=t;let a={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(a["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),r&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&("undefined"!==typeof Blob&&r instanceof Blob||r instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=r):"string"===typeof r?(a["Content-Type"]="text/plain",c=r):"undefined"!==typeof FormData&&r instanceof FormData?c=r:(a["Content-Type"]="application/json",c=JSON.stringify(r)));const d=yield this.fetch(l.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(e=>{throw new Zp(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new Yp(d);if(!d.ok)throw new Kp(d);let h,m=(null!==(n=d.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof Kp||i instanceof Yp?i.context:void 0}}})}}var Qp=n(980);const{PostgrestClient:ef,PostgrestQueryBuilder:tf,PostgrestFilterBuilder:nf,PostgrestTransformBuilder:sf,PostgrestBuilder:rf,PostgrestError:af}=Qp;const of=function(){if("undefined"!==typeof WebSocket)return WebSocket;if("undefined"!==typeof global.WebSocket)return global.WebSocket;if("undefined"!==typeof window.WebSocket)return window.WebSocket;if("undefined"!==typeof self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var lf,cf,df,uf,hf,mf;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(lf||(lf={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(cf||(cf={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(df||(df={})),function(e){e.websocket="websocket"}(uf||(uf={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(hf||(hf={}));class pf{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),s=t.getUint8(2);let r=this.HEADER_LENGTH+2;const a=n.decode(e.slice(r,r+i));r+=i;const o=n.decode(e.slice(r,r+s));r+=s;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(r,e.byteLength)))}}}class ff{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(mf||(mf={}));const gf=function(e,t){var n;const i=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,s)=>(n[s]=xf(s,e,t,i),n),{})},xf=(e,t,n,i)=>{const s=t.find(t=>t.name===e),r=null===s||void 0===s?void 0:s.type,a=n[e];return r&&!i.includes(r)?yf(r,a):bf(a)},yf=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return kf(t,n)}switch(e){case mf.bool:return vf(t);case mf.float4:case mf.float8:case mf.int2:case mf.int4:case mf.int8:case mf.numeric:case mf.oid:return wf(t);case mf.json:case mf.jsonb:return _f(t);case mf.timestamp:return jf(t);case mf.abstime:case mf.date:case mf.daterange:case mf.int4range:case mf.int8range:case mf.money:case mf.reltime:case mf.text:case mf.time:case mf.timestamptz:case mf.timetz:case mf.tsrange:case mf.tstzrange:default:return bf(t)}},bf=e=>e,vf=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},wf=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},_f=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},kf=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,i=e[n];if("{"===e[0]&&"}"===i){let i;const s=e.slice(1,n);try{i=JSON.parse("["+s+"]")}catch(cy){i=s?s.split(","):[]}return i.map(e=>yf(t,e))}return e},jf=e=>"string"===typeof e?e.replace(" ","T"):e,Nf=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Sf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Cf,Pf,Tf,Ef;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Cf||(Cf={}));class Mf{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mf.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=Mf.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],i()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Mf.syncDiff(this.state,e,t,n),i())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const s=this.cloneDeep(e),r=this.transformState(t),a={},o={};return this.map(s,(e,t)=>{r[e]||(o[e]=t)}),this.map(r,(e,t)=>{const n=s[e];if(n){const i=t.map(e=>e.presence_ref),s=n.map(e=>e.presence_ref),r=t.filter(e=>s.indexOf(e.presence_ref)<0),l=n.filter(e=>i.indexOf(e.presence_ref)<0);r.length>0&&(a[e]=r),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(s,{joins:a,leaves:o},n,i)}static syncDiff(e,t,n,i){const{joins:s,leaves:r}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(t,i)=>{var s;const r=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(i),r.length>0){const n=e[t].map(e=>e.presence_ref),i=r.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...i)}n(t,r,i)}),this.map(r,(t,n)=>{let s=e[t];if(!s)return;const r=n.map(e=>e.presence_ref);s=s.filter(e=>r.indexOf(e.presence_ref)<0),e[t]=s,i(t,s,n),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return t[n]="metas"in i?i.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(Pf||(Pf={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Tf||(Tf={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Ef||(Ef={}));class Lf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=cf.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Sf(this,df.join,this.params,this.timeout),this.rejoinTimer=new ff(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cf.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cf.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=cf.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cf.errored,this.rejoinTimer.scheduleTimeout())}),this._on(df.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Mf(this),this.broadcastEndpointURL=Nf(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==cf.closed){const{config:{broadcast:s,presence:r,private:a}}=this.params;this._onError(t=>null===e||void 0===e?void 0:e(Ef.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(Ef.CLOSED));const o={},l={broadcast:s,presence:r,postgres_changes:null!==(i=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==i?i:[],private:a};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var i;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,s=null!==(i=null===t||void 0===t?void 0:t.length)&&void 0!==i?i:0,r=[];for(let i=0;i<s;i++){const s=t[i],{filter:{event:a,schema:o,table:l,filter:c}}=s,d=n&&n[i];if(!d||d.event!==a||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=cf.errored,void(null===e||void 0===e||e(Ef.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));r.push(Object.assign(Object.assign({},s),{id:d.id}))}return this.bindings.postgres_changes=r,void(e&&e(Ef.SUBSCRIBED))}null===e||void 0===e||e(Ef.SUBSCRIBED)}).receive("error",t=>{this.state=cf.errored,null===e||void 0===e||e(Ef.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(Ef.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var i,s,r;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(r=null===(s=null===(i=this.params)||void 0===i?void 0:i.config)||void 0===s?void 0:s.broadcast)||void 0===r?void 0:r.ack)||n("ok"),a.receive("ok",()=>n("ok")),a.receive("error",()=>n("error")),a.receive("timeout",()=>n("timed out"))});{const{event:r,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(i=e.body)||void 0===i?void 0:i.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=cf.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(df.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Sf(this,df.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),r=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),r}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Sf(this,e,t,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,s;const r=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=df;if(n&&[a,o,l,c].indexOf(r)>=0&&n!==this._joinRef())return;let d=this._onMessage(r,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?null===(i=this.bindings.postgres_changes)||void 0===i||i.filter(e=>{var t,n,i;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(i=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===i?void 0:i.toLocaleLowerCase())===r}).map(e=>e.callback(d,n)):null===(s=this.bindings[r])||void 0===s||s.filter(e=>{var n,i,s,a,o,l;if(["broadcast","presence","postgres_changes"].includes(r)){if("id"in e){const r=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return r&&(null===(i=t.ids)||void 0===i?void 0:i.includes(r))&&("*"===a||(null===a||void 0===a?void 0:a.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null===e||void 0===e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===r}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:i,type:s,errors:r}=e,a={schema:t,table:n,commit_timestamp:i,eventType:s,new:{},old:{},errors:r};d=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===cf.closed}_isJoined(){return this.state===cf.joined}_isJoining(){return this.state===cf.joining}_isLeaving(){return this.state===cf.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var i;return!((null===(i=e.type)||void 0===i?void 0:i.toLocaleLowerCase())===n&&Lf.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(df.close,{},e)}_onError(e){this._on(df.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cf.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=gf(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=gf(e.columns,e.old_record)),t}}const Af=()=>{};class Of{constructor(e,t){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Af,this.ref=0,this.logger=Af,this.conn=null,this.sendBuffer=[],this.serializer=new pf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},this.endPoint=`${e}/${uf.websocket}`,this.httpEndpoint=Nf(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),((null===t||void 0===t?void 0:t.logLevel)||(null===t||void 0===t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=null===(i=null===t||void 0===t?void 0:t.params)||void 0===i?void 0:i.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ff(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=of),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case lf.connecting:return hf.Connecting;case lf.open:return hf.Open;case lf.closing:return hf.Closing;default:return hf.Closed}}isConnected(){return this.connectionState()===hf.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n=`realtime:${e}`,i=this.getChannels().find(e=>e.topic===n);if(i)return i;{const n=new Lf(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:i,ref:s}=e,r=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${s})`,i),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:"realtime-js/2.11.15"};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(df.access_token,{access_token:e})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:i,ref:s}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${t} ${n} ${s&&"("+s+")"||""}`,i),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,i,s)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(df.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Rf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Df(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Bf extends Rf{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zf extends Rf{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var If=function(e,t,n,i){return new(n||(n=Promise))(function(s,r){function a(e){try{l(i.next(e))}catch(Ix){r(Ix)}}function o(e){try{l(i.throw(e))}catch(Ix){r(Ix)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})};const Ff=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Uf=e=>{if(Array.isArray(e))return e.map(e=>Uf(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,i]=e;const s=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[s]=Uf(i)}),t};var $f=function(e,t,n,i){return new(n||(n=Promise))(function(s,r){function a(e){try{l(i.next(e))}catch(Ix){r(Ix)}}function o(e){try{l(i.throw(e))}catch(Ix){r(Ix)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})};const Wf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Hf=(e,t,i)=>$f(void 0,void 0,void 0,function*(){const s=yield If(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof s&&!(null===i||void 0===i?void 0:i.noResolveJson)?e.json().then(n=>{const i=e.status||500,s=(null===n||void 0===n?void 0:n.statusCode)||i+"";t(new Bf(Wf(n),i,s))}).catch(e=>{t(new zf(Wf(e),e))}):t(new zf(Wf(e),e))}),Vf=(e,t,n,i)=>{const s={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&i?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(i)?(s.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),s.body=JSON.stringify(i)):s.body=i,Object.assign(Object.assign({},s),n)):s};function qf(e,t,n,i,s,r){return $f(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,Vf(t,i,s,r)).then(e=>{if(!e.ok)throw e;return(null===i||void 0===i?void 0:i.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>Hf(e,o,i))})})}function Zf(e,t,n,i){return $f(this,void 0,void 0,function*(){return qf(e,"GET",t,n,i)})}function Yf(e,t,n,i,s){return $f(this,void 0,void 0,function*(){return qf(e,"POST",t,i,s,n)})}function Kf(e,t,n,i,s){return $f(this,void 0,void 0,function*(){return qf(e,"PUT",t,i,s,n)})}function Gf(e,t,n,i,s){return $f(this,void 0,void 0,function*(){return qf(e,"DELETE",t,i,s,n)})}var Jf=function(e,t,n,i){return new(n||(n=Promise))(function(s,r){function a(e){try{l(i.next(e))}catch(Ix){r(Ix)}}function o(e){try{l(i.throw(e))}catch(Ix){r(Ix)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})};const Xf={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class eg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=Ff(i)}uploadOrUpdate(e,t,n,i){return Jf(this,void 0,void 0,function*(){try{let s;const r=Object.assign(Object.assign({},Qf),i);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(r.upsert)});const o=r.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",r.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(s=n,s.append("cacheControl",r.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=n,a["cache-control"]=`max-age=${r.cacheControl}`,a["content-type"]=r.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===i||void 0===i?void 0:i.headers)&&(a=Object.assign(Object.assign({},a),i.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?Kf:Yf)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:a},(null===r||void 0===r?void 0:r.duplex)?{duplex:r.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(Df(s))return{data:null,error:s};throw s}})}upload(e,t,n){return Jf(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return Jf(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),r=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${r}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Qf.upsert},i),r=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,r["cache-control"]=`max-age=${t.cacheControl}`,r["content-type"]=t.contentType);return{data:{path:s,fullPath:(yield Kf(this.fetch,a.toString(),e,{headers:r})).Key},error:null}}catch(o){if(Df(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Jf(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(i["x-upsert"]="true");const s=yield Yf(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),r=new URL(this.url+s.url),a=r.searchParams.get("token");if(!a)throw new Rf("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:a},error:null}}catch(n){if(Df(n))return{data:null,error:n};throw n}})}update(e,t,n){return Jf(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Jf(this,void 0,void 0,function*(){try{return{data:yield Yf(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Df(i))return{data:null,error:i};throw i}})}copy(e,t,n){return Jf(this,void 0,void 0,function*(){try{return{data:{path:(yield Yf(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Df(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return Jf(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Yf(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const r=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${r}`)},{data:s,error:null}}catch(i){if(Df(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return Jf(this,void 0,void 0,function*(){try{const i=yield Yf(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:i.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null})),error:null}}catch(i){if(Df(i))return{data:null,error:i};throw i}})}download(e,t){return Jf(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),s=i?`?${i}`:"";try{const t=this._getFinalPath(e),i=yield Zf(this.fetch,`${this.url}/${n}/${t}${s}`,{headers:this.headers,noResolveJson:!0});return{data:yield i.blob(),error:null}}catch(r){if(Df(r))return{data:null,error:r};throw r}})}info(e){return Jf(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Zf(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Uf(e),error:null}}catch(n){if(Df(n))return{data:null,error:n};throw n}})}exists(e){return Jf(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,i){return $f(this,void 0,void 0,function*(){return qf(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Df(n)&&n instanceof zf){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],s=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&i.push(s);const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==a&&i.push(a);let o=i.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${r}/public/${n}${o}`)}}}remove(e){return Jf(this,void 0,void 0,function*(){try{return{data:yield Gf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Df(t))return{data:null,error:t};throw t}})}list(e,t,n){return Jf(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Xf),t),{prefix:e||""});return{data:yield Yf(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Df(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const tg={"X-Client-Info":"storage-js/2.10.4"};var ng=function(e,t,n,i){return new(n||(n=Promise))(function(s,r){function a(e){try{l(i.next(e))}catch(Ix){r(Ix)}}function o(e){try{l(i.throw(e))}catch(Ix){r(Ix)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})};class ig{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;const s=new URL(e);if(null===i||void 0===i?void 0:i.useNewHostname){/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."))}this.url=s.href,this.headers=Object.assign(Object.assign({},tg),t),this.fetch=Ff(n)}listBuckets(){return ng(this,void 0,void 0,function*(){try{return{data:yield Zf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Df(e))return{data:null,error:e};throw e}})}getBucket(e){return ng(this,void 0,void 0,function*(){try{return{data:yield Zf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Df(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ng(this,void 0,void 0,function*(){try{return{data:yield Yf(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Df(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return ng(this,void 0,void 0,function*(){try{return{data:yield Kf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Df(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ng(this,void 0,void 0,function*(){try{return{data:yield Yf(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Df(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ng(this,void 0,void 0,function*(){try{return{data:yield Gf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Df(t))return{data:null,error:t};throw t}})}}class sg extends ig{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new eg(this.url,this.headers,e,this.fetch)}}let rg="";rg="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ag={headers:{"X-Client-Info":`supabase-js-${rg}/2.53.0`}},og={schema:"public"},lg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cg={};var dg=n(630),ug=function(e,t,n,i){return new(n||(n=Promise))(function(s,r){function a(e){try{l(i.next(e))}catch(Ix){r(Ix)}}function o(e){try{l(i.throw(e))}catch(Ix){r(Ix)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})};const hg=e=>{let t;return t=e||("undefined"===typeof fetch?dg.default:fetch),function(){return t(...arguments)}},mg=(e,t,n)=>{const i=hg(n),s="undefined"===typeof Headers?dg.Headers:Headers;return(n,r)=>ug(void 0,void 0,void 0,function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new s(null===r||void 0===r?void 0:r.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),i(n,Object.assign(Object.assign({},r),{headers:l}))})};var pg=function(e,t,n,i){return new(n||(n=Promise))(function(s,r){function a(e){try{l(i.next(e))}catch(Ix){r(Ix)}}function o(e){try{l(i.throw(e))}catch(Ix){r(Ix)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})};const fg="2.71.1",gg=3e4,xg=9e4,yg={"X-Client-Info":`gotrue-js/${fg}`},bg="X-Supabase-Api-Version",vg={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},wg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class _g extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function kg(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class jg extends _g{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Ng extends _g{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Sg extends _g{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class Cg extends Sg{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Pg extends Sg{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Tg extends Sg{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Eg extends Sg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mg extends Sg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lg extends Sg{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ag(e){return kg(e)&&"AuthRetryableFetchError"===e.name}class Og extends Sg{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Rg extends Sg{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Dg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bg=" \t\n\r=".split(""),zg=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Bg.length;t+=1)e[Bg[t].charCodeAt(0)]=-2;for(let t=0;t<Dg.length;t+=1)e[Dg[t].charCodeAt(0)]=t;return e})();function Ig(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Dg[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Dg[e]),t.queuedBits-=6}}function Fg(e,t,n){const i=zg[e];if(!(i>-1)){if(-2===i)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Ug(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},r=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,i,n)};for(let a=0;a<e.length;a+=1)Fg(e.charCodeAt(a),s,r);return t.join("")}function $g(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Wg(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const t=1024*(i-55296)&65535;i=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}$g(i,t)}}function Hg(e){const t=[],n={queue:0,queuedBits:0},i=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)Fg(e.charCodeAt(s),n,i);return new Uint8Array(t)}function Vg(e){const t=[],n={queue:0,queuedBits:0},i=e=>{t.push(e)};return e.forEach(e=>Ig(e,n,i)),Ig(null,n,i),t.join("")}const qg=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Zg={tested:!1,writable:!1},Yg=()=>{if(!qg())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(Ix){return!1}if(Zg.tested)return Zg.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Zg.tested=!0,Zg.writable=!0}catch(Ix){Zg.tested=!0,Zg.writable=!1}return Zg.writable};const Kg=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Gg=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Jg=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(i){return n}},Xg=async(e,t)=>{await e.removeItem(t)};class Qg{constructor(){this.promise=new Qg.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function ex(e){const t=e.split(".");if(3!==t.length)throw new Rg("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!wg.test(t[n]))throw new Rg("JWT not in base64url format");return{header:JSON.parse(Ug(t[0])),payload:JSON.parse(Ug(t[1])),signature:Hg(t[2]),raw:{header:t[0],payload:t[1]}}}function tx(e){return("0"+e.toString(16)).substr(-2)}async function nx(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ix(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let i=0;i<56;i++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,tx).join("")}();let s=i;n&&(s+="/PASSWORD_RECOVERY"),await Gg(e,`${t}-code-verifier`,s);const r=await nx(i);return[r,i===r?"plain":"s256"]}Qg.promiseConstructor=Promise;const sx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const rx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ax(e){if(!rx.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ox(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function lx(e){return JSON.parse(JSON.stringify(e))}var cx=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const dx=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ux=[502,503,504];async function hx(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Lg(dx(e),0);if(ux.includes(e.status))throw new Lg(dx(e),e.status);let i,s;try{i=await e.json()}catch(Ix){throw new Ng(dx(Ix),Ix)}const r=function(e){const t=e.headers.get(bg);if(!t)return null;if(!t.match(sx))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Ix){return null}}(e);if(r&&r.getTime()>=vg.timestamp&&"object"===typeof i&&i&&"string"===typeof i.code?s=i.code:"object"===typeof i&&i&&"string"===typeof i.error_code&&(s=i.error_code),s){if("weak_password"===s)throw new Og(dx(i),e.status,(null===(t=i.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new Cg}else if("object"===typeof i&&i&&"object"===typeof i.weak_password&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Og(dx(i),e.status,i.weak_password.reasons);throw new jg(dx(i),e.status||500,s)}async function mx(e,t,n,i){var s;const r=Object.assign({},null===i||void 0===i?void 0:i.headers);r[bg]||(r[bg]=vg.name),(null===i||void 0===i?void 0:i.jwt)&&(r.Authorization=`Bearer ${i.jwt}`);const a=null!==(s=null===i||void 0===i?void 0:i.query)&&void 0!==s?s:{};(null===i||void 0===i?void 0:i.redirectTo)&&(a.redirect_to=i.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,i,s,r){const a=((e,t,n,i)=>{const s={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),s.body=JSON.stringify(i),Object.assign(Object.assign({},s),n))})(t,i,s,r);let o;try{o=await e(n,Object.assign({},a))}catch(Ix){throw console.error(Ix),new Lg(dx(Ix),0)}o.ok||await hx(o);if(null===i||void 0===i?void 0:i.noResolveJson)return o;try{return await o.json()}catch(Ix){await hx(Ix)}}(e,t,n+o,{headers:r,noResolveJson:null===i||void 0===i?void 0:i.noResolveJson},{},null===i||void 0===i?void 0:i.body);return(null===i||void 0===i?void 0:i.xform)?null===i||void 0===i?void 0:i.xform(l):{data:Object.assign({},l),error:null}}function px(e){var t;let n=null;var i;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(i=e.expires_in,Math.round(Date.now()/1e3)+i)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function fx(e){const t=px(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function gx(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function xx(e){return{data:e,error:null}}function yx(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:s,verification_type:r}=e,a=cx(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:i,redirect_to:s,verification_type:r},user:Object.assign({},a)},error:null}}function bx(e){return e}const vx=["global","local","others"];var wx=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};class _x{constructor(e){let{url:t="",headers:n={},fetch:i}=e;this.url=t,this.headers=n,this.fetch=Kg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vx[0];if(vx.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vx.join(", ")}`);try{return await mx(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(kg(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await mx(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:gx})}catch(n){if(kg(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=wx(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=null===n||void 0===n?void 0:n.newEmail,delete i.newEmail),await mx(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:yx,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(kg(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await mx(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gx})}catch(t){if(kg(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,s,r,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await mx(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(i=null===e||void 0===e?void 0:e.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:bx});if(c.error)throw c.error;const d=await c.json(),u=null!==(r=c.headers.get("x-total-count"))&&void 0!==r?r:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(kg(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){ax(e);try{return await mx(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gx})}catch(t){if(kg(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ax(e);try{return await mx(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:gx})}catch(n){if(kg(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ax(e);try{return await mx(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:gx})}catch(n){if(kg(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ax(e.userId);try{const{data:t,error:n}=await mx(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(kg(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ax(e.userId),ax(e.id);try{return{data:await mx(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(kg(t))return{data:null,error:t};throw t}}}function kx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const jx=!!(globalThis&&Yg()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Nx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Sx extends Nx{}async function Cx(e,t,n){jx&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),jx&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async i=>{if(!i){if(0===t)throw jx&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Sx(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(jx)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(Ix){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",Ix)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}jx&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{jx&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Ix){"undefined"!==typeof self&&(self.globalThis=self)}}();const Px={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Tx(e,t,n){return await n()}const Ex={};class Mx{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mx.nextInstanceID,Mx.nextInstanceID+=1,this.instanceID>0&&qg()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Px),e);if(this.logDebugMessages=!!i.debug,"function"===typeof i.debug&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new _x({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Kg(i.fetch),this.lock=i.lock||Tx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:qg()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Cx:this.lock=Tx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Yg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=kx(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=kx(this.memoryStorage)),qg()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Ix){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Ix)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Ex[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Ex[this.storageKey]=Object.assign(Object.assign({},Ex[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Ex[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ex[this.storageKey]=Object.assign(Object.assign({},Ex[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(`GoTrueClient@${this.instanceID} (${fg}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(Ix){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),qg()&&this.detectSessionInUrl&&"none"!==n){const{data:i,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return kg(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:r,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",r,"redirect type",a),await this._saveSession(r),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return kg(t)?{error:t}:{error:new Ng("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const s=await mx(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(i=null===e||void 0===e?void 0:e.options)||void 0===i?void 0:i.captchaToken}},xform:px}),{data:r,error:a}=s;if(a||!r)return{data:{user:null,session:null},error:a};const o=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(kg(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,i;try{let s;if("email"in e){const{email:n,password:i,options:r}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await ix(this.storage,this.storageKey)),s=await mx(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo,body:{email:n,password:i,data:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},code_challenge:a,code_challenge_method:o},xform:px})}else{if(!("phone"in e))throw new Tg("You must provide either an email or phone number and a password");{const{phone:t,password:r,options:a}=e;s=await mx(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:r,data:null!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(i=null===a||void 0===a?void 0:a.channel)&&void 0!==i?i:"sms",gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:px})}}const{data:r,error:a}=s;if(a||!r)return{data:{user:null,session:null},error:a};const o=r.session,l=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(kg(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:i,options:s}=e;t=await mx(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:i,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:fx})}else{if(!("phone"in e))throw new Tg("You must provide either an email or phone number and a password");{const{phone:n,password:i,options:s}=e;t=await mx(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:i,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:fx})}}const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i}):{data:{user:null,session:null},error:new Pg}}catch(t){if(kg(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,i,s,r,a,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:g}=e;let x;if(qg())if("object"===typeof h)x=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=h}const y=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in x)||"function"!==typeof x.signMessage||!("publicKey"in x)||"object"!==typeof x||!x.publicKey||!("toBase58"in x.publicKey)||"function"!==typeof x.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${y.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(i=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==i?i:(new Date).toISOString()}`,...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await x.signMessage((new TextEncoder).encode(m),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await mx(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Vg(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:px});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Pg}}catch(f){if(kg(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await Jg(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:s}=await mx(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:px});if(await Xg(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==i&&void 0!==i?i:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new Pg}}catch(s){if(kg(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:s,nonce:r}=e,a=await mx(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:r,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:px}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Pg}}catch(t){if(kg(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,i,s,r;try{if("email"in e){const{email:i,options:s}=e;let r=null,a=null;"pkce"===this.flowType&&([r,a]=await ix(this.storage,this.storageKey));const{error:o}=await mx(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:i,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(n=null===s||void 0===s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:r,code_challenge_method:a},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await mx(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(i=null===n||void 0===n?void 0:n.data)&&void 0!==i?i:{},create_user:null===(s=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(r=null===n||void 0===n?void 0:n.channel)&&void 0!==r?r:"sms"}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:o}}throw new Tg("You must provide either an email or phone number.")}catch(a){if(kg(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let i,s;"options"in e&&(i=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:r,error:a}=await mx(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:px});if(a)throw a;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,l=r.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(kg(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,n,i;try{let s=null,r=null;return"pkce"===this.flowType&&([s,r]=await ix(this.storage,this.storageKey)),await mx(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(i=null===e||void 0===e?void 0:e.options)||void 0===i?void 0:i.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:r}),headers:this.headers,xform:xx})}catch(s){if(kg(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Cg;const{error:i}=await mx(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(kg(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:r}=await mx(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:r}}if("phone"in e){const{phone:n,type:i,options:s}=e,{data:r,error:a}=await mx(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null===r||void 0===r?void 0:r.message_id},error:a}}throw new Tg("You must provide either an email or phone number and a type")}catch(t){if(kg(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(Ix){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Ix){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Jg(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<xg;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Jg(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=ox()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,i)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,i))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await mx(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gx}):await this._useSession(async e=>{var t,n,i;const{data:s,error:r}=e;if(r)throw r;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await mx(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(i=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0,xform:gx}):{data:{user:null},error:new Cg}})}catch(t){if(kg(t))return function(e){return kg(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Xg(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new Cg;const r=i.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await ix(this.storage,this.storageKey));const{data:l,error:c}=await mx(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:r.access_token,xform:gx});if(c)throw c;return r.user=l.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(n){if(kg(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Cg;const t=Date.now()/1e3;let n=t,i=!0,s=null;const{payload:r}=ex(e.access_token);if(r.exp&&(n=r.exp,i=n<=t),i){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:i,error:r}=await this._getUser(e.access_token);if(r)throw r;s={access_token:e.access_token,refresh_token:e.refresh_token,user:i.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(kg(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:i,error:s}=t;if(s)throw s;e=null!==(n=i.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Cg;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(kg(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!qg())throw new Eg("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Eg(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Mg("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Eg("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Mg("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const i=new URL(window.location.href);return i.searchParams.delete("code"),window.history.replaceState(window.history.state,"",i.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:r,expires_in:a,expires_at:o,token_type:l}=e;if(!s||!a||!r||!l)throw new Eg("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=gg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:f}=await this._getUser(s);if(f)throw f;const g={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:u,refresh_token:r,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(kg(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Jg(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{error:s};const r=null===(n=i.session)||void 0===n?void 0:n.access_token;if(r){const{error:t}=await this.admin.signOut(r,e);if(t&&(!function(e){return kg(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Xg(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:i},error:s}=t;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(s){await(null===(i=this.stateChangeEmitters.get(e))||void 0===i?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,i=null;"pkce"===this.flowType&&([n,i]=await ix(this.storage,this.storageKey,!0));try{return await mx(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(kg(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(kg(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:i}=await this._useSession(async t=>{var n,i,s,r,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(i=e.options)||void 0===i?void 0:i.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await mx(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(r=o.session)||void 0===r?void 0:r.access_token)&&void 0!==a?a:void 0})});if(i)throw i;return qg()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(kg(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:r}=t;if(r)throw r;return await mx(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(i=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0})})}catch(t){if(kg(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await function(e,t){const n=new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await e(s);if(!t(s,null,i))return void n(i)}catch(Ix){if(!t(s,Ix))return void i(Ix)}})()});return n}(async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await mx(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:px})),(e,t)=>{const i=200*Math.pow(2,e);return t&&Ag(t)&&Date.now()+i-n<gg})}catch(n){if(this._debug(t,"error",n),kg(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),qg()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Jg(this.storage,this.storageKey);if(s&&this.userStorage){let t=await Jg(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:s.user},await Gg(this.userStorage,this.storageKey+"-user",t)),s.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:ox()}else if(s&&!s.user&&!s.user){const e=await Jg(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(s.user=e.user,await Xg(this.storage,this.storageKey+"-user"),await Gg(this.storage,this.storageKey,s)):s.user=ox()}if(this._debug(n,"session from storage",s),!this._isValidSession(s))return this._debug(n,"session is not valid"),void(null!==s&&await this._removeSession());const r=1e3*(null!==(t=s.expires_at)&&void 0!==t?t:1/0)-Date.now()<xg;if(this._debug(n,`session has${r?"":" not"} expired with margin of 90000s`),r){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),Ag(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(s.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return this._debug(n,"error",s),void console.error(s)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Cg;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Qg;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Cg;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const i={session:t.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(s){if(this._debug(i,"error",s),kg(s)){const e={session:null,error:s};return Ag(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(Ix){i.push(Ix)}});if(await Promise.all(s),i.length>0){for(let e=0;e<i.length;e+=1)console.error(i[e]);throw i[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Gg(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const i=lx(e);await Gg(this.storage,this.storageKey,i)}else{const e=lx(t);await Gg(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Xg(this.storage,this.storageKey),await Xg(this.storage,this.storageKey+"-code-verifier"),await Xg(this.storage,this.storageKey+"-user"),this.userStorage&&await Xg(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qg()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Ix){console.error("removing visibilitychange callback failed",Ix)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gg);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const i=Math.floor((1e3*n.expires_at-e)/gg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),i<=3&&await this._callRefreshToken(n.refresh_token)})}catch(Ix){console.error("Auto refresh tick failed with error. This is likely a transient error.",Ix)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Ix){if(!(Ix.isAcquireTimeout||Ix instanceof Nx))throw Ix;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qg()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if((null===n||void 0===n?void 0:n.redirectTo)&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null===n||void 0===n?void 0:n.scopes)&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await ix(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});i.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);i.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await mx(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token})})}catch(t){if(kg(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:r}=t;if(r)return{data:null,error:r};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await mx(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(i=null===o||void 0===o?void 0:o.totp)||void 0===i?void 0:i.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(kg(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:r,error:a}=await mx(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:a})})}catch(t){if(kg(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await mx(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token})})}catch(t){if(kg(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],i=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),s=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=ex(i.access_token);let a=null;r.aal&&(a=r.aal);let o=a;(null!==(n=null===(t=i.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:r.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:i,error:s}=await mx(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return i.keys&&0!==i.keys.length?(this.jwks=i,this.jwks_cached_at=n,t=i.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:i,payload:s,signature:r,raw:{header:a,payload:o}}=ex(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp);const l=i.alg&&!i.alg.startsWith("HS")&&i.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(i.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:s,header:i,signature:r},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(i.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,r,function(e){const t=[];return Wg(e,e=>t.push(e)),new Uint8Array(t)}(`${a}.${o}`)))throw new Rg("Invalid JWT signature");return{data:{claims:s,header:i,signature:r},error:null}}catch(n){if(kg(n))return{data:null,error:n};throw n}}}Mx.nextInstanceID=0;const Lx=Mx;class Ax extends Lx{constructor(e){super(e)}}var Ox=function(e,t,n,i){return new(n||(n=Promise))(function(s,r){function a(e){try{l(i.next(e))}catch(Ix){r(Ix)}}function o(e){try{l(i.throw(e))}catch(Ix){r(Ix)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})};class Rx{constructor(e,t,n){var i,s,r;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var n,i;const{db:s,auth:r,realtime:a,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(n=null===u||void 0===u?void 0:u.headers)&&void 0!==n?n:{}),null!==(i=null===o||void 0===o?void 0:o.headers)&&void 0!==i?i:{})}),accessToken:()=>pg(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:og,realtime:cg,auth:Object.assign(Object.assign({},lg),{storageKey:c}),global:ag});this.storageKey=null!==(i=d.auth.storageKey)&&void 0!==i?i:"",this.headers=null!==(s=d.global.headers)&&void 0!==s?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(r=d.auth)&&void 0!==r?r:{},this.headers,d.global.fetch),this.fetch=mg(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new ef(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new sg(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Xp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ox(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:i,persistSession:s,detectSessionInUrl:r,storage:a,storageKey:o,flowType:l,lock:c,debug:d}=e;const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ax({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),t),storageKey:o,autoRefreshToken:i,persistSession:s,detectSessionInUrl:r,storage:a,flowType:l,lock:c,debug:d,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Of(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}(function(){if("undefined"!==typeof window||"undefined"===typeof process||void 0===process.version||null===process.version)return!1;const e=process.version.match(/^v(\d+)\./);return!!e&&parseInt(e[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Dx=new Rx("https://dngapqoyfcgehyltxugo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRuZ2FwcW95ZmNnZWh5bHR4dWdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3ODk2NTIsImV4cCI6MjA2OTM2NTY1Mn0.6OUC0Y8Z7IjCwQ8seP8ytF6X_56t_-3GTiU-lObUlqE",Bx);var Bx;const zx=()=>{const[e,n]=(0,t.useState)([]),[i,s]=(0,t.useState)(null),[r,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(0),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(null),m=(0,t.useRef)(null),p=(0,t.useRef)(null),f=(0,t.useCallback)(async()=>{try{d(!0),console.log("\ud83d\udd0d Fetching conversations...");const e=await gh.get("/api/messages/conversations");console.log("\u2705 Conversations fetched:",e.data),n(e.data.conversations||[]);const t=(e.data.conversations||[]).reduce((e,t)=>e+(t.unread_count||0),0);l(t),h(null)}catch(s){var e,t,i;console.error("\u274c Error fetching conversations:",s),console.error("Error details:",null===(e=s.response)||void 0===e?void 0:e.data),h((null===(t=s.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.error)||"Failed to load conversations")}finally{d(!1)}},[]),g=(0,t.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{d(!0);const n=new URLSearchParams;t.limit&&n.append("limit",t.limit),t.before&&n.append("before",t.before);const i=await gh.get(`/api/messages/conversations/${e}/messages?${n}`);a(i.data.messages||[]),h(null)}catch(s){var n,i;console.error("Error fetching messages:",s),h((null===(n=s.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.error)||"Failed to load messages")}finally{d(!1)}},[]),x=(0,t.useCallback)(async e=>{try{d(!0);const t=await gh.post("/api/messages/conversations",{businessId:e}),n=t.data.conversation;return t.data.isNew&&await f(),s(n),h(null),n}catch(i){var t,n;throw console.error("Error creating conversation:",i),h((null===(t=i.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to create conversation"),i}finally{d(!1)}},[f]),y=(0,t.useCallback)(async(e,t)=>{try{const i=(await gh.post(`/api/messages/conversations/${e}/messages`,{content:t})).data.message;return a(e=>[...e,i]),n(n=>n.map(n=>n.id===e?{...n,last_message:t,last_message_at:i.created_at}:n)),h(null),i}catch(r){var i,s;throw console.error("Error sending message:",r),h((null===(i=r.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.error)||"Failed to send message"),r}},[]),b=(0,t.useCallback)(async t=>{try{await gh.put(`/api/messages/conversations/${t}/read`),a(e=>e.map(e=>({...e,is_read:!0,read_at:(new Date).toISOString()}))),n(e=>e.map(e=>e.id===t?{...e,unread_count:0}:e)),l(n=>{var i;return Math.max(0,n-(null===(i=e.find(e=>e.id===t))||void 0===i?void 0:i.unread_count)||0)}),h(null)}catch(r){var i,s;console.error("Error marking messages as read:",r),h((null===(i=r.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.error)||"Failed to mark messages as read")}},[e]),v=(0,t.useCallback)(async e=>{try{await gh.delete(`/api/messages/conversations/${e}`),n(t=>t.filter(t=>t.id!==e)),(null===i||void 0===i?void 0:i.id)===e&&(s(null),a([])),h(null)}catch(o){var t,r;throw console.error("Error deleting conversation:",o),h((null===(t=o.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||"Failed to delete conversation"),o}},[i]);return(0,t.useEffect)(()=>{if(null===i||void 0===i||!i.id)return void(p.current&&(Dx.removeChannel(p.current),p.current=null));const e=Dx.channel(`messages:${i.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${i.id}`},async e=>{console.log("\ud83d\udd14 New message received:",e.new);try{const t=await gh.get(`/api/messages/conversations/${i.id}/messages?limit=1`),s=t.data.messages[t.data.messages.length-1];a(e=>e.some(e=>e.id===s.id)?e:(console.log("\u2705 Adding message to list:",s),[...e,s])),n(t=>t.map(t=>t.id===i.id?{...t,last_message:e.new.content,last_message_at:e.new.created_at}:t))}catch(u){console.error("Error fetching message details:",u),a(t=>t.some(t=>t.id===e.new.id)?t:[...t,e.new])}}).subscribe();return p.current=e,()=>{p.current&&(Dx.removeChannel(p.current),p.current=null)}},[null===i||void 0===i?void 0:i.id]),(0,t.useEffect)(()=>{const e=Dx.channel("conversations").on("postgres_changes",{event:"*",schema:"public",table:"conversations"},async e=>{console.log("\ud83d\udd14 Conversation update:",e.eventType,e),"INSERT"===e.eventType?(console.log("\ud83d\udcdd New conversation created, refreshing list..."),await f()):"UPDATE"===e.eventType?(console.log("\ud83d\udcdd Conversation updated:",e.new),n(t=>t.map(t=>t.id===e.new.id?{...t,last_message:e.new.last_message,last_message_at:e.new.last_message_at,updated_at:e.new.updated_at}:t).sort((e,t)=>new Date(t.updated_at||t.created_at)-new Date(e.updated_at||e.created_at))),(null===i||void 0===i?void 0:i.id)!==e.new.id&&(console.log("\ud83d\udd14 Updating unread count for conversation:",e.new.id),await f())):"DELETE"===e.eventType&&(console.log("\ud83d\uddd1\ufe0f Conversation deleted:",e.old.id),n(t=>t.filter(t=>t.id!==e.old.id)))}).subscribe();return m.current=e,()=>{m.current&&(Dx.removeChannel(m.current),m.current=null)}},[f]),(0,t.useEffect)(()=>{const e=async()=>{try{const e=await gh.get("/api/messages/unread-count");l(e.data.unread_count||0)}catch(e){console.error("Error fetching unread count:",e)}};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]),{conversations:e,activeConversation:i,messages:r,unreadCount:o,loading:c,error:u,fetchConversations:f,fetchMessages:g,createConversation:x,sendMessage:y,markAsRead:b,deleteConversation:v,setActiveConversation:s}};let Ix={data:""},Fx=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Ix,Ux=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,$x=/\/\*[^]*?\*\/|  +/g,Wx=/\n+/g,Hx=(e,t)=>{let n="",i="",s="";for(let r in e){let a=e[r];"@"==r[0]?"i"==r[1]?n=r+" "+a+";":i+="f"==r[1]?Hx(a,r):r+"{"+Hx(a,"k"==r[1]?"":t)+"}":"object"==typeof a?i+=Hx(a,t?t.replace(/([^,])+/g,e=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):r):null!=a&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Hx.p?Hx.p(r,a):r+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+i},Vx={},qx=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+qx(e[n]);return t}return e},Zx=(e,t,n,i,s)=>{let r=qx(e),a=Vx[r]||(Vx[r]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(r));if(!Vx[a]){let t=r!==e?e:(e=>{let t,n,i=[{}];for(;t=Ux.exec(e.replace($x,""));)t[4]?i.shift():t[3]?(n=t[3].replace(Wx," ").trim(),i.unshift(i[0][n]=i[0][n]||{})):i[0][t[1]]=t[2].replace(Wx," ").trim();return i[0]})(e);Vx[a]=Hx(s?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&Vx.g?Vx.g:null;return n&&(Vx.g=Vx[a]),((e,t,n,i)=>{i?t.data=t.data.replace(i,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Vx[a],t,i,o),a};function Yx(e){let t=this||{},n=e.call?e(t.p):e;return Zx(n.unshift?n.raw?((e,t,n)=>e.reduce((e,i,s)=>{let r=t[s];if(r&&r.call){let e=r(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;r=t?"."+t:e&&"object"==typeof e?e.props?"":Hx(e,""):!1===e?"":e}return e+i+(null==r?"":r)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,Fx(t.target),t.g,t.o,t.k)}Yx.bind({g:1});let Kx,Gx,Jx,Xx=Yx.bind({k:1});function Qx(e,t){let n=this||{};return function(){let i=arguments;function s(r,a){let o=Object.assign({},r),l=o.className||s.className;n.p=Object.assign({theme:Gx&&Gx()},o),n.o=/ *go\d+/.test(l),o.className=Yx.apply(n,i)+(l?" "+l:""),t&&(o.ref=a);let c=e;return e[0]&&(c=o.as||e,delete o.as),Jx&&c[0]&&Jx(o),Kx(c,o)}return t?t(s):s}}var ey=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,ty=(()=>{let e=0;return()=>(++e).toString()})(),ny=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),iy="default",sy=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:i}=t;return sy(e,{type:e.toasts.find(e=>e.id===i.id)?1:0,toast:i});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+r}))}}},ry=[],ay={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},oy={},ly=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iy;oy[t]=sy(oy[t]||ay,e),ry.forEach(e=>{let[n,i]=e;n===t&&i(oy[t])})},cy=e=>Object.keys(oy).forEach(t=>ly(e,t)),dy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iy;return t=>{ly(t,e)}},uy=e=>(t,n)=>{let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||ty()}}(t,e,n);return dy(i.toasterId||(e=>Object.keys(oy).find(t=>oy[t].toasts.some(t=>t.id===e)))(i.id))({type:2,toast:i}),i.id},hy=(e,t)=>uy("blank")(e,t);hy.error=uy("error"),hy.success=uy("success"),hy.loading=uy("loading"),hy.custom=uy("custom"),hy.dismiss=(e,t)=>{let n={type:3,toastId:e};t?dy(t)(n):cy(n)},hy.dismissAll=e=>hy.dismiss(void 0,e),hy.remove=(e,t)=>{let n={type:4,toastId:e};t?dy(t)(n):cy(n)},hy.removeAll=e=>hy.remove(void 0,e),hy.promise=(e,t,n)=>{let i=hy.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?ey(t.success,e):void 0;return s?hy.success(s,{id:i,...n,...null==n?void 0:n.success}):hy.dismiss(i),e}).catch(e=>{let s=t.error?ey(t.error,e):void 0;s?hy.error(s,{id:i,...n,...null==n?void 0:n.error}):hy.dismiss(i)}),e};var my=Xx`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,py=Xx`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fy=Xx`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,gy=Qx("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${my} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${py} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${fy} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,xy=Xx`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,yy=Qx("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${xy} 1s linear infinite;
`,by=Xx`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,vy=Xx`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,wy=Qx("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${by} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${vy} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,_y=Qx("div")`
  position: absolute;
`,ky=Qx("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,jy=Xx`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ny=Qx("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${jy} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Sy=e=>{let{toast:n}=e,{icon:i,type:s,iconTheme:r}=n;return void 0!==i?"string"==typeof i?t.createElement(Ny,null,i):i:"blank"===s?null:t.createElement(ky,null,t.createElement(yy,{...r}),"loading"!==s&&t.createElement(_y,null,"error"===s?t.createElement(gy,{...r}):t.createElement(wy,{...r})))},Cy=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,Py=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,Ty=Qx("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ey=Qx("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`;t.memo(e=>{let{toast:n,position:i,style:s,children:r}=e,a=n.height?((e,t)=>{let n=e.includes("top")?1:-1,[i,s]=ny()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Cy(n),Py(n)];return{animation:t?`${Xx(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Xx(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(n.position||i||"top-center",n.visible):{opacity:0},o=t.createElement(Sy,{toast:n}),l=t.createElement(Ey,{...n.ariaProps},ey(n.message,n));return t.createElement(Ty,{className:n.className,style:{...a,...s,...n.style}},"function"==typeof r?r({icon:o,message:l}):t.createElement(t.Fragment,null,o,l))});!function(e,t,n,i){Hx.p=t,Kx=e,Gx=n,Jx=i}(t.createElement);Yx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var My=hy;const Ly=e=>{let{searchTerm:t,setSearchTerm:n,filters:i,setFilters:s,businessTypes:r,filteredBusinesses:a,currentBusinesses:o,totalPages:l,currentPage:c,setCurrentPage:d,handleBusinessSelect:u,handleBookNow:h,navigate:m,loading:p,setShowMapModal:f,getCurrentLocation:g}=e;return(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-8",children:[(0,ft.jsxs)(gc.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1},children:[(0,ft.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"Discover Amazing Businesses"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-base sm:text-lg max-w-2xl mx-auto px-4 sm:px-0",children:"Find and book the perfect service for your needs. From barbershops to restaurants, we've got you covered."})]}),(0,ft.jsxs)(gc.div,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-4 sm:p-6 border border-gray-100 dark:border-gray-700",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,ft.jsxs)("div",{className:"flex flex-col lg:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6",children:[(0,ft.jsx)("div",{className:"flex-1",children:(0,ft.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Search businesses, services, or locations...",value:t,onChange:e=>n(e.target.value),className:"w-full px-4 sm:px-6 py-3 sm:py-4 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 text-base sm:text-lg transition-all duration-200"})}),(0,ft.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,ft.jsx)("select",{value:i.type,onChange:e=>s(t=>({...t,type:e.target.value})),className:"px-4 sm:px-6 py-3 sm:py-4 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white min-w-[180px] transition-all duration-200 text-sm sm:text-base",children:r.map(e=>(0,ft.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,ft.jsx)("input",{type:"text",placeholder:"\ud83d\udccd Location...",value:i.location,onChange:e=>s(t=>({...t,location:e.target.value})),className:"px-4 sm:px-6 py-3 sm:py-4 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 min-w-[200px] transition-all duration-200 text-sm sm:text-base"})]})]}),(0,ft.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[(0,ft.jsxs)(gc.p,{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",initial:{opacity:0},animate:{opacity:1},children:[(0,ft.jsx)("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:a.length})," businesses found"]},a.length),(0,ft.jsx)("div",{className:"flex gap-2",children:(0,ft.jsxs)("button",{onClick:()=>{f(!0),g()},className:"px-3 sm:px-4 py-2 text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 transition-colors dark:text-blue-400 dark:border-blue-400 dark:hover:bg-blue-900 flex items-center gap-2 text-sm sm:text-base",children:[(0,ft.jsx)("span",{children:"\ud83d\uddfa\ufe0f"}),"Map View"]})})]})]}),(0,ft.jsx)(gc.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},children:o.map(e=>(0,ft.jsx)(gc.div,{variants:{hidden:{opacity:0,y:30,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:30}}},children:(0,ft.jsx)(By,{business:e,onSelect:u,onBookNow:h})},e.id))}),l>1&&(0,ft.jsx)(gc.div,{className:"flex justify-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:(0,ft.jsxs)("nav",{className:"flex space-x-2",children:[(0,ft.jsx)("button",{onClick:()=>d(e=>Math.max(e-1,1)),disabled:1===c,className:"px-4 py-2 text-gray-500 hover:text-gray-700 disabled:opacity-50 dark:text-gray-400 dark:hover:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200",children:"\u2190 Previous"}),[...Array(l)].map((e,t)=>(0,ft.jsx)("button",{onClick:()=>d(t+1),className:"px-4 py-2 rounded-lg transition-all duration-200 "+(c===t+1?"bg-blue-600 text-white shadow-lg dark:bg-blue-500":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"),children:t+1},t+1)),(0,ft.jsx)("button",{onClick:()=>d(e=>Math.min(e+1,l)),disabled:c===l,className:"px-4 py-2 text-gray-500 hover:text-gray-700 disabled:opacity-50 dark:text-gray-400 dark:hover:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200",children:"Next \u2192"})]})}),0===a.length&&!p&&(0,ft.jsxs)(gc.div,{className:"text-center py-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,ft.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd0d"}),(0,ft.jsx)("p",{className:"text-gray-500 text-xl dark:text-gray-400 mb-6",children:"No businesses found matching your criteria."}),(0,ft.jsx)("button",{onClick:()=>{n(""),s({type:"",location:"",rating:"",priceRange:""})},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Clear All Filters"})]})]})},Ay=e=>{let{userBookings:n,setActiveSection:i,onShowBookingDetails:s,onShowReschedule:r,onShowCancel:a}=e;const[o,l]=(0,t.useState)("date"),[c,d]=(0,t.useState)("all"),[u,h]=(0,t.useState)(""),m=(0,t.useMemo)(()=>{if(!Array.isArray(n))return[];let e=n.filter(e=>{const t=e.business_name.toLowerCase().includes(u.toLowerCase()),n="all"===c||e.status===c;return t&&n});return e.sort((e,t)=>{switch(o){case"date":return new Date(t.booking_date)-new Date(e.booking_date);case"status":const n={confirmed:0,pending:1,completed:2,cancelled:3};return n[e.status]-n[t.status];case"business":return e.business_name.localeCompare(t.business_name);default:return 0}}),e},[n,o,c,u]),p=Array.isArray(n)?n.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e.total=(e.total||0)+1,e),{}):{};return(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-center mb-6",children:[(0,ft.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 via-blue-600 to-purple-600 bg-clip-text text-transparent mb-3",children:"My Bookings"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your reservations and appointments"})]}),Array.isArray(n)&&0!==n.length?(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsxs)(gc.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.05}}},children:[(0,ft.jsx)(gc.div,{variants:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}},className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-3 border border-blue-200 dark:border-blue-700/50",children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:p.total||0}),(0,ft.jsx)("p",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium",children:"Total"})]}),(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udcca"})]})}),(0,ft.jsx)(gc.div,{variants:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}},className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-3 border border-green-200 dark:border-green-700/50",children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:p.confirmed||0}),(0,ft.jsx)("p",{className:"text-xs text-green-700 dark:text-green-300 font-medium",children:"Confirmed"})]}),(0,ft.jsx)("span",{className:"text-lg",children:"\u2705"})]})}),(0,ft.jsx)(gc.div,{variants:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}},className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-3 border border-yellow-200 dark:border-yellow-700/50",children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-xl font-bold text-yellow-600 dark:text-yellow-400",children:p.pending||0}),(0,ft.jsx)("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 font-medium",children:"Pending"})]}),(0,ft.jsx)("span",{className:"text-lg",children:"\u23f3"})]})}),(0,ft.jsx)(gc.div,{variants:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}},className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-3 border border-purple-200 dark:border-purple-700/50",children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:p.completed||0}),(0,ft.jsx)("p",{className:"text-xs text-purple-700 dark:text-purple-300 font-medium",children:"Completed"})]}),(0,ft.jsx)("span",{className:"text-lg",children:"\ud83c\udf89"})]})})]}),(0,ft.jsx)(gc.div,{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md border border-gray-200 dark:border-gray-700",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,ft.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,ft.jsx)("div",{className:"flex-1",children:(0,ft.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Search by business name...",value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 transition-all duration-200"})}),(0,ft.jsxs)("div",{className:"flex gap-2",children:[(0,ft.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white min-w-[120px] text-sm",children:[(0,ft.jsx)("option",{value:"all",children:"All Status"}),(0,ft.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,ft.jsx)("option",{value:"pending",children:"Pending"}),(0,ft.jsx)("option",{value:"completed",children:"Completed"}),(0,ft.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,ft.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white min-w-[120px] text-sm",children:[(0,ft.jsx)("option",{value:"date",children:"Sort by Date"}),(0,ft.jsx)("option",{value:"status",children:"Sort by Status"}),(0,ft.jsx)("option",{value:"business",children:"Sort by Business"})]})]})]})}),(0,ft.jsx)(gc.div,{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.4}}},children:(0,ft.jsx)(At,{children:0===m.length?(0,ft.jsxs)(gc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"col-span-full text-center py-8 bg-gray-50 dark:bg-gray-800/50 rounded-xl",children:[(0,ft.jsx)("span",{className:"text-4xl mb-2 block",children:"\ud83d\udd0d"}),(0,ft.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No bookings match your search criteria"})]}):m.map((e,t)=>(0,ft.jsx)(gc.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{delay:.05*t}}},layout:!0,children:(0,ft.jsx)(zy,{booking:e,onShowDetails:s,onShowReschedule:r,onShowCancel:a})},e.id))})})]}):(0,ft.jsxs)(gc.div,{className:"text-center py-20 bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-blue-900/20 rounded-3xl shadow-xl border border-gray-100 dark:border-gray-700",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},children:[(0,ft.jsx)(gc.div,{className:"text-8xl mb-8",animate:{rotate:[0,10,-10,0],scale:[1,1.1,1,1.05,1]},transition:{duration:2,repeat:1/0,repeatType:"reverse",ease:"easeInOut"},children:"\ud83d\udcc5"}),(0,ft.jsx)("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4",children:"No bookings yet"}),(0,ft.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-8 text-lg max-w-md mx-auto",children:"Start by discovering amazing businesses near you and make your first reservation!"}),(0,ft.jsxs)(gc.button,{onClick:()=>i("discover"),className:"px-8 py-4 bg-gradient-to-r from-blue-600 via-purple-600 to-blue-700 text-white rounded-2xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 font-medium text-lg",whileHover:{scale:1.05,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.95},children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ud83d\udd0d"}),"Discover Businesses"]})]})]})},Oy=e=>{var n,i,s;let{userBusiness:r,businessReservations:a=[],handleReservationStatusUpdate:o,onBusinessUpdate:l,businessRating:c}=e;const[d,u]=(0,t.useState)("overview"),[h,m]=(0,t.useState)(!1),[p,f]=(0,t.useState)({name:"",type:"",phone:"",location:"",description:"",latitude:"",longitude:"",instagram_url:"",facebook_url:"",business_hours:null}),[g,x]=(0,t.useState)(!1),[y,b]=(0,t.useState)("");(0,t.useEffect)(()=>{r&&(console.log("useEffect: Initializing editFormData with userBusiness:",r),console.log("useEffect: userBusiness.business_hours:",r.business_hours),f({name:r.name||"",type:r.type||"",phone:r.phone||"",location:r.location||"",description:r.description||"",latitude:r.latitude||"",longitude:r.longitude||"",instagram_url:r.instagram_url||"",facebook_url:r.facebook_url||"",business_hours:r.business_hours||null}),console.log("useEffect: Set business_hours to:",r.business_hours||null))},[r]);const v=()=>{m(!h),b(""),h||(console.log("handleEditToggle: Entering edit mode with userBusiness:",r),console.log("handleEditToggle: Current userBusiness.business_hours:",null===r||void 0===r?void 0:r.business_hours),f({name:(null===r||void 0===r?void 0:r.name)||"",type:(null===r||void 0===r?void 0:r.type)||"",phone:(null===r||void 0===r?void 0:r.phone)||"",location:(null===r||void 0===r?void 0:r.location)||"",description:(null===r||void 0===r?void 0:r.description)||"",latitude:(null===r||void 0===r?void 0:r.latitude)||"",longitude:(null===r||void 0===r?void 0:r.longitude)||"",instagram_url:(null===r||void 0===r?void 0:r.instagram_url)||"",facebook_url:(null===r||void 0===r?void 0:r.facebook_url)||"",business_hours:(null===r||void 0===r?void 0:r.business_hours)||null}),console.log("handleEditToggle: Set editFormData.business_hours to:",(null===r||void 0===r?void 0:r.business_hours)||null))},w=(e,t)=>{f(n=>({...n,[e]:t}))},_=(0,t.useCallback)(e=>{console.log("Business hours changed:",e),f(t=>({...t,business_hours:e}))},[]),k=t.useMemo(()=>{const e=Array.isArray(a)?a:[],t=new Date,n=(new Date).toDateString(),i=t.getMonth(),s=t.getFullYear(),r=e.filter(e=>e.date&&new Date(e.date).toDateString()===n).length,o=e.filter(e=>{if(!e.date)return!1;const t=new Date(e.date);return t.getMonth()===i&&t.getFullYear()===s}).length,l=e.filter(e=>"confirmed"===e.status).reduce((e,t)=>e+(t.price||0),0),d=e.filter(e=>"pending"===e.status).length;return{todayReservations:r,monthlyReservations:o,totalReservations:e.length,pendingReservations:d,totalRevenue:l,averageRating:null!==c?c.toFixed(1):"0.0"}},[a,c]),j=[{id:"overview",label:"Overview",icon:"\ud83d\udcca",description:"Dashboard & Analytics"},{id:"reservations",label:"Reservations",icon:"\ud83d\udcc5",description:"Manage Bookings"+(k.pendingReservations>0?` (${k.pendingReservations} pending)`:""),badge:k.pendingReservations||null},{id:"details",label:"Business Details",icon:"\ud83c\udfe2",description:"Edit Information"}],N=Array.isArray(a)?a:[];return(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[(0,ft.jsx)("div",{className:"flex items-center justify-between",children:(0,ft.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"My Business Management"})}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,ft.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-2xl font-bold",children:(null===r||void 0===r||null===(n=r.name)||void 0===n?void 0:n.charAt(0))||"B"}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(null===r||void 0===r?void 0:r.name)||"My Business"}),(0,ft.jsxs)("p",{className:"text-gray-500 dark:text-gray-400 capitalize",children:[(null===r||void 0===r||null===(i=r.type)||void 0===i?void 0:i.replace("_"," "))||"Business"," \u2022 ",(null===r||void 0===r?void 0:r.location)||"No location set"]}),(0,ft.jsxs)("div",{className:"flex items-center mt-2 space-x-4",children:[(0,ft.jsxs)("span",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:["\ud83d\udcde ",(null===r||void 0===r?void 0:r.phone)||"No phone"]}),(0,ft.jsxs)("span",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:["\u2709\ufe0f ",(null===r||void 0===r?void 0:r.email)||"No email"]})]})]})]}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,ft.jsx)("div",{className:"p-4 rounded-xl "+(k.pendingReservations>0?"bg-gradient-to-r from-orange-50 to-orange-100 dark:from-orange-900 dark:to-orange-800 ring-2 ring-orange-200 dark:ring-orange-700":"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700"),children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-sm font-medium "+(k.pendingReservations>0?"text-orange-600 dark:text-orange-300":"text-gray-600 dark:text-gray-300"),children:"Pending"}),(0,ft.jsx)("p",{className:"text-2xl font-bold "+(k.pendingReservations>0?"text-orange-700 dark:text-orange-200":"text-gray-700 dark:text-gray-200"),children:k.pendingReservations}),k.pendingReservations>0&&(0,ft.jsx)("p",{className:"text-xs text-orange-500 dark:text-orange-400 font-medium",children:"Needs action!"})]}),(0,ft.jsx)("div",{className:"text-2xl "+(k.pendingReservations>0?"text-orange-500":"text-gray-500"),children:"\u23f3"})]})}),(0,ft.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900 dark:to-blue-800 p-4 rounded-xl",children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-blue-600 dark:text-blue-300 text-sm font-medium",children:"Today"}),(0,ft.jsx)("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-200",children:k.todayReservations})]}),(0,ft.jsx)("div",{className:"text-blue-500 text-2xl",children:"\ud83d\udcc5"})]})}),(0,ft.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900 dark:to-green-800 p-4 rounded-xl",children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-green-600 dark:text-green-300 text-sm font-medium",children:"This Month"}),(0,ft.jsx)("p",{className:"text-2xl font-bold text-green-700 dark:text-green-200",children:k.monthlyReservations})]}),(0,ft.jsx)("div",{className:"text-green-500 text-2xl",children:"\ud83d\udcca"})]})}),(0,ft.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900 dark:to-purple-800 p-4 rounded-xl",children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-purple-600 dark:text-purple-300 text-sm font-medium",children:"Revenue"}),(0,ft.jsxs)("p",{className:"text-2xl font-bold text-purple-700 dark:text-purple-200",children:["$",k.totalRevenue]})]}),(0,ft.jsx)("div",{className:"text-purple-500 text-2xl",children:"\ud83d\udcb0"})]})}),(0,ft.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 dark:from-yellow-900 dark:to-yellow-800 p-4 rounded-xl",children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-yellow-600 dark:text-yellow-300 text-sm font-medium",children:"Rating"}),(0,ft.jsxs)("p",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-200",children:[k.averageRating,"\u2b50"]})]}),(0,ft.jsx)("div",{className:"text-yellow-500 text-2xl",children:"\u2b50"})]})})]})]}),(0,ft.jsx)("div",{className:"flex space-x-2 bg-gray-100 dark:bg-gray-800 p-2 rounded-xl",children:j.map(e=>(0,ft.jsxs)("button",{onClick:()=>u(e.id),className:"flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg transition-all duration-200 relative "+(d===e.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:[(0,ft.jsx)("span",{className:"text-lg",children:e.icon}),(0,ft.jsx)("span",{className:"font-medium",children:e.label}),e.badge>0&&(0,ft.jsx)("span",{className:"absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:e.badge})]},e.id))}),(0,ft.jsxs)(At,{mode:"wait",children:["overview"===d&&(0,ft.jsx)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ft.jsx)("h4",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Recent Reservations"}),(0,ft.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[N.filter(e=>"pending"===e.status).length," pending"]})]}),(0,ft.jsxs)("div",{className:"space-y-3",children:[N.slice(0,5).map((e,t)=>{var n;return(0,ft.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ft.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:(null===(n=e.customer_name)||void 0===n?void 0:n.charAt(0))||"U"}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:e.customer_name||"Unknown Customer"}),(0,ft.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.date?new Date(e.date).toLocaleDateString():"No date"," at ",e.time||"No time"]}),e.notes&&(0,ft.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 max-w-xs truncate",children:e.notes})]})]}),(0,ft.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ft.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("confirmed"===e.status?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"pending"===e.status?"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100":"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"),children:e.status}),"pending"===e.status&&(0,ft.jsxs)("div",{className:"flex space-x-2",children:[(0,ft.jsx)("button",{onClick:()=>o(e.id,"confirmed",e),className:"px-3 py-1 bg-green-500 text-white text-xs rounded-md hover:bg-green-600 transition-colors shadow-md hover:shadow-lg",title:"Confirm Reservation",children:"\u2713 Confirm"}),(0,ft.jsx)("button",{onClick:()=>o(e.id,"cancelled",e),className:"px-3 py-1 bg-red-500 text-white text-xs rounded-md hover:bg-red-600 transition-colors shadow-md hover:shadow-lg",title:"Decline Reservation",children:"\u2717 Decline"})]})]})]},e.id||t)}),0===N.length&&(0,ft.jsxs)("div",{className:"text-center py-8",children:[(0,ft.jsx)("div",{className:"text-gray-400 text-4xl mb-3",children:"\ud83d\udcc5"}),(0,ft.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No reservations yet"}),(0,ft.jsx)("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Your reservations will appear here"})]})]})]})},"overview"),"reservations"===d&&(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,ft.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-4 border border-gray-100 dark:border-gray-700",children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsx)("h4",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"All Reservations"}),(0,ft.jsx)("div",{className:"flex items-center space-x-4",children:(0,ft.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,ft.jsxs)("span",{className:"flex items-center",children:[(0,ft.jsx)("div",{className:"w-3 h-3 bg-yellow-400 rounded-full mr-1"}),"Pending: ",N.filter(e=>"pending"===e.status).length]}),(0,ft.jsxs)("span",{className:"flex items-center",children:[(0,ft.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full mr-1"}),"Confirmed: ",N.filter(e=>"confirmed"===e.status).length]}),(0,ft.jsxs)("span",{className:"flex items-center",children:[(0,ft.jsx)("div",{className:"w-3 h-3 bg-red-400 rounded-full mr-1"}),"Cancelled: ",N.filter(e=>"cancelled"===e.status).length]})]})})]})}),(0,ft.jsxs)("div",{className:"space-y-4",children:[N.map((e,t)=>{var n;return(0,ft.jsx)(gc.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden",children:(0,ft.jsxs)("div",{className:"p-6",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ft.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:(null===(n=e.customer_name)||void 0===n?void 0:n.charAt(0))||"U"}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h5",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.customer_name||"Unknown Customer"}),(0,ft.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,ft.jsxs)("span",{className:"flex items-center",children:["\ud83d\udcc5 ",e.date?new Date(e.date).toLocaleDateString():"No date"]}),(0,ft.jsxs)("span",{className:"flex items-center",children:["\ud83d\udd50 ",e.time||"No time"]}),e.phone&&(0,ft.jsxs)("span",{className:"flex items-center",children:["\ud83d\udcde ",e.phone]})]})]})]}),(0,ft.jsx)("div",{className:"flex items-center space-x-3",children:(0,ft.jsx)("span",{className:"px-4 py-2 rounded-full text-sm font-medium "+("confirmed"===e.status?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"pending"===e.status?"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100":"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"),children:e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"Unknown"})})]}),e.notes&&(0,ft.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-4",children:(0,ft.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,ft.jsx)("span",{className:"font-medium",children:"Notes:"})," ",e.notes]})}),e.services&&(0,ft.jsxs)("div",{className:"mb-4",children:[(0,ft.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Services:"}),(0,ft.jsx)("div",{className:"flex flex-wrap gap-2",children:e.services.split(",").map((e,t)=>(0,ft.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-100 text-xs rounded-md",children:e.trim()},t))})]}),(0,ft.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-600",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[e.price&&(0,ft.jsxs)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["\ud83d\udcb0 $",e.price]}),(0,ft.jsxs)("span",{children:["\ud83d\udccd Created ",new Date(e.created_at||Date.now()).toLocaleDateString()]})]}),(0,ft.jsxs)("div",{className:"flex space-x-3",children:["pending"===e.status&&(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsxs)(gc.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(e.id,"confirmed",e),className:"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors shadow-md hover:shadow-lg",children:[(0,ft.jsx)("span",{children:"\u2713"}),(0,ft.jsx)("span",{children:"Confirm"})]}),(0,ft.jsxs)(gc.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(e.id,"cancelled",e),className:"flex items-center space-x-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors shadow-md hover:shadow-lg",children:[(0,ft.jsx)("span",{children:"\u2717"}),(0,ft.jsx)("span",{children:"Decline"})]})]}),"confirmed"===e.status&&(0,ft.jsxs)(gc.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(e.id,"cancelled",e),className:"flex items-center space-x-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors shadow-md hover:shadow-lg",children:[(0,ft.jsx)("span",{children:"\u21a9"}),(0,ft.jsx)("span",{children:"Cancel"})]}),e.customer_phone&&(0,ft.jsxs)(gc.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.open(`tel:${e.customer_phone}`),className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors shadow-md hover:shadow-lg",children:[(0,ft.jsx)("span",{children:"\ud83d\udcde"}),(0,ft.jsx)("span",{children:"Call"})]})]})]})]})},e.id||t)}),0===N.length&&(0,ft.jsxs)(gc.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center border border-gray-100 dark:border-gray-700",children:[(0,ft.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\ud83d\udcc5"}),(0,ft.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No reservations yet"}),(0,ft.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"When customers make reservations, they'll appear here for you to manage."})]})]}),(0,ft.jsx)(wp,{children:(0,ft.jsx)(bp,{businessHours:null===r||void 0===r?void 0:r.business_hours,isEditing:!1})})]},"reservations"),"details"===d&&(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ft.jsx)("h4",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Business Details"}),h?(0,ft.jsxs)("div",{className:"flex gap-2",children:[(0,ft.jsxs)("button",{onClick:async()=>{var e,t;if(r)if(null!==(e=p.name)&&void 0!==e&&e.trim())if(p.type)if(null!==(t=p.location)&&void 0!==t&&t.trim()){x(!0),b(""),console.log("handleSave: Attempting to save business data:",p),console.log("handleSave: Current userBusiness:",r);try{const e=await gh.put("/api/business/update",p);console.log("handleSave: Success response:",e),b("Business details updated successfully!"),m(!1),e.data.business?("function"===typeof l&&l(e.data.business),setTimeout(()=>{window.location.reload()},1e3)):setTimeout(()=>{window.location.reload()},1500)}catch(i){console.error("handleSave: Error occurred:",i),console.error("handleSave: Error response:",i.response);let e="Failed to update business details";var n;if(i.response)401===i.response.status?e="Authentication failed. Please log in again.":404===i.response.status?e="Business not found. Please register your business first.":null!==(n=i.response.data)&&void 0!==n&&n.error&&(e=i.response.data.error);else e=i.request?"Cannot connect to server. Please check if the server is running.":i.message;console.error("handleSave: Final error message:",e),b(e)}finally{x(!1)}}else b("Location is required.");else b("Business type is required.");else b("Business name is required.");else b("No business found to update. Please register your business first.")},disabled:g,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 flex items-center gap-2",children:[g?"\u23f3":"\ud83d\udcbe"," ",g?"Saving...":"Save"]}),(0,ft.jsx)("button",{onClick:()=>{f({name:(null===r||void 0===r?void 0:r.name)||"",type:(null===r||void 0===r?void 0:r.type)||"",phone:(null===r||void 0===r?void 0:r.phone)||"",location:(null===r||void 0===r?void 0:r.location)||"",description:(null===r||void 0===r?void 0:r.description)||"",latitude:(null===r||void 0===r?void 0:r.latitude)||"",longitude:(null===r||void 0===r?void 0:r.longitude)||"",instagram_url:(null===r||void 0===r?void 0:r.instagram_url)||"",facebook_url:(null===r||void 0===r?void 0:r.facebook_url)||"",business_hours:(null===r||void 0===r?void 0:r.business_hours)||null}),m(!1),b("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"\u274c Cancel"})]}):(0,ft.jsxs)("div",{className:"flex gap-3",children:[(0,ft.jsx)("button",{onClick:v,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:"\u270f\ufe0f Edit Business Details"}),(0,ft.jsx)("button",{onClick:v,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center gap-2",children:"\ud83d\udd52 Manage Hours"})]})]}),y&&(0,ft.jsx)("div",{className:"mb-4 p-3 rounded-lg "+(y.includes("success")?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"),children:y}),h?(0,ft.jsxs)("div",{className:"space-y-6",children:[(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Business Name *"}),(0,ft.jsx)("input",{type:"text",value:p.name,onChange:e=>w("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter business name",required:!0})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Business Type *"}),(0,ft.jsxs)("select",{value:p.type,onChange:e=>w("type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:[(0,ft.jsx)("option",{value:"",children:"Select business type"}),[{value:"barbershop",label:"Barbershop"},{value:"beauty_salon",label:"Beauty Salon"},{value:"restaurant",label:"Restaurant"},{value:"cafe",label:"Caf\xe9"},{value:"football_field",label:"Football Field"},{value:"tennis_court",label:"Tennis Court"},{value:"gym",label:"Gym"},{value:"car_wash",label:"Car Wash"},{value:"spa",label:"Spa & Wellness"},{value:"dentist",label:"Dentist"},{value:"doctor",label:"Doctor"},{value:"other",label:"Other"}].map(e=>(0,ft.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),(0,ft.jsx)("input",{type:"tel",value:p.phone,onChange:e=>w("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter phone number"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location *"}),(0,ft.jsx)("input",{type:"text",value:p.location,onChange:e=>w("location",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter business location or select from map below",required:!0}),(0,ft.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"\ud83d\udca1 Tip: Click on the map below to automatically fill this field with the address"})]}),(0,ft.jsxs)("div",{className:"md:col-span-2",children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,ft.jsx)("textarea",{value:p.description,onChange:e=>w("description",e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Describe your business..."})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Instagram URL (Optional)"}),(0,ft.jsx)("input",{type:"url",value:p.instagram_url,onChange:e=>w("instagram_url",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://instagram.com/yourbusiness"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Facebook URL (Optional)"}),(0,ft.jsx)("input",{type:"url",value:p.facebook_url,onChange:e=>w("facebook_url",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://facebook.com/yourbusiness"})]})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Location on Map"}),(0,ft.jsx)("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:(0,ft.jsx)(xp,{onLocationSelect:e=>{console.log("Location selected:",e),f(t=>({...t,latitude:e.lat,longitude:e.lng,location:e.address||t.location}))},initialLocation:p.latitude&&p.longitude?{lat:parseFloat(p.latitude),lng:parseFloat(p.longitude)}:null})}),(0,ft.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"\ud83c\udfaf Click anywhere on the map to set your business location. This will automatically update the location field above with the address."})]}),p.latitude&&p.longitude&&(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Map Coordinates (Technical Details)"}),(0,ft.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-lg",children:[(0,ft.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Latitude:"}),(0,ft.jsx)("div",{className:"font-mono text-sm",children:parseFloat(p.latitude).toFixed(6)})]}),(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-lg",children:[(0,ft.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Longitude:"}),(0,ft.jsx)("div",{className:"font-mono text-sm",children:parseFloat(p.longitude).toFixed(6)})]})]}),(0,ft.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"\u2139\ufe0f These coordinates are automatically set when you click on the map"})]}),(0,ft.jsx)(wp,{children:(0,ft.jsx)(bp,{businessHours:p.business_hours,onHoursChange:_,isEditing:!0})})]}):(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Business Name"}),(0,ft.jsx)("p",{className:"text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:(null===r||void 0===r?void 0:r.name)||"Not set"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Business Type"}),(0,ft.jsx)("p",{className:"text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-lg capitalize",children:(null===r||void 0===r||null===(s=r.type)||void 0===s?void 0:s.replace("_"," "))||"Not set"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone"}),(0,ft.jsx)("p",{className:"text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:(null===r||void 0===r?void 0:r.phone)||"Not set"})]}),(0,ft.jsxs)("div",{className:"md:col-span-1",children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),(0,ft.jsx)("p",{className:"text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:(null===r||void 0===r?void 0:r.location)||"Not set"})]}),(0,ft.jsxs)("div",{className:"md:col-span-2",children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,ft.jsx)("p",{className:"text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-3 rounded-lg min-h-[100px]",children:(null===r||void 0===r?void 0:r.description)||"No description available"})]}),((null===r||void 0===r?void 0:r.instagram_url)||(null===r||void 0===r?void 0:r.facebook_url))&&(0,ft.jsxs)("div",{className:"md:col-span-2",children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Social Media"}),(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg space-y-2",children:[(null===r||void 0===r?void 0:r.instagram_url)&&(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ud83d\udcf8"}),(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400 mr-2",children:"Instagram:"}),(0,ft.jsx)("a",{href:r.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"text-pink-600 dark:text-pink-400 hover:underline text-sm break-all",children:r.instagram_url})]}),(null===r||void 0===r?void 0:r.facebook_url)&&(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ud83d\udc65"}),(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400 mr-2",children:"Facebook:"}),(0,ft.jsx)("a",{href:r.facebook_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:r.facebook_url})]})]})]}),(null===r||void 0===r?void 0:r.photos)&&r.photos.length>0&&(0,ft.jsxs)("div",{className:"md:col-span-2",children:[(0,ft.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Business Photos (",r.photos.length,"/10)"]}),(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[(0,ft.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:r.photos.map((e,t)=>(0,ft.jsxs)("div",{className:"relative group",children:[(0,ft.jsx)("img",{src:e.photo_url,alt:`Business photo ${t+1}`,className:"w-full h-24 object-cover rounded-lg shadow-sm group-hover:shadow-md transition-shadow"}),e.is_primary&&(0,ft.jsx)("div",{className:"absolute top-1 left-1 bg-green-500 text-white text-xs px-2 py-0.5 rounded-full",children:"\u2b50 Primary"})]},e.id))}),(0,ft.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3",children:"\ud83d\udca1 To manage photos, visit the Business Profile section in the main dashboard"})]})]}),(null===r||void 0===r?void 0:r.latitude)&&(null===r||void 0===r?void 0:r.longitude)&&(0,ft.jsxs)("div",{className:"md:col-span-2",children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Map Location"}),(0,ft.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[(0,ft.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mb-2",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ufffd\ufe0f"}),(0,ft.jsx)("span",{children:"Business location has been set on the map"})]}),(0,ft.jsxs)("details",{className:"cursor-pointer",children:[(0,ft.jsx)("summary",{className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Show coordinates"}),(0,ft.jsxs)("div",{className:"mt-2 text-xs font-mono text-gray-500 dark:text-gray-400",children:["Lat: ",parseFloat(r.latitude).toFixed(6),", Lng: ",parseFloat(r.longitude).toFixed(6)]})]})]})]})]})]},"details")]})]})},Ry=e=>{let{conversations:n,activeConversation:i,messages:s,currentUserId:r,onSelectConversation:a,onSendMessage:o,onDeleteConversation:l,loading:c}=e;const[d,u]=(0,t.useState)(!1);return(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ft.jsxs)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center",children:[(0,ft.jsx)("svg",{className:"w-8 h-8 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Messages"]}),(0,ft.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Chat with businesses and customers"})]}),(0,ft.jsxs)("div",{className:"hidden md:grid md:grid-cols-3 gap-6",children:[(0,ft.jsx)("div",{className:"col-span-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden h-[600px]",children:(0,ft.jsx)(Lp,{conversations:n,activeConversation:i,onSelectConversation:e=>{a(e),u(!0)},onDeleteConversation:l,loading:c})}),(0,ft.jsx)("div",{className:"col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden h-[600px]",children:(0,ft.jsx)(Vp,{conversation:i,messages:s,currentUserId:r,onSendMessage:o,loading:c})})]}),(0,ft.jsx)("div",{className:"md:hidden",children:d?(0,ft.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden h-[600px]",children:(0,ft.jsx)(Vp,{conversation:i,messages:s,currentUserId:r,onSendMessage:o,onClose:()=>u(!1),loading:c})}):(0,ft.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden h-[600px]",children:(0,ft.jsx)(Lp,{conversations:n,activeConversation:i,onSelectConversation:e=>{a(e),u(!0)},onDeleteConversation:l,loading:c})})})]})},Dy=e=>{let{user:n,userBusiness:i,setActiveSection:s}=e;const[r,a]=(0,t.useState)(n),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),u=async()=>{l(!0);try{const e=await ip();a(e),d(null)}catch(e){d("Failed to refresh profile data. Please try again."),console.error(e)}finally{l(!1)}};return(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[(0,ft.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Profile & Settings"}),o&&(0,ft.jsx)("div",{className:"flex justify-center py-4",children:(0,ft.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}),c&&(0,ft.jsxs)("div",{className:"bg-red-100 text-red-700 p-4 rounded-md mb-4",children:[c,(0,ft.jsx)("button",{onClick:u,className:"ml-4 text-sm underline hover:no-underline",children:"Try Again"})]}),r&&(0,ft.jsx)(op,{user:r,onProfileUpdate:u,business:i})]})},By=e=>{let{business:t,onSelect:n,onBookNow:i}=e;const s=e=>{const t={barbershop:"\u2702\ufe0f",beauty_salon:"\ud83d\udc84",restaurant:"\ud83c\udf7d\ufe0f",cafe:"\u2615",football_field:"\u26bd",tennis_court:"\ud83c\udfbe",gym:"\ud83c\udfcb\ufe0f",car_wash:"\ud83d\ude97",spa:"\ud83e\uddd8",dentist:"\ud83e\uddb7",doctor:"\ud83d\udc69\u200d\u2695\ufe0f",other:"\ud83c\udfe2"};return t[e]||t.other},r=e=>{const t={barbershop:"from-blue-500 to-blue-600",beauty_salon:"from-pink-500 to-rose-600",restaurant:"from-orange-500 to-red-600",cafe:"from-amber-500 to-orange-600",football_field:"from-green-500 to-emerald-600",tennis_court:"from-teal-500 to-cyan-600",gym:"from-purple-500 to-violet-600",car_wash:"from-cyan-500 to-blue-600",spa:"from-emerald-500 to-teal-600",dentist:"from-sky-500 to-blue-600",doctor:"from-indigo-500 to-blue-600",other:"from-gray-500 to-slate-600"};return t[e]||t.other},a=(()=>{if(!t.business_hours)return{status:"unknown",text:"Hours Not Set",color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-900/30"};const e=new Date,n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][e.getDay()],i=t.business_hours[n];if(!i||!i.isOpen)return{status:"closed",text:"Closed Today",color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900/30"};const s=60*e.getHours()+e.getMinutes(),[r,a]=i.openTime.split(":").map(Number),[o,l]=i.closeTime.split(":").map(Number),c=60*r+a,d=60*o+l;return s<c?{status:"opening-later",text:`Opens at ${i.openTime}`,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30"}:s>=c&&s<d?{status:"open",text:`Open until ${i.closeTime}`,color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30"}:{status:"closed",text:"Closed Now",color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900/30"}})();return(0,ft.jsxs)(gc.div,{className:"group relative bg-white dark:bg-gray-800 rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 border border-gray-100 dark:border-gray-700 h-full flex flex-col overflow-hidden backdrop-blur-sm",whileHover:{scale:1.03,y:-8,transition:{duration:.3,ease:"easeOut"}},whileTap:{scale:.97},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[(0,ft.jsx)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-500 rounded-3xl bg-gradient-to-br from-blue-400 via-purple-500 to-pink-500"}),t.primary_photo?(0,ft.jsxs)("div",{className:"relative h-52 overflow-hidden",children:[(0,ft.jsx)("img",{src:t.primary_photo,alt:t.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),(0,ft.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-black/10 to-transparent"}),(0,ft.jsx)("div",{className:"absolute top-4 left-4",children:(0,ft.jsxs)("div",{className:`px-3 py-1.5 bg-gradient-to-r ${r(t.type)} text-white text-xs font-semibold rounded-full shadow-lg backdrop-blur-sm border border-white/20`,children:[(0,ft.jsx)("span",{className:"mr-1",children:s(t.type)}),t.type.replace("_"," ").toUpperCase()]})}),t.rating&&t.rating.averageRating>0&&(0,ft.jsx)("div",{className:"absolute top-4 right-4",children:(0,ft.jsxs)("div",{className:"px-2 py-1 bg-white/90 dark:bg-gray-800/90 text-gray-900 dark:text-white text-xs font-bold rounded-full shadow-lg backdrop-blur-sm flex items-center",children:[(0,ft.jsx)("span",{className:"text-yellow-400 mr-1",children:"\u2b50"}),t.rating.averageRating,"/5"]})})]}):(0,ft.jsxs)("div",{className:`relative h-52 bg-gradient-to-br ${r(t.type)} flex items-center justify-center`,children:[(0,ft.jsx)("div",{className:"text-white text-6xl opacity-90",children:s(t.type)}),(0,ft.jsx)("div",{className:"absolute top-4 left-4",children:(0,ft.jsx)("div",{className:"px-3 py-1.5 bg-white/20 backdrop-blur-sm text-white text-xs font-semibold rounded-full border border-white/30",children:t.type.replace("_"," ").toUpperCase()})}),t.rating&&t.rating.averageRating>0&&(0,ft.jsx)("div",{className:"absolute top-4 right-4",children:(0,ft.jsxs)("div",{className:"px-2 py-1 bg-white/20 backdrop-blur-sm text-white text-xs font-bold rounded-full border border-white/30 flex items-center",children:[(0,ft.jsx)("span",{className:"text-yellow-300 mr-1",children:"\u2b50"}),t.rating.averageRating,"/5"]})}),(0,ft.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,ft.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.2) 0%, transparent 50%),\n                               radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.1) 0%, transparent 50%)"}})})]}),(0,ft.jsxs)("div",{className:"p-6 flex flex-col flex-grow relative",children:[(0,ft.jsxs)("div",{className:"mb-4",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300",children:t.name}),!t.primary_photo&&(0,ft.jsx)("div",{className:`w-10 h-10 bg-gradient-to-br ${r(t.type)} rounded-xl flex items-center justify-center text-white text-lg shadow-md`,children:s(t.type)})]}),(0,ft.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 capitalize tracking-wide",children:t.type.replace("_"," ")})]}),(0,ft.jsx)("p",{className:"text-gray-600 text-sm mb-5 line-clamp-2 dark:text-gray-400 flex-grow leading-relaxed",children:t.description||"Professional service provider offering quality solutions for your needs."}),(0,ft.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,ft.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[(0,ft.jsx)("div",{className:"w-6 h-6 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mr-3",children:(0,ft.jsx)("span",{className:"text-blue-600 dark:text-blue-400 text-xs",children:"\ud83d\udccd"})}),(0,ft.jsx)("span",{className:"truncate",children:t.location})]}),t.rating&&t.rating.averageRating>0&&(0,ft.jsxs)("div",{className:"flex items-center text-sm",children:[(0,ft.jsx)("div",{className:"w-6 h-6 rounded-lg bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center mr-3",children:(0,ft.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400 text-xs",children:"\u2b50"})}),(0,ft.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[t.rating.averageRating,"/5 Rating"]}),t.rating.totalReviews>0&&(0,ft.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-500 ml-2",children:["(",t.rating.totalReviews," reviews)"]})]}),(0,ft.jsxs)("div",{className:"flex items-center text-sm",children:[(0,ft.jsx)("div",{className:`w-6 h-6 rounded-lg ${a.bgColor} flex items-center justify-center mr-3`,children:(0,ft.jsx)("span",{className:`${a.color} text-xs`,children:"\ud83d\udd52"})}),(0,ft.jsx)("span",{className:`${a.color} font-medium`,children:a.text})]})]}),(0,ft.jsxs)("div",{className:"flex gap-3 mt-auto",children:[(0,ft.jsxs)(gc.button,{onClick:()=>n(t),className:"flex-1 px-4 py-3 text-blue-600 dark:text-blue-400 border-2 border-blue-600 dark:border-blue-400 rounded-2xl hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-300 text-sm font-semibold flex items-center justify-center space-x-2 group/btn",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,ft.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,ft.jsx)("span",{children:"View Details"})]}),(0,ft.jsxs)(gc.button,{onClick:()=>i(t),className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 via-blue-700 to-purple-700 hover:from-blue-700 hover:via-purple-700 hover:to-pink-700 text-white rounded-2xl transition-all duration-300 text-sm font-semibold shadow-lg hover:shadow-xl flex items-center justify-center space-x-2 group/btn",whileHover:{scale:1.02,boxShadow:"0 10px 25px -5px rgba(59, 130, 246, 0.4)"},whileTap:{scale:.98},children:[(0,ft.jsx)("span",{children:"\ud83d\udcc5"}),(0,ft.jsx)("span",{children:"Book Now"})]})]})]}),(0,ft.jsx)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none",children:(0,ft.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -skew-x-12 translate-x-[-100%] group-hover:translate-x-[200%] transition-transform duration-1000 ease-out"})})]})},zy=e=>{var t;let{booking:n,onShowDetails:i,onShowReschedule:s,onShowCancel:r}=e;const a=(e=>{switch(e){case"confirmed":return{color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border-green-200 dark:border-green-700",icon:"\u2705",bgGradient:"from-green-50 to-emerald-50 dark:from-green-900/10 dark:to-emerald-900/10"};case"pending":return{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 border-yellow-200 dark:border-yellow-700",icon:"\u23f3",bgGradient:"from-yellow-50 to-amber-50 dark:from-yellow-900/10 dark:to-amber-900/10"};case"cancelled":return{color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 border-red-200 dark:border-red-700",icon:"\u274c",bgGradient:"from-red-50 to-rose-50 dark:from-red-900/10 dark:to-rose-900/10"};case"completed":return{color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 border-blue-200 dark:border-blue-700",icon:"\ud83c\udf89",bgGradient:"from-blue-50 to-indigo-50 dark:from-blue-900/10 dark:to-indigo-900/10"};default:return{color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200 border-gray-200 dark:border-gray-600",icon:"\ud83d\udcc5",bgGradient:"from-gray-50 to-slate-50 dark:from-gray-800 dark:to-slate-800"}}})(n.status),o=(e=>{const t={barbershop:"\u2702\ufe0f",beauty_salon:"\ud83d\udc84",restaurant:"\ud83c\udf7d\ufe0f",cafe:"\u2615",football_field:"\u26bd",tennis_court:"\ud83c\udfbe",gym:"\ud83c\udfcb\ufe0f",car_wash:"\ud83d\ude97",spa:"\ud83e\uddd8",dentist:"\ud83e\uddb7",doctor:"\ud83d\udc69\u200d\u2695\ufe0f",other:"\ud83c\udfe2"};return t[e]||t.other})(n.business_type);return(0,ft.jsxs)(gc.div,{className:`relative overflow-hidden bg-gradient-to-br ${a.bgGradient} rounded-xl shadow-sm hover:shadow-md border border-gray-200/50 dark:border-gray-700/50 backdrop-blur-sm`,whileHover:{scale:1.01,y:-1,boxShadow:"0 4px 8px -2px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.99},transition:{duration:.15,ease:"easeOut"},children:[(0,ft.jsx)("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r "+("confirmed"===n.status?"from-green-400 to-emerald-500":"pending"===n.status?"from-yellow-400 to-amber-500":"cancelled"===n.status?"from-red-400 to-rose-500":"completed"===n.status?"from-blue-400 to-indigo-500":"from-gray-400 to-slate-500")}),(0,ft.jsxs)("div",{className:"p-3",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[(0,ft.jsx)("div",{className:"w-8 h-8 rounded-lg bg-white dark:bg-gray-800 shadow-sm flex items-center justify-center text-sm flex-shrink-0",children:o}),(0,ft.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,ft.jsx)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:n.business_name}),(0,ft.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize truncate",children:null===(t=n.business_type)||void 0===t?void 0:t.replace("_"," ")})]})]}),(0,ft.jsxs)(gc.div,{className:`flex items-center space-x-1 px-2 py-1 rounded-lg text-xs font-medium border ${a.color} flex-shrink-0`,whileHover:{scale:1.05},transition:{duration:.2},children:[(0,ft.jsx)("span",{className:"text-xs",children:a.icon}),(0,ft.jsx)("span",{className:"capitalize",children:n.status})]})]}),(0,ft.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[(0,ft.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-2",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[(0,ft.jsx)("span",{className:"text-blue-500 text-xs",children:"\ud83d\udcc5"}),(0,ft.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Date"})]}),(0,ft.jsx)("p",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:new Date(n.booking_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),(0,ft.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-2",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[(0,ft.jsx)("span",{className:"text-purple-500 text-xs",children:"\ud83d\udd52"}),(0,ft.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Time"})]}),(0,ft.jsx)("p",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:n.booking_time})]})]}),(0,ft.jsxs)("div",{className:"flex justify-between items-center mb-3 text-xs",children:[n.total_amount&&(0,ft.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,ft.jsx)("span",{className:"text-green-500",children:"\ufffd"}),(0,ft.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:[n.total_amount," TND"]})]}),n.notes&&(0,ft.jsxs)("div",{className:"flex items-center space-x-1 flex-1 min-w-0 ml-2",children:[(0,ft.jsx)("span",{className:"text-orange-500",children:"\ufffd"}),(0,ft.jsx)("span",{className:"text-gray-600 dark:text-gray-400 truncate",children:n.notes.length>15?n.notes.substring(0,15)+"...":n.notes})]})]}),(0,ft.jsxs)("div",{className:"flex gap-1",children:["confirmed"===n.status&&(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsxs)(gc.button,{onClick:()=>s&&s(n),className:"flex-1 px-2 py-1.5 text-xs font-medium bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors flex items-center justify-center space-x-1",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,ft.jsx)("span",{children:"\ud83d\udd04"}),(0,ft.jsx)("span",{children:"Reschedule"})]}),(0,ft.jsxs)(gc.button,{onClick:()=>r&&r(n),className:"flex-1 px-2 py-1.5 text-xs font-medium bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center space-x-1",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,ft.jsx)("span",{children:"\ud83d\udeab"}),(0,ft.jsx)("span",{children:"Cancel"})]})]}),(0,ft.jsxs)(gc.button,{onClick:()=>i&&i(n),className:("confirmed"===n.status?"w-full mt-1":"flex-1")+" px-2 py-1.5 text-xs font-medium bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center space-x-1",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,ft.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,ft.jsx)("span",{children:"Details"})]})]})]}),(0,ft.jsx)("div",{className:"absolute inset-0 opacity-5 dark:opacity-10 pointer-events-none",children:(0,ft.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25% 25%, rgba(59, 130, 246, 0.05) 0%, transparent 50%),\n                           radial-gradient(circle at 75% 75%, rgba(168, 85, 247, 0.05) 0%, transparent 50%)"}})})]})},Iy=e=>{let{business:t,isOpen:n,onClose:i,onSave:s}=e;return n?(0,ft.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full p-6",children:[(0,ft.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Edit Business"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Business editing functionality coming soon..."}),(0,ft.jsx)("button",{onClick:i,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Close"})]})}):null},Fy=function(){const[e,n]=(0,t.useState)(null),[i,s]=(0,t.useState)(null),[r,a]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)([]),[u,h]=(0,t.useState)([]),[m,p]=(0,t.useState)(null),[f,g]=(0,t.useState)(!0),[x,y]=(0,t.useState)(null),[b,v]=(0,t.useState)(""),[w,_]=(0,t.useState)("discover"),[k,j]=(0,t.useState)("overview"),[N,S]=(0,t.useState)(null),[C,P]=(0,t.useState)(!1),[T,E]=(0,t.useState)(!1),[M,L]=(0,t.useState)(!1),[A,O]=(0,t.useState)(!1),[R,D]=(0,t.useState)(!1),[B,z]=(0,t.useState)(!1),[I,F]=(0,t.useState)(null),[U,$]=(0,t.useState)(!1),[W,H]=(0,t.useState)(null),[V,q]=(0,t.useState)(1),[Z,Y]=(0,t.useState)({type:"",location:"",rating:"",priceRange:""}),K=ne(),G=Q(),{conversations:J,activeConversation:X,messages:ee,loading:te,fetchConversations:ie,fetchMessages:se,createConversation:re,sendMessage:ae,markAsRead:oe,deleteConversation:le,setActiveConversation:ce}=zx();(0,t.useEffect)(()=>{de()},[]),(0,t.useEffect)(()=>{"/profile"===G.pathname&&_("profile")},[G]),(0,t.useEffect)(()=>{ue()},[r,b,Z]),(0,t.useEffect)(()=>{e&&ie()},[e,ie]),(0,t.useEffect)(()=>{X&&(se(X.id),oe(X.id))},[null===X||void 0===X?void 0:X.id]);const de=async()=>{try{g(!0);const c=await gh.get("/auth/me");n(c.data);try{const n=await gh.get("/api/business/user-business");if(n.data.business){var e;s(n.data.business);try{var t;const e=await gh.get(`/api/reviews/business/${n.data.business.id}`);null!==(t=e.data)&&void 0!==t&&t.stats&&p(e.data.stats.averageRating)}catch(r){console.log("No reviews yet for this business"),p(0)}const i=await gh.get("/api/business/reservations"),a=(null===(e=i.data)||void 0===e?void 0:e.reservations)||i.data||[];h(Array.isArray(a)?a:[])}}catch(o){console.log("User does not own a business")}const u=await gh.get("/api/businesses/discover");a(u.data);try{var i;const e=await gh.get("/api/user/bookings");d(Array.isArray(e.data)?e.data:null!==(i=e.data)&&void 0!==i&&i.bookings&&Array.isArray(e.data.bookings)?e.data.bookings:[])}catch(l){console.log("No bookings found or user not fully authenticated"),d([])}}catch(c){y("Failed to load dashboard data"),console.error("Dashboard error:",c)}finally{g(!1)}},ue=()=>{let e=[...r];if(b&&(e=e.filter(e=>e.name.toLowerCase().includes(b.toLowerCase())||e.type.toLowerCase().includes(b.toLowerCase())||e.description&&e.description.toLowerCase().includes(b.toLowerCase()))),Z.type&&(e=e.filter(e=>e.type===Z.type)),Z.location&&(e=e.filter(e=>e.location&&e.location.toLowerCase().includes(Z.location.toLowerCase()))),Z.rating){const t=parseFloat(Z.rating);e=e.filter(e=>e.rating&&e.rating.averageRating>=t)}l(e),q(1)},he=async e=>{try{var t;console.log("Fetching business details for ID:",e.id);const n=await gh.get(`/api/businesses/${e.id}`);console.log("Business details response:",n.data),console.log("Photos in response:",null===(t=n.data.business)||void 0===t?void 0:t.photos),S(n.data.business),E(!0)}catch(x){console.error("Error fetching business details:",x),S(e),E(!0)}},me=async()=>{if(i)try{var e;const t=await gh.get("/api/business/reservations"),n=(null===(e=t.data)||void 0===e?void 0:e.reservations)||t.data||[];h(Array.isArray(n)?n:[])}catch(x){console.error("Error fetching business reservations:",x)}},pe=async e=>{try{if(e&&"object"===typeof e)return s(e),void console.log("Business updated in parent state:",e);const t=await gh.put("/api/business/update",e);s(t.data.business),L(!1),alert("Business updated successfully!")}catch(t){console.error("Error updating business:",t),alert("Failed to update business")}},fe=e=>{F(e),O(!1),D(!0)},ge=e=>{d(t=>(Array.isArray(t)?t:[]).map(t=>t.id===e.id?e:t)),D(!1),z(!1),O(!1),F(null)},xe=()=>{O(!1),D(!1),z(!1),F(null)},ye=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";const n=document.createElement("div"),i="success"===t?"bg-green-500":"bg-red-500";n.className=`fixed top-4 right-4 ${i} text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 transform translate-x-full max-w-sm`,n.innerHTML=`\n      <div class="flex items-center space-x-2">\n        <span>${e}</span>\n        <button onclick="this.parentElement.parentElement.remove()" class="ml-2 text-white hover:text-gray-200">\n          \u2715\n        </button>\n      </div>\n    `,document.body.appendChild(n),setTimeout(()=>{n.style.transform="translateX(0)"},100),setTimeout(()=>{document.body.contains(n)&&(n.style.transform="translateX(100%)",setTimeout(()=>{document.body.contains(n)&&document.body.removeChild(n)},300))},5e3)},be=12*V,ve=be-12,we=o.slice(ve,be),_e=Math.ceil(o.length/12);return f?(0,ft.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto dark:border-blue-400"}),(0,ft.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading your dashboard..."})]})}):x?(0,ft.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("p",{className:"text-red-600 text-lg dark:text-red-400",children:x}),(0,ft.jsx)("button",{onClick:de,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600",children:"Try Again"})]})}):(0,ft.jsx)(Qc,{children:(0,ft.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 transition-all duration-300",children:[(0,ft.jsx)(pp,{user:e,userBusiness:i,userBookings:c,businessReservations:u,activeSection:w,onSectionChange:_,onLogout:async()=>{try{await gh.post("/auth/logout"),K("/login")}catch(e){console.error("Logout failed:",e),K("/login")}}}),(0,ft.jsx)("div",{className:"lg:ml-[280px] ml-0 transition-all duration-300",children:(0,ft.jsx)("main",{className:"min-h-screen p-4 sm:p-6 lg:p-8 pt-20 lg:pt-8",children:(0,ft.jsx)("div",{className:"max-w-7xl mx-auto w-full",children:(0,ft.jsxs)(At,{mode:"wait",children:["discover"===w&&(0,ft.jsx)(Ly,{searchTerm:b,setSearchTerm:v,filters:Z,setFilters:Y,businessTypes:[{value:"",label:"All Types"},{value:"barbershop",label:"Barbershop"},{value:"beauty_salon",label:"Beauty Salon"},{value:"restaurant",label:"Restaurant"},{value:"cafe",label:"Caf\xe9"},{value:"football_field",label:"Football Field"},{value:"tennis_court",label:"Tennis Court"},{value:"gym",label:"Gym"},{value:"car_wash",label:"Car Wash"},{value:"spa",label:"Spa & Wellness"},{value:"dentist",label:"Dentist"},{value:"doctor",label:"Doctor"},{value:"other",label:"Other"}],filteredBusinesses:o,currentBusinesses:we,totalPages:_e,currentPage:V,setCurrentPage:q,handleBusinessSelect:he,handleBookNow:e=>{S(e),P(!0)},navigate:K,loading:f,setShowMapModal:$,getCurrentLocation:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{H({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{console.error("Error getting user location:",e)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}},"discover"),"bookings"===w&&(0,ft.jsx)(Ay,{userBookings:c,setActiveSection:_,onShowBookingDetails:e=>{console.log("Opening booking details for:",e),console.log("Booking ID:",null===e||void 0===e?void 0:e.id),F(e),O(!0)},onShowReschedule:fe,onShowCancel:e=>{F(e),z(!0)}},"bookings"),"messages"===w&&(0,ft.jsx)(Ry,{conversations:J,activeConversation:X,messages:ee,currentUserId:null===e||void 0===e?void 0:e.id,onSelectConversation:e=>{ce(e),oe(e.id)},onSendMessage:async(e,t)=>{try{await ae(e,t)}catch(n){throw My.error("Failed to send message"),n}},onDeleteConversation:async e=>{try{await le(e),My.success("Conversation deleted")}catch(t){My.error("Failed to delete conversation")}},loading:te},"messages"),"business"===w&&i&&(0,ft.jsx)(Oy,{userBusiness:i,businessReservations:u,handleReservationStatusUpdate:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("cancelled"===t){const e=n.customer_name||"this customer";if(!window.confirm(`Are you sure you want to decline the reservation for ${e}?\n\nThis action will notify the customer that their reservation has been declined.`))return}try{let i,s="";"confirmed"===t?(i=await(async e=>{try{return(await ph.put(`/api/business/reservations/${e}/accept`)).data}catch(x){throw console.error("Error accepting reservation:",x),x}})(e),s=`\u2705 Reservation confirmed for ${n.customer_name||"customer"}!`):"cancelled"===t?(i=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return(await ph.put(`/api/business/reservations/${e}/decline`,{reason:t})).data}catch(x){throw console.error("Error declining reservation:",x),x}}(e),s=`\u274c Reservation declined for ${n.customer_name||"customer"}!`):(i=await gh.put(`/api/business/reservations/${e}`,{status:t}),s=`\u23f3 Reservation status updated to ${t}!`),h(n=>(Array.isArray(n)?n:[]).map(n=>n.id===e?{...n,status:t,updated_at:(new Date).toISOString()}:n)),ye(s,"success"),console.log(`Reservation ${e} ${t} successfully:`,{reservationId:e,newStatus:t,customer:n.customer_name,timestamp:(new Date).toISOString()})}catch(r){var i,s;console.error("Error updating reservation:",r);const e=(null===(i=r.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.error)||"Failed to update reservation status. Please try again.";ye(e,"error")}},onBusinessUpdate:pe,businessRating:m},"business"),"business-calendar"===w&&i&&(0,ft.jsx)(Xm,{},"business-calendar"),"profile"===w&&(0,ft.jsx)(Dy,{user:e,userBusiness:i,setActiveSection:_},"profile")]})})})}),T&&N&&(0,ft.jsx)(Fh,{business:N,onClose:()=>{E(!1),S(null)},onBookNow:e=>{E(!1),P(!0)},onContactBusiness:async e=>{try{const t=await re(e);ce(t),_("messages"),My.success("Conversation started!")}catch(t){My.error("Failed to start conversation")}}}),C&&N&&(0,ft.jsx)(Uh,{business:N,isOpen:C,onClose:()=>{P(!1),S(null)},onBookingSuccess:e=>{d(t=>[...Array.isArray(t)?t:[],e]),i&&e.business_id===i.id&&me(),P(!1),S(null),console.log("Booking success handled in parent component")}}),M&&(0,ft.jsx)(Iy,{business:i,isOpen:M,onClose:()=>L(!1),onSave:pe}),(0,ft.jsx)(lp,{isOpen:A,onClose:xe,booking:I,onReschedule:fe}),(0,ft.jsx)(cp,{isOpen:R,onClose:xe,booking:I,onBookingUpdated:ge}),(0,ft.jsx)(dp,{isOpen:B,onClose:xe,booking:I,onBookingUpdated:ge}),(0,ft.jsx)(yp,{isOpen:U,onClose:()=>$(!1),businesses:o,onBusinessSelect:he,userLocation:W})]})})};const Uy=function(){const[e,n]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[u,h]=(0,t.useState)(null),[m,p]=(0,t.useState)([]),[f,g]=(0,t.useState)([]),[x,y]=(0,t.useState)(null),[b,v]=(0,t.useState)(null),[w,_]=(0,t.useState)(!1),k=(0,t.useRef)(null),j=ne();return(0,ft.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-100 p-4",children:(0,ft.jsxs)("div",{className:"bg-white p-6 sm:p-8 lg:p-10 rounded-xl shadow-lg w-full max-w-5xl border border-gray-200",children:[(0,ft.jsx)("h2",{className:"text-2xl sm:text-3xl font-extrabold text-center text-gray-800 mb-6 sm:mb-8",children:"Register Your Business"}),x&&(0,ft.jsx)("p",{className:"text-red-600 text-center mb-6 bg-red-100 p-3 rounded-md text-sm sm:text-base",children:x}),b&&(0,ft.jsx)("p",{className:"text-green-600 text-center mb-6 bg-green-100 p-3 rounded-md text-sm sm:text-base",children:b}),(0,ft.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),y(null),v(null),_(!0),!e||""===e.trim())return y("Business name is required"),void _(!1);if(!i||""===i)return y("Please select a business type"),void _(!1);if(!r||""===r.trim())return y("Location is required"),void _(!1);if(!u)return y("Please select a location on the map"),void _(!1);try{const t=new FormData;t.append("name",e.trim()),t.append("type",i),t.append("location",r.trim()||"Location from map"),t.append("latitude",u.lat),t.append("longitude",u.lng),o&&o.trim()&&t.append("instagram_url",o.trim()),c&&c.trim()&&t.append("facebook_url",c.trim()),m.forEach(e=>{t.append("business_photos",e)}),console.log("Submitting business registration with type:",i);const n=await gh.post("/api/business/register",t,{headers:{"Content-Type":"multipart/form-data"}});v(`${n.data.message}${n.data.photoCount>0?` with ${n.data.photoCount} photo(s)`:""}`),setTimeout(()=>{j("/")},2e3)}catch(a){var n,s;y((null===(n=a.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.error)||"An error occurred during business registration.")}finally{_(!1)}},children:[(0,ft.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsxs)("div",{className:"mb-5",children:[(0,ft.jsx)("label",{htmlFor:"name",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Business Name:"}),(0,ft.jsx)("input",{type:"text",id:"name",className:"shadow-sm appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 ease-in-out",value:e,onChange:e=>n(e.target.value),required:!0})]}),(0,ft.jsxs)("div",{className:"mb-5",children:[(0,ft.jsx)("label",{htmlFor:"type",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Business Type:"}),(0,ft.jsx)("select",{id:"type",name:"type",className:"shadow-sm appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 ease-in-out",value:i,onChange:e=>s(e.target.value),required:!0,children:[{value:"",label:"Select a business type"},{value:"barbershop",label:"Barbershop"},{value:"beauty_salon",label:"Beauty Salon"},{value:"restaurant",label:"Restaurant"},{value:"cafe",label:"Caf\xe9"},{value:"football_field",label:"Football Field"},{value:"tennis_court",label:"Tennis Court"},{value:"gym",label:"Gym"},{value:"car_wash",label:"Car Wash"},{value:"spa",label:"Spa & Wellness"},{value:"dentist",label:"Dentist"},{value:"doctor",label:"Doctor"},{value:"other",label:"Other"}].map(e=>(0,ft.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ft.jsxs)("div",{className:"mb-5",children:[(0,ft.jsx)("label",{htmlFor:"location",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Address (Optional - Auto-filled from map):"}),(0,ft.jsx)("input",{type:"text",id:"location",className:"shadow-sm appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 ease-in-out",value:r,onChange:e=>a(e.target.value),placeholder:"Address will be auto-filled when you select a location on the map"})]}),(0,ft.jsxs)("div",{className:"mb-5",children:[(0,ft.jsx)("label",{htmlFor:"instagramUrl",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Instagram URL (Optional):"}),(0,ft.jsx)("input",{type:"url",id:"instagramUrl",className:"shadow-sm appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 ease-in-out",value:o,onChange:e=>l(e.target.value),placeholder:"https://instagram.com/yourbusiness"})]}),(0,ft.jsxs)("div",{className:"mb-5",children:[(0,ft.jsx)("label",{htmlFor:"facebookUrl",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Facebook URL (Optional):"}),(0,ft.jsx)("input",{type:"url",id:"facebookUrl",className:"shadow-sm appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 ease-in-out",value:c,onChange:e=>d(e.target.value),placeholder:"https://facebook.com/yourbusiness"})]}),(0,ft.jsxs)("div",{className:"mb-5",children:[(0,ft.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Business Photos (Optional):"}),(0,ft.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,ft.jsx)("input",{type:"file",ref:k,onChange:e=>{const t=Array.from(e.target.files);if(t.length>10)return void y("You can only select up to 10 photos");const n=[],i=[];for(const s of t){if(!s.type.startsWith("image/"))return void y("Only image files are allowed");if(s.size>5242880)return void y("Each image must be smaller than 5MB");n.push(s);const e=new FileReader;e.onload=e=>{i.push({file:s,url:e.target.result,name:s.name}),i.length===n.length&&g(i)},e.readAsDataURL(s)}p(n),y(null)},accept:"image/*",multiple:!0,className:"hidden"}),(0,ft.jsx)("button",{type:"button",onClick:()=>k.current.click(),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition duration-200",children:"\ud83d\udcf8 Select Photos"}),(0,ft.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Upload up to 10 photos of your business (max 5MB each)"})]}),f.length>0&&(0,ft.jsx)("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 gap-3",children:f.map((e,t)=>(0,ft.jsxs)("div",{className:"relative group",children:[(0,ft.jsx)("img",{src:e.url,alt:`Preview ${t+1}`,className:"w-full h-20 object-cover rounded-lg border border-gray-200"}),(0,ft.jsx)("button",{type:"button",onClick:()=>(e=>{const t=m.filter((t,n)=>n!==e),n=f.filter((t,n)=>n!==e);p(t),g(n)})(t),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 transition duration-200",children:"\xd7"})]},t))})]})]}),(0,ft.jsx)("div",{children:(0,ft.jsxs)("div",{className:"mb-6",children:[(0,ft.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Select Business Location:"}),(0,ft.jsx)(xp,{onLocationSelect:e=>{h(e),e.address&&a(e.address)},initialLocation:u})]})})]}),(0,ft.jsx)("button",{type:"submit",disabled:w,className:"w-full py-3 px-4 rounded-lg font-bold text-white transition duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:shadow-outline "+(w?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"),children:w?"Registering Business...":"Register Business"})]})]})})},$y=(0,t.createContext)(),Wy=()=>{const e=(0,t.useContext)($y);if(!e)throw new Error("useSubscription must be used within a SubscriptionProvider");return e},Hy={FREE:{id:"free",name:"Free",price:0,monthly:0,features:{maxBookingsPerMonth:10,maxBusinesses:1,emailNotifications:!0,smsNotifications:!1,analytics:!1,customBranding:!1,prioritySupport:!1,premiumListing:!1,commissionRate:.05},limitations:["Limited to 10 bookings per month","Basic email notifications only","No analytics dashboard","Standard listing in search results"]},BASIC:{id:"basic",name:"Basic",price:29.99,monthly:29.99,features:{maxBookingsPerMonth:100,maxBusinesses:3,emailNotifications:!0,smsNotifications:!0,analytics:!0,customBranding:!1,prioritySupport:!1,premiumListing:!1,commissionRate:.03},benefits:["Up to 100 bookings per month","SMS & Email notifications","Basic analytics dashboard","Reduced commission rate (3%)","Multiple business locations"]},PRO:{id:"pro",name:"Professional",price:79.99,monthly:79.99,features:{maxBookingsPerMonth:500,maxBusinesses:10,emailNotifications:!0,smsNotifications:!0,analytics:!0,customBranding:!0,prioritySupport:!0,premiumListing:!0,commissionRate:.025},benefits:["Up to 500 bookings per month","Premium listing placement","Advanced analytics & reporting","Custom branding options","Priority customer support","Lowest commission rate (2.5%)","Multiple business management"]},ENTERPRISE:{id:"enterprise",name:"Enterprise",price:199.99,monthly:199.99,features:{maxBookingsPerMonth:-1,maxBusinesses:-1,emailNotifications:!0,smsNotifications:!0,analytics:!0,customBranding:!0,prioritySupport:!0,premiumListing:!0,commissionRate:.02},benefits:["Unlimited bookings","Unlimited business locations","White-label solution","Dedicated account manager","Custom integrations","Lowest commission rate (2%)","API access","24/7 priority support"]}},Vy=e=>{let{children:n}=e;const[i,s]=(0,t.useState)(Hy.FREE),[r,a]=(0,t.useState)("active"),[o,l]=(0,t.useState)({bookingsThisMonth:0,businessCount:0,totalRevenue:0,commissionEarned:0}),[c,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=localStorage.getItem("subscriptionPlan"),t=localStorage.getItem("usageStats");if(e){const t=JSON.parse(e);s(Hy[t.toUpperCase()]||Hy.FREE)}t&&l(JSON.parse(t))}catch(e){console.error("Error loading subscription data:",e)}},h=e=>{const t=i.features;switch(e){case"bookings":return-1===t.maxBookingsPerMonth||o.bookingsThisMonth<t.maxBookingsPerMonth;case"businesses":return-1===t.maxBusinesses||o.businessCount<t.maxBusinesses;default:return!0}},m=e=>{const t=i.features;switch(e){case"bookings":return-1===t.maxBookingsPerMonth?0:o.bookingsThisMonth/t.maxBookingsPerMonth*100;case"businesses":return-1===t.maxBusinesses?0:o.businessCount/t.maxBusinesses*100;default:return 0}},p={currentPlan:i,subscriptionStatus:r,usageStats:o,showUpgradeModal:c,setShowUpgradeModal:d,upgradePlan:async e=>{try{const t=Hy[e.toUpperCase()];if(!t)throw new Error("Invalid plan");return s(t),localStorage.setItem("subscriptionPlan",e.toLowerCase()),d(!1),{success:!0,message:`Successfully upgraded to ${t.name} plan!`}}catch(t){return console.error("Error upgrading plan:",t),{success:!1,message:t.message}}},checkUsageLimit:h,incrementUsage:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l(n=>{const s={...n};switch(e){case"bookings":s.bookingsThisMonth+=t;break;case"businesses":s.businessCount+=t;break;case"revenue":s.totalRevenue+=t,s.commissionEarned+=t*i.features.commissionRate}return localStorage.setItem("usageStats",JSON.stringify(s)),s})},getUsagePercentage:m,shouldShowUpgradePrompt:()=>m("bookings")>80||m("businesses")>80||!h("bookings")||!h("businesses"),calculateCommission:function(e){return"online"!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"online")?0:e*i.features.commissionRate},plans:Hy};return(0,ft.jsx)($y.Provider,{value:p,children:n})},qy=e=>{let{compact:t=!1,showUpgrade:n=!0}=e;const{currentPlan:i,usageStats:s,plans:r,upgradePlan:a}=Wy(),{theme:o}=hp(),l=ne(),c=e=>{let{label:t,used:n,limit:i,icon:s}=e;const r=((e,t)=>-1===t?0:Math.min(e/t*100,100))(n,i),a=(e=>e<50?"bg-green-500":e<80?"bg-yellow-500":"bg-red-500")(r);return(0,ft.jsxs)("div",{className:"space-y-2",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ft.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:s}),(0,ft.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t})]}),(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:-1===i?`${n} / Unlimited`:`${n} / ${i}`})]}),-1!==i&&(0,ft.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,ft.jsx)("div",{className:`h-2 rounded-full transition-all duration-300 ${a}`,style:{width:`${r}%`}})}),-1!==i&&r>=90&&(0,ft.jsxs)("p",{className:"text-xs text-red-600 dark:text-red-400",children:["\u26a0\ufe0f ",r>=100?"Limit reached!":"Approaching limit"]})]})};return t?(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ft.jsxs)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Usage (",i.name,")"]}),"enterprise"!==i.id&&n&&(0,ft.jsx)("button",{onClick:()=>l("/subscription"),className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 transition-colors",children:"Upgrade"})]}),(0,ft.jsxs)("div",{className:"space-y-3",children:[(0,ft.jsx)(c,{label:"Bookings",used:s.bookingsThisMonth,limit:i.features.maxBookingsPerMonth,icon:"\ud83d\udcc5"}),(0,ft.jsx)(c,{label:"Businesses",used:s.businessCount,limit:i.features.maxBusinesses,icon:"\ud83c\udfe2"})]})]}):(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Usage Dashboard"}),(0,ft.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Current Plan: ",(0,ft.jsx)("span",{className:"font-semibold",children:i.name}),(0,ft.jsxs)("span",{className:"ml-2 text-sm bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:[(100*i.features.commissionRate).toFixed(1),"% commission"]})]})]}),"enterprise"!==i.id&&n&&(0,ft.jsx)("button",{onClick:()=>l("/subscription"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Upgrade Plan"})]}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,ft.jsx)(c,{label:"Monthly Bookings",used:s.bookingsThisMonth,limit:i.features.maxBookingsPerMonth,icon:"\ud83d\udcc5"}),(0,ft.jsx)(c,{label:"Business Locations",used:s.businessCount,limit:i.features.maxBusinesses,icon:"\ud83c\udfe2"})]}),(0,ft.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-6",children:[(0,ft.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Revenue Overview"}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ft.jsx)("div",{className:"bg-green-50 dark:bg-green-900 rounded-lg p-4",children:(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("span",{className:"text-2xl mr-3",children:"\ud83d\udcb0"}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Total Revenue"}),(0,ft.jsxs)("p",{className:"text-xl font-bold text-green-800 dark:text-green-200",children:["$",s.totalRevenue.toFixed(2)]})]})]})}),(0,ft.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-lg p-4",children:(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("span",{className:"text-2xl mr-3",children:"\ud83c\udfe6"}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Commission Earned"}),(0,ft.jsxs)("p",{className:"text-xl font-bold text-blue-800 dark:text-blue-200",children:["$",s.commissionEarned.toFixed(2)]})]})]})}),(0,ft.jsx)("div",{className:"bg-purple-50 dark:bg-purple-900 rounded-lg p-4",children:(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("span",{className:"text-2xl mr-3",children:"\ud83d\udcca"}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Avg. Per Booking"}),(0,ft.jsxs)("p",{className:"text-xl font-bold text-purple-800 dark:text-purple-200",children:["$",s.bookingsThisMonth>0?(s.totalRevenue/s.bookingsThisMonth).toFixed(2):"0.00"]})]})]})})]})]}),(0,ft.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-6 mt-6",children:[(0,ft.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Current Plan Benefits"}),(0,ft.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"w-12 h-12 rounded-full mx-auto mb-2 flex items-center justify-center "+(i.features.smsNotifications?"bg-green-100 dark:bg-green-800":"bg-gray-100 dark:bg-gray-700"),children:(0,ft.jsx)("span",{className:"text-xl",children:i.features.smsNotifications?"\u2705":"\u274c"})}),(0,ft.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"SMS Notifications"})]}),(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"w-12 h-12 rounded-full mx-auto mb-2 flex items-center justify-center "+(i.features.analytics?"bg-green-100 dark:bg-green-800":"bg-gray-100 dark:bg-gray-700"),children:(0,ft.jsx)("span",{className:"text-xl",children:i.features.analytics?"\u2705":"\u274c"})}),(0,ft.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Analytics"})]}),(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"w-12 h-12 rounded-full mx-auto mb-2 flex items-center justify-center "+(i.features.premiumListing?"bg-green-100 dark:bg-green-800":"bg-gray-100 dark:bg-gray-700"),children:(0,ft.jsx)("span",{className:"text-xl",children:i.features.premiumListing?"\u2705":"\u274c"})}),(0,ft.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Premium Listing"})]}),(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-800 rounded-full mx-auto mb-2 flex items-center justify-center",children:(0,ft.jsx)("span",{className:"text-xl",children:"\ud83d\udcde"})}),(0,ft.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"24/7 Support"})]})]})]}),(s.bookingsThisMonth/i.features.maxBookingsPerMonth>.8||s.businessCount/i.features.maxBusinesses>.8)&&(0,ft.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-6 mt-6",children:(0,ft.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4",children:(0,ft.jsxs)("div",{className:"flex items-start",children:[(0,ft.jsx)("span",{className:"text-2xl mr-3",children:"\u26a1"}),(0,ft.jsxs)("div",{className:"flex-1",children:[(0,ft.jsx)("h4",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"Consider Upgrading"}),(0,ft.jsx)("p",{className:"text-yellow-700 dark:text-yellow-300 mb-3",children:"You're approaching your plan limits. Upgrade to get more capacity and lower commission rates!"}),(0,ft.jsx)("button",{onClick:()=>l("/subscription"),className:"bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700 transition-colors",children:"View Upgrade Options"})]})]})})})]})},Zy=[{name:"Monday",value:"monday"},{name:"Tuesday",value:"tuesday"},{name:"Wednesday",value:"wednesday"},{name:"Thursday",value:"thursday"},{name:"Friday",value:"friday"},{name:"Saturday",value:"saturday"},{name:"Sunday",value:"sunday"}];const Yy=function(){const e=ne(),[n,i]=(0,t.useState)(null),[s,r]=(0,t.useState)([]),[a,o]=(0,t.useState)({slot_duration_minutes:30,working_hours_json:Zy.map(e=>({day:e.value,enabled:!1,open:"09:00",close:"17:00"})),online_payment_enabled:!1,accept_walkins:!1,max_simultaneous_bookings:1}),[l,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(null),[h,m]=(0,t.useState)(null),[p,f]=(0,t.useState)("dashboard");(0,t.useEffect)(()=>{console.log("BusinessDashboard: Component mounted, triggering data fetch."),(async()=>{console.log("BusinessDashboard: Starting data fetch..."),c(!0),u(null);try{console.log("BusinessDashboard: Fetching user business...");const t=await gh.get("/api/business/user-business");if(console.log("BusinessDashboard: user-business response:",t.data),!t.data.business)return console.log("BusinessDashboard: No business found for user. Redirecting to /register-business."),i(null),void e("/register-business");i(t.data.business);const n=await gh.get("/api/business/settings");n.data.settings&&o(e=>({...e,...n.data.settings,working_hours_json:n.data.settings.working_hours_json||e.working_hours_json})),console.log("BusinessDashboard: Fetching business reservations...");const s=await gh.get("/api/business/reservations");console.log("BusinessDashboard: reservations response:",s.data),r(s.data.reservations),console.log("BusinessDashboard: Reservations loaded.")}catch(d){var t,n,s,a,l;console.error("BusinessDashboard: Error during data fetch:",(null===(t=d.response)||void 0===t?void 0:t.data)||d),u((null===(n=d.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.error)||"Failed to fetch dashboard data."),401!==(null===(a=d.response)||void 0===a?void 0:a.status)&&403!==(null===(l=d.response)||void 0===l?void 0:l.status)||(console.log("BusinessDashboard: Unauthorized. Redirecting to /login."),e("/login"))}finally{console.log("BusinessDashboard: Data fetch finished. Loading:",!1),c(!1)}})()},[e]);const g=e=>{const{name:t,type:n,checked:i,value:s}=e.target;o(e=>({...e,[t]:"checkbox"===n?i:s}))},x=(e,t,n)=>{o(i=>{const s=[...i.working_hours_json];return s[e]={...s[e],[t]:n},{...i,working_hours_json:s}})};return l?(console.log("BusinessDashboard: Rendering loading state."),(0,ft.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,ft.jsx)("p",{className:"text-gray-700 text-xl",children:"Loading dashboard..."})})):d?(console.log("BusinessDashboard: Rendering error state.",d),(0,ft.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-red-100 text-red-700 p-4",children:(0,ft.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[(0,ft.jsxs)("p",{className:"text-red-600 text-center mb-4",children:["Error: ",d]}),(0,ft.jsx)("button",{onClick:()=>e("/login"),className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Go to Login"})]})})):(console.log("BusinessDashboard: Rendering main content. Business:",n,"Reservations:",s,"Settings:",a),(0,ft.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8",children:(0,ft.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,ft.jsx)("h1",{className:"text-3xl sm:text-4xl font-extrabold text-gray-900 mb-6 sm:mb-8 text-center",children:"Business Dashboard"}),(0,ft.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[(0,ft.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:(null===n||void 0===n?void 0:n.name)||"Your Business"}),(0,ft.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Type: ",null===n||void 0===n?void 0:n.type]}),(0,ft.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Location: ",null===n||void 0===n?void 0:n.location]})]}),(0,ft.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,ft.jsx)(qy,{compact:!0})}),(0,ft.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[(0,ft.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Quick Actions"}),(0,ft.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,ft.jsx)("button",{onClick:()=>e("/commission-analytics"),className:"flex items-center justify-center p-3 sm:p-4 bg-purple-100 hover:bg-purple-200 rounded-lg transition-colors",children:(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"text-xl sm:text-2xl mb-1 sm:mb-2",children:"\ud83d\udcca"}),(0,ft.jsx)("div",{className:"text-xs sm:text-sm font-semibold text-purple-700",children:"Commission Analytics"})]})}),(0,ft.jsx)("button",{onClick:()=>e("/subscription"),className:"flex items-center justify-center p-3 sm:p-4 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",children:(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"text-xl sm:text-2xl mb-1 sm:mb-2",children:"\ud83d\udc8e"}),(0,ft.jsx)("div",{className:"text-xs sm:text-sm font-semibold text-blue-700",children:"Subscription Plans"})]})}),(0,ft.jsx)("button",{onClick:()=>f("reservations"),className:"flex items-center justify-center p-3 sm:p-4 bg-green-100 hover:bg-green-200 rounded-lg transition-colors",children:(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"text-xl sm:text-2xl mb-1 sm:mb-2",children:"\ud83d\udcc5"}),(0,ft.jsx)("div",{className:"text-xs sm:text-sm font-semibold text-green-700",children:"View Reservations"})]})}),(0,ft.jsx)("button",{onClick:()=>f("settings"),className:"flex items-center justify-center p-3 sm:p-4 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"text-xl sm:text-2xl mb-1 sm:mb-2",children:"\u2699\ufe0f"}),(0,ft.jsx)("div",{className:"text-xs sm:text-sm font-semibold text-gray-700",children:"Business Settings"})]})})]})]}),(0,ft.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[(0,ft.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-4",children:"Business Settings"}),h&&(0,ft.jsx)("p",{className:"text-green-600 text-center mb-4 bg-green-100 p-3 rounded-md text-sm sm:text-base",children:h}),(0,ft.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(null),u(null);try{console.log("BusinessDashboard: Updating settings...",a);const e=await gh.put("/api/business/settings",a);console.log("BusinessDashboard: Settings update response:",e.data),m(e.data.message)}catch(s){var t,n,i;console.error("BusinessDashboard: Error updating settings:",(null===(t=s.response)||void 0===t?void 0:t.data)||s),u((null===(n=s.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.error)||"Failed to update settings.")}},children:[(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{htmlFor:"slot_duration_minutes",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Slot Duration (minutes):"}),(0,ft.jsx)("input",{type:"number",id:"slot_duration_minutes",name:"slot_duration_minutes",className:"shadow-sm appearance-none border border-gray-300 rounded-lg w-full py-2 px-3 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 ease-in-out",value:a.slot_duration_minutes,onChange:g,min:"10",required:!0})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{htmlFor:"max_simultaneous_bookings",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Max Simultaneous Bookings:"}),(0,ft.jsx)("input",{type:"number",id:"max_simultaneous_bookings",name:"max_simultaneous_bookings",className:"shadow-sm appearance-none border border-gray-300 rounded-lg w-full py-2 px-3 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 ease-in-out",value:a.max_simultaneous_bookings,onChange:g,min:"1",required:!0})]})]}),(0,ft.jsxs)("div",{className:"mb-6",children:[(0,ft.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Working Hours:"}),a.working_hours_json.map((e,t)=>(0,ft.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,ft.jsx)("input",{type:"checkbox",id:`day-${e.day}`,checked:e.enabled,onChange:e=>x(t,"enabled",e.target.checked),className:"form-checkbox h-5 w-5 text-blue-600 rounded"}),(0,ft.jsxs)("label",{htmlFor:`day-${e.day}`,className:"text-gray-700 w-24",children:[Zy[t].name,":"]}),(0,ft.jsx)("input",{type:"time",value:e.open,onChange:e=>x(t,"open",e.target.value),disabled:!e.enabled,className:"shadow-sm border border-gray-300 rounded-lg py-1 px-2 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 ease-in-out"}),(0,ft.jsx)("span",{children:"-"}),(0,ft.jsx)("input",{type:"time",value:e.close,onChange:e=>x(t,"close",e.target.value),disabled:!e.enabled,className:"shadow-sm border border-gray-300 rounded-lg py-1 px-2 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 ease-in-out"})]},e.day))]}),(0,ft.jsxs)("div",{className:"mb-6 flex items-center space-x-6",children:[(0,ft.jsxs)("label",{className:"flex items-center",children:[(0,ft.jsx)("input",{type:"checkbox",name:"online_payment_enabled",checked:a.online_payment_enabled,onChange:g,className:"form-checkbox h-5 w-5 text-blue-600 rounded"}),(0,ft.jsx)("span",{className:"ml-2 text-gray-700",children:"Enable Online Payment"})]}),(0,ft.jsxs)("label",{className:"flex items-center",children:[(0,ft.jsx)("input",{type:"checkbox",name:"accept_walkins",checked:a.accept_walkins,onChange:g,className:"form-checkbox h-5 w-5 text-blue-600 rounded"}),(0,ft.jsx)("span",{className:"ml-2 text-gray-700",children:"Accept Walk-ins"})]})]}),(0,ft.jsx)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline w-full transform transition duration-200 ease-in-out hover:scale-105",children:"Update Settings"})]})]}),(0,ft.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Recent Reservations"}),0===s.length?(0,ft.jsx)("p",{className:"text-gray-600",children:"No reservations found."}):(0,ft.jsx)("div",{className:"overflow-x-auto bg-white shadow-md rounded-lg",children:(0,ft.jsxs)("table",{className:"min-w-full leading-normal",children:[(0,ft.jsx)("thead",{children:(0,ft.jsxs)("tr",{children:[(0,ft.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Reservation ID"}),(0,ft.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Customer Name"}),(0,ft.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"}),(0,ft.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Time"}),(0,ft.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Payment Status"}),(0,ft.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,ft.jsx)("tbody",{children:s.map(e=>{var t;return(0,ft.jsxs)("tr",{children:[(0,ft.jsxs)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[e.id.substring(0,8),"..."]}),(0,ft.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(null===(t=e.users)||void 0===t?void 0:t.full_name)||"N/A"}),(0,ft.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:new Date(e.date).toLocaleDateString()}),(0,ft.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.time}),(0,ft.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,ft.jsxs)("span",{className:"relative inline-block px-3 py-1 font-semibold leading-tight "+("paid"===e.payment_status?"text-green-900":"text-yellow-900"),children:[(0,ft.jsx)("span",{"aria-hidden":"true",className:"absolute inset-0 opacity-50 rounded-full "+("paid"===e.payment_status?"bg-green-200":"bg-yellow-200")}),(0,ft.jsx)("span",{className:"relative",children:e.payment_status})]})}),(0,ft.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,ft.jsxs)("select",{value:e.payment_status,onChange:t=>(async(e,t)=>{try{console.log(`BusinessDashboard: Updating reservation ${e} to status ${t}`),await gh.put(`/api/business/reservations/${e}`,{payment_status:t}),r(n=>n.map(n=>n.id===e?{...n,payment_status:t}:n)),alert("Reservation status updated!")}catch(a){var n,i,s;console.error("BusinessDashboard: Error updating reservation status:",(null===(n=a.response)||void 0===n?void 0:n.data)||a),u((null===(i=a.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.error)||"Failed to update reservation status.")}})(e.id,t.target.value),className:"block w-full text-gray-700 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,ft.jsx)("option",{value:"unpaid",children:"Unpaid"}),(0,ft.jsx)("option",{value:"paid",children:"Paid"})]})})]},e.id)})})]})})]})}))};delete _h().Icon.Default.prototype._getIconUrl,_h().Icon.Default.mergeOptions({iconRetinaUrl:n(249),iconUrl:n(24),shadowUrl:n(71)});const Ky=e=>{let{business:n,onBusinessUpdate:i}=e;const[s,r]=(0,t.useState)(!1),[a,o]=(0,t.useState)({}),[l,c]=(0,t.useState)({}),[d,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)({show:!1,message:"",type:""}),[p,f]=(0,t.useState)({}),[g,x]=(0,t.useState)(!1),[y,b]=(0,t.useState)([]),[v,w]=(0,t.useState)([]),[_,k]=(0,t.useState)(!1),j=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(n){const e={name:n.name||"",type:n.type||"",location:n.location||"",phone:n.phone||"",description:n.description||"",latitude:n.latitude||"",longitude:n.longitude||"",instagram_url:n.instagram_url||"",facebook_url:n.facebook_url||""};o(e),c(e),C()}},[n]),(0,t.useEffect)(()=>{const e=Object.keys(a).some(e=>a[e]!==l[e]);x(e)},[a,l]);const N=[{value:"barbershop",label:"\ud83d\udc87 Barbershop",icon:"\ud83d\udc87"},{value:"beauty_salon",label:"\ud83d\udc84 Beauty Salon",icon:"\ud83d\udc84"},{value:"restaurant",label:"\ud83c\udf7d\ufe0f Restaurant",icon:"\ud83c\udf7d\ufe0f"},{value:"cafe",label:"\u2615 Caf\xe9",icon:"\u2615"},{value:"football_field",label:"\u26bd Football Field",icon:"\u26bd"},{value:"tennis_court",label:"\ud83c\udfbe Tennis Court",icon:"\ud83c\udfbe"},{value:"gym",label:"\ud83d\udcaa Gym",icon:"\ud83d\udcaa"},{value:"car_wash",label:"\ud83d\ude97 Car Wash",icon:"\ud83d\ude97"},{value:"spa",label:"\ud83e\uddd8 Spa & Wellness",icon:"\ud83e\uddd8"},{value:"dentist",label:"\ud83e\uddb7 Dentist",icon:"\ud83e\uddb7"},{value:"doctor",label:"\ud83d\udc69\u200d\u2695\ufe0f Doctor",icon:"\ud83d\udc69\u200d\u2695\ufe0f"},{value:"other",label:"\ud83c\udfe2 Other",icon:"\ud83c\udfe2"}],S=function(e){m({show:!0,message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info"}),setTimeout(()=>m({show:!1,message:"",type:""}),4e3)},C=async()=>{if(null!==n&&void 0!==n&&n.id)try{const e=await gh.get(`/api/business/${n.id}/photos`);b(e.data.photos||[])}catch(e){console.error("Error fetching business photos:",e)}},P=(e,t)=>{o(n=>({...n,[e]:t})),p[e]&&f(t=>({...t,[e]:""}))},T=e=>{const t=N.find(t=>t.value===e);return t?t.icon:"\ud83c\udfe2"},E=e=>{const t=N.find(t=>t.value===e);return t?t.label.replace(/^.+?\s/,""):(null===e||void 0===e?void 0:e.replace("_"," "))||"Not specified"};return(0,ft.jsxs)("div",{className:"max-w-5xl mx-auto p-6",children:[(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-8",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Business Profile"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:s?"Update your business information":"Manage your business details"})]}),(0,ft.jsx)(At,{mode:"wait",children:s?(0,ft.jsxs)("div",{className:"flex gap-3",children:[(0,ft.jsx)(gc.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:async()=>{if((()=>{var e,t;const n={};return null!==(e=a.name)&&void 0!==e&&e.trim()||(n.name="Business name is required"),a.type||(n.type="Business type is required"),null!==(t=a.location)&&void 0!==t&&t.trim()||(n.location="Location is required"),a.phone&&!/^[\+]?[1-9][\d]{0,15}$/.test(a.phone.replace(/\s/g,""))&&(n.phone="Please enter a valid phone number"),f(n),0===Object.keys(n).length})()){u(!0);try{await gh.put("/api/business/update",a),c({...a}),r(!1),S("Business details updated successfully!","success"),i&&i()}catch(n){var e,t;S((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to update business details","error")}finally{u(!1)}}else S("Please fix the errors below","error")},disabled:d||!g,className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:d?(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)("div",{className:"animate-spin w-5 h-5 border-2 border-white/30 border-t-white rounded-full"}),"Saving..."]}):(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)("span",{children:"\ud83d\udcbe"}),"Save Changes"]})},"save-button"),(0,ft.jsxs)(gc.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{o({...l}),f({}),r(!1)},className:"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-xl font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[(0,ft.jsx)("span",{children:"\u274c"}),"Cancel"]},"cancel-button")]}):(0,ft.jsxs)(gc.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},whileHover:{scale:1.05,boxShadow:"0 10px 25px rgba(0,0,0,0.1)"},whileTap:{scale:.95},onClick:()=>{r(!0),f({})},className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white px-8 py-4 rounded-2xl font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center gap-3 group",children:[(0,ft.jsx)("span",{className:"text-xl group-hover:rotate-12 transition-transform",children:"\u2728"}),"Edit Profile"]},"edit-button")})]}),(0,ft.jsx)(At,{children:h.show&&(0,ft.jsx)(gc.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},className:"mb-6 p-4 rounded-2xl shadow-lg border-l-4 "+("success"===h.type?"bg-green-50 border-green-500 text-green-700 dark:bg-green-900/20 dark:text-green-400":"error"===h.type?"bg-red-50 border-red-500 text-red-700 dark:bg-red-900/20 dark:text-red-400":"bg-blue-50 border-blue-500 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400"),children:(0,ft.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ft.jsx)("span",{className:"text-xl",children:"success"===h.type?"\u2705":"error"===h.type?"\u26a0\ufe0f":"\u2139\ufe0f"}),h.message]})})}),(0,ft.jsx)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/90 backdrop-blur-sm dark:bg-gray-800/90 rounded-3xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden",children:s?(0,ft.jsx)("div",{className:"p-8",children:(0,ft.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:[(0,ft.jsxs)("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83c\udfe2"}),"Business Name *"]}),(0,ft.jsx)("input",{type:"text",value:a.name||"",onChange:e=>P("name",e.target.value),className:"w-full px-5 py-4 border-2 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-lg "+(p.name?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Enter your business name"}),p.name&&(0,ft.jsxs)("p",{className:"text-red-500 text-sm mt-2 flex items-center gap-1",children:[(0,ft.jsx)("span",{children:"\u26a0\ufe0f"})," ",p.name]})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:[(0,ft.jsxs)("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83c\udfaf"}),"Business Type *"]}),(0,ft.jsxs)("select",{value:a.type||"",onChange:e=>P("type",e.target.value),className:"w-full px-5 py-4 border-2 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-lg "+(p.type?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[(0,ft.jsx)("option",{value:"",children:"Select business type"}),N.map(e=>(0,ft.jsx)("option",{value:e.value,children:e.label},e.value))]}),p.type&&(0,ft.jsxs)("p",{className:"text-red-500 text-sm mt-2 flex items-center gap-1",children:[(0,ft.jsx)("span",{children:"\u26a0\ufe0f"})," ",p.type]})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[(0,ft.jsxs)("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udccd"}),"Location *"]}),(0,ft.jsx)("input",{type:"text",value:a.location||"",onChange:e=>P("location",e.target.value),className:"w-full px-5 py-4 border-2 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-lg "+(p.location?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Enter your business location"}),p.location&&(0,ft.jsxs)("p",{className:"text-red-500 text-sm mt-2 flex items-center gap-1",children:[(0,ft.jsx)("span",{children:"\u26a0\ufe0f"})," ",p.location]})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,ft.jsxs)("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udcde"}),"Phone Number"]}),(0,ft.jsx)("input",{type:"tel",value:a.phone||"",onChange:e=>P("phone",e.target.value),className:"w-full px-5 py-4 border-2 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-lg "+(p.phone?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Enter phone number"}),p.phone&&(0,ft.jsxs)("p",{className:"text-red-500 text-sm mt-2 flex items-center gap-1",children:[(0,ft.jsx)("span",{children:"\u26a0\ufe0f"})," ",p.phone]})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"lg:col-span-2",children:[(0,ft.jsxs)("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udcdd"}),"Description"]}),(0,ft.jsx)("textarea",{value:a.description||"",onChange:e=>P("description",e.target.value),rows:4,className:"w-full px-5 py-4 border-2 border-gray-300 dark:border-gray-600 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Describe your business, services, and what makes you special..."})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},children:[(0,ft.jsxs)("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udcf8"}),"Instagram URL (Optional)"]}),(0,ft.jsx)("input",{type:"url",value:a.instagram_url||"",onChange:e=>P("instagram_url",e.target.value),className:"w-full px-5 py-4 border-2 border-gray-300 dark:border-gray-600 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://instagram.com/yourbusiness"})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[(0,ft.jsxs)("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udc65"}),"Facebook URL (Optional)"]}),(0,ft.jsx)("input",{type:"url",value:a.facebook_url||"",onChange:e=>P("facebook_url",e.target.value),className:"w-full px-5 py-4 border-2 border-gray-300 dark:border-gray-600 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://facebook.com/yourbusiness"})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.65},className:"lg:col-span-2",children:[(0,ft.jsxs)("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\uddfa\ufe0f"}),"Business Location on Map"]}),(0,ft.jsx)("div",{className:"border-2 border-gray-300 dark:border-gray-600 rounded-2xl overflow-hidden shadow-lg",children:(0,ft.jsx)(xp,{onLocationSelect:e=>{o(t=>({...t,latitude:e.lat,longitude:e.lng,location:e.address||t.location}))},initialLocation:a.latitude&&a.longitude?{lat:parseFloat(a.latitude),lng:parseFloat(a.longitude)}:null})}),(0,ft.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 flex items-center gap-1",children:[(0,ft.jsx)("span",{children:"\ud83d\udca1"}),"Click on the map to select your exact business location"]})]}),a.latitude&&a.longitude&&(0,ft.jsx)(gc.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.7},className:"lg:col-span-2",children:(0,ft.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-4 rounded-2xl border border-blue-200 dark:border-blue-700",children:[(0,ft.jsxs)("p",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-2",children:[(0,ft.jsx)("span",{children:"\ud83c\udfaf"}),"Selected Coordinates"]}),(0,ft.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-xl",children:[(0,ft.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Latitude"}),(0,ft.jsx)("div",{className:"font-mono text-lg font-semibold text-blue-600 dark:text-blue-400",children:parseFloat(a.latitude).toFixed(6)})]}),(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-xl",children:[(0,ft.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Longitude"}),(0,ft.jsx)("div",{className:"font-mono text-lg font-semibold text-purple-600 dark:text-purple-400",children:parseFloat(a.longitude).toFixed(6)})]})]})]})})]})}):(0,ft.jsx)("div",{className:"p-8",children:(0,ft.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,ft.jsxs)("div",{className:"space-y-6",children:[(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-2xl border border-blue-200 dark:border-blue-700",children:[(0,ft.jsxs)("label",{className:"block text-sm font-semibold text-blue-600 dark:text-blue-400 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83c\udfe2"}),"Business Name"]}),(0,ft.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null===n||void 0===n?void 0:n.name)||"Not specified"})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-2xl border border-purple-200 dark:border-purple-700",children:[(0,ft.jsxs)("label",{className:"block text-sm font-semibold text-purple-600 dark:text-purple-400 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83c\udfaf"}),"Business Type"]}),(0,ft.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ft.jsx)("span",{className:"text-3xl",children:T(null===n||void 0===n?void 0:n.type)}),(0,ft.jsx)("span",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:E(null===n||void 0===n?void 0:n.type)})]})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-2xl border border-green-200 dark:border-green-700",children:[(0,ft.jsxs)("label",{className:"block text-sm font-semibold text-green-600 dark:text-green-400 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udccd"}),"Location"]}),(0,ft.jsxs)("div",{className:"text-lg text-gray-900 dark:text-white flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-xl",children:"\ud83c\udfe0"}),(null===n||void 0===n?void 0:n.location)||"Not specified"]})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 p-6 rounded-2xl border border-orange-200 dark:border-orange-700",children:[(0,ft.jsxs)("label",{className:"block text-sm font-semibold text-orange-600 dark:text-orange-400 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udcde"}),"Phone Number"]}),(0,ft.jsxs)("div",{className:"text-lg text-gray-900 dark:text-white flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-xl",children:"\u260e\ufe0f"}),(null===n||void 0===n?void 0:n.phone)||"Not specified"]})]}),((null===n||void 0===n?void 0:n.instagram_url)||(null===n||void 0===n?void 0:n.facebook_url))&&(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.45},className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/20 dark:to-rose-900/20 p-6 rounded-2xl border border-pink-200 dark:border-pink-700",children:[(0,ft.jsxs)("label",{className:"block text-sm font-semibold text-pink-600 dark:text-pink-400 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udd17"}),"Social Media"]}),(0,ft.jsxs)("div",{className:"space-y-3",children:[(null===n||void 0===n?void 0:n.instagram_url)&&(0,ft.jsxs)("a",{href:n.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-gray-900 dark:text-white hover:text-pink-600 dark:hover:text-pink-400 transition-colors duration-200 p-2 rounded-lg hover:bg-pink-100 dark:hover:bg-pink-900/30",children:[(0,ft.jsx)("span",{className:"text-2xl",children:"\ud83d\udcf8"}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("div",{className:"font-medium",children:"Instagram"}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View our photos"})]})]}),(null===n||void 0===n?void 0:n.facebook_url)&&(0,ft.jsxs)("a",{href:n.facebook_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 p-2 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30",children:[(0,ft.jsx)("span",{className:"text-2xl",children:"\ud83d\udc65"}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("div",{className:"font-medium",children:"Facebook"}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Like our page"})]})]})]})]})]}),(0,ft.jsxs)("div",{className:"space-y-6",children:[(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-gradient-to-br from-gray-50 to-slate-50 dark:from-gray-900/20 dark:to-slate-900/20 p-6 rounded-2xl border border-gray-200 dark:border-gray-700",children:[(0,ft.jsxs)("label",{className:"block text-sm font-semibold text-gray-600 dark:text-gray-400 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\udcdd"}),"Description"]}),(0,ft.jsx)("div",{className:"text-gray-900 dark:text-white leading-relaxed",children:(null===n||void 0===n?void 0:n.description)||"No description provided"})]}),(null===n||void 0===n?void 0:n.latitude)&&(null===n||void 0===n?void 0:n.longitude)&&(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-gradient-to-br from-teal-50 to-cyan-50 dark:from-teal-900/20 dark:to-cyan-900/20 p-6 rounded-2xl border border-teal-200 dark:border-teal-700",children:[(0,ft.jsxs)("label",{className:"block text-sm font-semibold text-teal-600 dark:text-teal-400 mb-3 flex items-center gap-2",children:[(0,ft.jsx)("span",{className:"text-lg",children:"\ud83d\uddfa\ufe0f"}),"Business Location"]}),(0,ft.jsx)("div",{className:"rounded-2xl overflow-hidden border-2 border-teal-200 dark:border-teal-600 shadow-lg",children:(0,ft.jsx)("div",{style:{height:"250px",width:"100%"},children:(0,ft.jsxs)(jh,{center:[n.latitude,n.longitude],zoom:15,scrollWheelZoom:!1,style:{height:"100%",width:"100%"},children:[(0,ft.jsx)(Lh,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,ft.jsx)(Oh,{position:[n.latitude,n.longitude],children:(0,ft.jsx)(Rh,{children:(0,ft.jsxs)("div",{className:"text-center p-2",children:[(0,ft.jsx)("div",{className:"font-bold text-lg mb-1",children:n.name}),(0,ft.jsx)("div",{className:"text-sm text-gray-600",children:n.location}),(0,ft.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[T(n.type)," ",E(n.type)]})]})})})]})})}),(0,ft.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-2 font-mono",children:["\ud83d\udccd Coordinates: ",parseFloat(n.latitude).toFixed(6),", ",parseFloat(n.longitude).toFixed(6)]})]})]})]})})}),(0,ft.jsx)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/90 backdrop-blur-sm dark:bg-gray-800/90 rounded-3xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden mt-6",children:(0,ft.jsxs)("div",{className:"p-8",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-3",children:[(0,ft.jsx)("span",{className:"text-3xl",children:"\ud83d\udcf8"}),"Business Photos"]}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Showcase your business with high-quality photos (max 10)"})]}),(0,ft.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[y.length,"/10 photos"]})]}),(0,ft.jsxs)("div",{className:"mb-6",children:[(0,ft.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[(0,ft.jsxs)("div",{className:"flex-1",children:[(0,ft.jsx)("input",{type:"file",ref:j,onChange:e=>{const t=Array.from(e.target.files);if(y.length+t.length>10)return void S("You can only have up to 10 photos total","error");const n=[];for(const i of t){if(!i.type.startsWith("image/"))return void S("Only image files are allowed","error");if(i.size>5242880)return void S("Each image must be smaller than 5MB","error");n.push(i)}w(n)},accept:"image/*",multiple:!0,className:"hidden"}),(0,ft.jsxs)("button",{onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},disabled:y.length>=10,className:"w-full sm:w-auto px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center gap-2 "+(y.length>=10?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white hover:shadow-lg"),children:[(0,ft.jsx)("span",{children:"\ud83d\udcce"}),"Select Photos"]}),(0,ft.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Supported formats: JPG, PNG, GIF (max 5MB each)"})]}),v.length>0&&(0,ft.jsx)("button",{onClick:async()=>{if(0!==v.length){k(!0);try{const e=new FormData;v.forEach(t=>{e.append("business_photos",t)});const t=await gh.post("/api/business/photos",e,{headers:{"Content-Type":"multipart/form-data"}});S(`${t.data.photos.length} photo(s) uploaded successfully`,"success"),w([]),j.current.value="",C()}catch(n){var e,t;S((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to upload photos","error")}finally{k(!1)}}},disabled:_,className:"px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-medium transition-all duration-200 flex items-center gap-2 disabled:opacity-50",children:_?(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)("span",{children:"\u2b06\ufe0f"}),"Upload ",v.length," Photo",v.length>1?"s":""]})})]}),v.length>0&&(0,ft.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-700",children:[(0,ft.jsxs)("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-3",children:["Selected Photos (",v.length,")"]}),(0,ft.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:v.map((e,t)=>(0,ft.jsxs)("div",{className:"flex-shrink-0",children:[(0,ft.jsx)("img",{src:URL.createObjectURL(e),alt:`Selected ${t+1}`,className:"w-16 h-16 object-cover rounded-lg border border-blue-300"}),(0,ft.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 truncate w-16",children:e.name})]},t))})]})]}),y.length>0?(0,ft.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:y.map((e,t)=>(0,ft.jsxs)(gc.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*t},className:"relative group",children:[(0,ft.jsxs)("div",{className:"relative overflow-hidden rounded-xl border-2 border-gray-200 dark:border-gray-600 hover:border-blue-400 transition-all duration-200",children:[(0,ft.jsx)("img",{src:e.photo_url,alt:`Business photo ${t+1}`,className:"w-full h-32 object-cover group-hover:scale-105 transition-transform duration-200"}),e.is_primary&&(0,ft.jsx)("div",{className:"absolute top-2 left-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"\u2b50 Primary"}),(0,ft.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition-all duration-200 flex items-center justify-center",children:(0,ft.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex gap-2",children:[!e.is_primary&&(0,ft.jsx)("button",{onClick:()=>(async e=>{try{await gh.put(`/api/business/photos/${e}`,{is_primary:!0}),S("Primary photo updated successfully","success"),C()}catch(i){var t,n;S((null===(t=i.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to update primary photo","error")}})(e.id),className:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg text-xs transition-colors",title:"Set as primary",children:"\u2b50"}),(0,ft.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this photo?"))try{await gh.delete(`/api/business/photos/${e}`),S("Photo deleted successfully","success"),C()}catch(i){var t,n;S((null===(t=i.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to delete photo","error")}})(e.id),className:"bg-red-500 hover:bg-red-600 text-white p-2 rounded-lg text-xs transition-colors",title:"Delete photo",children:"\ud83d\uddd1\ufe0f"})]})})]}),(0,ft.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:["Photo ",t+1]})]},e.id))}):(0,ft.jsxs)("div",{className:"text-center py-12",children:[(0,ft.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcf8"}),(0,ft.jsx)("h4",{className:"text-xl font-medium text-gray-600 dark:text-gray-400 mb-2",children:"No photos uploaded yet"}),(0,ft.jsx)("p",{className:"text-gray-500 dark:text-gray-500",children:"Add photos to showcase your business and attract more customers"})]})]})})]})};function Gy(e){return e+.5|0}const Jy=(e,t,n)=>Math.max(Math.min(e,n),t);function Xy(e){return Jy(Gy(2.55*e),0,255)}function Qy(e){return Jy(Gy(255*e),0,255)}function eb(e){return Jy(Gy(e/2.55)/100,0,1)}function tb(e){return Jy(Gy(100*e),0,100)}const nb={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ib=[..."0123456789ABCDEF"],sb=e=>ib[15&e],rb=e=>ib[(240&e)>>4]+ib[15&e],ab=e=>(240&e)>>4===(15&e);function ob(e){var t=(e=>ab(e.r)&&ab(e.g)&&ab(e.b)&&ab(e.a))(e)?sb:rb;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const lb=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function cb(e,t,n){const i=t*Math.min(n,1-n),s=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(s-3,9-s,1),-1)};return[s(0),s(8),s(4)]}function db(e,t,n){const i=function(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(s,4-s,1),0)};return[i(5),i(3),i(1)]}function ub(e,t,n){const i=cb(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)i[s]*=1-t-n,i[s]+=t;return i}function hb(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=Math.max(t,n,i),r=Math.min(t,n,i),a=(s+r)/2;let o,l,c;return s!==r&&(c=s-r,l=a>.5?c/(2-s-r):c/(s+r),o=function(e,t,n,i,s){return e===s?(t-n)/i+(t<n?6:0):t===s?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,s),o=60*o+.5),[0|o,l||0,a]}function mb(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Qy)}function pb(e,t,n){return mb(cb,e,t,n)}function fb(e){return(e%360+360)%360}function gb(e){const t=lb.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?Xy(+t[5]):Qy(+t[5]));const s=fb(+t[2]),r=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return mb(ub,e,t,n)}(s,r,a):"hsv"===t[1]?function(e,t,n){return mb(db,e,t,n)}(s,r,a):pb(s,r,a),{r:n[0],g:n[1],b:n[2],a:i}}const xb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},yb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let bb;function vb(e){bb||(bb=function(){const e={},t=Object.keys(yb),n=Object.keys(xb);let i,s,r,a,o;for(i=0;i<t.length;i++){for(a=o=t[i],s=0;s<n.length;s++)r=n[s],o=o.replace(r,xb[r]);r=parseInt(yb[a],16),e[o]=[r>>16&255,r>>8&255,255&r]}return e}(),bb.transparent=[0,0,0,0]);const t=bb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const wb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const _b=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,kb=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function jb(e,t,n){if(e){let i=hb(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=pb(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Nb(e,t){return e?Object.assign(t||{},e):e}function Sb(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Qy(e[3]))):(t=Nb(e,{r:0,g:0,b:0,a:1})).a=Qy(t.a),t}function Cb(e){return"r"===e.charAt(0)?function(e){const t=wb.exec(e);let n,i,s,r=255;if(t){if(t[7]!==n){const e=+t[7];r=t[8]?Xy(e):Jy(255*e,0,255)}return n=+t[1],i=+t[3],s=+t[5],n=255&(t[2]?Xy(n):Jy(n,0,255)),i=255&(t[4]?Xy(i):Jy(i,0,255)),s=255&(t[6]?Xy(s):Jy(s,0,255)),{r:n,g:i,b:s,a:r}}}(e):gb(e)}class Pb{constructor(e){if(e instanceof Pb)return e;const t=typeof e;let n;"object"===t?n=Sb(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*nb[e[1]],g:255&17*nb[e[2]],b:255&17*nb[e[3]],a:5===n?17*nb[e[4]]:255}:7!==n&&9!==n||(t={r:nb[e[1]]<<4|nb[e[2]],g:nb[e[3]]<<4|nb[e[4]],b:nb[e[5]]<<4|nb[e[6]],a:9===n?nb[e[7]]<<4|nb[e[8]]:255})),t}(e)||vb(e)||Cb(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Nb(this._rgb);return e&&(e.a=eb(e.a)),e}set rgb(e){this._rgb=Sb(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${eb(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?ob(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=hb(e),n=t[0],i=tb(t[1]),s=tb(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${s}%, ${eb(e.a)})`:`hsl(${n}, ${i}%, ${s}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let s;const r=t===s?.5:t,a=2*r-1,o=n.a-i.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;s=1-l,n.r=255&l*n.r+s*i.r+.5,n.g=255&l*n.g+s*i.g+.5,n.b=255&l*n.b+s*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=kb(eb(e.r)),s=kb(eb(e.g)),r=kb(eb(e.b));return{r:Qy(_b(i+n*(kb(eb(t.r))-i))),g:Qy(_b(s+n*(kb(eb(t.g))-s))),b:Qy(_b(r+n*(kb(eb(t.b))-r))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Pb(this.rgb)}alpha(e){return this._rgb.a=Qy(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Gy(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return jb(this._rgb,2,e),this}darken(e){return jb(this._rgb,2,-e),this}saturate(e){return jb(this._rgb,1,e),this}desaturate(e){return jb(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=hb(e);n[0]=fb(n[0]+t),n=pb(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Tb(){}const Eb=(()=>{let e=0;return()=>e++})();function Mb(e){return null===e||void 0===e}function Lb(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Ab(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Ob(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Rb(e,t){return Ob(e)?e:t}function Db(e,t){return"undefined"===typeof e?t:e}const Bb=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function zb(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Ib(e,t,n,i){let s,r,a;if(Lb(e))if(r=e.length,i)for(s=r-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<r;s++)t.call(n,e[s],s);else if(Ab(e))for(a=Object.keys(e),r=a.length,s=0;s<r;s++)t.call(n,e[a[s]],a[s])}function Fb(e,t){let n,i,s,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(s=e[n],r=t[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Ub(e){if(Lb(e))return e.map(Ub);if(Ab(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let s=0;for(;s<i;++s)t[n[s]]=Ub(e[n[s]]);return t}return e}function $b(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Wb(e,t,n,i){if(!$b(e))return;const s=t[e],r=n[e];Ab(s)&&Ab(r)?Hb(s,r,i):t[e]=Ub(r)}function Hb(e,t,n){const i=Lb(t)?t:[t],s=i.length;if(!Ab(e))return e;const r=(n=n||{}).merger||Wb;let a;for(let o=0;o<s;++o){if(a=i[o],!Ab(a))continue;const t=Object.keys(a);for(let i=0,s=t.length;i<s;++i)r(t[i],e,a,n)}return e}function Vb(e,t){return Hb(e,t,{merger:qb})}function qb(e,t,n){if(!$b(e))return;const i=t[e],s=n[e];Ab(i)&&Ab(s)?Vb(i,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Ub(s))}const Zb={"":e=>e,x:e=>e.x,y:e=>e.y};function Yb(e,t){const n=Zb[t]||(Zb[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Kb(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Gb=e=>"undefined"!==typeof e,Jb=e=>"function"===typeof e,Xb=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Qb=Math.PI,ev=2*Qb,tv=ev+Qb,nv=Number.POSITIVE_INFINITY,iv=Qb/180,sv=Qb/2,rv=Qb/4,av=2*Qb/3,ov=Math.log10,lv=Math.sign;function cv(e,t,n){return Math.abs(e-t)<n}function dv(e){const t=Math.round(e);e=cv(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(ov(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function uv(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function hv(e,t,n){let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function mv(e){return e*(Qb/180)}function pv(e){return e*(180/Qb)}function fv(e){if(!Ob(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function gv(e,t){const n=t.x-e.x,i=t.y-e.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Qb&&(r+=ev),{angle:r,distance:s}}function xv(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function yv(e,t){return(e-t+tv)%ev-Qb}function bv(e){return(e%ev+ev)%ev}function vv(e,t,n,i){const s=bv(e),r=bv(t),a=bv(n),o=bv(r-s),l=bv(a-s),c=bv(s-r),d=bv(s-a);return s===r||s===a||i&&r===a||o>l&&c<d}function wv(e,t,n){return Math.max(t,Math.min(n,e))}function _v(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function kv(e,t,n){n=n||(n=>e[n]<t);let i,s=e.length-1,r=0;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const jv=(e,t,n,i)=>kv(e,n,i?i=>{const s=e[i][t];return s<n||s===n&&e[i+1][t]===n}:i=>e[i][t]<n),Nv=(e,t,n)=>kv(e,n,i=>e[i][t]>=n);const Sv=["push","pop","shift","splice","unshift"];function Cv(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(t);-1!==s&&i.splice(s,1),i.length>0||(Sv.forEach(t=>{delete e[t]}),delete e._chartjs)}function Pv(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Tv="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Ev(e,t){let n=[],i=!1;return function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];n=r,i||(i=!0,Tv.call(window,()=>{i=!1,e.apply(t,n)}))}}const Mv=e=>"start"===e?"left":"end"===e?"right":"center",Lv=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function Av(e,t,n){const i=t.length;let s=0,r=i;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:u,max:h,minDefined:m,maxDefined:p}=a.getUserBounds();if(m){if(s=Math.min(jv(l,d,u).lo,n?i:jv(t,d,a.getPixelForValue(u)).lo),c){const e=l.slice(0,s+1).reverse().findIndex(e=>!Mb(e[o.axis]));s-=Math.max(0,e)}s=wv(s,0,i-1)}if(p){let e=Math.max(jv(l,a.axis,h,!0).hi+1,n?0:jv(t,d,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!Mb(e[o.axis]));e+=Math.max(0,t)}r=wv(e,s,i)-s}else r=i-s}return{start:s,count:r}}function Ov(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const Rv=e=>0===e||1===e,Dv=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*ev/n),Bv=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ev/n)+1,zv={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*sv),easeOutSine:e=>Math.sin(e*sv),easeInOutSine:e=>-.5*(Math.cos(Qb*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Rv(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Rv(e)?e:Dv(e,.075,.3),easeOutElastic:e=>Rv(e)?e:Bv(e,.075,.3),easeInOutElastic(e){const t=.1125;return Rv(e)?e:e<.5?.5*Dv(2*e,t,.45):.5+.5*Bv(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-zv.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*zv.easeInBounce(2*e):.5*zv.easeOutBounce(2*e-1)+.5};function Iv(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Fv(e){return Iv(e)?e:new Pb(e)}function Uv(e){return Iv(e)?e:new Pb(e).saturate(.5).darken(.1).hexString()}const $v=["x","y","borderWidth","radius","tension"],Wv=["color","borderColor","backgroundColor"];const Hv=new Map;function Vv(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=Hv.get(n);return i||(i=new Intl.NumberFormat(e,t),Hv.set(n,i)),i}(t,n).format(e)}const qv={values:e=>Lb(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let s,r=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),r=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=ov(Math.abs(r)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Vv(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(ov(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?qv.numeric.call(this,e,t,n):""}};var Zv={formatters:qv};const Yv=Object.create(null),Kv=Object.create(null);function Gv(e,t){if(!t)return e;const n=t.split(".");for(let i=0,s=n.length;i<s;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function Jv(e,t,n){return"string"===typeof t?Hb(Gv(e,t),n):Hb(Gv(e,""),t)}class Xv{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Uv(t.backgroundColor),this.hoverBorderColor=(e,t)=>Uv(t.borderColor),this.hoverColor=(e,t)=>Uv(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Jv(this,e,t)}get(e){return Gv(this,e)}describe(e,t){return Jv(Kv,e,t)}override(e,t){return Jv(Yv,e,t)}route(e,t,n,i){const s=Gv(this,e),r=Gv(this,n),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=r[i];return Ab(e)?Object.assign({},t,e):Db(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var Qv=new Xv({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Wv},numbers:{type:"number",properties:$v}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Zv.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function ew(e,t,n,i,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,n.push(s)),r>i&&(i=r),i}function tw(e,t,n){const i=e.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((t-s)*i)/i+s}function nw(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function iw(e,t,n,i){sw(e,t,n,i,null)}function sw(e,t,n,i,s){let r,a,o,l,c,d,u,h;const m=t.pointStyle,p=t.rotation,f=t.radius;let g=(p||0)*iv;if(m&&"object"===typeof m&&(r=m.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return e.save(),e.translate(n,i),e.rotate(g),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(f)||f<=0)){switch(e.beginPath(),m){default:s?e.ellipse(n,i,s/2,f,0,0,ev):e.arc(n,i,f,0,ev),e.closePath();break;case"triangle":d=s?s/2:f,e.moveTo(n+Math.sin(g)*d,i-Math.cos(g)*f),g+=av,e.lineTo(n+Math.sin(g)*d,i-Math.cos(g)*f),g+=av,e.lineTo(n+Math.sin(g)*d,i-Math.cos(g)*f),e.closePath();break;case"rectRounded":c=.516*f,l=f-c,a=Math.cos(g+rv)*l,u=Math.cos(g+rv)*(s?s/2-c:l),o=Math.sin(g+rv)*l,h=Math.sin(g+rv)*(s?s/2-c:l),e.arc(n-u,i-o,c,g-Qb,g-sv),e.arc(n+h,i-a,c,g-sv,g),e.arc(n+u,i+o,c,g,g+sv),e.arc(n-h,i+a,c,g+sv,g+Qb),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*f,d=s?s/2:l,e.rect(n-d,i-l,2*d,2*l);break}g+=rv;case"rectRot":u=Math.cos(g)*(s?s/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(s?s/2:f),e.moveTo(n-u,i-o),e.lineTo(n+h,i-a),e.lineTo(n+u,i+o),e.lineTo(n-h,i+a),e.closePath();break;case"crossRot":g+=rv;case"cross":u=Math.cos(g)*(s?s/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(s?s/2:f),e.moveTo(n-u,i-o),e.lineTo(n+u,i+o),e.moveTo(n+h,i-a),e.lineTo(n-h,i+a);break;case"star":u=Math.cos(g)*(s?s/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(s?s/2:f),e.moveTo(n-u,i-o),e.lineTo(n+u,i+o),e.moveTo(n+h,i-a),e.lineTo(n-h,i+a),g+=rv,u=Math.cos(g)*(s?s/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(s?s/2:f),e.moveTo(n-u,i-o),e.lineTo(n+u,i+o),e.moveTo(n+h,i-a),e.lineTo(n-h,i+a);break;case"line":a=s?s/2:Math.cos(g)*f,o=Math.sin(g)*f,e.moveTo(n-a,i-o),e.lineTo(n+a,i+o);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(g)*(s?s/2:f),i+Math.sin(g)*f);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function rw(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function aw(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ow(e){e.restore()}function lw(e,t,n,i,s){if(!t)return e.lineTo(n.x,n.y);if("middle"===s){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===s!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function cw(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function dw(e,t,n,i,s){if(s.strikethrough||s.underline){const r=e.measureText(i),a=t-r.actualBoundingBoxLeft,o=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,d),e.lineTo(o,d),e.stroke()}}function uw(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function hw(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=Lb(t)?t:[t],o=r.strokeWidth>0&&""!==r.strokeColor;let l,c;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Mb(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,r),l=0;l<a.length;++l)c=a[l],r.backdrop&&uw(e,r.backdrop),o&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),Mb(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,i,r.maxWidth)),e.fillText(c,n,i,r.maxWidth),dw(e,n,i,c,r),i+=Number(s.lineHeight);e.restore()}function mw(e,t){const{x:n,y:i,w:s,h:r,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*Qb,Qb,!0),e.lineTo(n,i+r-a.bottomLeft),e.arc(n+a.bottomLeft,i+r-a.bottomLeft,a.bottomLeft,Qb,sv,!0),e.lineTo(n+s-a.bottomRight,i+r),e.arc(n+s-a.bottomRight,i+r-a.bottomRight,a.bottomRight,sv,0,!0),e.lineTo(n+s,i+a.topRight),e.arc(n+s-a.topRight,i+a.topRight,a.topRight,0,-sv,!0),e.lineTo(n+a.topLeft,i)}const pw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,fw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gw(e,t){const n=(""+e).match(pw);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const xw=e=>+e||0;function yw(e,t){const n={},i=Ab(t),s=i?Object.keys(t):t,r=Ab(e)?i?n=>Db(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of s)n[a]=xw(r(a));return n}function bw(e){return yw(e,{top:"y",right:"x",bottom:"y",left:"x"})}function vw(e){return yw(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ww(e){const t=bw(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function _w(e,t){e=e||{},t=t||Qv.font;let n=Db(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=Db(e.style,t.style);i&&!(""+i).match(fw)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Db(e.family,t.family),lineHeight:gw(Db(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Db(e.weight,t.weight),string:""};return s.string=function(e){return!e||Mb(e.size)||Mb(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(s),s}function kw(e,t,n,i){let s,r,a,o=!0;for(s=0,r=e.length;s<r;++s)if(a=e[s],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&Lb(a)&&(a=a[n%a.length],o=!1),void 0!==a))return i&&!o&&(i.cacheable=!1),a}function jw(e,t){return Object.assign(Object.create(e),t)}function Nw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const s=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Dw("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:n,_getTarget:i,override:i=>Nw([i,...e],t,s,n)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>Ew(n,i,()=>function(e,t,n,i){let s;for(const r of t)if(s=Dw(Pw(r,e),n),"undefined"!==typeof s)return Tw(e,s)?Ow(n,i,e,s):s}(i,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Bw(e).includes(t),ownKeys:e=>Bw(e),set(e,t,n){const s=e._storage||(e._storage=i());return e[t]=s[t]=n,delete e._keys,!0}})}function Sw(e,t,n,i){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Cw(e,i),setContext:t=>Sw(e,t,n,i),override:s=>Sw(e.override(s),t,n,i)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Ew(e,t,()=>function(e,t,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:a}=e;let o=i[t];Jb(o)&&a.isScriptable(t)&&(o=function(e,t,n,i){const{_proxy:s,_context:r,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(r,a||i);o.delete(e),Tw(e,l)&&(l=Ow(s._scopes,s,e,l));return l}(t,o,e,n));Lb(o)&&o.length&&(o=function(e,t,n,i){const{_proxy:s,_context:r,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof r.index&&i(e))return t[r.index%t.length];if(Ab(t[0])){const n=t,i=s._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=Ow(i,s,e,l);t.push(Sw(n,r,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));Tw(t,o)&&(o=Sw(o,s,r&&r[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function Cw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Jb(n)?n:()=>n,isIndexable:Jb(i)?i:()=>i}}const Pw=(e,t)=>e?e+Kb(t):t,Tw=(e,t)=>Ab(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Ew(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function Mw(e,t,n){return Jb(e)?e(t,n):e}const Lw=(e,t)=>!0===e?t:"string"===typeof e?Yb(t,e):void 0;function Aw(e,t,n,i,s){for(const r of t){const t=Lw(n,r);if(t){e.add(t);const r=Mw(t._fallback,n,s);if("undefined"!==typeof r&&r!==n&&r!==i)return r}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function Ow(e,t,n,i){const s=t._rootScopes,r=Mw(t._fallback,n,i),a=[...e,...s],o=new Set;o.add(i);let l=Rw(o,a,n,r||n,i);return null!==l&&(("undefined"===typeof r||r===n||(l=Rw(o,a,r,l,i),null!==l))&&Nw(Array.from(o),[""],s,r,()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const s=i[t];if(Lb(s)&&Ab(n))return n;return s||{}}(t,n,i)))}function Rw(e,t,n,i,s){for(;n;)n=Aw(e,t,n,i,s);return n}function Dw(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Bw(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}const zw=Number.EPSILON||1e-14,Iw=(e,t)=>t<e.length&&!e[t].skip&&e[t],Fw=e=>"x"===e?"y":"x";function Uw(e,t,n,i){const s=e.skip?t:e,r=t,a=n.skip?t:n,o=xv(r,s),l=xv(a,r);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=i*c,h=i*d;return{previous:{x:r.x-u*(a.x-s.x),y:r.y-u*(a.y-s.y)},next:{x:r.x+h*(a.x-s.x),y:r.y+h*(a.y-s.y)}}}function $w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Fw(t),i=e.length,s=Array(i).fill(0),r=Array(i);let a,o,l,c=Iw(e,0);for(a=0;a<i;++a)if(o=l,l=c,c=Iw(e,a+1),l){if(c){const e=c[t]-l[t];s[a]=0!==e?(c[n]-l[n])/e:0}r[a]=o?c?lv(s[a-1])!==lv(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}!function(e,t,n){const i=e.length;let s,r,a,o,l,c=Iw(e,0);for(let d=0;d<i-1;++d)l=c,c=Iw(e,d+1),l&&c&&(cv(t[d],0,zw)?n[d]=n[d+1]=0:(s=n[d]/t[d],r=n[d+1]/t[d],o=Math.pow(s,2)+Math.pow(r,2),o<=9||(a=3/Math.sqrt(o),n[d]=s*a*t[d],n[d+1]=r*a*t[d])))}(e,s,r),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=Fw(n),s=e.length;let r,a,o,l=Iw(e,0);for(let c=0;c<s;++c){if(a=o,o=l,l=Iw(e,c+1),!o)continue;const s=o[n],d=o[i];a&&(r=(s-a[n])/3,o[`cp1${n}`]=s-r,o[`cp1${i}`]=d-r*t[c]),l&&(r=(l[n]-s)/3,o[`cp2${n}`]=s+r,o[`cp2${i}`]=d+r*t[c])}}(e,r,t)}function Ww(e,t,n){return Math.max(Math.min(e,n),t)}function Hw(e,t,n,i,s){let r,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)$w(e,s);else{let n=i?e[e.length-1]:e[0];for(r=0,a=e.length;r<a;++r)o=e[r],l=Uw(n,o,e[Math.min(r+1,a-(i?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,i,s,r,a,o=rw(e[0],t);for(n=0,i=e.length;n<i;++n)a=r,r=o,o=n<i-1&&rw(e[n+1],t),r&&(s=e[n],a&&(s.cp1x=Ww(s.cp1x,t.left,t.right),s.cp1y=Ww(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=Ww(s.cp2x,t.left,t.right),s.cp2y=Ww(s.cp2y,t.top,t.bottom)))}(e,n)}function Vw(){return"undefined"!==typeof window&&"undefined"!==typeof document}function qw(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Zw(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const Yw=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Kw=["top","right","bottom","left"];function Gw(e,t,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=Kw[s];i[r]=parseFloat(e[t+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Jw(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,s=Yw(n),r="border-box"===s.boxSizing,a=Gw(s,"padding"),o=Gw(s,"border","width"),{x:l,y:c,box:d}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:s,offsetY:r}=i;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(s,r,e.target))a=s,o=r;else{const e=t.getBoundingClientRect();a=i.clientX-e.left,o=i.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),u=a.left+(d&&o.left),h=a.top+(d&&o.top);let{width:m,height:p}=t;return r&&(m-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-u)/m*n.width/i),y:Math.round((c-h)/p*n.height/i)}}const Xw=e=>Math.round(10*e)/10;function Qw(e,t,n,i){const s=Yw(e),r=Gw(s,"margin"),a=Zw(s.maxWidth,e,"clientWidth")||nv,o=Zw(s.maxHeight,e,"clientHeight")||nv,l=function(e,t,n){let i,s;if(void 0===t||void 0===n){const r=e&&qw(e);if(r){const e=r.getBoundingClientRect(),a=Yw(r),o=Gw(a,"border","width"),l=Gw(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,i=Zw(a.maxWidth,r,"clientWidth"),s=Zw(a.maxHeight,r,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||nv,maxHeight:s||nv}}(e,t,n);let{width:c,height:d}=l;if("content-box"===s.boxSizing){const e=Gw(s,"border","width"),t=Gw(s,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-r.width),d=Math.max(0,i?c/i:d-r.height),c=Xw(Math.min(c,a,l.maxWidth)),d=Xw(Math.min(d,o,l.maxHeight)),c&&!d&&(d=Xw(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&d>l.height&&(d=l.height,c=Xw(Math.floor(d*i))),{width:c,height:d}}function e_(e,t,n){const i=t||1,s=Math.floor(e.height*i),r=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==i||a.height!==s||a.width!==r)&&(e.currentDevicePixelRatio=i,a.height=s,a.width=r,e.ctx.setTransform(i,0,0,i,0,0),!0)}const t_=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Vw()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Ix){}return e}();function n_(e,t){const n=function(e,t){return Yw(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function i_(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function s_(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function r_(e,t,n,i){const s={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},a=i_(e,s,n),o=i_(s,r,n),l=i_(r,t,n),c=i_(a,o,n),d=i_(o,l,n);return i_(c,d,n)}function a_(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function o_(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function l_(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function c_(e){return"angle"===e?{between:vv,compare:yv,normalize:bv}:{between:_v,compare:(e,t)=>e-t,normalize:e=>e}}function d_(e){let{start:t,end:n,count:i,loop:s,style:r}=e;return{start:t%i,end:n%i,loop:s&&(n-t+1)%i===0,style:r}}function u_(e,t,n){if(!n)return[e];const{property:i,start:s,end:r}=n,a=t.length,{compare:o,between:l,normalize:c}=c_(i),{start:d,end:u,loop:h,style:m}=function(e,t,n){const{property:i,start:s,end:r}=n,{between:a,normalize:o}=c_(i),l=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=l,h+=l,c=0,d=l;c<d&&a(o(t[u%l][i]),s,r);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:m,style:e.style}}(e,t,n),p=[];let f,g,x,y=!1,b=null;const v=()=>y||l(s,x,f)&&0!==o(s,x),w=()=>!y||0===o(r,f)||l(r,x,f);for(let _=d,k=d;_<=u;++_)g=t[_%a],g.skip||(f=c(g[i]),f!==x&&(y=l(f,s,r),null===b&&v()&&(b=0===o(f,s)?_:k),null!==b&&w()&&(p.push(d_({start:b,end:_,loop:h,count:a,style:m})),b=null),k=_,x=f));return null!==b&&p.push(d_({start:b,end:u,loop:h,count:a,style:m})),p}function h_(e,t){const n=[],i=e.segments;for(let s=0;s<i.length;s++){const r=u_(i[s],e.points,t);r.length&&n.push(...r)}return n}function m_(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const s=e._chart.getContext(),r=p_(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let d=r,u=t[0].start,h=u;function m(e,t,i,s){const r=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=r;for(;n[t%l].skip;)t+=r;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:s}),d=s,u=t%l)}}for(const p of t){u=o?u:p.start;let e,t=n[u%l];for(h=u+1;h<=p.end;h++){const r=n[h%l];e=p_(i.setContext(jw(s,{type:"segment",p0:t,p1:r,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),f_(e,d)&&m(u,h-1,p.loop,d),t=r,d=e}u<h-1&&m(u,h-1,p.loop,d)}return c}(e,t,n,i):t}function p_(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function f_(e,t){if(!t)return!1;const n=[],i=function(e,t){return Iv(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function g_(e,t,n){return e.options.clip?e[n]:t[n]}function x_(e,t){const n=t._clip;if(n.disabled)return!1;const i=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:g_(n,t,"left"),right:g_(n,t,"right"),top:g_(i,t,"top"),bottom:g_(i,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class y_{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const s=t.listeners[i],r=t.duration;s.forEach(i=>i({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(n-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Tv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const s=n.items;let r,a=s.length-1,o=!1;for(;a>=0;--a)r=s[a],r._active?(r._total>n.duration&&(n.duration=r._total),r.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),s.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var b_=new y_;const v_="transparent",w_={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=Fv(e||v_),s=i.valid&&Fv(t||v_);return s&&s.valid?s.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class __{constructor(e,t,n,i){const s=t[n];i=kw([e.to,i,s,e.from]);const r=kw([e.from,s,i]);this._active=!0,this._fn=e.fn||w_[e.type||typeof r],this._easing=zv[e.easing]||zv.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],s=n-this._start,r=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=kw([e.to,t,i,e.from]),this._from=kw([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,s=this._from,r=this._loop,a=this._to;let o;if(this._active=s!==a&&(r||t<n),!this._active)return this._target[i]=a,void this._notify(!0);t<0?this._target[i]=s:(o=t/n%2,o=r&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[i]=this._fn(s,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class k_{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ab(e))return;const t=Object.keys(Qv.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Ab(s))return;const r={};for(const e of t)r[e]=s[e];(Lb(s.properties)&&s.properties||[i]).forEach(e=>{e!==i&&n.has(e)||n.set(e,r)})})}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const s=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const t=e[i[s]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,t){const n=this._properties,i=[],s=e.$animations||(e.$animations={}),r=Object.keys(t),a=Date.now();let o;for(o=r.length-1;o>=0;--o){const l=r[o];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let d=s[l];const u=n.get(l);if(d){if(u&&d.active()){d.update(u,c,a);continue}d.cancel()}u&&u.duration?(s[l]=d=new __(u,e,l,c),i.push(d)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(b_.add(this._chart,n),!0):void 0}}function j_(e,t){const n=e&&e.options||{},i=n.reverse,s=void 0===n.min?t:0,r=void 0===n.max?t:0;return{start:i?r:s,end:i?s:r}}function N_(e,t){const n=[],i=e._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function S_(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.keys,r="single"===i.mode;let a,o,l,c;if(null===t)return;let d=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===n){if(d=!0,i.all)continue;break}c=e.values[l],Ob(c)&&(r||0===t||lv(t)===lv(c))&&(t+=c)}return d||i.all?t:0}function C_(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function P_(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function T_(e,t,n,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const t=e[s.index];if(n&&t>0||!n&&t<0)return s.index}return null}function E_(e,t){const{chart:n,_cachedMeta:i}=e,s=n._stacks||(n._stacks={}),{iScale:r,vScale:a,index:o}=i,l=r.axis,c=a.axis,d=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(r,a,i),u=t.length;let h;for(let m=0;m<u;++m){const e=t[m],{[l]:n,[c]:r}=e;h=(e._stacks||(e._stacks={}))[c]=P_(s,d,n),h[o]=r,h._top=T_(h,a,!0,i.type),h._bottom=T_(h,a,!1,i.type);(h._visualValues||(h._visualValues={}))[o]=r}}function M_(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function L_(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const A_=e=>"reset"===e||"none"===e,O_=(e,t)=>t?e:Object.assign({},e);class R_{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=C_(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&L_(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,s=t.xAxisID=Db(n.xAxisID,M_(e,"x")),r=t.yAxisID=Db(n.yAxisID,M_(e,"y")),a=t.rAxisID=Db(n.rAxisID,M_(e,"r")),o=t.indexAxis,l=t.iAxisID=i(o,s,r,a),c=t.vAxisID=i(o,r,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Cv(this._data,this),e._stacked&&L_(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Ab(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,s="x"===n.axis?"x":"y",r="x"===i.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,d;for(l=0,c=a.length;l<c;++l)d=a[l],o[l]={[s]:d,[r]:e[d]};return o}(t,e)}else if(n!==t){if(n){Cv(n,this);const e=this._cachedMeta;L_(e),e._parsed=[]}t&&Object.isExtensible(t)&&(s=this,(i=t)._chartjs?i._chartjs.listeners.push(s):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),Sv.forEach(e=>{const t="_onData"+Kb(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];const a=n.apply(this,s);return i._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...s)}),a}})}))),this._syncList=[],this._data=t}var i,s}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=C_(t.vScale,t),t.stack!==n.stack&&(i=!0,L_(t),t.stack=n.stack),this._resyncElements(e),(i||s!==t._stacked)&&(E_(this,t._parsed),t._stacked=C_(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:s,_stacked:r}=n,a=s.axis;let o,l,c,d=0===e&&t===i.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Lb(i[e])?this.parseArrayData(n,i,e,t):Ab(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const s=()=>null===l[a]||u&&l[a]<u[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],d&&(s()&&(d=!1),u=l);n._sorted=d}r&&E_(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:s,vScale:r}=e,a=s.axis,o=r.axis,l=s.getLabels(),c=s===r,d=new Array(i);let u,h,m;for(u=0,h=i;u<h;++u)m=u+n,d[u]={[a]:c||s.parse(l[m],m),[o]:r.parse(t[m],m)};return d}parseArrayData(e,t,n,i){const{xScale:s,yScale:r}=e,a=new Array(i);let o,l,c,d;for(o=0,l=i;o<l;++o)c=o+n,d=t[c],a[o]={x:s.parse(d[0],c),y:r.parse(d[1],c)};return a}parseObjectData(e,t,n,i){const{xScale:s,yScale:r}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(i);let c,d,u,h;for(c=0,d=i;c<d;++c)u=c+n,h=t[u],l[c]={x:s.parse(Yb(h,a),u),y:r.parse(Yb(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,s=this._cachedMeta,r=t[e.axis];return S_({keys:N_(i,!0),values:t._stacks[e.axis]._visualValues},r,s.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const s=n[t.axis];let r=null===s?NaN:s;const a=i&&n._stacks[t.axis];i&&a&&(i.values=a,r=S_(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,s=n._sorted&&e===n.iScale,r=i.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:N_(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:n,minDefined:i,maxDefined:s}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(a);let u,h;function m(){h=i[u];const t=h[a.axis];return!Ob(h[e.axis])||c>t||d<t}for(u=0;u<r&&(m()||(this.updateRangeFromParsed(l,e,h,o),!s));++u);if(s)for(u=r-1;u>=0;--u)if(!m()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,s,r;for(i=0,s=t.length;i<s;++i)r=t[i][e.axis],Ob(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,s;return Ab(e)?(t=e.top,n=e.right,i=e.bottom,s=e.left):t=n=i=s=e,{top:t,right:n,bottom:i,left:s,disabled:!1===e}}(Db(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=j_(e,n),s=j_(t,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],s=t.chartArea,r=[],a=this._drawStart||0,o=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,s,a,o),c=a;c<a+o;++c){const t=i[c];t.hidden||(t.active&&l?r.push(t):t.draw(e,s))}for(c=0;c<r.length;++c)r[c].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,n){return jw(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function(e,t){return jw(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,s=this._cachedDataOpts,r=e+"-"+t,a=s[r],o=this.enableOptionSharing&&Gb(n);if(a)return O_(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Qv.elements[e]),m=l.resolveNamedOptions(u,h,()=>this.getContext(n,i,t),d);return m.$shared&&(m.$shared=o,s[r]=Object.freeze(O_(m,o))),m}_resolveAnimations(e,t,n){const i=this.chart,s=this._cachedDataOpts,r=`animation-${t}`,a=s[r];if(a)return a;let o;if(!1!==i.options.animation){const i=this.chart.config,s=i.datasetAnimationScopeKeys(this._type,t),r=i.getOptionScopes(this.getDataset(),s);o=i.createResolver(r,this.getContext(e,n,t))}const l=new k_(i,o&&o.animations);return o&&o._cacheable&&(s[r]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||A_(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(n),r=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:r}}updateElement(e,t,n,i){A_(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!A_(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const i=n.length,s=t.length,r=Math.min(s,i);r&&this.parse(0,r),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,s=i.data,r=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=r;a--)e[a]=e[a-t]};for(o(s),a=e;a<r;++a)s[a]=new this.dataElementType;this._parsing&&o(i._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&L_(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function D_(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,s=n.length;t<s;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=Pv(i.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let i,s,r,a,o=t._length;const l=()=>{32767!==r&&-32768!==r&&(Gb(a)&&(o=Math.min(o,Math.abs(r-a)||o)),a=r)};for(i=0,s=n.length;i<s;++i)r=t.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=t.ticks.length;i<s;++i)r=t.getPixelForTick(i),l();return o}function B_(e,t,n,i){return Lb(e)?function(e,t,n,i){const s=n.parse(e[0],i),r=n.parse(e[1],i),a=Math.min(s,r),o=Math.max(s,r);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:r,min:a,max:o}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function z_(e,t,n,i){const s=e.iScale,r=e.vScale,a=s.getLabels(),o=s===r,l=[];let c,d,u,h;for(c=n,d=n+i;c<d;++c)h=t[c],u={},u[s.axis]=o||s.parse(a[c],c),l.push(B_(h,u,r,c));return l}function I_(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function F_(e,t,n,i){let s=t.borderSkipped;const r={};if(!s)return void(e.borderSkipped=r);if(!0===s)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:d}=function(e){let t,n,i,s,r;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:t,top:s,bottom:r}}(e);"middle"===s&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=d:(r[U_(d,a,o,l)]=!0,s=c)),r[U_(s,a,o,l)]=!0,e.borderSkipped=r}function U_(e,t,n,i){var s,r,a;return i?(a=n,e=$_(e=(s=e)===(r=t)?a:s===a?r:s,n,t)):e=$_(e,t,n),e}function $_(e,t,n){return"start"===e?t:"end"===e?n:e}function W_(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}class H_ extends R_{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,n,i){return z_(e,t,n,i)}parseArrayData(e,t,n,i){return z_(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:s,vScale:r}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===s.axis?a:o,c="x"===r.axis?a:o,d=[];let u,h,m,p;for(u=n,h=n+i;u<h;++u)p=t[u],m={},m[s.axis]=s.parse(Yb(p,l),u),d.push(B_(Yb(p,c),m,r,u));return d}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const s=n._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,s=this.getParsed(e),r=s._custom,a=I_(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const s="reset"===i,{index:r,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,i);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=s||Mb(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),m=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[a.axis],f={horizontal:l,base:n.base,enableBorderRadius:!p||I_(t._custom)||r===p._top||r===p._bottom,x:l?n.head:m.center,y:l?m.center:n.head,height:l?m.size:Math.abs(n.size),width:l?Math.abs(n.size):m.size};u&&(f.options=d||this.resolveDataElementOptions(h,e[h].active?"active":i));const g=f.options||e[h].options;F_(f,g,p,r),W_(f,g,c.ratio),this.updateElement(e[h],h,f,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),s=n.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),i=t&&t[e.vScale.axis];if(Mb(i)||isNaN(i))return!0};for(const c of i)if((void 0===t||!l(c))&&((!1===s||-1===r.indexOf(c.stack)||void 0===s&&void 0===c.stack)&&r.push(c.stack),c.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Db("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const i=this._getStacks(e,n),s=void 0!==t?i.indexOf(t):-1;return-1===s?i.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let s,r;for(s=0,r=t.data.length;s<r;++s)i.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const a=e.barThickness;return{min:a||D_(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:s,minBarLength:r}}=this,a=s||0,o=this.getParsed(e),l=o._custom,c=I_(l);let d,u,h=o[t.axis],m=0,p=n?this.applyStack(t,o,n):h;p!==h&&(m=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&lv(h)!==lv(l.barEnd)&&(m=0),m+=h);const f=Mb(s)||c?m:s;let g=t.getPixelForValue(f);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(m+p):g,u=d-g,Math.abs(u)<r){u=function(e,t,n){return 0!==e?lv(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,a)*r,h===a&&(g-=u/2);const e=t.getPixelForDecimal(0),s=t.getPixelForDecimal(1),l=Math.min(e,s),m=Math.max(e,s);g=Math.max(Math.min(g,m),l),d=g+u,n&&!c&&(o._stacks[t.axis]._visualValues[i]=t.getValueForPixel(d)-t.getValueForPixel(g))}if(g===t.getPixelForValue(a)){const e=lv(u)*t.getLineWidthForValue(a)/2;g+=e,u-=e}return{size:u,base:g,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,s=i.skipNull,r=Db(i.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(t.grouped){const n=s?this._getStackCount(e):t.stackCount,c="flex"===i.barThickness?function(e,t,n,i){const s=t.pixels,r=s[e];let a=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;null===a&&(a=r-(null===o?t.end-t.start:o-r)),null===o&&(o=r+r-a);const c=r-(r-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n*l):function(e,t,n,i){const s=n.barThickness;let r,a;return Mb(s)?(r=t.min*n.categoryPercentage,a=n.barPercentage):(r=s*i,a=1),{chunk:r/i,ratio:a,start:t.pixels[e]-r/2}}(e,t,i,n*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(Db(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+u;a=c.start+c.chunk*h+c.chunk/2,o=Math.min(r,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(r,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let s=0;for(;s<i;++s)null===this.getParsed(s)[t.axis]||n[s].hidden||n[s].draw(this._ctx)}}class V_ extends R_{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,s)=>{const r=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:i,lineWidth:r.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let s,r,a=e=>+n[e];if(Ab(n[e])){const{key:e="value"}=this._parsing;a=t=>+Yb(n[t],e)}for(s=e,r=e+t;s<r;++s)i._parsed[s]=a(s)}}_getRotation(){return mv(this.options.rotation-90)}_getCircumference(){return mv(this.options.circumference)}_getRotationExtents(){let e=ev,t=-ev;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,s=i._getRotation(),r=i._getCircumference();e=Math.min(e,s),t=Math.max(t,s+r)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,s=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:p,offsetX:f,offsetY:g}=function(e,t,n){let i=1,s=1,r=0,a=0;if(t<ev){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),m=(e,t,i)=>vv(e,o,l,!0)?1:Math.max(t,t*n,i,i*n),p=(e,t,i)=>vv(e,o,l,!0)?-1:Math.min(t,t*n,i,i*n),f=m(0,c,u),g=m(sv,d,h),x=p(Qb,c,u),y=p(Qb+sv,d,h);i=(f-x)/2,s=(g-y)/2,r=-(f+x)/2,a=-(g+y)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:a}}(h,u,o),x=(n.width-r)/m,y=(n.height-r)/p,b=Math.max(Math.min(x,y)/2,0),v=Bb(this.options.radius,b),w=(v-Math.max(v*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*v,this.offsetY=g*v,i.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*d,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/ev)}updateElements(e,t,n,i){const s="reset"===i,r=this.chart,a=r.chartArea,o=r.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,d=s&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(t,i);let f,g=this._getRotation();for(f=0;f<t;++f)g+=this._circumference(f,s);for(f=t;f<t+n;++f){const t=this._circumference(f,s),n=e[f],r={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};p&&(r.options=m||this.resolveDataElementOptions(f,n.active?"active":i)),g+=t,this.updateElement(n,f,r,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const s=e._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(s))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ev*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=Vv(t._parsed[e],n.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,s,r,a,o;if(!e)for(i=0,s=n.data.datasets.length;i<s;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),e=r.data,a=r.controller;break}if(!e)return 0;for(i=0,s=e.length;i<s;++i)o=a.resolveDataElementOptions(i),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Db(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class q_ extends R_{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:s}=t,r=this.chart._animationsDisabled;let{start:a,count:o}=Av(t,i,r);this._drawStart=a,this._drawCount=o,Ov(t)&&(a=0,o=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:l},e),this.updateElements(i,a,o,e)}updateElements(e,t,n,i){const s="reset"===i,{iScale:r,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,i),u=r.axis,h=a.axis,{spanGaps:m,segment:p}=this.options,f=uv(m)?m:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||s||"none"===i,x=t+n,y=e.length;let b=t>0&&this.getParsed(t-1);for(let v=0;v<y;++v){const n=e[v],m=g?n:{};if(v<t||v>=x){m.skip=!0;continue}const y=this.getParsed(v),w=Mb(y[h]),_=m[u]=r.getPixelForValue(y[u],v),k=m[h]=s||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,y,o):y[h],v);m.skip=isNaN(_)||isNaN(k)||w,m.stop=v>0&&Math.abs(y[u]-b[u])>f,p&&(m.parsed=y,m.raw=l.data[v]),d&&(m.options=c||this.resolveDataElementOptions(v,n.active?"active":i)),g||this.updateElement(n,v,m,i),b=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const s=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,s,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Z_(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Y_{static override(e){Object.assign(Y_.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Z_()}parse(){return Z_()}format(){return Z_()}add(){return Z_()}diff(){return Z_()}startOf(){return Z_()}endOf(){return Z_()}}var K_=Y_;function G_(e,t,n,i){const{controller:s,data:r,_sorted:a}=e,o=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&r.length){const a=o._reversePixels?Nv:jv;if(!i){const i=a(r,t,n);if(l){const{vScale:t}=s._cachedMeta,{_parsed:n}=e,r=n.slice(0,i.lo+1).reverse().findIndex(e=>!Mb(e[t.axis]));i.lo-=Math.max(0,r);const a=n.slice(i.hi).findIndex(e=>!Mb(e[t.axis]));i.hi+=Math.max(0,a)}return i}if(s._sharedOptions){const e=r[0],i="function"===typeof e.getRange&&e.getRange(t);if(i){const e=a(r,t,n-i),s=a(r,t,n+i);return{lo:e.lo,hi:s.hi}}}}return{lo:0,hi:r.length-1}}function J_(e,t,n,i,s){const r=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=r.length;o<l;++o){const{index:e,data:n}=r[o],{lo:l,hi:c}=G_(r[o],t,a,s);for(let t=l;t<=c;++t){const s=n[t];s.skip||i(s,e,t)}}}function X_(e,t,n,i,s){const r=[];if(!s&&!e.isPointInArea(t))return r;return J_(e,n,t,function(n,a,o){(s||rw(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&r.push({element:n,datasetIndex:a,index:o})},!0),r}function Q_(e,t,n,i,s,r){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const s=t?Math.abs(e.x-i.x):0,r=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(r,2))}}(n);let l=Number.POSITIVE_INFINITY;return J_(e,n,t,function(n,c,d){const u=n.inRange(t.x,t.y,s);if(i&&!u)return;const h=n.getCenterPoint(s);if(!(!!r||e.isPointInArea(h))&&!u)return;const m=o(t,h);m<l?(a=[{element:n,datasetIndex:c,index:d}],l=m):m===l&&a.push({element:n,datasetIndex:c,index:d})}),a}function ek(e,t,n,i,s,r){return r||e.isPointInArea(t)?"r"!==n||i?Q_(e,t,n,i,s,r):function(e,t,n,i){let s=[];return J_(e,n,t,function(e,n,r){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],i),{angle:l}=gv(e,{x:t.x,y:t.y});vv(l,a,o)&&s.push({element:e,datasetIndex:n,index:r})}),s}(e,t,n,s):[]}function tk(e,t,n,i,s){const r=[],a="x"===n?"inXRange":"inYRange";let o=!1;return J_(e,n,t,(e,i,l)=>{e[a]&&e[a](t[n],s)&&(r.push({element:e,datasetIndex:i,index:l}),o=o||e.inRange(t.x,t.y,s))}),i&&!o?[]:r}var nk={evaluateInteractionItems:J_,modes:{index(e,t,n,i){const s=Jw(t,e),r=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?X_(e,s,r,i,a):ek(e,s,r,!1,i,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,i){const s=Jw(t,e),r=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?X_(e,s,r,i,a):ek(e,s,r,!1,i,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,i)=>X_(e,Jw(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const s=Jw(t,e),r=n.axis||"xy",a=n.includeInvisible||!1;return ek(e,s,r,n.intersect,i,a)},x:(e,t,n,i)=>tk(e,Jw(t,e),"x",n.intersect,i),y:(e,t,n,i)=>tk(e,Jw(t,e),"y",n.intersect,i)}};const ik=["left","top","right","bottom"];function sk(e,t){return e.filter(e=>e.pos===t)}function rk(e,t){return e.filter(e=>-1===ik.indexOf(e.pos)&&e.box.axis===t)}function ak(e,t){return e.sort((e,n)=>{const i=t?n:e,s=t?e:n;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function ok(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:s}=n;if(!e||!ik.includes(i))continue;const r=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=s}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,a,o;for(r=0,a=e.length;r<a;++r){o=e[r];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*i:a&&t.availableWidth,o.height=s):(o.width=i,o.height=c?c*s:a&&t.availableHeight)}return n}function lk(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function ck(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function dk(e,t,n,i){const{pos:s,box:r}=n,a=e.maxPadding;if(!Ab(s)){n.size&&(e[s]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?r.height:r.width),n.size=t.size/t.count,e[s]+=n.size}r.getPadding&&ck(a,r.getPadding());const o=Math.max(0,t.outerWidth-lk(a,e,"left","right")),l=Math.max(0,t.outerHeight-lk(a,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function uk(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{i[e]=Math.max(t[e],n[e])}),i}return i(e?["left","right"]:["top","bottom"])}function hk(e,t,n,i){const s=[];let r,a,o,l,c,d;for(r=0,a=e.length,c=0;r<a;++r){o=e[r],l=o.box,l.update(o.width||t.w,o.height||t.h,uk(o.horizontal,t));const{same:a,other:u}=dk(t,n,o,i);c|=a&&s.length,d=d||u,l.fullSize||s.push(o)}return c&&hk(s,t,n,i)||d}function mk(e,t,n,i,s){e.top=n,e.left=t,e.right=t+i,e.bottom=n+s,e.width=i,e.height=s}function pk(e,t,n,i){const s=n.padding;let{x:r,y:a}=t;for(const o of e){const e=o.box,l=i[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const i=t.w*c,r=l.size||e.height;Gb(l.start)&&(a=l.start),e.fullSize?mk(e,s.left,a,n.outerWidth-s.right-s.left,r):mk(e,t.left+l.placed,a,i,r),l.start=a,l.placed+=i,a=e.bottom}else{const i=t.h*c,a=l.size||e.width;Gb(l.start)&&(r=l.start),e.fullSize?mk(e,r,s.top,a,n.outerHeight-s.bottom-s.top):mk(e,r,t.top+l.placed,a,i),l.start=r,l.placed+=i,r=e.right}}t.x=r,t.y=a}var fk={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const s=ww(e.options.layout.padding),r=Math.max(t-s.width,0),a=Math.max(n-s.height,0),o=function(e){const t=function(e){const t=[];let n,i,s,r,a,o;for(n=0,i=(e||[]).length;n<i;++n)s=e[n],({position:r,options:{stack:a,stackWeight:o=1}}=s),t.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&r+a,stackWeight:o});return t}(e),n=ak(t.filter(e=>e.box.fullSize),!0),i=ak(sk(t,"left"),!0),s=ak(sk(t,"right")),r=ak(sk(t,"top"),!0),a=ak(sk(t,"bottom")),o=rk(t,"x"),l=rk(t,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:sk(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Ib(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/d,hBoxMaxHeight:a/2}),h=Object.assign({},s);ck(h,ww(i));const m=Object.assign({maxPadding:h,w:r,h:a,x:s.left,y:s.top},s),p=ok(l.concat(c),u);hk(o.fullSize,m,u,p),hk(l,m,u,p),hk(c,m,u,p)&&hk(l,m,u,p),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(m),pk(o.leftAndTop,m,u,p),m.x+=m.w,m.y+=m.h,pk(o.rightAndBottom,m,u,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ib(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class gk{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class xk extends gk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yk="$chartjs",bk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},vk=e=>null===e||""===e;const wk=!!t_&&{passive:!0};function _k(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,wk)}function kk(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function jk(e,t,n){const i=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||kk(n.addedNodes,i),t=t&&!kk(n.removedNodes,i);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function Nk(e,t,n){const i=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||kk(n.removedNodes,i),t=t&&!kk(n.addedNodes,i);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Sk=new Map;let Ck=0;function Pk(){const e=window.devicePixelRatio;e!==Ck&&(Ck=e,Sk.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Tk(e,t,n){const i=e.canvas,s=i&&qw(i);if(!s)return;const r=Ev((e,t)=>{const i=s.clientWidth;n(e,t),i<s.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||r(n,i)});return a.observe(s),function(e,t){Sk.size||window.addEventListener("resize",Pk),Sk.set(e,t)}(e,r),a}function Ek(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Sk.delete(e),Sk.size||window.removeEventListener("resize",Pk)}(e)}function Mk(e,t,n){const i=e.canvas,s=Ev(t=>{null!==e.ctx&&n(function(e,t){const n=bk[e.type]||e.type,{x:i,y:s}=Jw(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==s?s:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,wk)}(i,t,s),s}class Lk extends gk{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),s=e.getAttribute("width");if(e[yk]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",vk(s)){const t=n_(e,"width");void 0!==t&&(e.width=t)}if(vk(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=n_(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[yk])return!1;const n=t[yk].initial;["height","width"].forEach(e=>{const i=n[e];Mb(i)?t.removeAttribute(e):t.setAttribute(e,i)});const i=n.style||{};return Object.keys(i).forEach(e=>{t.style[e]=i[e]}),t.width=t.width,delete t[yk],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),s={attach:jk,detach:Nk,resize:Tk}[t]||Mk;i[t]=s(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:Ek,detach:Ek,resize:Ek}[t]||_k)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return Qw(e,t,n,i)}isAttached(e){const t=e&&qw(e);return!(!t||!t.isConnected)}}class Ak{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return uv(this.x)&&uv(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),i}}function Ok(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(i,s))}(e),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],a=r.length,o=r[0],l=r[a-1],c=[];if(a>s)return function(e,t,n,i){let s,r=0,a=n[0];for(i=Math.ceil(i),s=0;s<e.length;s++)s===a&&(t.push(e[s]),r++,a=n[r*i])}(t,c,r,a/s),c;const d=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),s=t.length/n;if(!i)return Math.max(s,1);const r=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(i);for(let a=0,o=r.length-1;a<o;a++){const e=r[a];if(e>s)return e}return Math.max(s,1)}(r,t,s);if(a>0){let e,n;const i=a>1?Math.round((l-o)/(a-1)):null;for(Rk(t,c,d,Mb(i)?0:o-i,o),e=0,n=a-1;e<n;e++)Rk(t,c,d,r[e],r[e+1]);return Rk(t,c,d,l,Mb(i)?t.length:l+i),c}return Rk(t,c,d),c}function Rk(e,t,n,i,s){const r=Db(i,0),a=Math.min(Db(s,e.length),e.length);let o,l,c,d=0;for(n=Math.ceil(n),s&&(o=s-i,n=o/Math.floor(o/n)),c=r;c<0;)d++,c=Math.round(r+d*n);for(l=Math.max(r,0);l<a;l++)l===c&&(t.push(e[l]),d++,c=Math.round(r+d*n))}const Dk=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,Bk=(e,t)=>Math.min(t||e,e);function zk(e,t){const n=[],i=e.length/t,s=e.length;let r=0;for(;r<s;r+=i)n.push(e[Math.floor(r)]);return n}function Ik(e,t,n){const i=e.ticks.length,s=Math.min(t,i-1),r=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(s);if(!(n&&(l=1===i?Math.max(c-r,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<r-o||c>a+o)))return c}function Fk(e){return e.drawTicks?e.tickLength:0}function Uk(e,t){if(!e.display)return 0;const n=_w(e.font,t),i=ww(e.padding);return(Lb(e.text)?e.text.length:1)*n.lineHeight+i.height}function $k(e,t,n){let i=Mv(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class Wk extends Ak{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Rb(e,Number.POSITIVE_INFINITY),t=Rb(t,Number.NEGATIVE_INFINITY),n=Rb(n,Number.POSITIVE_INFINITY),i=Rb(i,Number.NEGATIVE_INFINITY),{min:Rb(e,n),max:Rb(t,i),minDefined:Ob(e),maxDefined:Ob(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds();if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),s||(n=Math.min(n,t.min)),r||(i=Math.max(i,t.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:Rb(n,Rb(i,n)),max:Rb(i,Rb(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){zb(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:s,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:s}=e,r=Bb(t,(s-i)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(i,-Math.abs(r)),max:a(s,r)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?zk(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=Ok(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){zb(this.options.afterUpdate,[this])}beforeSetDimensions(){zb(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){zb(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),zb(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){zb(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,s;for(n=0,i=e.length;n<i;n++)s=e[n],s.label=zb(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){zb(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){zb(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Bk(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let r,a,o,l=i;if(!this._isVisible()||!t.display||i>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=wv(this.chart.width-d,0,this.maxWidth);r=e.offset?this.maxWidth/n:h/(n-1),d+6>r&&(r=h/(n-(e.offset?.5:1)),a=this.maxHeight-Fk(e.grid)-t.padding-Uk(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=pv(Math.min(Math.asin(wv((c.highest.height+6)/r,-1,1)),Math.asin(wv(a/o,-1,1))-Math.asin(wv(u/o,-1,1)))),l=Math.max(i,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){zb(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){zb(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:s}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const r=Uk(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=Fk(s)+r):(e.height=this.maxHeight,e.width=Fk(s)+r),n.display&&this.ticks.length){const{first:t,last:i,widest:s,highest:r}=this._getLabelSizes(),o=2*n.padding,l=mv(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(a){const t=n.mirror?0:d*s.width+c*r.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*s.width+d*r.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,i,d,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:s,padding:r},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=i*e.width,u=n*t.height):(d=n*e.height,u=i*t.width):"start"===s?u=t.width:"end"===s?d=e.width:"inner"!==s&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-a+r)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-c+r)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===s?(n=0,i=e.height):"end"===s&&(n=t.height,i=0),this.paddingTop=n+r,this.paddingBottom=i+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){zb(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Mb(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=zk(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:s}=this,r=[],a=[],o=Math.floor(t/Bk(t,n));let l,c,d,u,h,m,p,f,g,x,y,b=0,v=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),i.font=m=h.string,p=s[m]=s[m]||{data:{},gc:[]},f=h.lineHeight,g=x=0,Mb(u)||Lb(u)){if(Lb(u))for(c=0,d=u.length;c<d;++c)y=u[c],Mb(y)||Lb(y)||(g=ew(i,p.data,p.gc,g,y),x+=f)}else g=ew(i,p.data,p.gc,g,u),x=f;r.push(g),a.push(x),b=Math.max(g,b),v=Math.max(x,v)}!function(e,t){Ib(e,e=>{const n=e.gc,i=n.length/2;let s;if(i>t){for(s=0;s<i;++s)delete e.data[n[s]];n.splice(0,i)}})}(s,t);const w=r.indexOf(b),_=a.indexOf(v),k=e=>({width:r[e]||0,height:a[e]||0});return{first:k(0),last:k(t-1),widest:k(w),highest:k(_),widths:r,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return wv(this._alignToPixels?tw(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return jw(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return jw(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=mv(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),r=e.autoSkipPadding||0,a=s?s.widest.width+r:0,o=s?s.highest.height+r:0;return this.isHorizontal()?o*n>a*i?a/n:o/i:o*i<a*n?o/n:a/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:s,position:r,border:a}=i,o=s.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=Fk(s),u=[],h=a.setContext(this.getContext()),m=h.display?h.width:0,p=m/2,f=function(e){return tw(n,e,m)};let g,x,y,b,v,w,_,k,j,N,S,C;if("top"===r)g=f(this.bottom),w=this.bottom-d,k=g-p,N=f(e.top)+p,C=e.bottom;else if("bottom"===r)g=f(this.top),N=e.top,C=f(e.bottom)-p,w=g+p,k=this.top+d;else if("left"===r)g=f(this.right),v=this.right-d,_=g-p,j=f(e.left)+p,S=e.right;else if("right"===r)g=f(this.left),j=e.left,S=f(e.right)-p,v=g+p,_=this.left+d;else if("x"===t){if("center"===r)g=f((e.top+e.bottom)/2+.5);else if(Ab(r)){const e=Object.keys(r)[0],t=r[e];g=f(this.chart.scales[e].getPixelForValue(t))}N=e.top,C=e.bottom,w=g+p,k=w+d}else if("y"===t){if("center"===r)g=f((e.left+e.right)/2);else if(Ab(r)){const e=Object.keys(r)[0],t=r[e];g=f(this.chart.scales[e].getPixelForValue(t))}v=g-p,_=v-d,j=e.left,S=e.right}const P=Db(i.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/P));for(x=0;x<c;x+=T){const e=this.getContext(x),t=s.setContext(e),i=a.setContext(e),r=t.lineWidth,c=t.color,d=i.dash||[],h=i.dashOffset,m=t.tickWidth,p=t.tickColor,f=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=Ik(this,x,o),void 0!==y&&(b=tw(n,y,r),l?v=_=j=S=b:w=k=N=C=b,u.push({tx1:v,ty1:w,tx2:_,ty2:k,x1:j,y1:N,x2:S,y2:C,width:r,color:c,borderDash:d,borderDashOffset:h,tickWidth:m,tickColor:p,tickBorderDash:f,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:s}=n,r=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=s,u=Fk(n.grid),h=u+c,m=d?-c:h,p=-mv(this.labelRotation),f=[];let g,x,y,b,v,w,_,k,j,N,S,C,P="middle";if("top"===i)w=this.bottom-m,_=this._getXAxisLabelAlignment();else if("bottom"===i)w=this.top+m,_=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(u);_=e.textAlign,v=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(u);_=e.textAlign,v=e.x}else if("x"===t){if("center"===i)w=(e.top+e.bottom)/2+h;else if(Ab(i)){const e=Object.keys(i)[0],t=i[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)v=(e.left+e.right)/2-h;else if(Ab(i)){const e=Object.keys(i)[0],t=i[e];v=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?P="top":"end"===o&&(P="bottom"));const T=this._getLabelSizes();for(g=0,x=a.length;g<x;++g){y=a[g],b=y.label;const e=s.setContext(this.getContext(g));k=this.getPixelForTick(g)+s.labelOffset,j=this._resolveTickFontOptions(g),N=j.lineHeight,S=Lb(b)?b.length:1;const t=S/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=_;if(r?(v=k,"inner"===_&&(h=g===x-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),C="top"===i?"near"===l||0!==p?-S*N+N/2:"center"===l?-T.highest.height/2-t*N+N:-T.highest.height+N/2:"near"===l||0!==p?N/2:"center"===l?T.highest.height/2-t*N:T.highest.height-S*N,d&&(C*=-1),0===p||e.showLabelBackdrop||(v+=N/2*Math.sin(p))):(w=k,C=(1-S)*N/2),e.showLabelBackdrop){const t=ww(e.backdropPadding),n=T.heights[g],i=T.widths[g];let s=C-t.top,r=0-t.left;switch(P){case"middle":s-=n/2;break;case"bottom":s-=n}switch(_){case"center":r-=i/2;break;case"right":r-=i;break;case"inner":g===x-1?r-=i:g>0&&(r-=i/2)}u={left:r,top:s,width:i+t.width,height:n+t.height,color:e.backdropColor}}f.push({label:b,font:j,textOffset:C,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:P,translation:[v,w],backdrop:u}})}return f}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-mv(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:s}}=this.options,r=e+s,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?i?(l=this.right+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-r,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?i?(l=this.left+s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+r,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:s,height:r}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,s,r),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,r;const a=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(s=0,r=i.length;s<r;++s){const e=i[s];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,s=n.setContext(this.getContext()),r=n.display?s.width:0;if(!r)return;const a=i.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=tw(e,this.left,r)-r/2,c=tw(e,this.right,a)+a/2,d=u=o):(d=tw(e,this.top,r)-r/2,u=tw(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&aw(t,n);const i=this.getLabelItems(e);for(const s of i){const e=s.options,n=s.font;hw(t,s.label,0,s.textOffset,n,e)}n&&ow(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const s=_w(n.font),r=ww(n.padding),a=n.align;let o=s.lineHeight/2;"bottom"===t||"center"===t||Ab(t)?(o+=r.bottom,Lb(n.text)&&(o+=s.lineHeight*(n.text.length-1))):o+=r.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,n,i){const{top:s,left:r,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,m,p=0;const f=a-s,g=o-r;if(e.isHorizontal()){if(h=Lv(i,r,o),Ab(n)){const e=Object.keys(n)[0],i=n[e];m=d[e].getPixelForValue(i)+f-t}else m="center"===n?(c.bottom+c.top)/2+f-t:Dk(e,n,t);u=o-r}else{if(Ab(n)){const e=Object.keys(n)[0],i=n[e];h=d[e].getPixelForValue(i)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:Dk(e,n,t);m=Lv(i,a,s),p="left"===n?-sv:sv}return{titleX:h,titleY:m,maxWidth:u,rotation:p}}(this,o,t,a);hw(e,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:u,textAlign:$k(a,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Db(e.grid&&e.grid.z,-1),i=Db(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Wk.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let s,r;for(s=0,r=t.length;s<r;++s){const r=t[s];r[n]!==this.id||e&&r.type!==e||i.push(r)}return i}_resolveTickFontOptions(e){return _w(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Hk{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,s=e.id,r=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,function(e,t,n){const i=Hb(Object.create(null),[n?Qv.get(n):{},Qv.get(t),e.defaults]);Qv.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),s=i.pop(),r=[e].concat(i).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");Qv.route(r,s,l,o)})}(t,e.defaultRoutes);e.descriptors&&Qv.describe(t,e.descriptors)}(e,r,n),this.override&&Qv.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in Qv[i]&&(delete Qv[i][n],this.override&&delete Yv[n])}}class Vk{constructor(){this.controllers=new Hk(R_,"datasets",!0),this.elements=new Hk(Ak,"elements"),this.plugins=new Hk(Object,"plugins"),this.scales=new Hk(Wk,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):Ib(t,t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)})})}_exec(e,t,n){const i=Kb(e);zb(n["before"+i],[],n),t[e](n),zb(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var qk=new Vk;class Zk{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),r=this._notify(s,e,t,n);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,t,n,i){i=i||{};for(const s of e){const e=s.plugin;if(!1===zb(e[n],[t,i,s.options],e)&&i.cancelable)return!1}return!0}invalidate(){Mb(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=Db(n.options&&n.options.plugins,{}),s=function(e){const t={},n=[],i=Object.keys(qk.plugins.items);for(let r=0;r<i.length;r++)n.push(qk.getPlugin(i[r]));const s=e.plugins||[];for(let r=0;r<s.length;r++){const e=s[r];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:s,localIds:r}=t;const a=[],o=e.getContext();for(const l of s){const t=l.id,s=Yk(n[t],i);null!==s&&a.push({plugin:l,options:Kk(e.config,{plugin:l,local:r[t]},s,o)})}return a}(e,s,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function Yk(e,t){return t||!1!==e?!0===e?{}:e:null}function Kk(e,t,n,i){let{plugin:s,local:r}=t;const a=e.pluginScopeKeys(s),o=e.getOptionScopes(n,a);return r&&s.defaults&&o.push(s.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gk(e,t){const n=Qv.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Jk(e){if("x"===e||"y"===e||"r"===e)return e}function Xk(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Qk(e){if(Jk(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of n){const t=s.axis||Xk(s.position)||e.length>1&&Jk(e[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function ej(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function tj(e,t){const n=Yv[e.type]||{scales:{}},i=t.scales||{},s=Gk(e.type,t),r=Object.create(null);return Object.keys(i).forEach(t=>{const a=i[t];if(!Ab(a))return console.error(`Invalid scale configuration for scale: ${t}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const o=Qk(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return ej(e,"x",n[0])||ej(e,"y",n[0])}return{}}(t,e),Qv.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,s),c=n.scales||{};r[t]=Vb(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const s=n.type||e.type,a=n.indexAxis||Gk(s,t),o=(Yv[s]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),s=n[t+"AxisID"]||t;r[s]=r[s]||Object.create(null),Vb(r[s],[{axis:t},i[s],o[e]])})}),Object.keys(r).forEach(e=>{const t=r[e];Vb(t,[Qv.scales[t.type],Qv.scale])}),r}function nj(e){const t=e.options||(e.options={});t.plugins=Db(t.plugins,{}),t.scales=tj(e,t)}function ij(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const sj=new Map,rj=new Set;function aj(e,t){let n=sj.get(e);return n||(n=t(),sj.set(e,n),rj.add(n)),n}const oj=(e,t,n)=>{const i=Yb(t,n);void 0!==i&&e.add(i)};class lj{constructor(e){this._config=function(e){return(e=e||{}).data=ij(e.data),nj(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ij(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),nj(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return aj(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return aj(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return aj(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return aj(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:s}=this,r=this._cachedScopes(e,n),a=r.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>oj(o,e,t))),t.forEach(e=>oj(o,i,e)),t.forEach(e=>oj(o,Yv[s]||{},e)),t.forEach(e=>oj(o,Qv,e)),t.forEach(e=>oj(o,Kv,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),rj.has(t)&&r.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Yv[t]||{},Qv.datasets[t]||{},{type:t},Qv,Kv]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const s={$shared:!0},{resolver:r,subPrefixes:a}=cj(this._resolverCache,e,i);let o=r;if(function(e,t){const{isScriptable:n,isIndexable:i}=Cw(e);for(const s of t){const t=n(s),r=i(s),a=(r||t)&&e[s];if(t&&(Jb(a)||dj(a))||r&&Lb(a))return!0}return!1}(r,t)){s.$shared=!1;o=Sw(r,n=Jb(n)?n():n,this.createResolver(e,n,a))}for(const l of t)s[l]=o[l];return s}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:s}=cj(this._resolverCache,e,n);return Ab(t)?Sw(s,t,void 0,i):s}}function cj(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const s=n.join();let r=i.get(s);if(!r){r={resolver:Nw(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},i.set(s,r)}return r}const dj=e=>Ab(e)&&Object.getOwnPropertyNames(e).some(t=>Jb(e[t]));const uj=["top","bottom","left","right","chartArea"];function hj(e,t){return"top"===e||"bottom"===e||-1===uj.indexOf(e)&&"x"===t}function mj(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function pj(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),zb(n&&n.onComplete,[e],t)}function fj(e){const t=e.chart,n=t.options.animation;zb(n&&n.onProgress,[e],t)}function gj(e){return Vw()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const xj={},yj=e=>{const t=gj(e);return Object.values(xj).filter(e=>e.canvas===t).pop()};function bj(e,t,n){const i=Object.keys(e);for(const s of i){const i=+s;if(i>=t){const r=e[s];delete e[s],(n>0||i>t)&&(e[i+n]=r)}}}class vj{static defaults=(()=>Qv)();static instances=(()=>xj)();static overrides=(()=>Yv)();static registry=(()=>qk)();static version="4.5.0";static getChart=(()=>yj)();static register(){qk.add(...arguments),wj()}static unregister(){qk.remove(...arguments),wj()}constructor(e,t){const n=this.config=new lj(t),i=gj(e),s=yj(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Vw()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?xk:Lk}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,r.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=Eb(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Zk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}(e=>this.update(e),r.resizeDelay||0),this._dataChanges=[],xj[this.id]=this,a&&o?(b_.listen(this,"complete",pj),b_.listen(this,"progress",fj),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:s}=this;return Mb(e)?t&&s?s:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return qk}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():e_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return nw(this.canvas,this.ctx),this}stop(){return b_.stop(this),this}resize(e,t){b_.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,e,t,s),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,e_(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),zb(n.onResize,[this,r],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Ib(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let s=[];t&&(s=s.concat(Object.keys(t).map(e=>{const n=t[e],i=Qk(e,n),s="r"===i,r="x"===i;return{options:n,dposition:s?"chartArea":r?"bottom":"left",dtype:s?"radialLinear":r?"category":"linear"}}))),Ib(s,t=>{const s=t.options,r=s.id,a=Qk(r,s),o=Db(s.type,t.dtype);void 0!==s.position&&hj(s.position,a)===hj(t.dposition)||(s.position=t.dposition),i[r]=!0;let l=null;if(r in n&&n[r].type===o)l=n[r];else{l=new(qk.getScale(o))({id:r,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(s,e)}),Ib(i,(e,t)=>{e||delete n[t]}),Ib(n,e=>{fk.configure(this,e,e.options),fk.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(mj("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let s=this.getDatasetMeta(n);const r=i.type||this.config.type;if(s.type&&s.type!==r&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=r,s.indexAxis=i.indexAxis||Gk(r,this.options),s.order=i.order||0,s.index=n,s.label=""+i.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const t=qk.getController(r),{datasetElementType:i,dataElementType:a}=Qv.datasets[r];Object.assign(t,{dataElementType:qk.getElement(a),datasetElementType:i&&qk.getElement(i)}),s.controller=new t(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){Ib(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===s.indexOf(e);e.buildOrUpdateElements(t),r=Math.max(+e.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||Ib(s,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(mj("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ib(this.scales,e=>{fk.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Xb(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:s}of t){bj(e,i,"_removeElements"===n?-s:s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),i=n(0);for(let s=1;s<t;s++)if(!Xb(i,n(s)))return;return Array.from(i).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;fk.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Ib(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Jb(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(b_.has(this)?this.attached&&!b_.running(this)&&b_.start(this):(this.draw(),pj({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];e&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=x_(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&aw(t,i),e.controller.draw(),i&&ow(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return rw(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const s=nk.modes[t];return"function"===typeof s?s(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(e=>e&&e._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=jw(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",s=this.getDatasetMeta(e),r=s.controller._resolveAnimations(void 0,i);Gb(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),r.update(s,{visible:n}),this.update(t=>t.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),b_.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),nw(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete xj[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Ib(this.options.events,e=>n(e,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let r;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",s),n("detach",r)};r=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():r()}unbindEvents(){Ib(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Ib(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let s,r,a,o;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){r=e[a];const t=r&&this.getDatasetMeta(r.datasetIndex).controller;t&&t[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}});!Fb(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const i=this.options.hover,s=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),r=s(t,e),a=n?e:s(e,t);r.length&&this.updateHoverStyle(r,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:s}=this,r=t,a=this._getActiveElements(e,i,n,r),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,zb(s.onHover,[e,a,this],this),o&&zb(s.onClick,[e,a,this],this));const c=!Fb(a,i);return(c||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}function wj(){return Ib(vj.instances,e=>e._plugins.invalidate())}function _j(e,t,n,i){const s=yw(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const r=(n-t)/2,a=Math.min(r,i*t/2),o=e=>{const t=(n-Math.min(r,e))*i/2;return wv(e,0,Math.min(r,t))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:wv(s.innerStart,0,a),innerEnd:wv(s.innerEnd,0,a)}}function kj(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function jj(e,t,n,i,s,r){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+i+n-c,0),h=d>0?d+i+n+c:0;let m=0;const p=s-l;if(i){const e=((d>0?d-i:0)+(u>0?u-i:0))/2;m=(p-(0!==e?p*e/(e+i):p))/2}const f=(p-Math.max(.001,p*u-n/Qb)/u)/2,g=l+f+m,x=s-f-m,{outerStart:y,outerEnd:b,innerStart:v,innerEnd:w}=_j(t,h,u,x-g),_=u-y,k=u-b,j=g+y/_,N=x-b/k,S=h+v,C=h+w,P=g+v/S,T=x-w/C;if(e.beginPath(),r){const t=(j+N)/2;if(e.arc(a,o,u,j,t),e.arc(a,o,u,t,N),b>0){const t=kj(k,N,a,o);e.arc(t.x,t.y,b,N,x+sv)}const n=kj(C,x,a,o);if(e.lineTo(n.x,n.y),w>0){const t=kj(C,T,a,o);e.arc(t.x,t.y,w,x+sv,T+Math.PI)}const i=(x-w/h+(g+v/h))/2;if(e.arc(a,o,h,x-w/h,i,!0),e.arc(a,o,h,i,g+v/h,!0),v>0){const t=kj(S,P,a,o);e.arc(t.x,t.y,v,P+Math.PI,g-sv)}const s=kj(_,g,a,o);if(e.lineTo(s.x,s.y),y>0){const t=kj(_,j,a,o);e.arc(t.x,t.y,y,g-sv,j)}}else{e.moveTo(a,o);const t=Math.cos(j)*u+a,n=Math.sin(j)*u+o;e.lineTo(t,n);const i=Math.cos(N)*u+a,s=Math.sin(N)*u+o;e.lineTo(i,s)}e.closePath()}function Nj(e,t,n,i,s){const{fullCircles:r,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:m}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let f=t.endAngle;if(r){jj(e,t,n,i,f,s);for(let t=0;t<r;++t)e.stroke();isNaN(o)||(f=a+(o%ev||ev))}p&&function(e,t,n){const{startAngle:i,pixelMargin:s,x:r,y:a,outerRadius:o,innerRadius:l}=t;let c=s/o;e.beginPath(),e.arc(r,a,o,i-c,n+c),l>s?(c=s/l,e.arc(r,a,l,n+c,i-c,!0)):e.arc(r,a,s,n+sv,i-sv),e.closePath(),e.clip()}(e,t,f),l.selfJoin&&f-a>=Qb&&0===m&&"miter"!==d&&function(e,t,n){const{startAngle:i,x:s,y:r,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,u=Math.min(c/a,bv(i-n));if(e.beginPath(),e.arc(s,r,a-c/2,i+u/2,n-u/2),o>0){const t=Math.min(c/o,bv(i-n));e.arc(s,r,o+c/2,n-t/2,i+t/2,!0)}else{const t=Math.min(c/2,a*bv(i-n));if("round"===d)e.arc(s,r,t,n-Qb/2,i+Qb/2,!0);else if("bevel"===d){const a=2*t*t,o=-a*Math.cos(n+Qb/2)+s,l=-a*Math.sin(n+Qb/2)+r,c=a*Math.cos(i+Qb/2)+s,d=a*Math.sin(i+Qb/2)+r;e.lineTo(o,l),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,f),r||(jj(e,t,n,i,f,s),e.stroke())}class Sj extends Ak{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:s,distance:r}=gv(i,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,h=Db(d,o-a),m=vv(s,a,o)&&a!==o,p=h>=ev||m,f=_v(r,l+u,c+u);return p&&f}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:s,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(i+s)/2,d=(r+a+l+o)/2;return{x:t+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,s=(t.spacing||0)/2,r=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>ev?Math.floor(n/ev):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const o=i*(1-Math.sin(Math.min(Qb,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,s){const{fullCircles:r,startAngle:a,circumference:o}=t;let l=t.endAngle;if(r){jj(e,t,n,i,l,s);for(let t=0;t<r;++t)e.fill();isNaN(o)||(l=a+(o%ev||ev))}jj(e,t,n,i,l,s),e.fill()}(e,this,o,s,r),Nj(e,this,o,s,r),e.restore()}}function Cj(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Db(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Db(n.borderDash,t.borderDash)),e.lineDashOffset=Db(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Db(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Db(n.borderWidth,t.borderWidth),e.strokeStyle=Db(n.borderColor,t.borderColor)}function Pj(e,t,n){e.lineTo(n.x,n.y)}function Tj(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:s=0,end:r=i-1}=n,{start:a,end:o}=t,l=Math.max(s,a),c=Math.min(r,o),d=s<a&&r<a||s>o&&r>o;return{count:i,start:l,loop:t.loop,ilen:c<l&&!d?i+c-l:c-l}}function Ej(e,t,n,i){const{points:s,options:r}=t,{count:a,start:o,loop:l,ilen:c}=Tj(s,n,i),d=function(e){return e.stepped?lw:e.tension||"monotone"===e.cubicInterpolationMode?cw:Pj}(r);let u,h,m,{move:p=!0,reverse:f}=i||{};for(u=0;u<=c;++u)h=s[(o+(f?c-u:u))%a],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):d(e,m,h,f,r.stepped),m=h);return l&&(h=s[(o+(f?c:0))%a],d(e,m,h,f,r.stepped)),!!l}function Mj(e,t,n,i){const s=t.points,{count:r,start:a,ilen:o}=Tj(s,n,i),{move:l=!0,reverse:c}=i||{};let d,u,h,m,p,f,g=0,x=0;const y=e=>(a+(c?o-e:e))%r,b=()=>{m!==p&&(e.lineTo(g,p),e.lineTo(g,m),e.lineTo(g,f))};for(l&&(u=s[y(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=s[y(d)],u.skip)continue;const t=u.x,n=u.y,i=0|t;i===h?(n<m?m=n:n>p&&(p=n),g=(x*g+t)/++x):(b(),e.lineTo(t,n),h=i,x=0,m=p=n),f=n}b()}function Lj(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Mj:Ej}const Aj="function"===typeof Path2D;function Oj(e,t,n,i){Aj&&!t.options.segment?function(e,t,n,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,i)&&s.closePath()),Cj(e,t.options),e.stroke(s)}(e,t,n,i):function(e,t,n,i){const{segments:s,options:r}=t,a=Lj(t);for(const o of s)Cj(e,r,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class Rj extends Ak{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;Hw(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,s=n.length;if(!s)return[];const r=!!e._loop,{start:a,end:o}=function(e,t,n,i){let s=0,r=t-1;if(n&&!i)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(r+=s);r>s&&e[r%t].skip;)r--;return r%=t,{start:s,end:r}}(n,s,r,i);return m_(e,!0===i?[{start:a,end:o,loop:r}]:function(e,t,n,i){const s=e.length,r=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%s];n.skip||n.stop?l.skip||(i=!1,r.push({start:t%s,end:(a-1)%s,loop:i}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&r.push({start:t%s,end:o%s,loop:i}),r}(n,a,o<a?o+s:o,!!e._fullLoop&&0===a&&o===s-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],s=this.points,r=h_(this,{property:t,start:i,end:i});if(!r.length)return;const a=[],o=function(e){return e.stepped?s_:e.tension||"monotone"===e.cubicInterpolationMode?r_:i_}(n);let l,c;for(l=0,c=r.length;l<c;++l){const{start:c,end:d}=r[l],u=s[c],h=s[d];if(u===h){a.push(u);continue}const m=o(u,h,Math.abs((i-u[t])/(h[t]-u[t])),n.stepped);m[t]=e[t],a.push(m)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return Lj(this)(e,this,t,n)}path(e,t,n){const i=this.segments,s=Lj(this);let r=this._loop;t=t||0,n=n||this.points.length-t;for(const a of i)r&=s(e,this,a,{start:t,end:t+n-1});return!!r}draw(e,t,n,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Oj(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Dj(e,t,n,i){const s=e.options,{[n]:r}=e.getProps([n],i);return Math.abs(t-r)<s.radius+s.hitRadius}class Bj extends Ak{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:s,y:r}=this.getProps(["x","y"],n);return Math.pow(e-s,2)+Math.pow(t-r,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return Dj(this,e,"x",t)}inYRange(e,t){return Dj(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!rw(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,iw(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function zj(e,t){const{x:n,y:i,base:s,width:r,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=a/2,o=Math.min(n,s),l=Math.max(n,s),c=i-u,d=i+u):(u=r/2,o=n-u,l=n+u,c=Math.min(i,s),d=Math.max(i,s)),{left:o,top:c,right:l,bottom:d}}function Ij(e,t,n,i){return e?0:wv(t,n,i)}function Fj(e){const t=zj(e),n=t.right-t.left,i=t.bottom-t.top,s=function(e,t,n){const i=e.options.borderWidth,s=e.borderSkipped,r=bw(i);return{t:Ij(s.top,r.top,0,n),r:Ij(s.right,r.right,0,t),b:Ij(s.bottom,r.bottom,0,n),l:Ij(s.left,r.left,0,t)}}(e,n/2,i/2),r=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=vw(s),a=Math.min(t,n),o=e.borderSkipped,l=i||Ab(s);return{topLeft:Ij(!l||o.top||o.left,r.topLeft,0,a),topRight:Ij(!l||o.top||o.right,r.topRight,0,a),bottomLeft:Ij(!l||o.bottom||o.left,r.bottomLeft,0,a),bottomRight:Ij(!l||o.bottom||o.right,r.bottomRight,0,a)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Uj(e,t,n,i){const s=null===t,r=null===n,a=e&&!(s&&r)&&zj(e,i);return a&&(s||_v(t,a.left,a.right))&&(r||_v(n,a.top,a.bottom))}function $j(e,t){e.rect(t.x,t.y,t.w,t.h)}function Wj(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+i,y:e.y+s,w:e.w+r,h:e.h+a,radius:e.radius}}class Hj extends Ak{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:s,outer:r}=Fj(this),a=(o=r.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?mw:$j;var o;e.save(),r.w===s.w&&r.h===s.h||(e.beginPath(),a(e,Wj(r,t,s)),e.clip(),a(e,Wj(s,-t,r)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,Wj(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return Uj(this,e,t,n)}inXRange(e,t){return Uj(this,e,null,t)}inYRange(e,t){return Uj(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}const Vj=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class qj extends Ak{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=zb(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=_w(n.font),s=i.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=Vj(n,s);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(r,s,a,o)+10):(c=this.maxHeight,l=this._fitCols(r,i,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:s,maxWidth:r,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,m)=>{const p=n+t/2+s.measureText(e.text).width;(0===m||l[l.length-1]+p+2*a>r)&&(d+=c,l[l.length-(m>0?0:1)]=0,h+=c,u++),o[m]={left:0,top:h,row:u,width:p,height:i},l[l.length-1]+=p+a}),d}_fitCols(e,t,n,i){const{ctx:s,maxHeight:r,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=r-e;let d=a,u=0,h=0,m=0,p=0;return this.legendItems.forEach((e,r)=>{const{itemWidth:f,itemHeight:g}=function(e,t,n,i,s){const r=function(e,t,n,i){let s=e.text;s&&"string"!==typeof s&&(s=s.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+i.measureText(s).width}(i,e,t,n),a=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=Zj(t,n));return i}(s,i,t.lineHeight);return{itemWidth:r,itemHeight:a}}(n,t,s,e,i);r>0&&h+g+2*a>c&&(d+=u+a,l.push({width:u,height:h}),m+=u+a,p++,u=h=0),o[r]={left:m,top:h,col:p,width:f,height:g},u=Math.max(u,f),h+=g+a}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:s}}=this,r=a_(s,this.left,this.width);if(this.isHorizontal()){let s=0,a=Lv(n,this.left+i,this.right-this.lineWidths[s]);for(const o of t)s!==o.row&&(s=o.row,a=Lv(n,this.left+i,this.right-this.lineWidths[s])),o.top+=this.top+e+i,o.left=r.leftForLtr(r.x(a),o.width),a+=o.width+i}else{let s=0,a=Lv(n,this.top+e+i,this.bottom-this.columnSizes[s].height);for(const o of t)o.col!==s&&(s=o.col,a=Lv(n,this.top+e+i,this.bottom-this.columnSizes[s].height)),o.top=a,o.left+=this.left+i,o.left=r.leftForLtr(r.x(o.left),o.width),a+=o.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;aw(e,this),this._draw(),ow(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:s,labels:r}=e,a=Qv.color,o=a_(e.rtl,this.left,this.width),l=_w(r.font),{padding:c}=r,d=l.size,u=d/2;let h;this.drawTitle(),i.textAlign=o.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:m,boxHeight:p,itemHeight:f}=Vj(r,d),g=this.isHorizontal(),x=this._computeTitleHeight();h=g?{x:Lv(s,this.left+c,this.right-n[0]),y:this.top+c+x,line:0}:{x:this.left+c,y:Lv(s,this.top+x+c,this.bottom-t[0].height),line:0},o_(this.ctx,e.textDirection);const y=f+c;this.legendItems.forEach((b,v)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const w=i.measureText(b.text).width,_=o.textAlign(b.textAlign||(b.textAlign=r.textAlign)),k=m+u+w;let j=h.x,N=h.y;o.setWidth(this.width),g?v>0&&j+k+c>this.right&&(N=h.y+=y,h.line++,j=h.x=Lv(s,this.left+c,this.right-n[h.line])):v>0&&N+y>this.bottom&&(j=h.x=j+t[h.line].width+c,h.line++,N=h.y=Lv(s,this.top+x+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(m)||m<=0||isNaN(p)||p<0)return;i.save();const s=Db(n.lineWidth,1);if(i.fillStyle=Db(n.fillStyle,a),i.lineCap=Db(n.lineCap,"butt"),i.lineDashOffset=Db(n.lineDashOffset,0),i.lineJoin=Db(n.lineJoin,"miter"),i.lineWidth=s,i.strokeStyle=Db(n.strokeStyle,a),i.setLineDash(Db(n.lineDash,[])),r.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},l=o.xPlus(e,m/2);sw(i,a,l,t+u,r.pointStyleWidth&&m)}else{const r=t+Math.max((d-p)/2,0),a=o.leftForLtr(e,m),l=vw(n.borderRadius);i.beginPath(),Object.values(l).some(e=>0!==e)?mw(i,{x:a,y:r,w:m,h:p,radius:l}):i.rect(a,r,m,p),i.fill(),0!==s&&i.stroke()}i.restore()}(o.x(j),N,b),j=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(_,j+m+u,g?j+k:this.right,e.rtl),function(e,t,n){hw(i,n.text,e,t+f/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(j),N,b),g)h.x+=k+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=Zj(b,e)+c}else h.y+=y}),l_(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=_w(t.font),i=ww(t.padding);if(!t.display)return;const s=a_(e.rtl,this.left,this.width),r=this.ctx,a=t.position,o=n.size/2,l=i.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=Lv(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+Lv(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=Lv(a,d,d+u);r.textAlign=s.textAlign(Mv(a)),r.textBaseline="middle",r.strokeStyle=t.color,r.fillStyle=t.color,r.font=n.string,hw(r,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=_w(e.font),n=ww(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,s;if(_v(e,this.left,this.right)&&_v(t,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(i=s[n],_v(e,i.left,i.left+i.width)&&_v(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,s=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(i,n);i&&!s&&zb(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!s&&zb(t.onHover,[e,n,this],this)}else n&&zb(t.onClick,[e,n,this],this)}}function Zj(e,t){return t*(e.text?e.text.length:0)}var Yj={id:"legend",_element:qj,start(e,t,n){const i=e.legend=new qj({ctx:e.ctx,options:n,chart:e});fk.configure(e,i,n),fk.addBox(e,i)},stop(e){fk.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;fk.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=ww(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:r,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Kj extends Ak{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=Lb(n.text)?n.text.length:1;this._padding=ww(n.padding);const s=i*_w(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:s,options:r}=this,a=r.align;let o,l,c,d=0;return this.isHorizontal()?(l=Lv(a,n,s),c=t+e,o=s-n):("left"===r.position?(l=n+e,c=Lv(a,i,t),d=-.5*Qb):(l=s-e,c=Lv(a,t,i),d=.5*Qb),o=i-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=_w(t.font),i=n.lineHeight/2+this._padding.top,{titleX:s,titleY:r,maxWidth:a,rotation:o}=this._drawArgs(i);hw(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:Mv(t.align),textBaseline:"middle",translation:[s,r]})}}var Gj={id:"title",_element:Kj,start(e,t,n){!function(e,t){const n=new Kj({ctx:e.ctx,options:t,chart:e});fk.configure(e,n,t),fk.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;fk.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;fk.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Jj={average(e){if(!e.length)return!1;let t,n,i=new Set,s=0,r=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),s+=e.y,++r}}if(0===r||0===i.size)return!1;const a=[...i].reduce((e,t)=>e+t)/i.size;return{x:a,y:s/r}},nearest(e,t){if(!e.length)return!1;let n,i,s,r=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=xv(t,i.getCenterPoint());e<o&&(o=e,s=i)}}if(s){const e=s.tooltipPosition();r=e.x,a=e.y}return{x:r,y:a}}};function Xj(e,t){return t&&(Lb(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Qj(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function eN(e,t){const{element:n,datasetIndex:i,index:s}=t,r=e.getDatasetMeta(i).controller,{label:a,value:o}=r.getLabelAndValue(s);return{chart:e,label:a,parsed:r.getParsed(s),raw:e.data.datasets[i].data[s],formattedValue:o,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function tN(e,t){const n=e.chart.ctx,{body:i,footer:s,title:r}=e,{boxWidth:a,boxHeight:o}=t,l=_w(t.bodyFont),c=_w(t.titleFont),d=_w(t.footerFont),u=r.length,h=s.length,m=i.length,p=ww(t.padding);let f=p.height,g=0,x=i.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,u&&(f+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),x){f+=m*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(x-m)*l.lineHeight+(x-1)*t.bodySpacing}h&&(f+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let y=0;const b=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=c.string,Ib(e.title,b),n.font=l.string,Ib(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?a+2+t.boxPadding:0,Ib(i,e=>{Ib(e.before,b),Ib(e.lines,b),Ib(e.after,b)}),y=0,n.font=d.string,Ib(e.footer,b),n.restore(),g+=p.width,{width:g,height:f}}function nN(e,t,n,i){const{x:s,width:r}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===i?c=s<=(o+l)/2?"left":"right":s<=r/2?c="left":s>=a-r/2&&(c="right"),function(e,t,n,i){const{x:s,width:r}=i,a=n.caretSize+n.caretPadding;return"left"===e&&s+r+a>t.width||"right"===e&&s-r-a<0||void 0}(c,e,t,n)&&(c="center"),c}function iN(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||nN(e,t,n,i),yAlign:i}}function sN(e,t,n,i){const{caretSize:s,caretPadding:r,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=s+r,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=vw(a);let p=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,o);const f=function(e,t,n){let{y:i,height:s}=e;return"top"===t?i+=n:i-="bottom"===t?s+n:s/2,i}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(d,h)+s:"right"===o&&(p+=Math.max(u,m)+s),{x:wv(p,0,i.width-t.width),y:wv(f,0,i.height-t.height)}}function rN(e,t,n){const i=ww(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function aN(e){return Xj([],Qj(e))}function oN(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const lN={beforeTitle:Tb,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Tb,beforeBody:Tb,beforeLabel:Tb,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Mb(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Tb,afterBody:Tb,beforeFooter:Tb,footer:Tb,afterFooter:Tb};function cN(e,t,n,i){const s=e[t].call(n,i);return"undefined"===typeof s?lN[t].call(n,i):s}class dN extends Ak{static positioners=(()=>Jj)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,s=new k_(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,jw(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=cN(n,"beforeTitle",this,e),s=cN(n,"title",this,e),r=cN(n,"afterTitle",this,e);let a=[];return a=Xj(a,Qj(i)),a=Xj(a,Qj(s)),a=Xj(a,Qj(r)),a}getBeforeBody(e,t){return aN(cN(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return Ib(e,e=>{const t={before:[],lines:[],after:[]},s=oN(n,e);Xj(t.before,Qj(cN(s,"beforeLabel",this,e))),Xj(t.lines,cN(s,"label",this,e)),Xj(t.after,Qj(cN(s,"afterLabel",this,e))),i.push(t)}),i}getAfterBody(e,t){return aN(cN(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=cN(n,"beforeFooter",this,e),s=cN(n,"footer",this,e),r=cN(n,"afterFooter",this,e);let a=[];return a=Xj(a,Qj(i)),a=Xj(a,Qj(s)),a=Xj(a,Qj(r)),a}_createItems(e){const t=this._active,n=this.chart.data,i=[],s=[],r=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(eN(this.chart,t[a]));return e.filter&&(l=l.filter((t,i,s)=>e.filter(t,i,s,n))),e.itemSort&&(l=l.sort((t,i)=>e.itemSort(t,i,n))),Ib(l,t=>{const n=oN(e.callbacks,t);i.push(cN(n,"labelColor",this,t)),s.push(cN(n,"labelPointStyle",this,t)),r.push(cN(n,"labelTextColor",this,t))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=r,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let s,r=[];if(i.length){const e=Jj[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const t=this._size=tN(this,n),a=Object.assign({},e,t),o=iN(this.chart,n,a),l=sN(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=r,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const s=this.getCaretPosition(e,n,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:s}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=vw(a),{x:u,y:h}=e,{width:m,height:p}=t;let f,g,x,y,b,v;return"center"===s?(b=h+p/2,"left"===i?(f=u,g=f-r,y=b+r,v=b-r):(f=u+m,g=f+r,y=b-r,v=b+r),x=f):(g="left"===i?u+Math.max(o,c)+r:"right"===i?u+m-Math.max(l,d)-r:this.caretX,"top"===s?(y=h,b=y-r,f=g-r,x=g+r):(y=h+p,b=y+r,f=g+r,x=g-r),v=y),{x1:f,x2:g,x3:x,y1:y,y2:b,y3:v}}drawTitle(e,t,n){const i=this.title,s=i.length;let r,a,o;if(s){const l=a_(n.rtl,this.x,this.width);for(e.x=rN(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",r=_w(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=r.string,o=0;o<s;++o)t.fillText(i[o],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,o+1===s&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,i,s){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=s,c=_w(s.bodyFont),d=rN(this,"left",s),u=i.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,m=t.y+h;if(s.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(u,l)+l/2,c=m+o/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,iw(e,t,n,c),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,iw(e,t,n,c)}else{e.lineWidth=Ab(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const t=i.leftForLtr(u,l),n=i.leftForLtr(i.xPlus(u,1),l-2),a=vw(r.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,mw(e,{x:t,y:m,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),mw(e,{x:n,y:m+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,m,l,o),e.strokeRect(t,m,l,o),e.fillStyle=r.backgroundColor,e.fillRect(n,m+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:s,bodyAlign:r,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,d=_w(n.bodyFont);let u=d.lineHeight,h=0;const m=a_(n.rtl,this.x,this.width),p=function(n){t.fillText(n,m.x(e.x+h),e.y+u/2),e.y+=u+s},f=m.textAlign(r);let g,x,y,b,v,w,_;for(t.textAlign=r,t.textBaseline="middle",t.font=d.string,e.x=rN(this,f,n),t.fillStyle=n.bodyColor,Ib(this.beforeBody,p),h=a&&"right"!==f?"center"===r?l/2+c:l+2+c:0,b=0,w=i.length;b<w;++b){for(g=i[b],x=this.labelTextColors[b],t.fillStyle=x,Ib(g.before,p),y=g.lines,a&&y.length&&(this._drawColorBox(t,e,b,m,n),u=Math.max(d.lineHeight,o)),v=0,_=y.length;v<_;++v)p(y[v]),u=d.lineHeight;Ib(g.after,p)}h=0,u=d.lineHeight,Ib(this.afterBody,p),e.y-=s}drawFooter(e,t,n){const i=this.footer,s=i.length;let r,a;if(s){const o=a_(n.rtl,this.x,this.width);for(e.x=rN(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",r=_w(n.footerFont),t.fillStyle=n.footerColor,t.font=r.string,a=0;a<s;++a)t.fillText(i[a],o.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:s,yAlign:r}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=vw(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+d,o),"top"===r&&this.drawCaret(e,t,n,i),t.lineTo(a+l-u,o),t.quadraticCurveTo(a+l,o,a+l,o+u),"center"===r&&"right"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+l,o+c-m),t.quadraticCurveTo(a+l,o+c,a+l-m,o+c),"bottom"===r&&this.drawCaret(e,t,n,i),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===r&&"left"===s&&this.drawCaret(e,t,n,i),t.lineTo(a,o+d),t.quadraticCurveTo(a,o,a+d,o),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,s=n&&n.y;if(i||s){const n=Jj[e.position].call(this,this._active,this._eventPosition);if(!n)return;const r=this._size=tN(this,e),a=Object.assign({},n,this._size),o=iN(t,e,a),l=sN(e,a,o,t);i._to===l.x&&s._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=r.width,this.height=r.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=ww(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,i,t),o_(e,t.textDirection),s.y+=r.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),l_(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}),s=!Fb(n,i),r=this._positionChanged(i,t);(s||r)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],r=this._getActiveElements(e,s,t,n),a=this._positionChanged(r,e),o=t||!Fb(r,s)||a;return o&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,i){const s=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const r=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&r.reverse(),r}_positionChanged(e,t){const{caretX:n,caretY:i,options:s}=this,r=Jj[s.position].call(this,e,t);return!1!==r&&(n!==r.x||i!==r.y)}}var uN={id:"tooltip",_element:dN,positioners:Jj,afterInit(e,t,n){n&&(e.tooltip=new dN({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lN},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function hN(e,t,n,i){const s=e.indexOf(t);if(-1===s)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return s!==e.lastIndexOf(t)?n:s}function mN(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class pN extends Wk{static id="category";static defaults=(()=>({ticks:{callback:mN}}))();constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Mb(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:wv(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:hN(n,e,Db(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=e;r<=t;r++)i.push({value:r});return i}getLabelForValue(e){return mN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function fN(e,t){const n=[],{bounds:i,step:s,min:r,max:a,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=s||1,m=c-1,{min:p,max:f}=t,g=!Mb(r),x=!Mb(a),y=!Mb(l),b=(f-p)/(d+1);let v,w,_,k,j=dv((f-p)/m/h)*h;if(j<1e-14&&!g&&!x)return[{value:p},{value:f}];k=Math.ceil(f/j)-Math.floor(p/j),k>m&&(j=dv(k*j/m/h)*h),Mb(o)||(v=Math.pow(10,o),j=Math.ceil(j*v)/v),"ticks"===i?(w=Math.floor(p/j)*j,_=Math.ceil(f/j)*j):(w=p,_=f),g&&x&&s&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-r)/s,j/1e3)?(k=Math.round(Math.min((a-r)/j,c)),j=(a-r)/k,w=r,_=a):y?(w=g?r:w,_=x?a:_,k=l-1,j=(_-w)/k):(k=(_-w)/j,k=cv(k,Math.round(k),j/1e3)?Math.round(k):Math.ceil(k));const N=Math.max(fv(j),fv(w));v=Math.pow(10,Mb(o)?N:o),w=Math.round(w*v)/v,_=Math.round(_*v)/v;let S=0;for(g&&(u&&w!==r?(n.push({value:r}),w<r&&S++,cv(Math.round((w+S*j)*v)/v,r,gN(r,b,e))&&S++):w<r&&S++);S<k;++S){const e=Math.round((w+S*j)*v)/v;if(x&&e>a)break;n.push({value:e})}return x&&u&&_!==a?n.length&&cv(n[n.length-1].value,a,gN(a,b,e))?n[n.length-1].value=a:n.push({value:a}):x&&_!==a||n.push({value:_}),n}function gN(e,t,n){let{horizontal:i,minRotation:s}=n;const r=mv(s),a=(i?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}class xN extends Wk{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Mb(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this;const r=e=>i=t?i:e,a=e=>s=n?s:e;if(e){const e=lv(i),t=lv(s);e<0&&t<0?a(0):e>0&&t>0&&r(0)}if(i===s){let t=0===s?1:Math.abs(.05*s);a(s+t),e||r(i-t)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=fN({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&hv(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Vv(e,this.chart.options.locale,this.options.ticks.format)}}class yN extends xN{static id="linear";static defaults=(()=>({ticks:{callback:Zv.formatters.numeric}}))();determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ob(e)?e:0,this.max=Ob(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=mv(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Zv.formatters.logarithmic;Zv.formatters.numeric;const bN={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vN=Object.keys(bN);function wN(e,t){return e-t}function _N(e,t){if(Mb(t))return null;const n=e._adapter,{parser:i,round:s,isoWeekday:r}=e._parseOpts;let a=t;return"function"===typeof i&&i(a),Ob(a)||("string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(s&&("week"!==s||!uv(r)&&!0!==r?n.startOf(a,s):n.startOf(a,"isoWeek",r)),+a)}function kN(e,t,n,i){const s=vN.length;for(let r=vN.indexOf(e);r<s-1;++r){const e=bN[vN[r]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(s*e.size))<=i)return vN[r]}return vN[s-1]}function jN(e,t,n){if(n){if(n.length){const{lo:i,hi:s}=kv(n,t);e[n[i]>=t?n[i]:n[s]]=!0}}else e[t]=!0}function NN(e,t,n){const i=[],s={},r=t.length;let a,o;for(0;a<r;++a)t[a],s[o]=a,i.push({value:o,major:!1});return 0!==r&&n?function(e,t,n,i){const s=e._adapter,r=+s.startOf(t[0].value,i),a=t[t.length-1].value;let o,l;for(r;o<=a;+s.add(o,1,i))n[o],l>=0&&(t[l].major=!0);return t}(e,i,s,n):i}class SN extends Wk{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new K_(e.adapters.date);i.init(t),Vb(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:_N(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:s,minDefined:r,maxDefined:a}=this.getUserBounds();function o(e){r||isNaN(e.min)||Math.min(i,e.min),a||isNaN(e.max)||Math.max(s,e.max)}r&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),Ob(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),Ob(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(e[0],e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,r=function(e,t,n){let i=0,s=e.length;for(;i<s&&e[i]<t;)0;for(;s>i&&e[s-1]>n;)0;return i>0||s<e.length?e.slice(i,s):e}(i,s,this.max);return this._unit=t.unit||(n.autoSkip?kN(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(e,t,n,i,s){for(let r=vN.length-1;r>=vN.indexOf(n);r--){const n=vN[r];if(bN[n].common&&e._adapter.diff(s,i,n)>=t-1)return n}return vN[n?vN.indexOf(n):0]}(this,r.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=vN.indexOf(e)+1,n=vN.length;t<n;++t)if(bN[vN[t]].common)return vN[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&r.reverse(),NN(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,s=0;this.options.offset&&n.length&&(this.getDecimalForValue(n[0]),1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,this.getDecimalForValue(n[n.length-1]),1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const r=n.length<3?.5:.25;wv(i,0,r),wv(s,0,r),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,s=i.time,r=s.unit||kN(s.minUnit,t,n,this._getLabelCapacity(t)),a=Db(i.ticks.stepSize,1),o="week"===r&&s.isoWeekday,l=uv(o)||!0===o,c={};let d,u,h=t;if(l&&+e.startOf(h,"isoWeek",o),+e.startOf(h,l?"day":r),e.diff(n,t,r)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+r);const m="data"===i.ticks.source&&this.getDataTimestamps();for(0;d<n;+e.add(d,a,r),u++)jN(c,d,m);return d!==n&&"ticks"!==i.bounds&&1!==u||jN(c,d,m),Object.keys(c).sort(wN).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,s=t||n[i];return this._adapter.format(e,s)}_tickFormatFunction(e,t,n,i){const s=this.options,r=s.ticks.callback;if(r)return zb(r,[e,t,n],this);const a=s.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],d=l&&a[l],u=n[t],h=l&&d&&u&&u.major;return this._adapter.format(e,i||(h?d:c))}generateTickLabels(e){let t,n,i;for(e.length;t<n;++t)e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=mv(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),r=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*s+a*r,h:n*r+a*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,NN(this,[e],this._majorUnit),i),r=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(i.length;e<t;++e)n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(i.length;t<n;++t)e.push(_N(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Pv(e.sort(wN))}}const CN="label";function PN(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function TN(e,t){e.labels=t}function EN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:CN;const i=[];e.datasets=t.map(t=>{const s=e.datasets.find(e=>e[n]===t[n]);return s&&t.data&&!i.includes(s)?(i.push(s),Object.assign(s,t),s):{...t}})}function MN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CN;const n={labels:[],datasets:[]};return TN(n,e.labels),EN(n,e.datasets,t),n}function LN(e,n){const{height:i=150,width:s=300,redraw:r=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...m}=e,p=(0,t.useRef)(null),f=(0,t.useRef)(null),g=()=>{p.current&&(f.current=new vj(p.current,{type:o,data:MN(l,a),options:c&&{...c},plugins:d}),PN(n,f.current))},x=()=>{PN(n,null),f.current&&(f.current.destroy(),f.current=null)};return(0,t.useEffect)(()=>{!r&&f.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(f.current,c)},[r,c]),(0,t.useEffect)(()=>{!r&&f.current&&TN(f.current.config.data,l.labels)},[r,l.labels]),(0,t.useEffect)(()=>{!r&&f.current&&l.datasets&&EN(f.current.config.data,l.datasets,a)},[r,l.datasets]),(0,t.useEffect)(()=>{f.current&&(r?(x(),setTimeout(g)):f.current.update(h))},[r,c,l.labels,l.datasets,h]),(0,t.useEffect)(()=>{f.current&&(x(),setTimeout(g))},[o]),(0,t.useEffect)(()=>(g(),()=>x()),[]),t.createElement("canvas",{ref:p,role:"img",height:i,width:s,...m},u)}const AN=(0,t.forwardRef)(LN);function ON(e,n){return vj.register(n),(0,t.forwardRef)((n,i)=>t.createElement(AN,{...n,ref:i,type:e}))}const RN=ON("line",q_),DN=ON("bar",H_),BN=ON("doughnut",V_);vj.register(pN,yN,Bj,Rj,Hj,Gj,uN,Yj,Sj);const zN=e=>{let{reservations:n=[],analytics:i={}}=e;const s=(0,t.useMemo)(()=>{const e=Array.from({length:7},(e,t)=>{const n=new Date;return n.setDate(n.getDate()-t),n.toDateString()}).reverse(),t=e.map(e=>n.filter(t=>new Date(t.date).toDateString()===e).length),i=e.map(e=>new Date(e).toLocaleDateString("en-US",{weekday:"short"})),s=((new Date).getMonth(),Array.from({length:12},(e,t)=>n.filter(e=>new Date(e.date).getMonth()===t).length)),r=n.reduce((e,t)=>{const n=t.status||"pending";return e[n]=(e[n]||0)+1,e},{});return{daily:{labels:i,datasets:[{label:"Daily Bookings",data:t,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},monthly:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Monthly Bookings",data:s,backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)"],borderWidth:2}]},status:{labels:Object.keys(r),datasets:[{data:Object.values(r),backgroundColor:["#10B981","#F59E0B","#EF4444","#8B5CF6"],borderWidth:0}]}}},[n]),r={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}};return(0,ft.jsxs)("div",{className:"space-y-8",children:[(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:[(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"\ud83d\udcc8 Weekly Booking Trends"}),(0,ft.jsx)("div",{className:"h-64",children:(0,ft.jsx)(RN,{data:s.daily,options:r})})]}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:[(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"\ud83d\udcca Monthly Performance"}),(0,ft.jsx)("div",{className:"h-64",children:(0,ft.jsx)(DN,{data:s.monthly,options:r})})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:[(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"\ud83c\udfaf Booking Status"}),(0,ft.jsx)("div",{className:"h-64",children:(0,ft.jsx)(BN,{data:s.status,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:[(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"\ud83c\udfaf Performance Insights"}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ft.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl",children:[(0,ft.jsx)("div",{className:"text-2xl mb-2",children:"\u23f0"}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Peak Hours"}),(0,ft.jsx)("div",{className:"font-bold text-blue-600 dark:text-blue-400",children:"2:00 PM - 5:00 PM"})]}),(0,ft.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl",children:[(0,ft.jsx)("div",{className:"text-2xl mb-2",children:"\u23f1\ufe0f"}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Avg. Session"}),(0,ft.jsx)("div",{className:"font-bold text-green-600 dark:text-green-400",children:"45 minutes"})]}),(0,ft.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl",children:[(0,ft.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udd04"}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Return Rate"}),(0,ft.jsx)("div",{className:"font-bold text-purple-600 dark:text-purple-400",children:"78%"})]})]}),(0,ft.jsxs)("div",{className:"mt-8",children:[(0,ft.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Bookings"}),(0,ft.jsx)("div",{className:"space-y-3",children:n.slice(0,5).map((e,t)=>{var n,i,s;return(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ft.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:(null===(n=e.users)||void 0===n||null===(i=n.full_name)||void 0===i?void 0:i.charAt(0))||"U"}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:(null===(s=e.users)||void 0===s?void 0:s.full_name)||"Unknown Customer"}),(0,ft.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[new Date(e.date).toLocaleDateString()," at ",e.time]})]})]}),(0,ft.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-semibold "+("confirmed"===e.status?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"pending"===e.status?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:e.status||"pending"})]},e.id)})})]})]})]})},IN=e=>{let{reservations:n=[],business:i,onReservationUpdate:s}=e;const[r,a]=(0,t.useState)(new Date),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)("month"),u=e=>{const t=new Date(r);t.setMonth(r.getMonth()+e),a(t)},h=e=>{const t=new Date(r);t.setDate(r.getDate()+7*e),a(t)},m=(0,t.useMemo)(()=>{const e=r.getFullYear(),t=r.getMonth(),i=new Date(e,t,1),s=(new Date(e,t+1,0),new Date(i));s.setDate(s.getDate()-i.getDay());const a=[],o=new Date(s);for(let r=0;r<42;r++){const e=o.toDateString(),i=n.filter(t=>new Date(t.date).toDateString()===e);a.push({date:new Date(o),dateStr:e,isCurrentMonth:o.getMonth()===t,isToday:o.toDateString()===(new Date).toDateString(),reservations:i,reservationCount:i.length}),o.setDate(o.getDate()+1)}return a},[r,n]),p=(0,t.useMemo)(()=>{const e=new Date(r);e.setDate(r.getDate()-r.getDay());const t=[];for(let i=0;i<7;i++){const s=new Date(e);s.setDate(e.getDate()+i);const r=s.toDateString();t.push({date:s,dateStr:r,reservations:n.filter(e=>new Date(e.date).toDateString()===r)})}return t},[r,n]),f=(0,t.useMemo)(()=>{const e=r.toDateString();return n.filter(t=>new Date(t.date).toDateString()===e).sort((e,t)=>e.time.localeCompare(t.time))},[r,n]),g=e=>{const t={pending:"bg-yellow-500",confirmed:"bg-green-500",completed:"bg-blue-500",cancelled:"bg-red-500"};return t[e]||t.pending},x=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return(0,ft.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,ft.jsxs)("div",{className:"mb-8",children:[(0,ft.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Business Calendar"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"View and manage your appointments schedule"})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50 mb-8",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ft.jsx)("div",{className:"flex space-x-2",children:["month","week","day"].map(e=>(0,ft.jsx)("button",{onClick:()=>d(e),className:"px-4 py-2 rounded-lg font-semibold capitalize transition-all "+(c===e?"bg-blue-500 text-white shadow-lg":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:e},e))}),(0,ft.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ft.jsx)("button",{onClick:()=>"month"===c?u(-1):h(-1),className:"p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"\u2190"}),(0,ft.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white min-w-[200px] text-center",children:"day"===c?r.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):`${["January","February","March","April","May","June","July","August","September","October","November","December"][r.getMonth()]} ${r.getFullYear()}`}),(0,ft.jsx)("button",{onClick:()=>"month"===c?u(1):h(1),className:"p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"\u2192"})]}),(0,ft.jsx)("button",{onClick:()=>a(new Date),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition-all",children:"Today"})]}),(0,ft.jsxs)(At,{mode:"wait",children:["month"===c&&(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"grid grid-cols-7 gap-2",children:[x.map(e=>(0,ft.jsx)("div",{className:"p-2 text-center font-semibold text-gray-600 dark:text-gray-400",children:e},e)),m.map((e,t)=>(0,ft.jsxs)(gc.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.01*t},onClick:()=>l(e.date),className:`min-h-[100px] p-2 border border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer transition-all hover:shadow-md ${e.isCurrentMonth?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900"} ${e.isToday?"ring-2 ring-blue-500":""} ${(null===o||void 0===o?void 0:o.toDateString())===e.dateStr?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[(0,ft.jsx)("div",{className:"text-sm font-semibold mb-1 "+(e.isToday?"text-blue-600 dark:text-blue-400":e.isCurrentMonth?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-600"),children:e.date.getDate()}),(0,ft.jsxs)("div",{className:"space-y-1",children:[e.reservations.slice(0,3).map((e,t)=>{var n;return(0,ft.jsxs)("div",{className:`text-xs px-2 py-1 rounded text-white truncate ${g(e.status||"pending")}`,children:[e.time," ",(null===(n=e.users)||void 0===n?void 0:n.full_name)||e.customer_name]},t)}),e.reservationCount>3&&(0,ft.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",e.reservationCount-3," more"]})]})]},t))]},"month"),"week"===c&&(0,ft.jsx)(gc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"grid grid-cols-7 gap-4",children:p.map((e,t)=>(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"min-h-[400px] bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[(0,ft.jsxs)("div",{className:"text-center mb-4",children:[(0,ft.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:x[e.date.getDay()]}),(0,ft.jsx)("div",{className:"text-lg font-bold "+(e.date.toDateString()===(new Date).toDateString()?"text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300"),children:e.date.getDate()})]}),(0,ft.jsx)("div",{className:"space-y-2",children:e.reservations.map((e,t)=>{var n;return(0,ft.jsxs)("div",{className:`p-2 rounded text-white text-sm ${g(e.status||"pending")}`,children:[(0,ft.jsx)("div",{className:"font-semibold",children:e.time}),(0,ft.jsx)("div",{className:"text-xs opacity-90",children:(null===(n=e.users)||void 0===n?void 0:n.full_name)||e.customer_name})]},t)})})]},t))},"week"),"day"===c&&(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[(0,ft.jsxs)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:["Appointments for ",r.toLocaleDateString()]}),0===f.length?(0,ft.jsxs)("div",{className:"text-center py-12",children:[(0,ft.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcc5"}),(0,ft.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"No appointments scheduled for this day"})]}):(0,ft.jsx)("div",{className:"space-y-4",children:f.map((e,t)=>{var n;return(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,ft.jsx)("div",{className:`w-4 h-4 rounded-full ${g(e.status||"pending")}`}),(0,ft.jsxs)("div",{className:"flex-1",children:[(0,ft.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-white",children:[e.time," - ",(null===(n=e.users)||void 0===n?void 0:n.full_name)||e.customer_name]}),(0,ft.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["\ud83d\udcde ",e.customer_phone,e.customer_email&&` \u2022 \u2709\ufe0f ${e.customer_email}`]})]}),(0,ft.jsx)("div",{className:`px-3 py-1 rounded-full text-xs font-semibold text-white ${g(e.status||"pending")}`,children:e.status||"pending"})]},t)})})]},"day")]})]})]})},FN=e=>{let{reservations:n=[],onReservationUpdate:i}=e;const[s,r]=(0,t.useState)("all"),[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)("date"),[d,u]=(0,t.useState)("desc"),[h,m]=(0,t.useState)(null),[p,f]=(0,t.useState)({}),g=(0,t.useMemo)(()=>{let e=[...n];return"all"!==s&&(e=e.filter(e=>(e.status||"pending")===s)),a&&(e=e.filter(e=>{var t,n,i,s;return(null===(t=e.users)||void 0===t||null===(n=t.full_name)||void 0===n?void 0:n.toLowerCase().includes(a.toLowerCase()))||(null===(i=e.customer_name)||void 0===i?void 0:i.toLowerCase().includes(a.toLowerCase()))||(null===(s=e.customer_phone)||void 0===s?void 0:s.includes(a))})),e.sort((e,t)=>{var n,i;let s,r;switch(l){case"date":s=new Date(e.date+" "+e.time),r=new Date(t.date+" "+t.time);break;case"customer":s=((null===(n=e.users)||void 0===n?void 0:n.full_name)||e.customer_name||"").toLowerCase(),r=((null===(i=t.users)||void 0===i?void 0:i.full_name)||t.customer_name||"").toLowerCase();break;case"status":s=e.status||"pending",r=t.status||"pending";break;default:return 0}return"asc"===d?s<r?-1:s>r?1:0:s>r?-1:s<r?1:0}),e},[n,s,a,l,d]),x=async(e,t)=>{f(t=>({...t,[e]:!0}));try{await gh.put(`/api/business/reservations/${e}`,{status:t}),i&&i()}catch(n){console.error("Error updating reservation:",n),alert("Failed to update reservation status")}finally{f(t=>({...t,[e]:!1}))}},y=e=>{const t={pending:"bg-yellow-100 text-yellow-700 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-400",confirmed:"bg-green-100 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-400",completed:"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/30 dark:text-blue-400",cancelled:"bg-red-100 text-red-700 border-red-200 dark:bg-red-900/30 dark:text-red-400"};return t[e]||t.pending},b=e=>{const t={pending:"\u23f3",confirmed:"\u2705",completed:"\ud83c\udf89",cancelled:"\u274c"};return t[e]||t.pending},v=(0,t.useMemo)(()=>{const e=(new Date).toDateString(),t=n.filter(t=>new Date(t.date).toDateString()===e);return{total:n.length,today:t.length,pending:n.filter(e=>"pending"===(e.status||"pending")).length,confirmed:n.filter(e=>"confirmed"===e.status).length,completed:n.filter(e=>"completed"===e.status).length}},[n]);return(0,ft.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,ft.jsxs)("div",{className:"mb-8",children:[(0,ft.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Reservation Management"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and track all your business reservations"})]}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-2xl shadow-lg",children:[(0,ft.jsx)("div",{className:"text-2xl font-bold",children:v.total}),(0,ft.jsx)("div",{className:"text-blue-100",children:"Total Bookings"})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-2xl shadow-lg",children:[(0,ft.jsx)("div",{className:"text-2xl font-bold",children:v.today}),(0,ft.jsx)("div",{className:"text-green-100",children:"Today"})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white p-6 rounded-2xl shadow-lg",children:[(0,ft.jsx)("div",{className:"text-2xl font-bold",children:v.pending}),(0,ft.jsx)("div",{className:"text-yellow-100",children:"Pending"})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white p-6 rounded-2xl shadow-lg",children:[(0,ft.jsx)("div",{className:"text-2xl font-bold",children:v.confirmed}),(0,ft.jsx)("div",{className:"text-emerald-100",children:"Confirmed"})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-2xl shadow-lg",children:[(0,ft.jsx)("div",{className:"text-2xl font-bold",children:v.completed}),(0,ft.jsx)("div",{className:"text-purple-100",children:"Completed"})]})]}),(0,ft.jsx)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50 mb-8",children:(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Customer"}),(0,ft.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Search by name or phone...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Status"}),(0,ft.jsx)("select",{value:s,onChange:e=>r(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[{value:"all",label:"All Bookings",color:"gray"},{value:"pending",label:"Pending",color:"yellow"},{value:"confirmed",label:"Confirmed",color:"green"},{value:"completed",label:"Completed",color:"blue"},{value:"cancelled",label:"Cancelled",color:"red"}].map(e=>(0,ft.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sort By"}),(0,ft.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,ft.jsx)("option",{value:"date",children:"Date & Time"}),(0,ft.jsx)("option",{value:"customer",children:"Customer Name"}),(0,ft.jsx)("option",{value:"status",children:"Status"})]})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sort Order"}),(0,ft.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,ft.jsx)("option",{value:"desc",children:"Newest First"}),(0,ft.jsx)("option",{value:"asc",children:"Oldest First"})]})]})]})}),(0,ft.jsx)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 overflow-hidden",children:0===g.length?(0,ft.jsxs)("div",{className:"p-12 text-center",children:[(0,ft.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcc5"}),(0,ft.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No reservations found"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"all"!==s||a?"Try adjusting your filters or search criteria":"No reservations have been made yet"})]}):(0,ft.jsx)("div",{className:"overflow-x-auto",children:(0,ft.jsxs)("table",{className:"w-full",children:[(0,ft.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:(0,ft.jsxs)("tr",{children:[(0,ft.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Customer"}),(0,ft.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Date & Time"}),(0,ft.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Contact"}),(0,ft.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,ft.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,ft.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:(0,ft.jsx)(At,{children:g.map((e,t)=>{var n,i;return(0,ft.jsxs)(gc.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.05*t},className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[(0,ft.jsx)("td",{className:"px-6 py-4",children:(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold mr-4",children:((null===(n=e.users)||void 0===n?void 0:n.full_name)||e.customer_name||"U").charAt(0)}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:(null===(i=e.users)||void 0===i?void 0:i.full_name)||e.customer_name||"Unknown"}),(0,ft.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",e.id.substring(0,8),"..."]})]})]})}),(0,ft.jsxs)("td",{className:"px-6 py-4",children:[(0,ft.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:new Date(e.date).toLocaleDateString()}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.time})]}),(0,ft.jsxs)("td",{className:"px-6 py-4",children:[(0,ft.jsxs)("div",{className:"text-sm text-gray-900 dark:text-white",children:["\ud83d\udcde ",e.customer_phone||"N/A"]}),e.customer_email&&(0,ft.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["\u2709\ufe0f ",e.customer_email]})]}),(0,ft.jsx)("td",{className:"px-6 py-4",children:(0,ft.jsxs)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${y(e.status||"pending")}`,children:[b(e.status||"pending")," ",e.status||"pending"]})}),(0,ft.jsx)("td",{className:"px-6 py-4",children:(0,ft.jsxs)("div",{className:"flex space-x-2",children:["confirmed"!==e.status&&(0,ft.jsx)("button",{onClick:()=>x(e.id,"confirmed"),disabled:p[e.id],className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:"\u2705 Confirm"}),"completed"!==e.status&&"confirmed"===e.status&&(0,ft.jsx)("button",{onClick:()=>x(e.id,"completed"),disabled:p[e.id],className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:"\ud83c\udf89 Complete"}),"cancelled"!==e.status&&(0,ft.jsx)("button",{onClick:()=>x(e.id,"cancelled"),disabled:p[e.id],className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg text-xs font-semibold transition-colors disabled:opacity-50",children:"\u274c Cancel"})]})})]},e.id)})})})]})})})]})},UN=e=>{let{settings:n={},onSettingsUpdate:i}=e;const[s,r]=(0,t.useState)({slot_duration_minutes:n.slot_duration_minutes||30,online_payment_enabled:n.online_payment_enabled||!1,accept_walkins:n.accept_walkins||!1,max_simultaneous_bookings:n.max_simultaneous_bookings||1,working_hours_json:n.working_hours_json||[{day:"monday",enabled:!1,open:"09:00",close:"17:00"},{day:"tuesday",enabled:!1,open:"09:00",close:"17:00"},{day:"wednesday",enabled:!1,open:"09:00",close:"17:00"},{day:"thursday",enabled:!1,open:"09:00",close:"17:00"},{day:"friday",enabled:!1,open:"09:00",close:"17:00"},{day:"saturday",enabled:!1,open:"09:00",close:"17:00"},{day:"sunday",enabled:!1,open:"09:00",close:"17:00"}]}),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(""),d=(e,t)=>{r(n=>({...n,[e]:t}))},u=(e,t,n)=>{const i=[...s.working_hours_json];i[e]={...i[e],[t]:n},r(e=>({...e,working_hours_json:i}))};return(0,ft.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,ft.jsxs)("div",{className:"mb-8",children:[(0,ft.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Business Settings"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure your business operations and preferences"})]}),l&&(0,ft.jsx)(gc.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-xl "+(l.includes("success")?"bg-green-100 text-green-700 border border-green-200 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 border border-red-200 dark:bg-red-900/30 dark:text-red-400"),children:l}),(0,ft.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0),c("");try{await gh.put("/api/business/settings",s),c("Settings updated successfully!"),i&&i()}catch(r){var t,n;c((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to update settings")}finally{o(!1)}},className:"space-y-8",children:[(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:[(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:"\u2699\ufe0f General Settings"}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Appointment Duration"}),(0,ft.jsx)("select",{value:s.slot_duration_minutes,onChange:e=>d("slot_duration_minutes",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[{value:15,label:"15 minutes"},{value:30,label:"30 minutes"},{value:45,label:"45 minutes"},{value:60,label:"1 hour"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}].map(e=>(0,ft.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Max Simultaneous Bookings"}),(0,ft.jsx)("input",{type:"number",min:"1",max:"10",value:s.max_simultaneous_bookings,onChange:e=>d("max_simultaneous_bookings",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),(0,ft.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:"\ud83d\udcb3 Online Payment"}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Allow customers to pay online"})]}),(0,ft.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,ft.jsx)("input",{type:"checkbox",checked:s.online_payment_enabled,onChange:e=>d("online_payment_enabled",e.target.checked),className:"sr-only peer"}),(0,ft.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),(0,ft.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:"\ud83d\udeb6 Walk-ins"}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Accept walk-in customers"})]}),(0,ft.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,ft.jsx)("input",{type:"checkbox",checked:s.accept_walkins,onChange:e=>d("accept_walkins",e.target.checked),className:"sr-only peer"}),(0,ft.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:[(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:"\ud83d\udd50 Working Hours"}),(0,ft.jsx)("div",{className:"space-y-4",children:[{value:"monday",label:"Monday",emoji:"\ud83d\udcc5"},{value:"tuesday",label:"Tuesday",emoji:"\ud83d\udcc5"},{value:"wednesday",label:"Wednesday",emoji:"\ud83d\udcc5"},{value:"thursday",label:"Thursday",emoji:"\ud83d\udcc5"},{value:"friday",label:"Friday",emoji:"\ud83d\udcc5"},{value:"saturday",label:"Saturday",emoji:"\ud83c\udf89"},{value:"sunday",label:"Sunday",emoji:"\ud83c\udf89"}].map((e,t)=>(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-3 w-32",children:[(0,ft.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,ft.jsx)("input",{type:"checkbox",checked:s.working_hours_json[t].enabled,onChange:e=>u(t,"enabled",e.target.checked),className:"sr-only peer"}),(0,ft.jsx)("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]}),(0,ft.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.emoji," ",e.label]})]}),s.working_hours_json[t].enabled?(0,ft.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ft.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"From:"}),(0,ft.jsx)("input",{type:"time",value:s.working_hours_json[t].open,onChange:e=>u(t,"open",e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]}),(0,ft.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ft.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"To:"}),(0,ft.jsx)("input",{type:"time",value:s.working_hours_json[t].close,onChange:e=>u(t,"close",e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]})]}):(0,ft.jsx)("div",{className:"flex-1 text-sm text-gray-500 dark:text-gray-400",children:"Closed"})]},e.value))})]}),(0,ft.jsx)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex justify-end",children:(0,ft.jsx)(gc.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:a,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"\ud83d\udcbe Saving...":"\ud83d\udcbe Save Settings"})})]})]})},$N=e=>{let{settings:n={},onSettingsUpdate:i}=e;const[s,r]=(0,t.useState)({workingHours:{monday:{enabled:!0,start:"09:00",end:"17:00"},tuesday:{enabled:!0,start:"09:00",end:"17:00"},wednesday:{enabled:!0,start:"09:00",end:"17:00"},thursday:{enabled:!0,start:"09:00",end:"17:00"},friday:{enabled:!0,start:"09:00",end:"17:00"},saturday:{enabled:!1,start:"10:00",end:"15:00"},sunday:{enabled:!1,start:"10:00",end:"15:00"}},appointmentSettings:{slotDuration:60,bookingWindow:30,minAdvanceBooking:2,maxCapacityPerSlot:1,bufferTimeBetweenBookings:0},specialDates:[],...n}),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)({type:"",text:""});(0,t.useEffect)(()=>{n&&Object.keys(n).length>0&&r(e=>({...e,...n}))},[n]);const d=(e,t,n)=>{r(i=>({...i,workingHours:{...i.workingHours,[e]:{...i.workingHours[e],[t]:n}}}))},u=(e,t)=>{r(n=>({...n,appointmentSettings:{...n.appointmentSettings,[e]:parseInt(t)||t}}))};return(0,ft.jsxs)("div",{className:"space-y-8",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,ft.jsx)(Oc,{className:"text-blue-600"}),"Availability Management"]}),(0,ft.jsx)("p",{className:"text-gray-600 mt-1",children:"Configure your business hours and appointment settings"})]}),(0,ft.jsxs)(gc.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:async()=>{o(!0),c({type:"",text:""});try{const e=await gh.updateBusinessSettings({...n,...s});if(!e.success)throw new Error(e.message||"Failed to save settings");c({type:"success",text:"Availability settings saved successfully!"}),i&&i()}catch(e){console.error("Error saving availability settings:",e),c({type:"error",text:e.message||"Failed to save settings"})}finally{o(!1),setTimeout(()=>c({type:"",text:""}),3e3)}},disabled:a,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg flex items-center gap-2 transition-colors disabled:opacity-50",children:[a?(0,ft.jsx)(Hc,{className:"animate-spin"}):(0,ft.jsx)(Vc,{}),"Save Settings"]})]}),l.text&&(0,ft.jsx)(gc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 rounded-lg "+("success"===l.type?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"),children:l.text}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg p-6 border border-gray-200",children:[(0,ft.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,ft.jsx)(Mc,{className:"text-green-600"}),"Working Hours"]}),(0,ft.jsx)("div",{className:"space-y-4",children:[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}].map(e=>{let{key:t,label:n}=e;return(0,ft.jsx)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:(0,ft.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:[(0,ft.jsx)("div",{className:"font-medium text-gray-900",children:n}),(0,ft.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ft.jsx)("button",{onClick:()=>d(t,"enabled",!s.workingHours[t].enabled),className:"p-1 rounded-full transition-colors "+(s.workingHours[t].enabled?"text-green-600 bg-green-100":"text-gray-400 bg-gray-100"),children:s.workingHours[t].enabled?(0,ft.jsx)(Zc,{size:24}):(0,ft.jsx)(qc,{size:24})}),(0,ft.jsx)("span",{className:"text-sm "+(s.workingHours[t].enabled?"text-green-600":"text-gray-400"),children:s.workingHours[t].enabled?"Open":"Closed"})]}),(0,ft.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ft.jsx)("label",{className:"text-sm text-gray-600",children:"From:"}),(0,ft.jsx)("input",{type:"time",value:s.workingHours[t].start,onChange:e=>d(t,"start",e.target.value),disabled:!s.workingHours[t].enabled,className:"border border-gray-300 rounded px-3 py-1 text-sm disabled:bg-gray-100 disabled:text-gray-400"})]}),(0,ft.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ft.jsx)("label",{className:"text-sm text-gray-600",children:"To:"}),(0,ft.jsx)("input",{type:"time",value:s.workingHours[t].end,onChange:e=>d(t,"end",e.target.value),disabled:!s.workingHours[t].enabled,className:"border border-gray-300 rounded px-3 py-1 text-sm disabled:bg-gray-100 disabled:text-gray-400"})]})]})},t)})})]}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg p-6 border border-gray-200",children:[(0,ft.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,ft.jsx)(Gc,{className:"text-purple-600"}),"Appointment Settings"]}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment Duration (minutes)"}),(0,ft.jsxs)("select",{value:s.appointmentSettings.slotDuration,onChange:e=>u("slotDuration",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ft.jsx)("option",{value:15,children:"15 minutes"}),(0,ft.jsx)("option",{value:30,children:"30 minutes"}),(0,ft.jsx)("option",{value:45,children:"45 minutes"}),(0,ft.jsx)("option",{value:60,children:"1 hour"}),(0,ft.jsx)("option",{value:90,children:"1.5 hours"}),(0,ft.jsx)("option",{value:120,children:"2 hours"})]})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Customers Per Slot"}),(0,ft.jsx)("input",{type:"number",min:"1",max:"50",value:s.appointmentSettings.maxCapacityPerSlot,onChange:e=>u("maxCapacityPerSlot",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Booking Window (days in advance)"}),(0,ft.jsx)("input",{type:"number",min:"1",max:"365",value:s.appointmentSettings.bookingWindow,onChange:e=>u("bookingWindow",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Advance Booking (hours)"}),(0,ft.jsxs)("select",{value:s.appointmentSettings.minAdvanceBooking,onChange:e=>u("minAdvanceBooking",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ft.jsx)("option",{value:0,children:"No minimum"}),(0,ft.jsx)("option",{value:1,children:"1 hour"}),(0,ft.jsx)("option",{value:2,children:"2 hours"}),(0,ft.jsx)("option",{value:4,children:"4 hours"}),(0,ft.jsx)("option",{value:12,children:"12 hours"}),(0,ft.jsx)("option",{value:24,children:"24 hours"})]})]}),(0,ft.jsxs)("div",{className:"md:col-span-2",children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buffer Time Between Bookings (minutes)"}),(0,ft.jsxs)("select",{value:s.appointmentSettings.bufferTimeBetweenBookings,onChange:e=>u("bufferTimeBetweenBookings",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ft.jsx)("option",{value:0,children:"No buffer time"}),(0,ft.jsx)("option",{value:5,children:"5 minutes"}),(0,ft.jsx)("option",{value:10,children:"10 minutes"}),(0,ft.jsx)("option",{value:15,children:"15 minutes"}),(0,ft.jsx)("option",{value:30,children:"30 minutes"})]})]})]})]})]})},WN=()=>{var e,n,i;const s=ne(),[r,a]=(0,t.useState)(null),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)({}),[u,h]=(0,t.useState)({}),[m,p]=(0,t.useState)(!0),[f,g]=(0,t.useState)(null),[x,y]=(0,t.useState)("overview"),b=[{id:"overview",label:"Overview",icon:"\ud83d\udcca",description:"Dashboard & Analytics"},{id:"reservations",label:"Reservations",icon:"\ud83d\udcc5",description:"Manage Bookings"},{id:"calendar",label:"Calendar",icon:"\ud83d\uddd3\ufe0f",description:"Schedule View"},{id:"availability",label:"Availability",icon:"\ud83d\udd50",description:"Working Hours & Slots"},{id:"profile",label:"Business Profile",icon:"\ud83c\udfe2",description:"Edit Information"},{id:"settings",label:"Settings",icon:"\u2699\ufe0f",description:"Configure Business"}];(0,t.useEffect)(()=>{v()},[]);const v=async()=>{p(!0),g(null);try{const e=await gh.get("/api/business/user-business");if(!e.data.business)return void s("/register-business");a(e.data.business);const t=await gh.get("/api/business/reservations");l(t.data.reservations||[]);const n=await gh.get("/api/business/settings");h(n.data.settings||{}),w(t.data.reservations||[])}catch(i){var e,t,n;console.error("Error fetching business data:",i),g((null===(e=i.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to load business data"),401===(null===(n=i.response)||void 0===n?void 0:n.status)&&s("/login")}finally{p(!1)}},w=e=>{const t=new Date,n=t.getMonth(),i=t.getFullYear(),s=e.filter(e=>{const t=new Date(e.date);return t.getMonth()===n&&t.getFullYear()===i}),r=t.toDateString(),a=e.filter(e=>new Date(e.date).toDateString()===r),o=e.reduce((e,t)=>e+(t.amount||50),0),l=s.reduce((e,t)=>e+(t.amount||50),0);d({totalReservations:e.length,monthlyReservations:s.length,todayReservations:a.length,totalRevenue:o,monthlyRevenue:l,averageRating:4.5,completionRate:95})},_=(0,t.useMemo)(()=>[{title:"Today's Bookings",value:c.todayReservations||0,change:"+12%",changeType:"positive",icon:"\ud83d\udcc5",color:"from-blue-500 to-blue-600"},{title:"This Month",value:c.monthlyReservations||0,change:"+8%",changeType:"positive",icon:"\ud83d\udcca",color:"from-green-500 to-green-600"},{title:"Total Revenue",value:`$${c.totalRevenue||0}`,change:"+15%",changeType:"positive",icon:"\ud83d\udcb0",color:"from-purple-500 to-purple-600"},{title:"Avg. Rating",value:c.averageRating||"4.5",change:"+0.2",changeType:"positive",icon:"\u2b50",color:"from-yellow-500 to-yellow-600"}],[c]);return m?(0,ft.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:(0,ft.jsx)(gc.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full"})}):f?(0,ft.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4",children:(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[(0,ft.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,ft.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Business"}),(0,ft.jsx)("p",{className:"text-gray-600 mb-6",children:f}),(0,ft.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg transition-colors",children:"Try Again"})]})}):(0,ft.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,ft.jsxs)("div",{className:"flex flex-col lg:flex-row h-screen",children:[(0,ft.jsxs)("div",{className:"lg:hidden bg-white/80 dark:bg-gray-800/80 border-b border-gray-200/50 dark:border-gray-700/50 p-4",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ft.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white text-sm font-bold",children:(null===r||void 0===r||null===(e=r.name)||void 0===e?void 0:e.charAt(0).toUpperCase())||"B"}),(0,ft.jsx)("div",{children:(0,ft.jsx)("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:(null===r||void 0===r?void 0:r.name)||"My Business"})})]}),(0,ft.jsx)("button",{onClick:()=>s("/"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:"\u2715"})]}),(0,ft.jsx)("div",{className:"mt-4 flex overflow-x-auto space-x-2 pb-2",children:b.map(e=>(0,ft.jsxs)("button",{onClick:()=>y(e.id),className:"flex-shrink-0 flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 "+(x===e.id?"bg-blue-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[(0,ft.jsx)("span",{children:e.icon}),(0,ft.jsx)("span",{className:"whitespace-nowrap",children:e.label})]},e.id))})]}),(0,ft.jsxs)(gc.div,{initial:{x:-300},animate:{x:0},className:"hidden lg:block w-80 bg-white/80 backdrop-blur-xl dark:bg-gray-800/80 border-r border-gray-200/50 dark:border-gray-700/50 shadow-xl",children:[(0,ft.jsx)("div",{className:"p-6 border-b border-gray-200/50 dark:border-gray-700/50",children:(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center space-x-4",children:[(0,ft.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-xl font-bold",children:(null===r||void 0===r||null===(n=r.name)||void 0===n?void 0:n.charAt(0))||"B"}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(null===r||void 0===r?void 0:r.name)||"My Business"}),(0,ft.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:(null===r||void 0===r||null===(i=r.type)||void 0===i?void 0:i.replace("_"," "))||"Business"})]})]})}),(0,ft.jsx)("nav",{className:"p-4 space-y-2",children:b.map((e,t)=>(0,ft.jsxs)(gc.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+.1*t},onClick:()=>y(e.id),className:"w-full flex items-center space-x-4 p-4 rounded-xl transition-all duration-300 "+(x===e.id?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg transform scale-105":"hover:bg-gray-100 dark:hover:bg-gray-700/50 text-gray-700 dark:text-gray-300"),children:[(0,ft.jsx)("span",{className:"text-2xl",children:e.icon}),(0,ft.jsxs)("div",{className:"text-left",children:[(0,ft.jsx)("div",{className:"font-semibold",children:e.label}),(0,ft.jsx)("div",{className:"text-xs "+(x===e.id?"text-blue-100":"text-gray-500 dark:text-gray-400"),children:e.description})]})]},e.id))}),(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"p-4 m-4 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 rounded-xl",children:[(0,ft.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Quick Stats"}),(0,ft.jsxs)("div",{className:"space-y-2",children:[(0,ft.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today"}),(0,ft.jsx)("span",{className:"font-semibold text-blue-600",children:c.todayReservations})]}),(0,ft.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This Month"}),(0,ft.jsx)("span",{className:"font-semibold text-green-600",children:c.monthlyReservations})]}),(0,ft.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rating"}),(0,ft.jsxs)("span",{className:"font-semibold text-yellow-600",children:[c.averageRating,"\u2b50"]})]})]})]})]}),(0,ft.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,ft.jsx)(At,{mode:"wait",children:(0,ft.jsxs)(gc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"h-full overflow-y-auto",children:["overview"===x&&(0,ft.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,ft.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,ft.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Business Overview"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:"Monitor your business performance and manage operations"})]}),(0,ft.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:_.map((e,t)=>(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white/70 backdrop-blur-sm dark:bg-gray-800/70 rounded-2xl p-4 sm:p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50 hover:shadow-xl transition-all duration-300",children:[(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ft.jsx)("div",{className:`w-10 sm:w-12 h-10 sm:h-12 bg-gradient-to-br ${e.color} rounded-xl flex items-center justify-center text-white text-lg sm:text-xl`,children:e.icon}),(0,ft.jsx)("div",{className:"text-sm font-semibold px-2 py-1 rounded-full "+("positive"===e.changeType?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:e.change})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:e.value}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.title})]})]},e.title))}),(0,ft.jsx)(zN,{reservations:o,analytics:c})]}),"reservations"===x&&(0,ft.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,ft.jsx)(FN,{reservations:o,onReservationUpdate:v})}),"calendar"===x&&(0,ft.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,ft.jsx)(IN,{reservations:o,business:r,onReservationUpdate:v})}),"availability"===x&&(0,ft.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,ft.jsx)($N,{settings:u,onSettingsUpdate:v})}),"profile"===x&&(0,ft.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,ft.jsx)(Ky,{business:r,onBusinessUpdate:v})}),"settings"===x&&(0,ft.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,ft.jsx)(UN,{settings:u,onSettingsUpdate:v})})]},x)})})]})})};delete _h().Icon.Default.prototype._getIconUrl,_h().Icon.Default.mergeOptions({iconRetinaUrl:n(249),iconUrl:n(24),shadowUrl:n(71)});const HN=e=>{let{business:n,userLocation:i,onSelect:s}=e;const[r,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(!1),c=i&&n.latitude&&n.longitude?d(i.lat,i.lng,n.latitude,n.longitude):null,d=(e,t,n,i)=>{const s=u(n-e),r=u(i-t),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(u(e))*Math.cos(u(n))*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},u=e=>e*(Math.PI/180);(0,t.useEffect)(()=>{(async()=>{l(!0);try{const e=await gh.get(`/api/businesses/${n.id}/availability?date=${(new Date).toISOString().split("T")[0]}`);a(e.data)}catch(e){console.error("Error checking availability:",e)}l(!1)})()},[n.id]);const h=(()=>{var e,t;return o?{text:"Checking...",color:"text-gray-500"}:r&&0!==(null===(e=r.slots)||void 0===e?void 0:e.length)?(null===(t=r.slots)||void 0===t?void 0:t.length)>0?{text:`${r.slots.length} slots available today`,color:"text-green-500"}:{text:"Check availability",color:"text-gray-500"}:{text:"Fully Booked",color:"text-red-500"}})();return(0,ft.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 border relative "+(n.isPremium?"border-purple-300 ring-2 ring-purple-100":"border-gray-200"),children:[n.isPremium&&(0,ft.jsx)("div",{className:"absolute top-3 right-3 z-10",children:(0,ft.jsx)("span",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-2 py-1 rounded-full text-xs font-semibold shadow-lg",children:"\u2b50 Premium"})}),n.primary_photo&&(0,ft.jsxs)("div",{className:"relative h-48 overflow-hidden",children:[(0,ft.jsx)("img",{src:n.primary_photo,alt:n.name,className:"w-full h-full object-cover"}),(0,ft.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),(0,ft.jsxs)("div",{className:"p-6",children:[(0,ft.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ft.jsx)("span",{className:"text-2xl",children:(m=n.type,{barbershop:"\u2702\ufe0f",beauty_salon:"\ud83d\udc84",restaurant:"\ud83c\udf7d\ufe0f",cafe:"\u2615",football_field:"\u26bd",tennis_court:"\ud83c\udfbe",gym:"\ud83d\udcaa",car_wash:"\ud83d\ude97",spa:"\ud83e\uddd6\u200d\u2640\ufe0f",dentist:"\ud83e\uddb7",doctor:"\ud83d\udc69\u200d\u2695\ufe0f",other:"\ud83c\udfe2"}[m]||"\ud83c\udfe2")}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:n.name}),(0,ft.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,ft.jsx)("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:n.type.replace("_"," ")}),n.isPremium&&(0,ft.jsx)("span",{className:"inline-block px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"\ud83d\udc8e Featured"})]})]})]}),c&&(0,ft.jsx)("div",{className:"text-right",children:(0,ft.jsxs)("span",{className:"text-sm text-gray-500",children:[c.toFixed(1)," km away"]})})]}),(0,ft.jsxs)("p",{className:"text-gray-600 mb-3 flex items-center",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ud83d\udccd"}),n.location]}),(0,ft.jsx)("div",{className:"mb-4",children:(0,ft.jsx)("p",{className:`text-sm font-medium ${h.color}`,children:h.text})}),(0,ft.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ft.jsx)("div",{className:"flex items-center space-x-1",children:n.rating&&n.rating.totalReviews>0?(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)(Dh,{rating:n.rating.averageRating,readonly:!0,size:"sm"}),(0,ft.jsxs)("span",{className:"text-sm text-gray-600 ml-1",children:[n.rating.averageRating.toFixed(1)," (",n.rating.totalReviews," review",1!==n.rating.totalReviews?"s":"",")"]})]}):(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsx)(Dh,{rating:0,readonly:!0,size:"sm"}),(0,ft.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"No reviews yet"})]})}),(0,ft.jsx)("div",{className:"flex items-center space-x-2",children:(0,ft.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"\ud83d\udcb3 Online Pay"})})]}),(0,ft.jsx)("button",{onClick:s,className:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium",children:"Book Appointment"})]})]});var m},VN=e=>{let{businesses:t,userLocation:n,onBusinessSelect:i}=e;const s=n?[n.lat,n.lng]:[36.8065,10.1815],r=e=>{const t={barbershop:"#EF4444",beauty_salon:"#EC4899",restaurant:"#F59E0B",cafe:"#6B7280",football_field:"#10B981",tennis_court:"#06B6D4",gym:"#8B5CF6",car_wash:"#3B82F6",spa:"#F97316",dentist:"#14B8A6",doctor:"#59C0D6",other:"#6B7280"}[e]||"#6B7280";return new(_h().Icon)({iconUrl:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${t}" width="30" height="30">\n          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>\n        </svg>\n      `)}`,iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30]})},a=new(_h().Icon)({iconUrl:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent('\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#4F46E5" width="20" height="20">\n        <circle cx="12" cy="12" r="8"/>\n      </svg>\n    ')}`,iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-10]});return(0,ft.jsxs)("div",{className:"w-full",children:[(0,ft.jsx)("div",{className:"w-full h-96 rounded-lg border border-gray-300 overflow-hidden",children:(0,ft.jsxs)(jh,{center:s,zoom:12,style:{height:"100%",width:"100%"},children:[(0,ft.jsx)(Lh,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n&&(0,ft.jsx)(Oh,{position:[n.lat,n.lng],icon:a,children:(0,ft.jsx)(Rh,{children:(0,ft.jsx)("div",{className:"text-center",children:(0,ft.jsx)("strong",{children:"Your Location"})})})}),t.filter(e=>e.latitude&&e.longitude).map(e=>(0,ft.jsx)(Oh,{position:[e.latitude,e.longitude],icon:r(e.type),children:(0,ft.jsx)(Rh,{children:(0,ft.jsxs)("div",{className:"p-2 min-w-[200px]",children:[(0,ft.jsx)("h3",{className:"font-semibold text-lg mb-1",children:e.name}),(0,ft.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:e.type.replace("_"," ")}),(0,ft.jsx)("p",{className:"text-gray-500 text-xs mb-3",children:e.location}),(0,ft.jsx)("button",{onClick:()=>i(e),className:"w-full bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700 transition-colors",children:"Book Now"})]})})},e.id))]})}),(0,ft.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[(0,ft.jsx)("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Map Legend:"}),(0,ft.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-1"}),(0,ft.jsx)("span",{children:"Your Location"})]}),(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-1"}),(0,ft.jsx)("span",{children:"Businesses"})]})]}),(0,ft.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"\ud83d\udca1 Click on business markers to see details and book appointments"})]})]})},qN=()=>{const[e,n]=(0,t.useState)([]),[i,s]=(0,t.useState)([]),[r,a]=(0,t.useState)("list"),[o,l]=(0,t.useState)({type:"",radius:10,userLocation:null}),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(null);(0,t.useEffect)(()=>{m(),p()},[]),(0,t.useEffect)(()=>{f()},[e,o]);const m=async()=>{try{d(!0);const e=await gh.get("/api/businesses/discover");n(e.data)}catch(e){h("Failed to load businesses"),console.error("Error fetching businesses:",e)}finally{d(!1)}},p=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{l(t=>({...t,userLocation:{lat:e.coords.latitude,lng:e.coords.longitude}}))},e=>{console.error("Error getting location:",e)})},f=()=>{let t=[...e];o.type&&(t=t.filter(e=>e.type===o.type)),o.userLocation&&o.radius&&(t=t.filter(e=>{if(!e.latitude||!e.longitude)return!0;return g(o.userLocation.lat,o.userLocation.lng,e.latitude,e.longitude)<=o.radius})),t.sort((e,t)=>{const n=e.isPremium||!1,i=t.isPremium||!1;if(n!==i)return i?1:-1;if(o.userLocation&&e.latitude&&e.longitude&&t.latitude&&t.longitude){return g(o.userLocation.lat,o.userLocation.lng,e.latitude,e.longitude)-g(o.userLocation.lat,o.userLocation.lng,t.latitude,t.longitude)}return e.name.localeCompare(t.name)}),s(t)},g=(e,t,n,i)=>{const s=x(n-e),r=x(i-t),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(x(e))*Math.cos(x(n))*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},x=e=>e*(Math.PI/180),y=(e,t)=>{l(n=>({...n,[e]:t}))},b=e=>{window.location.href=`/booking/${e.id}`};return c?(0,ft.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,ft.jsx)("div",{className:"text-lg text-gray-600",children:"Loading businesses..."})}):u?(0,ft.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,ft.jsx)("div",{className:"text-lg text-red-600",children:u})}):(0,ft.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ft.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,ft.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[(0,ft.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Discover Businesses"}),(0,ft.jsx)("p",{className:"text-gray-600 mt-2 text-sm sm:text-base",children:"Find and book appointments at local businesses"})]})}),(0,ft.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,ft.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,ft.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4 items-start sm:items-center justify-between",children:[(0,ft.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Type"}),(0,ft.jsx)("select",{value:o.type,onChange:e=>y("type",e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"",label:"All Types"},{value:"barbershop",label:"Barbershop"},{value:"beauty_salon",label:"Beauty Salon"},{value:"restaurant",label:"Restaurant"},{value:"cafe",label:"Caf\xe9"},{value:"football_field",label:"Football Field"},{value:"tennis_court",label:"Tennis Court"},{value:"gym",label:"Gym"},{value:"car_wash",label:"Car Wash"},{value:"spa",label:"Spa & Wellness"},{value:"dentist",label:"Dentist"},{value:"doctor",label:"Doctor"},{value:"other",label:"Other"}].map(e=>(0,ft.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (km)"}),(0,ft.jsxs)("select",{value:o.radius,onChange:e=>y("radius",parseInt(e.target.value)),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,ft.jsx)("option",{value:5,children:"5 km"}),(0,ft.jsx)("option",{value:10,children:"10 km"}),(0,ft.jsx)("option",{value:20,children:"20 km"}),(0,ft.jsx)("option",{value:50,children:"50 km"}),(0,ft.jsx)("option",{value:100,children:"100 km"})]})]})]}),(0,ft.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,ft.jsx)("button",{onClick:()=>a("list"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("list"===r?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"List View"}),(0,ft.jsx)("button",{onClick:()=>a("map"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("map"===r?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Map View"})]})]})})}),(0,ft.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:["list"===r?(0,ft.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>(0,ft.jsx)(HN,{business:e,userLocation:o.userLocation,onSelect:()=>b(e)},e.id))}):(0,ft.jsx)("div",{className:"h-96",children:(0,ft.jsx)(VN,{businesses:i,userLocation:o.userLocation,onBusinessSelect:b})}),0===i.length&&(0,ft.jsxs)("div",{className:"text-center py-12",children:[(0,ft.jsx)("div",{className:"text-gray-500 text-lg",children:"No businesses found matching your criteria"}),(0,ft.jsx)("button",{onClick:()=>l({type:"",radius:10,userLocation:o.userLocation}),className:"mt-4 text-blue-600 hover:text-blue-800 font-medium",children:"Clear filters"})]})]})]})},ZN=()=>{var e;const{businessId:n}=ie(),i=ne(),[s,r]=(0,t.useState)(null),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(""),[h,m]=(0,t.useState)({name:"",phone:"",email:"",notes:""}),[p,f]=(0,t.useState)("cash"),[g,x]=(0,t.useState)(!0),[y,b]=(0,t.useState)(!1),[v,w]=(0,t.useState)(null),[_,k]=(0,t.useState)(!1),[j,N]=(0,t.useState)({cardNumber:"",expiryDate:"",cvv:"",holderName:""}),S=50*(1-("online"===p?.02:0));(0,t.useEffect)(()=>{C();const e=(new Date).toISOString().split("T")[0];c(e),P(e)},[n]),(0,t.useEffect)(()=>{l&&P(l)},[l]);const C=async()=>{try{const e=await gh.get(`/api/businesses/${n}`);r(e.data.business)}catch(e){w("Failed to load business details"),console.error("Error fetching business:",e)}finally{x(!1)}},P=async e=>{try{const t=await gh.get(`/api/businesses/${n}/availability?date=${e}`);o(t.data.slots||[])}catch(t){console.error("Error fetching availability:",t),o([])}},T=(e,t)=>{N(n=>({...n,[e]:t}))},E=e=>{const[t,n]=e.split(":"),i=parseInt(t);return`${i%12||12}:${n} ${i>=12?"PM":"AM"}`};return g?(0,ft.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,ft.jsx)("div",{className:"text-lg text-gray-600",children:"Loading business details..."})}):v&&!s?(0,ft.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,ft.jsx)("div",{className:"text-lg text-red-600",children:v})}):(0,ft.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ft.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,ft.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[(0,ft.jsx)("button",{onClick:()=>i(-1),className:"text-blue-600 hover:text-blue-800 mb-4 flex items-center text-sm sm:text-base",children:"\u2190 Back to search"}),s&&(0,ft.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,ft.jsxs)("div",{className:"flex-1",children:[(0,ft.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:s.name}),(0,ft.jsxs)("p",{className:"text-gray-600 mt-1 flex items-center text-sm sm:text-base",children:[(0,ft.jsx)("span",{className:"mr-2",children:"\ud83d\udccd"}),s.location]}),(0,ft.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 mt-3",children:[(0,ft.jsx)("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-800 text-xs sm:text-sm font-medium rounded-full",children:null===(e=s.type)||void 0===e?void 0:e.replace("_"," ")}),(0,ft.jsxs)("div",{className:"flex items-center",children:[(0,ft.jsx)("span",{className:"text-yellow-400 mr-1",children:"\u2605"}),(0,ft.jsx)("span",{className:"text-xs sm:text-sm text-gray-600",children:"4.2 (23 reviews)"})]})]})]}),(0,ft.jsxs)("div",{className:"text-left sm:text-right",children:[(0,ft.jsxs)("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:[S.toFixed(2)," TND"]}),"online"===p&&(0,ft.jsx)("div",{className:"text-sm text-green-500",children:"2% discount applied!"})]})]})]})}),(0,ft.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:(0,ft.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,ft.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,ft.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Book Your Appointment"}),v&&(0,ft.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:v}),(0,ft.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d)if("online"!==p||_){b(!0),w(null);try{const e={businessId:n,date:l,time:d,customerInfo:h,paymentMethod:p,amount:S};"online"===p&&(e.paymentDetails=j);const t=await gh.post("/api/bookings",e);alert(`Booking confirmed! ${"online"===p?"Payment processed successfully.":"Please pay at the venue."} Confirmation: ${t.data.confirmationCode}`),i("/?tab=bookings")}catch(r){var t,s;w((null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.error)||"Failed to create booking"),console.error("Booking error:",r)}finally{b(!1)}}else k(!0);else w("Please select a time slot")},className:"space-y-6",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Date"}),(0,ft.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-7 gap-1 sm:gap-2",children:(()=>{const e=[];for(let t=0;t<7;t++){const n=new Date;n.setDate(n.getDate()+t);const i=n.toISOString().split("T")[0],s=n.toLocaleDateString("en-US",{weekday:"short"}),r=n.getDate();e.push({dateString:i,dayName:s,dayNumber:r,isToday:0===t})}return e})().map(e=>(0,ft.jsxs)("button",{type:"button",onClick:()=>c(e.dateString),className:`p-2 sm:p-3 text-center rounded-lg border text-xs sm:text-sm ${l===e.dateString?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300"} ${e.isToday?"ring-2 ring-blue-200":""}`,children:[(0,ft.jsx)("div",{className:"font-medium",children:e.dayName}),(0,ft.jsx)("div",{className:"text-sm sm:text-lg font-bold",children:e.dayNumber}),e.isToday&&(0,ft.jsx)("div",{className:"text-xs",children:"Today"})]},e.dateString))})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Available Time Slots"}),0===a.length?(0,ft.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,ft.jsx)("p",{children:"No available slots for this date"}),(0,ft.jsx)("p",{className:"text-sm",children:"Please select a different date"})]}):(0,ft.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 sm:gap-3",children:a.map(e=>(0,ft.jsx)("button",{type:"button",onClick:()=>u(e.time),className:"p-2 sm:p-3 text-center rounded-lg border text-xs sm:text-sm "+(d===e.time?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300"),children:E(e.time)},e.time))})]}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,ft.jsx)("input",{type:"text",required:!0,value:h.name,onChange:e=>m({...h,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,ft.jsx)("input",{type:"tel",required:!0,value:h.phone,onChange:e=>m({...h,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,ft.jsx)("input",{type:"email",value:h.email,onChange:e=>m({...h,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Notes"}),(0,ft.jsx)("input",{type:"text",value:h.notes,onChange:e=>m({...h,notes:e.target.value}),placeholder:"Any special requests...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Method"}),(0,ft.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ft.jsxs)("label",{className:"cursor-pointer border-2 rounded-lg p-4 "+("cash"===p?"border-blue-500 bg-blue-50":"border-gray-300"),children:[(0,ft.jsx)("input",{type:"radio",name:"paymentMethod",value:"cash",checked:"cash"===p,onChange:e=>f(e.target.value),className:"sr-only"}),(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udcb0"}),(0,ft.jsx)("div",{className:"font-medium",children:"Pay at Venue"}),(0,ft.jsxs)("div",{className:"text-sm text-gray-600",children:[50..toFixed(2)," TND"]})]})]}),(0,ft.jsxs)("label",{className:"cursor-pointer border-2 rounded-lg p-4 "+("online"===p?"border-blue-500 bg-blue-50":"border-gray-300"),children:[(0,ft.jsx)("input",{type:"radio",name:"paymentMethod",value:"online",checked:"online"===p,onChange:e=>f(e.target.value),className:"sr-only"}),(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udcb3"}),(0,ft.jsx)("div",{className:"font-medium",children:"Pay Online"}),(0,ft.jsxs)("div",{className:"text-sm text-green-600",children:[S.toFixed(2)," TND",(0,ft.jsx)("span",{className:"block text-xs",children:"2% discount!"})]})]})]})]})]}),_&&"online"===p&&(0,ft.jsxs)("div",{className:"border-t pt-6",children:[(0,ft.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Details"}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Holder Name *"}),(0,ft.jsx)("input",{type:"text",required:!0,value:j.holderName,onChange:e=>T("holderName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number *"}),(0,ft.jsx)("input",{type:"text",required:!0,placeholder:"1234 5678 9012 3456",value:j.cardNumber,onChange:e=>T("cardNumber",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date *"}),(0,ft.jsx)("input",{type:"text",required:!0,placeholder:"MM/YY",value:j.expiryDate,onChange:e=>T("expiryDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,ft.jsxs)("div",{children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV *"}),(0,ft.jsx)("input",{type:"text",required:!0,placeholder:"123",value:j.cvv,onChange:e=>T("cvv",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,ft.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t",children:[(0,ft.jsxs)("div",{className:"text-lg font-semibold",children:["Total: ",(0,ft.jsxs)("span",{className:"text-2xl text-green-600",children:[S.toFixed(2)," TND"]})]}),(0,ft.jsx)("button",{type:"submit",disabled:y||!d,className:"px-8 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Processing...":"online"!==p||_?"Confirm Booking":"Continue to Payment"})]})]})]})})})]})},YN=e=>{let{isModal:n=!1,onClose:i=null}=e;const{currentPlan:s,upgradePlan:r,usageStats:a,plans:o}=Wy(),{theme:l}=hp(),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(null),m=e=>e.id===s.id?(0,ft.jsx)("span",{className:"absolute top-4 right-4 bg-green-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Current Plan"}):"pro"===e.id?(0,ft.jsx)("span",{className:"absolute top-4 right-4 bg-purple-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Most Popular"}):null,p=e=>{let{plan:t,isRecommended:n=!1}=e;return(0,ft.jsxs)("div",{className:`relative rounded-lg shadow-lg p-6 ${n?"border-2 border-purple-500 transform scale-105":"border border-gray-200 dark:border-gray-600"} bg-white dark:bg-gray-800 transition-all duration-200 hover:shadow-xl`,children:[m(t),(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:t.name}),(0,ft.jsxs)("div",{className:"mb-4",children:[(0,ft.jsxs)("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["$",t.price]}),t.price>0&&(0,ft.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"/month"})]}),(0,ft.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-lg p-3 mb-4",children:[(0,ft.jsxs)("p",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:["Commission: ",(100*t.features.commissionRate).toFixed(1),"%"]}),(0,ft.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"On online payments"})]}),(0,ft.jsx)("ul",{className:"text-left space-y-2 mb-6",children:t.benefits?t.benefits.map((e,t)=>(0,ft.jsxs)("li",{className:"flex items-start",children:[(0,ft.jsx)("svg",{className:"w-4 h-4 text-green-500 mt-1 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ft.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e})]},t)):(0,ft.jsxs)(ft.Fragment,{children:[(0,ft.jsxs)("li",{className:"flex items-start",children:[(0,ft.jsx)("svg",{className:"w-4 h-4 text-green-500 mt-1 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ft.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:-1===t.features.maxBookingsPerMonth?"Unlimited bookings":`${t.features.maxBookingsPerMonth} bookings/month`})]}),(0,ft.jsxs)("li",{className:"flex items-start",children:[(0,ft.jsx)("svg",{className:"w-4 h-4 text-green-500 mt-1 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ft.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:-1===t.features.maxBusinesses?"Unlimited businesses":`${t.features.maxBusinesses} business locations`})]}),t.features.smsNotifications&&(0,ft.jsxs)("li",{className:"flex items-start",children:[(0,ft.jsx)("svg",{className:"w-4 h-4 text-green-500 mt-1 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ft.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"SMS notifications"})]}),t.features.analytics&&(0,ft.jsxs)("li",{className:"flex items-start",children:[(0,ft.jsx)("svg",{className:"w-4 h-4 text-green-500 mt-1 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ft.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Analytics dashboard"})]}),t.features.premiumListing&&(0,ft.jsxs)("li",{className:"flex items-start",children:[(0,ft.jsx)("svg",{className:"w-4 h-4 text-green-500 mt-1 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ft.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,ft.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Premium listing"})]})]})}),(0,ft.jsx)("button",{onClick:()=>(async e=>{if(e!==s.id){d(!0),h(e);try{const t=await r(e);t.success?(alert(t.message),i&&i()):alert(t.message)}catch(t){alert("Failed to upgrade plan. Please try again.")}finally{d(!1),h(null)}}})(t.id),disabled:t.id===s.id||c&&u===t.id,className:"w-full py-2 px-4 rounded-md font-semibold transition-colors "+(t.id===s.id?"bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-gray-600 dark:text-gray-400":n?"bg-purple-600 text-white hover:bg-purple-700 dark:bg-purple-500 dark:hover:bg-purple-600":"bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600"),children:c&&u===t.id?"Processing...":t.id===s.id?"Current Plan":0===t.price?"Downgrade to Free":`Upgrade to ${t.name}`})]})]})},f=(0,ft.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,ft.jsxs)("div",{className:"text-center mb-8",children:[(0,ft.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Choose Your Plan"}),(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Grow your business with our flexible pricing plans. Lower commission rates and more features as you upgrade."})]}),(0,ft.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-lg p-6 mb-8",children:[(0,ft.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-200 mb-4",children:["Current Usage (",s.name," Plan)"]}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:a.bookingsThisMonth}),(0,ft.jsxs)("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:["Bookings this month",s.features.maxBookingsPerMonth>0&&` / ${s.features.maxBookingsPerMonth}`]})]}),(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsx)("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:a.businessCount}),(0,ft.jsxs)("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:["Business locations",s.features.maxBusinesses>0&&` / ${s.features.maxBusinesses}`]})]}),(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsxs)("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:["$",a.commissionEarned.toFixed(2)]}),(0,ft.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Commission earned"})]})]})]}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,ft.jsx)(p,{plan:o.FREE}),(0,ft.jsx)(p,{plan:o.BASIC}),(0,ft.jsx)(p,{plan:o.PRO,isRecommended:!0}),(0,ft.jsx)(p,{plan:o.ENTERPRISE})]}),(0,ft.jsxs)("div",{className:"mt-12",children:[(0,ft.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-8",children:"Feature Comparison"}),(0,ft.jsx)("div",{className:"overflow-x-auto",children:(0,ft.jsxs)("table",{className:"w-full bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,ft.jsx)("thead",{children:(0,ft.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[(0,ft.jsx)("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:"Feature"}),(0,ft.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Free"}),(0,ft.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Basic"}),(0,ft.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Pro"}),(0,ft.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Enterprise"})]})}),(0,ft.jsxs)("tbody",{children:[(0,ft.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[(0,ft.jsx)("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:"Monthly Bookings"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"10"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"100"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"500"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"Unlimited"})]}),(0,ft.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[(0,ft.jsx)("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:"Commission Rate"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"5%"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"3%"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"2.5%"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"2%"})]}),(0,ft.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[(0,ft.jsx)("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:"SMS Notifications"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u274c"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u2705"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u2705"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u2705"})]}),(0,ft.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[(0,ft.jsx)("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:"Analytics Dashboard"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u274c"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u2705"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u2705"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u2705"})]}),(0,ft.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[(0,ft.jsx)("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:"Premium Listing"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u274c"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u274c"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u2705"}),(0,ft.jsx)("td",{className:"p-4 text-center",children:"\u2705"})]})]})]})})]})]});return n?(0,ft.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ft.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-600",children:[(0,ft.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Upgrade Your Plan"}),(0,ft.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 text-2xl dark:text-gray-500 dark:hover:text-gray-300",children:"\xd7"})]}),(0,ft.jsx)("div",{className:"p-6",children:f})]})}):f},KN=()=>{const e=ne(),{theme:t}=hp();return(0,ft.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,ft.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,ft.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,ft.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-2 sm:space-y-0",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ft.jsx)("button",{onClick:()=>e("/"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors text-sm sm:text-base",children:"\u2190 Back to Dashboard"}),(0,ft.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Subscription Plans"})]}),(0,ft.jsx)("button",{onClick:()=>e("/business-dashboard"),className:"bg-blue-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base",children:"Business Dashboard"})]})})}),(0,ft.jsx)("div",{className:"py-6 sm:py-8 px-4 sm:px-6 lg:px-8",children:(0,ft.jsx)(YN,{})})]})},GN=()=>{const[e,n]=(0,t.useState)(null),[i,s]=(0,t.useState)(null),[r,a]=(0,t.useState)(!0),[o,l]=(0,t.useState)(null),c=(ne(),async()=>{a(!0);try{const t=await ip();n(t);try{const e=await gh.get("/api/business/user-business");e.data.business&&s(e.data.business)}catch(e){console.log("No business found for user"),s(null)}l(null)}catch(t){l("Failed to load profile data. Please try again."),console.error(t)}finally{a(!1)}});(0,t.useEffect)(()=>{c()},[]);return r?(0,ft.jsx)(Qc,{children:(0,ft.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,ft.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}):o?(0,ft.jsx)(Qc,{children:(0,ft.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen",children:[(0,ft.jsx)("div",{className:"bg-red-100 text-red-700 p-4 rounded-md mb-4",children:o}),(0,ft.jsx)("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):(0,ft.jsx)(Qc,{children:(0,ft.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8 max-w-4xl",children:[(0,ft.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-6 sm:mb-8 text-center text-gray-800 dark:text-white",children:"My Profile"}),e&&(0,ft.jsx)(op,{user:e,onProfileUpdate:()=>{c()},business:i})]})})},JN=()=>{const e=ne(),[n]=ut(),[i,s]=(0,t.useState)(null),[r,a]=(0,t.useState)(!1),{conversations:o,activeConversation:l,messages:c,loading:d,error:u,fetchConversations:h,fetchMessages:m,createConversation:p,sendMessage:f,markAsRead:g,deleteConversation:x,setActiveConversation:y}=zx();(0,t.useEffect)(()=>{(async()=>{try{const e=await gh.get("/auth/me");s(e.data)}catch(t){console.error("Error fetching user:",t),e("/login")}})()},[e]),(0,t.useEffect)(()=>{i&&h()},[i,h]),(0,t.useEffect)(()=>{const e=n.get("businessId");e&&i&&b(e)},[n,i]),(0,t.useEffect)(()=>{l&&(m(l.id),g(l.id),a(!0))},[null===l||void 0===l?void 0:l.id]);const b=async e=>{try{const t=await p(e);y(t),My.success("Conversation started!")}catch(t){My.error("Failed to start conversation")}},v=e=>{y(e),g(e.id)},w=async(e,t)=>{try{await f(e,t)}catch(n){throw My.error("Failed to send message"),n}},_=async e=>{try{await x(e),My.success("Conversation deleted")}catch(t){My.error("Failed to delete conversation")}};return i?(0,ft.jsx)(Qc,{children:(0,ft.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50 dark:bg-gray-900",children:[(0,ft.jsx)(gc.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:(0,ft.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,ft.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,ft.jsx)("svg",{className:"w-8 h-8 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ft.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Messages"]}),(0,ft.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Chat with businesses and customers"})]})}),(0,ft.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,ft.jsx)("div",{className:"max-w-7xl mx-auto h-full px-4 py-4",children:(0,ft.jsxs)(gc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg h-full overflow-hidden",children:[(0,ft.jsxs)("div",{className:"hidden md:grid md:grid-cols-3 h-full",children:[(0,ft.jsx)("div",{className:"col-span-1 border-r border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,ft.jsx)(Lp,{conversations:o,activeConversation:l,onSelectConversation:v,onDeleteConversation:_,loading:d})}),(0,ft.jsx)("div",{className:"col-span-2 overflow-hidden",children:(0,ft.jsx)(Vp,{conversation:l,messages:c,currentUserId:null===i||void 0===i?void 0:i.id,onSendMessage:w,loading:d})})]}),(0,ft.jsx)("div",{className:"md:hidden h-full",children:r?(0,ft.jsx)(Vp,{conversation:l,messages:c,currentUserId:null===i||void 0===i?void 0:i.id,onSendMessage:w,onClose:()=>{a(!1),y(null)},loading:d}):(0,ft.jsx)(Lp,{conversations:o,activeConversation:l,onSelectConversation:v,onDeleteConversation:_,loading:d})})]})})}),u&&(0,ft.jsx)(gc.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg",children:u})]})}):(0,ft.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,ft.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})},XN=()=>{const{currentPlan:e,usageStats:n}=Wy(),{theme:i}=hp(),s=ne(),[r,a]=(0,t.useState)({thisMonth:{totalRevenue:2450.75,commissionEarned:73.52,bookingsProcessed:28,averageBookingValue:87.53},lastMonth:{totalRevenue:1890.25,commissionEarned:56.71,bookingsProcessed:22,averageBookingValue:85.92},thisYear:{totalRevenue:18950,commissionEarned:568.5,bookingsProcessed:215,averageBookingValue:88.14},monthlyData:[{month:"Jan",revenue:1250,commission:37.5,bookings:15},{month:"Feb",revenue:1680.25,commission:50.41,bookings:19},{month:"Mar",revenue:2100.75,commission:63.02,bookings:24},{month:"Apr",revenue:1890.25,commission:56.71,bookings:22},{month:"May",revenue:2450.75,commission:73.52,bookings:28}],paymentMethods:[{method:"Credit Card",percentage:65,amount:1593.49},{method:"PayPal",percentage:25,amount:612.69},{method:"Bank Transfer",percentage:10,amount:245.07}]}),o=(e,t)=>0===t?0:((e-t)/t*100).toFixed(1),l=e=>{let{title:t,value:n,change:i,icon:s,prefix:r="",suffix:a="",isPositive:o=!0}=e;return(0,ft.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{children:[(0,ft.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:t}),(0,ft.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[r,n,a]}),i&&(0,ft.jsxs)("p",{className:`text-sm ${o?"text-green-600":"text-red-600"} flex items-center mt-1`,children:[(0,ft.jsx)("span",{className:"mr-1",children:o?"\u2197\ufe0f":"\u2198\ufe0f"}),Math.abs(i),"% from last month"]})]}),(0,ft.jsx)("div",{className:"text-3xl",children:s})]})})};return(0,ft.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,ft.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,ft.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ft.jsx)("button",{onClick:()=>s("/business-dashboard"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:"\u2190 Back to Dashboard"}),(0,ft.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Commission Analytics"})]}),(0,ft.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ft.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Current Plan: ",(0,ft.jsx)("span",{className:"font-semibold text-purple-600",children:e.name})]}),(0,ft.jsx)("button",{onClick:()=>s("/subscription"),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"Upgrade Plan"})]})]})})}),(0,ft.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,ft.jsx)(l,{title:"Total Revenue (This Month)",value:r.thisMonth.totalRevenue.toFixed(2),change:o(r.thisMonth.totalRevenue,r.lastMonth.totalRevenue),icon:"\ud83d\udcb0",prefix:"$"}),(0,ft.jsx)(l,{title:"Commission Earned",value:r.thisMonth.commissionEarned.toFixed(2),change:o(r.thisMonth.commissionEarned,r.lastMonth.commissionEarned),icon:"\ud83c\udfe6",prefix:"$"}),(0,ft.jsx)(l,{title:"Bookings Processed",value:r.thisMonth.bookingsProcessed,change:o(r.thisMonth.bookingsProcessed,r.lastMonth.bookingsProcessed),icon:"\ud83d\udcc5"}),(0,ft.jsx)(l,{title:"Average Booking Value",value:r.thisMonth.averageBookingValue.toFixed(2),change:o(r.thisMonth.averageBookingValue,r.lastMonth.averageBookingValue),icon:"\ud83d\udcca",prefix:"$"})]}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,ft.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Monthly Revenue & Commission"}),(0,ft.jsx)("div",{className:"space-y-4",children:r.monthlyData.map((e,t)=>(0,ft.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ft.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ft.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 w-8",children:e.month}),(0,ft.jsx)("div",{className:"flex-1",children:(0,ft.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ft.jsx)("div",{className:"bg-blue-100 dark:bg-blue-800 rounded-full px-3 py-1",children:(0,ft.jsxs)("span",{className:"text-xs text-blue-800 dark:text-blue-200",children:["$",e.revenue.toFixed(0)," revenue"]})}),(0,ft.jsx)("div",{className:"bg-green-100 dark:bg-green-800 rounded-full px-3 py-1",children:(0,ft.jsxs)("span",{className:"text-xs text-green-800 dark:text-green-200",children:["$",e.commission.toFixed(2)," commission"]})})]})})]}),(0,ft.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.bookings," bookings"]})]},e.month))})]}),(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,ft.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Payment Methods Distribution"}),(0,ft.jsx)("div",{className:"space-y-4",children:r.paymentMethods.map((e,t)=>(0,ft.jsxs)("div",{children:[(0,ft.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,ft.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.method}),(0,ft.jsxs)("div",{className:"text-right",children:[(0,ft.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["$",e.amount.toFixed(2)]}),(0,ft.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["(",e.percentage,"%)"]})]})]}),(0,ft.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,ft.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.percentage}%`}})})]},e.method))})]})]}),(0,ft.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8",children:[(0,ft.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Commission Rate Details"}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ft.jsxs)("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,ft.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[(100*e.features.commissionRate).toFixed(1),"%"]}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Rate"})]}),(0,ft.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:[(0,ft.jsxs)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["$",(r.thisMonth.totalRevenue*e.features.commissionRate).toFixed(2)]}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monthly Commission"})]}),(0,ft.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900 rounded-lg",children:[(0,ft.jsxs)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",(r.thisYear.totalRevenue*e.features.commissionRate).toFixed(2)]}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Yearly Projection"})]}),(0,ft.jsxs)("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900 rounded-lg",children:[(0,ft.jsxs)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["free"===e.id?"5.0":"basic"===e.id?"2.0":"pro"===e.id?"1.5":"1.0","%"]}),(0,ft.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"enterprise"===e.id?"Lowest Rate!":"Upgrade to save"})]})]})]}),(0,ft.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg shadow-lg p-6 text-white",children:[(0,ft.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"\ud83d\udcb0 Potential Savings Calculator"}),(0,ft.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsxs)("div",{className:"text-2xl font-bold",children:["$",(.05*r.thisMonth.totalRevenue-r.thisMonth.commissionEarned).toFixed(2)]}),(0,ft.jsx)("div",{className:"text-sm opacity-90",children:"Monthly savings vs Free plan"})]}),(0,ft.jsxs)("div",{className:"text-center",children:[(0,ft.jsxs)("div",{className:"text-2xl font-bold",children:["$",(.05*r.thisYear.totalRevenue-r.thisYear.totalRevenue*e.features.commissionRate).toFixed(2)]}),(0,ft.jsx)("div",{className:"text-sm opacity-90",children:"Yearly savings vs Free plan"})]}),(0,ft.jsx)("div",{className:"text-center",children:(0,ft.jsx)("button",{onClick:()=>s("/subscription"),className:"bg-white text-purple-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:"Upgrade Now"})})]})]})]})]})},QN=e=>{let{children:n}=e;const[i,s]=(0,t.useState)(!1),[r,a]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{console.log("ProtectedRoute: Running auth check...");(async()=>{try{console.log("ProtectedRoute: Making API call to /auth/me...");const e=await gh.get("/auth/me");console.log("ProtectedRoute: /auth/me successful, user data:",e.data),s(!0)}catch(t){var e;console.error("ProtectedRoute: /auth/me failed:",(null===(e=t.response)||void 0===e?void 0:e.data)||t),s(!1)}finally{console.log("ProtectedRoute: Auth check finished, isAuthenticated:",i),a(!1)}})()},[]),r?(console.log("ProtectedRoute: Loading state..."),(0,ft.jsx)("div",{children:"Loading..."})):i?(console.log("ProtectedRoute: Authenticated, rendering children."),n):(console.log("ProtectedRoute: Not authenticated, redirecting to /login..."),(0,ft.jsx)(ve,{to:"/login",replace:!0}))};const eS=function(){const[e,n]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[o,l]=(0,t.useState)("login"),[c,d]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)(null),f=async()=>{try{await np(),p(null),n(""),s(""),a(""),console.log("Logout successful")}catch(e){d(e.message),console.error("Logout error:",e)}},g=async()=>{try{const e=await ip();console.log("User profile:",e),alert(`Profile: ${e.full_name} (${e.email}) - Role: ${e.role}`)}catch(e){d(e.message),console.error("Get profile error:",e)}};return m?(0,ft.jsxs)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md",children:[(0,ft.jsx)("h2",{className:"text-2xl font-bold mb-4 text-green-600",children:"Welcome!"}),(0,ft.jsxs)("p",{className:"mb-4",children:["Email: ",m.email]}),(0,ft.jsxs)("div",{className:"space-y-2",children:[(0,ft.jsx)("button",{onClick:g,className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",children:"Get My Profile"}),(0,ft.jsx)("button",{onClick:f,className:"w-full bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600",children:"Logout"})]})]}):(0,ft.jsxs)(gc.div,{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md",initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",duration:.5,stiffness:300,damping:30},children:[(0,ft.jsx)(gc.h2,{className:"text-2xl font-bold mb-4 text-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},children:"login"===o?"Login":"Register"}),(0,ft.jsxs)(gc.form,{onSubmit:async t=>{t.preventDefault(),d(""),h(!0);try{let t;"login"===o?(t=await tp(e,i),p(t.user),console.log("Login successful:",t)):(t=await ep(e,i,r),console.log("Registration successful:",t),alert("Registration successful! Please check your email for verification."))}catch(n){d(n.message),console.error("Auth error:",n)}finally{h(!1)}},className:"space-y-4",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},children:["register"===o&&(0,ft.jsxs)(gc.div,{variants:{hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}},children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,ft.jsx)(gc.input,{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"Enter your full name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:"register"===o,whileFocus:{scale:1.02},transition:{duration:.2}})]}),(0,ft.jsxs)(gc.div,{variants:{hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}},children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,ft.jsx)(gc.input,{type:"email",value:e,onChange:e=>n(e.target.value),placeholder:"Enter your email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),(0,ft.jsxs)(gc.div,{variants:{hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}},children:[(0,ft.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,ft.jsx)(gc.input,{type:"password",value:i,onChange:e=>s(e.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),c&&(0,ft.jsx)(gc.div,{className:"text-red-500 text-sm bg-red-50 p-2 rounded",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:c}),(0,ft.jsx)(gc.button,{type:"submit",disabled:u,className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed",whileHover:{scale:1.02},whileTap:{scale:.98},variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}},children:u?"Loading...":"login"===o?"Login":"Register"}),(0,ft.jsx)(gc.button,{type:"button",onClick:()=>{l("login"===o?"register":"login"),d("")},className:"w-full text-blue-500 hover:text-blue-700 underline",whileHover:{scale:1.05},whileTap:{scale:.95},variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}}},children:"login"===o?"Need an account? Register":"Have an account? Login"})]})]})};function tS(){const e=Q();return(0,ft.jsx)(At,{mode:"wait",children:(0,ft.jsxs)(ke,{location:e,children:[(0,ft.jsx)(we,{path:"/test-auth",element:(0,ft.jsx)(eS,{})}),(0,ft.jsx)(we,{path:"/login",element:(0,ft.jsx)(xh,{})}),(0,ft.jsx)(we,{path:"/register",element:(0,ft.jsx)(yh,{})}),(0,ft.jsx)(we,{path:"/discover",element:(0,ft.jsx)(qN,{})}),(0,ft.jsx)(we,{path:"/booking/:businessId",element:(0,ft.jsx)(ZN,{})}),(0,ft.jsx)(we,{path:"/profile",element:(0,ft.jsx)(Fy,{})})," ",(0,ft.jsx)(we,{path:"/",element:(0,ft.jsx)(QN,{children:(0,ft.jsx)(Fy,{})})}),(0,ft.jsx)(we,{path:"/register-business",element:(0,ft.jsx)(QN,{children:(0,ft.jsx)(Uy,{})})}),(0,ft.jsx)(we,{path:"/business-dashboard",element:(0,ft.jsx)(QN,{children:(0,ft.jsx)(Yy,{})})}),(0,ft.jsx)(we,{path:"/my-business",element:(0,ft.jsx)(QN,{children:(0,ft.jsx)(WN,{})})}),(0,ft.jsx)(we,{path:"/profile",element:(0,ft.jsx)(QN,{children:(0,ft.jsx)(GN,{})})}),(0,ft.jsx)(we,{path:"/subscription",element:(0,ft.jsx)(QN,{children:(0,ft.jsx)(KN,{})})}),(0,ft.jsx)(we,{path:"/messages",element:(0,ft.jsx)(QN,{children:(0,ft.jsx)(JN,{})})}),(0,ft.jsx)(we,{path:"/commission-analytics",element:(0,ft.jsx)(QN,{children:(0,ft.jsx)(XN,{})})})]},e.pathname)})}const nS=function(){return(0,ft.jsx)(mp,{children:(0,ft.jsx)(Vy,{children:(0,ft.jsx)(st,{children:(0,ft.jsx)(tS,{})})})})},iS=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:i,getFCP:s,getLCP:r,getTTFB:a}=t;n(e),i(e),s(e),r(e),a(e)})};i.createRoot(document.getElementById("root")).render((0,ft.jsx)(t.StrictMode,{children:(0,ft.jsx)(nS,{})})),iS()})()})();
//# sourceMappingURL=main.1ab957f1.js.map